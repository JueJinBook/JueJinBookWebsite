"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["88693"],{551216:function(e,c,n){n.r(c),n.d(c,{default:()=>F});var s=n(552676),i=n(740453);let d=n.p+"static/image/a374be21357f31f83ddd82845fd00926.61b3a526.webp",a=n.p+"static/image/beaade68d778ebb59d8c9795e9123867.ecceeaef.webp",r=n.p+"static/image/1dc2021d6cc6c9dfcbc8902df2fa4565.afedcb88.webp",l=n.p+"static/image/e97c4e96cfff389ea88f85795acf0d05.a516139f.webp",p=n.p+"static/image/a2639689e008a53dbb28876695e9ffcf.fe229161.webp",t=n.p+"static/image/3457478037e2fe736214f867b172279e.c781e8b5.webp",x=n.p+"static/image/eb3333ada957390200e7f2c2a23a4b00.6c308f3c.webp",j=n.p+"static/image/6ff4a5247314ec2aa99a5810ed34738f.fee0da65.webp",h=n.p+"static/image/ebc7e18f103b39c7642f8130efa4b373.86dbc53b.webp",b=n.p+"static/image/b8f8ad89c1b6b4406e6caba139d252cd.d1a12ab5.webp",g=n.p+"static/image/d185da917808a57fd6a9393879ded1ea.73d18bab.webp",o=n.p+"static/image/86a22e7e4f0a2bb2ad61d0e0141ec6fa.c41167ec.webp",f=n.p+"static/image/69bc54ece7aa9c713b6a9afb672aeacf.dfe13505.webp",m=n.p+"static/image/a588631bebb2355eff55f3c426becd16.c229585b.webp",k=n.p+"static/image/9520177d5fbcaf4dd4840ca756c3d2d1.b6d749a4.webp",A=n.p+"static/image/4d68a9a8f07e7b84fc1666bf0b1f7bb0.f35a2c4e.webp",u=n.p+"static/image/2b687e89bd1f164436742e201ddaa086.51e6cd83.webp",w=n.p+"static/image/fd263f570a7aab72b6928f127a6d3c28.820cfc84.webp",P=n.p+"static/image/4382f23a0f11223238601e9315ab0052.c98b1d99.webp",N=n.p+"static/image/7a4715ad3439078fe0727f3e7720436a.da227dfa.webp",K=n.p+"static/image/4027ab0294c6175d76c7cb33bef316ec.322f68c4.webp",Q=n.p+"static/image/8890ee83095c08346ec78f334ec948e7.77913d43.webp",W=n.p+"static/image/2271a0a4346f91e34229a6653cebdbef.8dae0147.webp",y=n.p+"static/image/ea5d2171dbf303c91609255d1c8828e8.d634b3bc.webp",V=n.p+"static/image/6d30d61db121509efcb610738e5af45b.87852801.webp",X=n.p+"static/image/4f1bd0c8955dca87ec335fd53a836c4d.5c878b30.webp",v=n.p+"static/image/5f4ffb7b28f492e5585c97c3db50e15b.00f01a9f.webp",D=n.p+"static/image/072cd347adaf9376c002ad859b27ce43.246820e3.webp",H=n.p+"static/image/21c2c48a30706450ccad8749d950d6c3.9af5a10b.webp",Y=n.p+"static/image/8b7699170dff96eff8b7dfe0ce1514b7.99f06e80.webp",q=n.p+"static/image/7e1fbb36c29f7b217dcb77400d1ed765.4234395d.webp",L=n.p+"static/image/75851a0e862ad2966e5b4555b2d1ac5d.64f75308.webp",S=n.p+"static/image/73188f0ee41c82cb8b632c704844fb23.eb2d480b.webp",C=n.p+"static/image/36de4c13a0f2edd708fa4801a2370dc3.2798de5b.webp",U=n.p+"static/image/51e7b9f843f53291d48461ab1c61f71b.6220d3db.webp",B=n.p+"static/image/08046e21e34eb76788e237f59ac40189.45e140c4.webp",R=n.p+"static/image/8905960c5d3c9019b058b8aad8c5ae7a.a51e96c0.webp",G=n.p+"static/image/80c013d88a4f6e15cfa5fdebfd3ed352.b28f315d.webp";function O(e){let c=Object.assign({h1:"h1",a:"a",p:"p",img:"img",strong:"strong",pre:"pre",code:"code",ul:"ul",li:"li",h2:"h2"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.h1,{id:"39-通过-desktop-学-docker-也太简单了",children:["39. 通过 Desktop 学 Docker 也太简单了",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#39-通过-desktop-学-docker-也太简单了",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"后端系统会部署很多服务，包括我们自己开发的服务，还有 mysql、redis 等中间件的服务，部署它们需要一系列依赖的安装、环境变量的设置等等。"}),"\n",(0,s.jsx)(c.p,{children:"如果你要部署多台机器的话，同样的操作要重复多次，万一哪一步漏掉了，服务就跑不起来了。"}),"\n",(0,s.jsx)(c.p,{children:"就很麻烦。"}),"\n",(0,s.jsx)(c.p,{children:"而 Docker 就能完美解决这个问题："}),"\n",(0,s.jsx)(c.p,{children:"它把系统的所有文件封装成一个镜像，镜像跑起来作为容器，它可以在一台机器上跑多个容器，每个容器都有独立的操作系统环境，比如文件系统、网络端口等，在容器内跑各种服务。"}),"\n",(0,s.jsx)(c.p,{children:"这样整个环境都保存在这个镜像里，部署多个实例只要通过这个镜像跑多个容器就行。"}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:G,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"这也是为什么它的 logo 是这样的："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:R,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"Docker 提供了 Docker Hub 镜像仓库，可以把本地镜像 push 到仓库或者从仓库 pull 镜像到本地。"}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:B,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"我们 pull 个镜像下来试试看："}),"\n",(0,s.jsxs)(c.p,{children:["首先需要安装 Docker，直接从",(0,s.jsx)(c.a,{href:"https://docker.com",target:"_blank",rel:"noopener noreferrer",children:"官网"}),"下载 docker desktop 就行："]}),"\n",(0,s.jsx)(c.p,{children:"（windows 选择 widnows 的安装包。m1 要注意芯片类型，选择 apple chip 那个包）"}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:U,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"它内置了 docker 命令。"}),"\n",(0,s.jsx)(c.p,{children:"把它安装到系统之后，可以在命令行看下 docker 命令是否可用："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:C,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"如果不可用，那要设置下这个："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:S,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"点击 Settings > Advanced，里面有两种安装路径，如果是 /usr/local/bin，那 docker 命令就是直接可用的，因为这个路径在 PATH 变量里。"}),"\n",(0,s.jsx)(c.p,{children:"如果是第二种，那就需要手动把它加到 PATH 环境变量里。"}),"\n",(0,s.jsx)(c.p,{children:"然后我们来看看 docker desktop 的界面："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:L,alt:""})}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:q,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"images 是本地的所有镜像，containers 是镜像跑起来的容器。"}),"\n",(0,s.jsx)(c.p,{children:"docker desktop 可以可视化的管理它们，很方便。"}),"\n",(0,s.jsx)(c.p,{children:"我们 pull 一个镜像试试看。"}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:Y,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"搜索 nginx 镜像，点击 pull（搜索这步需要翻墙，不然搜不到）。"}),"\n",(0,s.jsx)(c.p,{children:"pull 下来之后，就可以在本地 images 看到了："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:H,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"如果搜不到，那直接在命令行用 docker search、docker pull 搜索和拉取镜像也可以："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:D,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"点击 run 会让你填一些参数："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:v,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"首先是名字，如果不填，docker desktop 会给你生成随机的容器名字。"}),"\n",(0,s.jsx)(c.p,{children:"就是这种："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:X,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"然后是端口，容器内跑的 nginx 服务是在 80 端口，你要把宿主机的某个端口映射到容器的 80 端口才可以访问。"}),"\n",(0,s.jsx)(c.p,{children:"接下来是数据卷 volume，这个是把宿主机某个目录挂到容器内。"}),"\n",(0,s.jsx)(c.p,{children:"因为容器是镜像跑起来的，下次再用这个镜像跑的还是同样的容器，那你在容器内保存的数据就会消失。"}),"\n",(0,s.jsx)(c.p,{children:"所以我们都是把某个宿主机目录，挂载到容器内的某个保存数据的目录，这样数据是保存在宿主机的，下次再用镜像跑一个新容器，只要把这个目录挂载上去就行。"}),"\n",(0,s.jsx)(c.p,{children:"至于环境变量，这个就很容易理解了。"}),"\n",(0,s.jsx)(c.p,{children:"我们分别设置一下："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:V,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"挂载本地的 /tmp/aaa 到容器内的 /usr/share/nginx/html 目录。"}),"\n",(0,s.jsx)(c.p,{children:"这里的 /tmp/aaa 可以换成宿主机的任何目录，如果是 windows 系统，那就是类似 D://tmp/aaa 这种。"}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)(c.strong,{children:"（注意，这里是 /usr 而不是 /user）"})}),"\n",(0,s.jsx)(c.p,{children:"点击 run："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:y,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"可以看到容器内的 nginx 服务跑起来了。"}),"\n",(0,s.jsx)(c.p,{children:"我们在 /tmp/aaa 目录下添加一个 index.html:"}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:W,alt:""})}),"\n",(0,s.jsxs)(c.p,{children:["浏览器访问 ",(0,s.jsx)(c.a,{href:"http://localhost",target:"_blank",rel:"noopener noreferrer",children:"http://localhost"})," 就可以访问到："]}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(c.p,{children:"这就说明数据卷挂载成功了。"}),"\n",(0,s.jsx)(c.p,{children:"点击 files 标签就可以看到容器内的文件。"}),"\n",(0,s.jsx)(c.p,{children:"可以看到 /usr/share/nginx/html 被标识为 mounted，就是挂载目录的意思："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:Q,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"我们再在本地添加一个文件："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:K,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"你会发现容器内这个目录内容也变了："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:N,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"这就是 volume 挂载的作用。"}),"\n",(0,s.jsx)(c.p,{children:"如果你挂载某些目录报错，是因为 docker desktop 挂载的目录是需要配置的，在 Settings > Resources > File Sharing 里加一下就行："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:P,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"至于挂载到的目录，在镜像搜索结果页有写："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:w,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"通过命令行  docker run 来跑镜像， -v 是指定挂载的数据卷，后面的 :ro 代表 readonly，也就是容器内这个目录只读，:rw 表示容器内可以读写这个目录。"}),"\n",(0,s.jsx)(c.p,{children:"这就是数据卷的作用。"}),"\n",(0,s.jsx)(c.p,{children:"此外，你还可以进入到容器内执行各种命令："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:u,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"是不是感觉 docker 学起来还挺简单的？"}),"\n",(0,s.jsx)(c.p,{children:"docker 常用的就是这些东西。"}),"\n",(0,s.jsx)(c.p,{children:"当然，在服务器上没有 Docker Desktop 这种东西，还是要敲命令的。"}),"\n",(0,s.jsx)(c.p,{children:"比如我们点击 pull 按钮，就相当于执行了 docker pull："}),"\n",(0,s.jsx)(c.pre,{children:(0,s.jsx)(c.code,{children:"docker pull nginx:latest\n"})}),"\n",(0,s.jsx)(c.p,{children:"latest 是标签，也就是这个："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:A,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"然后我们点击 run 按钮，填了个表单，就相当于执行了 docker run："}),"\n",(0,s.jsx)(c.pre,{children:(0,s.jsx)(c.code,{children:"docker run --name nginx-test2 -p 80:80 -v /tmp/aaa:/usr/share/nginx/html -e KEY1=VALUE1 -d nginx:latest \n"})}),"\n",(0,s.jsx)(c.p,{children:"-p 是端口映射"}),"\n",(0,s.jsx)(c.p,{children:"-v 是指定数据卷挂载目录"}),"\n",(0,s.jsx)(c.p,{children:"-e 是指定环境变量"}),"\n",(0,s.jsx)(c.p,{children:"-d 是后台运行"}),"\n",(0,s.jsx)(c.p,{children:"对照下前面可视化界面，是不是瞬间就懂了："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:k,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"docker run 会返回一个容器的 hash："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:m,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"就是这里的 id："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:f,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"这个界面可以用 docker ps 来获取："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:o,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"它是显示容器列表的，默认是运行中的。"}),"\n",(0,s.jsx)(c.p,{children:"想显示全部的，可以加个 -a"}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:g,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"除了 container 列表，image 镜像列表也可以通过 docker images 命令获取："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:b,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"我们在容器的 terminal 里执行命令，对应的是  docker exec 命令："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:h,alt:""})}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:j,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"-i 是 terminal 交互的方式运行"}),"\n",(0,s.jsx)(c.p,{children:"-t 是 tty 终端类型"}),"\n",(0,s.jsx)(c.p,{children:"然后指定容器 id 和 shell 类型，就可以交互的方式在容器内执行命令了。"}),"\n",(0,s.jsx)(c.p,{children:"查看日志，对应 docker logs 命令："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:x,alt:""})}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:t,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"输入 exit 退出："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:p,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"docker inspect 可以查看容器的详情"}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:l,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"对应 desktop 里的 inspect 的 tab："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:r,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"docker volume 可以管理数据卷："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:a,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"对应 desktop 的这部分："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:d,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"此外，还有这些常用命令："}),"\n",(0,s.jsxs)(c.ul,{children:["\n",(0,s.jsx)(c.li,{children:"docker start：启动一个已经停止的容器"}),"\n",(0,s.jsx)(c.li,{children:"docker rm：删除一个容器"}),"\n",(0,s.jsx)(c.li,{children:"docker stop：停止一个容器"}),"\n"]}),"\n",(0,s.jsx)(c.p,{children:"都可以通过 docker desktop 很方便的操作"}),"\n",(0,s.jsxs)(c.h2,{id:"总结",children:["总结",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"Docker 可以把环境封装成镜像，镜像跑起来是一个独立的容器。通过这种方式可以快速部署多个相同的实例。"}),"\n",(0,s.jsx)(c.p,{children:"docker 提供了一个 desktop 工具，可以可视化的操作 docker，包括容器、镜像、volume 等"}),"\n",(0,s.jsx)(c.p,{children:"我们 pull 了一个 nginx 镜像下来，指定端口映射、挂载的数据卷，并把它跑起来了。"}),"\n",(0,s.jsx)(c.p,{children:"这就是 docker 的基本用法。"}),"\n",(0,s.jsx)(c.p,{children:"当然，这些可视化的操作都有对应的命令，当服务器上没有桌面的时候，就需要用命令行操作了。"}),"\n",(0,s.jsx)(c.p,{children:"不得不说，用 desktop 来学 docker 真是太简单了。"})]})}function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:c}=Object.assign({},(0,i.ah)(),e.components);return c?(0,s.jsx)(c,{...e,children:(0,s.jsx)(O,{...e})}):O(e)}let F=T;T.__RSPRESS_PAGE_META={},T.__RSPRESS_PAGE_META["Nest%20%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%20%20%E6%9C%80%E6%96%B0200%E7%AB%A0%2F39.%20%E9%80%9A%E8%BF%87%20Desktop%20%E5%AD%A6%20Docker%20%E4%B9%9F%E5%A4%AA%E7%AE%80%E5%8D%95%E4%BA%86.md"]={toc:[{text:"总结",id:"总结",depth:2}],title:"39. 通过 Desktop 学 Docker 也太简单了",headingTitle:"39. 通过 Desktop 学 Docker 也太简单了",frontmatter:{}}}}]);