"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["72470"],{34101:function(e,n,s){s.r(n),s.d(n,{default:()=>o});var c=s(552676),d=s(740453);let i=s.p+"static/image/3b137250558a44f812ffc14f4b79b933.ed99ce8e.webp",l=s.p+"static/image/f7649394ffb791272f2abf6babdfa9be.8f28a317.webp",a=s.p+"static/image/51153425ad44ecd554b581f2ecdf966d.385ea046.webp",r=s.p+"static/image/553f44e10fe1398c6e25add368e7cd46.e910b58e.webp",h=s.p+"static/image/e8daaae00b69dced423d1c25196e7375.f4175df7.webp",p=s.p+"static/image/5cb00099fc447a30374db67640d539de.ce020192.webp",j=s.p+"static/image/01bc238d304f942a1a5ff74cc54d6e9b.4a069a38.webp";function t(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",blockquote:"blockquote",img:"img",strong:"strong",pre:"pre",code:"code",h3:"h3",ul:"ul",li:"li"},(0,d.ah)(),e.components);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.h1,{id:"28彩蛋篇-webpack基础介绍与两大利器",children:["28.彩蛋篇-Webpack基础介绍与两大利器",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#28彩蛋篇-webpack基础介绍与两大利器",children:"#"})]}),"\n",(0,c.jsxs)(n.h2,{id:"webpack-概念",children:["Webpack 概念",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#webpack-概念",children:"#"})]}),"\n",(0,c.jsx)(n.p,{children:"本小节主要介绍 Webpack 相关知识，聊聊 Webpack 的由来以为我们为什么要使用 Webpack，通过两大利器：Loader 与 Plugins 进行讲解，整篇内容相对较长，请耐住性子阅读。"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"如果对 Webpack 熟悉的同学，本章可以快速阅读或跳过，如果对 Webpack 不熟悉的同学，希望本章节可以帮你快速熟悉 Webpack 开发"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"要想快速知道 Webpack 是什么，最好的方式就是通过官网去了解它。通过官方介绍，我们可以知道：webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:j,alt:"image.png"})}),"\n",(0,c.jsxs)(n.p,{children:["在最初，Webpack 并不被人熟知，它刚出现时，主打的优势是 ",(0,c.jsx)(n.a,{href:"https://webpack.docschina.org/guides/code-splitting/",target:"_blank",rel:"noopener noreferrer",children:"Code Splitting"}),"，我们现在从官网也能看到对它的定义："]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"Code Splitting : 代码分离指将代码分成不同的包/块，然后可以按需加载，而不是加载包含所有内容的单个包。"}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["什么时候 Webpack 才受人关注？2014 年，Instagram 的前端团队在一次大会上",(0,c.jsx)(n.strong,{children:"分享其内部前端页面加载性能优化，提到最重要的一点就是用到了 Webpack 的 Code Splitting"}),"。"]}),"\n",(0,c.jsx)(n.p,{children:"这简直就是为 Webpack 好友助力了一波，之后形成了一个热潮。Webpack 的风口来了，很多公司纷纷使用 Webpack，并贡献了无数的 Plugin、Loader，你一刀，我一刀，明天 Webpack 就出道，果不其然，短短时间内，Webpack 被推上了高潮。"}),"\n",(0,c.jsx)(n.p,{children:"大家都用，我需要用吗？如果说你的应用程序非常小，没有什么静态资源，只需要一个 JS 文件就可以满足需求，这时使用 Webpack 并不是一个好的选择。至于你用与不用，得靠你自身评估～"}),"\n",(0,c.jsxs)(n.h2,{id:"两大利器",children:["两大利器",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#两大利器",children:"#"})]}),"\n",(0,c.jsx)(n.p,{children:"得益于 Webpack 扩展性强，插件机制完善，官方提供了许多的 Loader、Plugin，接下来通过问题，配合简单明了的 demo，给大家讲解这两大利器，在此之前，我们先全局安装一下 Webpack。"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"npm install webpack@4.44.1 --save --dev\nnpm install webpack-cli@3.3.12 --save --dev\n"})}),"\n",(0,c.jsxs)(n.h3,{id:"loader-模块打包方案",children:["Loader 模块打包方案",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#loader-模块打包方案",children:"#"})]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.a,{href:"/(https://www.webpackjs.com/loaders/)",children:"官方"}),"对 Loader 的介绍是：Webpack 可以使用 Loader 来预处理文件。这允许你打包除 JS 之外的任何静态资源。"]}),"\n",(0,c.jsxs)(n.p,{children:["在我看来，",(0,c.jsx)(n.code,{children:"Loader 就是一种模块打包方案"}),"，怎么理解？给大家科普一个知识点：",(0,c.jsx)(n.strong,{children:"Webpack 默认是知道如何打包 js 类型文件，但对于其他类型文件，它是不知道如何处理"}),"，我们得告诉它，对这种类型文件，打包的方案是什么。接下来，我们通过例子，帮助小伙伴们理解为什么我说它是一种方案。"]}),"\n",(0,c.jsxs)(n.p,{children:["我们新建一个 ",(0,c.jsx)(n.code,{children:"demo"})," 文件夹，创建一个 ",(0,c.jsx)(n.code,{children:"index.js"})," 文件，文件结构是这样的"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"├── demo\n│ └── index.js\n└──...\n"})}),"\n",(0,c.jsxs)(n.p,{children:["此时我们在 ",(0,c.jsx)(n.code,{children:"index.js"})," 中写下这行代码"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"// index.js\nconst myName = '我叫彭道宽';\nconsole.log(myName);\n"})}),"\n",(0,c.jsxs)(n.p,{children:["执行一下 ",(0,c.jsx)(n.code,{children:"npx webpack index.js"}),"，意思就是对我们的 index.js 文件打包。"]}),"\n",(0,c.jsx)(n.p,{children:"我们在终端可以看到，在不配置任何东西情况下，Webpack 也能够打包 JS 类型文件，这说明 Webpack 默认对 JS 文件是有一套打包方案的"}),"\n",(0,c.jsx)(n.p,{children:"接下来，我们将代码改成这样，引入我们的图片"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"// index.js\nimport myPdkAvatar from './avatar.jpg';\n\nconst myName = '我叫彭道宽';\nconsole.log(myName);\n"})}),"\n",(0,c.jsxs)(n.p,{children:["同上，执行 ",(0,c.jsx)(n.code,{children:"npx webpack index.js"}),"，此时会报错。对 jpg 类型的文件打包失败了"]}),"\n",(0,c.jsx)(n.p,{children:"Webpack 很友好，它会告诉你，你需要一个 loader 去处理此文件类型。"}),"\n",(0,c.jsxs)(n.p,{children:["官方提供了一种专门处理此类型的方案：",(0,c.jsx)(n.a,{href:"https://www.webpackjs.com/loaders/file-loader/",target:"_blank",rel:"noopener noreferrer",children:"file-loader"}),"，我们安装一下这个 loader"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev file-loader\n"})}),"\n",(0,c.jsxs)(n.p,{children:["接着新增一个文件 ",(0,c.jsx)(n.code,{children:"webpack.config.js"}),"，此时的文件结构是这样的"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"├── demo\n│ ├── index.js\n│ └── webpack.config.js\n└──...\n"})}),"\n",(0,c.jsxs)(n.p,{children:["我们在配置文件中，",(0,c.jsx)(n.strong,{children:"添加一下对于 jpg 这种类型文件的处理方案"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"// webpack.config.js\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.jpg$/,\n        use: [\n          {\n            loader: 'file-loader',\n            options: {\n              name: '[name]_[hash].[ext]',\n              outputPath: 'images/',\n            },\n          },\n        ],\n      },\n    ],\n  },\n};\n"})}),"\n",(0,c.jsxs)(n.p,{children:["解读一下这段代码，意思就是：当遇到模块(module)时，进行规则(rules)匹配，如果匹配到 ",(0,c.jsx)(n.code,{children:"/\\.jpg$/"})," 类型的文件，就采用 ",(0,c.jsx)(n.code,{children:"file-loader"})," 方案进行打包，并且配置了参数：",(0,c.jsx)(n.code,{children:"name"}),"与",(0,c.jsx)(n.code,{children:"outputPath"}),"，意味着打包后的文件名是按照 ",(0,c.jsx)(n.code,{children:"[文件名]_[哈希值].[源类型]"})," 规则命名，并且输出在 ",(0,c.jsx)(n.code,{children:"images/"})," 目录下"]}),"\n",(0,c.jsxs)(n.p,{children:["理解了这段代码含义之后，我们再来打包，看看结果如何，执行 ",(0,c.jsx)(n.code,{children:"npx webpack index.js"})]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:p,alt:"image.png"})}),"\n",(0,c.jsxs)(n.p,{children:["打包正常！我们再看看打包之后的 dist 文件下，是不是真的有个 ",(0,c.jsx)(n.code,{children:"images/"})," 目录存放着打包后的图片?"]}),"\n",(0,c.jsxs)(n.p,{children:["如我们所想，现在回过头细品，",(0,c.jsx)(n.strong,{children:"Loader 就是一种模块打包方案"}),"是不是也有点道理？下面写几行代码，大家细品细品"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"module.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: ['style-loader', 'css-loader', 'postcss-loader'],\n      },\n      {\n        test: /\\.less$/,\n        use: {\n          loader: 'less-loader',\n        },\n      },\n      {\n        test: /\\.vue$/,\n        use: {\n          loader: 'vue-loader',\n        },\n      },\n    ],\n  },\n};\n"})}),"\n",(0,c.jsxs)(n.h3,{id:"plugins-打包更加便捷",children:["Plugins 打包更加便捷",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#plugins-打包更加便捷",children:"#"})]}),"\n",(0,c.jsx)(n.p,{children:"继续以上边的 Loader demo 为例子，回顾一下我们现在 demo 的文件目录结构"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"├── demo\n│ ├── index.js\n│ └── webpack.config.js\n└──\n"})}),"\n",(0,c.jsxs)(n.p,{children:["我们先来执行一下 ",(0,c.jsx)(n.code,{children:"npx webpack index.js"}),"，来看看 dist 目录下有哪些文件"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:"data:image/webp;base64,UklGRhgLAABXRUJQVlA4IAwLAACwXQCdASp2BKIAPp1Mok2lo6MiING4kLATiWlu4XdhGCICaXsiP8X/3vt+/1Xhf5u/csjylfxi7z+AF693hcAXWJanyo6ap5JNRAHOAc1cvT8Tg0CYYSGcfJDOPkhnHyQzj5IZx8kM4+SGcfJDOPkhnHxBNPYibX0ncQiWge3gFu8iDaV4IqN7YQCGwTdz/jE4EDa5NoAUp+7jiPdxxHu44j3ccR7uOI93HEe7jiPdxxHu44jjJmXfhy3MT01yNI6K59gEe7cE7b44j3ccR7uOI93HEe7jiPdxxHu44j3ccR7uOI93NeY5vMy2vWchlpMPRTlGXw56rcElFd2IWkw9FOUZfDnqtwSUV3YhaTD0U5Rl8Oeq3BJRXdiFpMPFwS2vnxMd0fEzkoZL4h7jy03H6tpqN9NC7uWXNUNErFfiboe+69+UONupCkkP+fJDOPkhnHyQzj5IZx8kM4+SGcfJHjbSX7UCnR7AJvuS3EayI2YbjLQkzN7lXMsSI1Ur0T+ne7J1ZCq0b6nkBK7/JDOPkhnHyQzj5IZx8kM4+SGcfJDOPkhnHySU4vUOtOGK+OI93HEe7jiPdxxHu44j3ccR7uOI93HEe7jiR+WNHZc9UKWy3QlYATTi2FcJO7R5vpLFHMVRUjoRMotY4j3ccR7uOI93HEe7jiPdxxHu44j3ccR7uOI4Z+bbQQHuxpROxowwezPeXmQWitwxpyqNLHeTPBUnYGcthR2QNcUKe+8YNwXcq8hxGdeu6McGbUZdtR7uOI93HEe7jiPdxxHu44j3bnKa3ROM6HDcJ5JgGMq63uOf8OIHPfTMRnkFODoek4RVahnK74XTPAmkbQIaFxEf8h1xCaBaNdy9cfFa/6ymYod8YTB1IUkh/z5IZx8kM4+SGcfJDOPkhnFA08JkDYy6oZsVMCltZtxkIYID1iBDlcJWLLxBN0c0J1hD4CCRk2CNUIVn/PkhnHyQzj5IZx8kM4+SGcfJDOPkhnHyQzj9ILdhSF00gAD+/8UWsOf0wMUXwSkHHJPsWWvBuZtKF5leh2eOsuLF3fQ9drux+TomH+DXbwK+DT7dIb2sQsJLgQAudBHRfBITGT2c9/zgT4zVNBCcP1g1a6eKfR+X8h15gLMHEsf47d9vf7d5lMm75Abbn+3NPJ2vB/QxcpvwOxgWEtdXeGi36R1Su+rJGSzXqAtYJAjyIzLowRy8i3o9lYTwuSmWtoVZQXS7FGCY2Y8/fCvOWe1mupfpto9EKo18p8bysHsZtSNTHA3dUGsQiDNG/D9vGLkMbZWsETOZsyBrki3HUAKI0g1TwOAE+rEKva3oKodS+svlbTycQ2jn6AK7vZw+W/bJuQ6BzWZjsvMZAXQiUq1NHwMtT93YYGXv5F2Q0OgcOGKQL7+0NMspJENcbRdmk/4+yQHX51PoUnWLZGah8rEcGz00jipLXah4PppovnRDTlzOfCJ+OvGAgAGoYKqCdZXKBVkKscBgUSz/T5l44QHLgaeJJne9jOkONnbaP/G+7jvOgMn6eU8l0wdMI7uhnW1ws1xg5qL5ZiMZCvsTXxXY0GCxe9grDIkgu/N1Ql3DANiAAApf8m3I7UuDqE4sK8Ax6+y0sxonMIgQAAaJBVgsIKxDkB8HWdaV6El6zMAAer24k3Of9AaKuo1c/5oDRLDvHaDPS3G5Nr3IGDWRy88wFWgrHw0ATIB/JDdGpFdiWVJrE2KoFsejFAA7qzE4T3TfjrbQagzOniQm7LtdedCpVwan2PWEauzgXbfETOCH577IEJVfMAv2xcfYAe3ICQwfTt/3pkwALAoYtZGuI5kZMdyo5RkrRHQPxf+WWvKKitVwtJP8m0kjCmje994w1BpKPrK2krKhcft0Xa+OoGfrVw5cITDn0Or2k7BD/pvP0o1WE8StZZl9KWpvteT6Wt2w0p5eiVdMem0/2Pip2/VkURTIXgZXzF/oh5+fduNvp/GZsA6g/KPTFOw81tmJBQAQP1pA0WjV95Gyn/nondQIeM4iSQEaxHzitcxihTGwL8qFmbbm/pVc9667NtRtaaVsl2vTFeavAOVgYsNRIl41QN/I0ICDMny/AyNWWxywofJ3KmKH5ePFiJrmOL2zEb2j/IqBB5nqCnqzJmtMWmCpYE69Wq6rdq28GWeN1tINjWtF44yU8AeeBYOIzK4xh+XnLJcnvm6Oq+GG/iULD2AVAEAAAAAB+jOMPEI2wjWs8dp1/8h3fSbm9P1iupvuCN4pb9mKX6ji6ASPzX4Sj2/R//1r+fMu+aBj625DBryMbDBLYhdfIOOgKFKJ4X7wta6XZGL5GQuK4l+PkjcCGTtxbMtSWDjawc7HsStdrMBfAQGbiIbX08GOa677/zRxBt6lXo5CpIol6MKWfjUFIuOGYo+4qNBqwabn9/gb/M5dnKqTc3wNDPquHvJhn3kEQDlzUMRtGymsAEV8ghF1mW5fbnXtZlH4y09Qh2icKAZYGUMURXi9FzfTjRIgNgYKndgVvqwPSZkS52CINYMTTPpO13I7ENfeRI+iinuJegbWUf77ISvU3UXtUG83lXQIIgfmuvv+phGXLpUhnu3drPJ2AxGPNBb/ZD/4QE0sj4oDjxrZtUBB47PF2bidjPkxMxUBJ7haUp5nusF22CXiqQmvqGcfGhVcUdkI0OsCDcRLAPUq5yMqnsZeShIV2Nf7AX0u3FQIJn9WriWa42Uo2fA5583ksQDdrStGLacxaE3wUmOOJQHjjPPh/q7A7norU0FRfPQlsnD10BvyXcWm9rAUh+8qAasqeD3+7YodxAsq8qYD+lXKFlZJUwxLNxbUhco+7ZO6Rq5h68rFq+mY4ly1p8kE7XcYzXZKsooFAEKQ4s8+kaA6P5b2gANMX96Y7Xirx0AXrJtCcFVJ+h6hEuuiNz6H4hEkb3tM6XsU2JTby3vnGIrdmq5g3piVHN47cCPev0hvgmMsQXSgjdGCmyWHyR7y1xw3dr+q7IVhpOgur8DlQRQjF1c2AWqv3sefITBABzCAuazxBQgMmUbvN8iGiLN8OSEb5ovQkUBr0KCc6poQ7d960WfA0aXc1T3Eu2UaKgNp3rGEwUYcyu0eJusME755yJGOyqMrOJ4jBDFmUFXXWFhYzTncmWkqdmHNf/p7VBnTqEx73eWQgesveBiFvgbkFbBWZPo3KhPUVbRdj8tala4r7QpzJXPlw6/nO3h/slYgge20rCperLbZ/XFffAdQdR39CVaK1D+nV4yzjdlM8qd06xfWDAN3DLdSrgZrp6lRW5v1psn49WRf1DtJ6Q2O7n3Q+IL2020MY/Zdp083/AdOzCiBgdFYLaDUwSVKFhQ5ZbK1OwI9Z/SQVh0Z4pdepuZUbSu2iFWiijsTfhOiE7BrogyUxt2j/vAxck5SSop3xNqXWT16LdUAaqvyC4Oj2WSPFE/XDzK6ikFnMizAYDrwemCKEmDUAAf+MWB6T4bw2AAP4R/MPhUlYsdzMXASBh2Ja4ZUc570sHLgd3f5ufH0wtuDMdgMkEcUfyTEp8zfYYsWcsclaZEoDlhb6S8PEyAeH5uIP0HpPUBsGdcjHAIddD1EX8wgEcxypj5sioyQNEWThzZUF4X2netAPuqJ6ReAXHAiRb2BMGSdTjrIwhwVJRmGGcGMxxwkNHqU6V79JqXScQnTRHAY8Pc6dX3caNkK/X+acQeFnaQMWC4rweAzPSNLpSzmROqu/4iymlNDEcnf7qlF99WBZstMea0tYk9OsHYbaAUbojfBwAAAAAAAAA==",alt:"image.png"})}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:["通过官网可知，在我们未配置 ",(0,c.jsx)(n.code,{children:"output"})," 属性时，它的默认值是 ./dist/main.js，其他生成文件默认放置在 ./dist 文件夹中。"]}),"\n"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"因为我们都用的默认配置，所以打包生成的文件夹名就叫 dist，bundle 默认名称就是 main.js"}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["接下来我们",(0,c.jsx)(n.strong,{children:"手动"}),"创建一个 HTML，加载打包后的 js 文件，如何加载呢？通过 script 加载打包后的 ",(0,c.jsx)(n.code,{children:"main.js"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <title>webpack plugins demo</title>\n  </head>\n  <body>\n    <div id="root"></div>\n\n    \x3c!-- 在这里加载打包好之后的 main.js 文件 --\x3e\n    <script src="./dist/main.js"><\/script>\n  </body>\n</html>\n'})}),"\n",(0,c.jsxs)(n.p,{children:["然后运行此页面，通过控制台，可以看到会打印出：",(0,c.jsx)(n.code,{children:"我叫彭道宽"})]}),"\n",(0,c.jsxs)(n.p,{children:["假设现在有一种场景，需要通过 hash 进行命名输出的 bundle。我们来修改一下 ",(0,c.jsx)(n.code,{children:"webpack.config.js"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"module.exports = {\n  // 1. webpack 执行构建的第一步将从 entry 开始，这里我们的入口文件为 index.js\n  entry: './index.js',\n\n  // 2. 经过一系列处理得到最终的代码，然后输出结果\n  output: {\n    // 这里将输出的结果代码文件自定义配置文件名\n    filename: '[彭道宽]_[hash].bundle.js',\n  },\n  // ...\n};\n"})}),"\n",(0,c.jsxs)(n.p,{children:["执行 ",(0,c.jsx)(n.code,{children:"npx webpack index.js"}),"，来看看打包之后的文件命名格式是否如我们预期"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:h,alt:"image.png"})}),"\n",(0,c.jsxs)(n.p,{children:["没毛病，这时候我们 HTML 加载该怎么办？",(0,c.jsx)(n.strong,{children:"手动修改成正确的文件地址"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-html",children:'<script src="./dist/[彭道宽]_657b45ee79dee39108f7.bundle.js"><\/script>\n'})}),"\n",(0,c.jsx)(n.p,{children:"如果我们将 index.js 文件中的内容修改（\uD83D\uDC47 下面添加一行代码）"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"// index.js\nimport myPdkAvatar from './avatar.jpg';\n\nconst myName = '我叫彭道宽';\nconsole.log(myName);\n\n// \uD83D\uDC47 添加一行新代码\nconsole.log('new add code ......');\n"})}),"\n",(0,c.jsx)(n.p,{children:"然后把 dist 目录删除，再打包一次，看看文件 hash 是否一致？"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:r,alt:"image.png"})}),"\n",(0,c.jsxs)(n.p,{children:["通过对比，我们发现，每次修改，重新打包生成的 bundle 文件名哈希值都不一样。",(0,c.jsx)(n.strong,{children:"等价于每次打包都需要手动修改 HTML 中的文件引用"}),"。"]}),"\n",(0,c.jsx)(n.p,{children:"太原始太麻烦了，低效率！为此，Webpack 提供了 Plugins 插件能力，让 Webpack 变得更加灵活。"}),"\n",(0,c.jsxs)(n.p,{children:["官方提供了很多 Plugins，让我们的打包更加便捷，上面的问题，我们可以通过 ",(0,c.jsx)(n.a,{href:"https://v4.webpack.docschina.org/plugins/html-webpack-plugin/",target:"_blank",rel:"noopener noreferrer",children:"HtmlWebpackPlugin"})," 插件进行简化 HTML 文件的创建，这对于在文件名中包含每次会随着编译而发生变化哈希的 webpack bundle 尤其有用！"]}),"\n",(0,c.jsx)(n.p,{children:"多说无益，上手试试，先根据文档，安装一下插件，看看它能实现怎样的效果"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev html-webpack-plugin\n"})}),"\n",(0,c.jsxs)(n.p,{children:["安装好之后，我们来修改 ",(0,c.jsx)(n.code,{children:"webpack.config.js"})," 内容，将这个插件引入"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"// \uD83D\uDC47 引入此插件\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\n\nmodule.exports = {\n  entry: './index.js',\n  output: {\n    filename: '[彭道宽]_[hash].bundle.js',\n  },\n  // \uD83D\uDC47 使用此插件\n  plugins: [new HtmlWebpackPlugin()],\n};\n"})}),"\n",(0,c.jsxs)(n.p,{children:["执行一下 ",(0,c.jsx)(n.code,{children:"npx webpack index.js"}),"，打包的出来的文件有哪些？"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:a,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:l,alt:"image.png"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"HtmlWebpackPlugin 会在打包结束后，自动帮我们生成一个 HTML 文件，同时把打包后的 bundle 自动引入"}),"。当我们内容修改，重新打包，生成的 HTML 也会随着每次编译导致哈希变化的 bundle 自动引入。"]}),"\n",(0,c.jsxs)(n.p,{children:["是不是很完美呢？不，我们采用火眼金睛瞧一瞧由 HtmlWebpackPlugin 生成的 HTML 文件，你会发现好像有些问题？是不是 ",(0,c.jsx)(n.code,{children:"body"})," 下少了一些 DOM 节点（比如 Vue、React 都会有一个 id 为 app 的 DOM 元素），怎么办？这是该插件默认生成的，有没有办法生成我想要的 DOM 结构呢？"]}),"\n",(0,c.jsxs)(n.p,{children:["HtmlWebpackPlugin 提供了一个配置参数 ",(0,c.jsx)(n.code,{children:"template"}),"，它允许你自定义 HTML 文件，以此文件为模版，生成一份一样的 HTML 并为你自动引入打包后的 bundle。"]}),"\n",(0,c.jsx)(n.p,{children:"我们来动手实现一下，首先定义一份“别具一格”的 HTML 模版。"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>我是 HtmlWebpackPlugin 的模版</title>\n    <style>\n      * {\n        margin: 0;\n      }\n    </style>\n  </head>\n  <body>\n    <div id="root">\n      <div id="pdk">PDK Demo</div>\n    </div>\n  </body>\n</html>\n'})}),"\n",(0,c.jsxs)(n.p,{children:["然后通过修改 ",(0,c.jsx)(n.code,{children:"webpack.config.js"})," 配置，采用此模版为基础"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"const HtmlWebpackPlugin = require('html-webpack-plugin');\n\nmodule.exports = {\n  entry: './index.js',\n  output: {\n    filename: '[彭道宽]_[hash].bundle.js',\n  },\n  plugins: [\n    // \uD83D\uDC47 以我们写的 html 为模版生成\n    new HtmlWebpackPlugin({\n      template: './index.html',\n    }),\n  ],\n};\n"})}),"\n",(0,c.jsx)(n.p,{children:"最后我们来瞧瞧，是否打包后自动生成的 HTML 文件结构跟我们的模版一致？"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:i,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:"事实证明，确实一模一样。"}),"\n",(0,c.jsx)(n.p,{children:"官方还有很多精巧有用的 Plugins 插件，几乎每个插件目的都是出于让你的打包构建更加便捷。小伙伴们要善于使用搜索引擎去寻找所需的插件工具（官方插件或第三方 Plugins 插件）及解决问题的方法。"}),"\n",(0,c.jsxs)(n.h2,{id:"总结",children:["总结",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Loader 就是一种模块打包方案，换言之，它是一名具备文件类型转换的翻译员"}),"\n",(0,c.jsx)(n.li,{children:"Plugins 用于扩展 Webpack 的功能，使得 webpack 变得极其灵活。"}),"\n",(0,c.jsx)(n.li,{children:"Plugins 可以在 Webpack 运行到某个时刻，帮你做一些事情。学过 Vue、React 的小伙伴应该对生命周期不陌生，其实 Plugins 很像生命周期函数，在 Webpack 运行到某个生命周期去做些事情。"}),"\n"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"如上述例子中，HtmlWebpackPlugin 就是在 Webpack 打包过程结束的生命周期时刻，去做了一些事情——自动生成 HTML 文件，引入打包后的 bundle。"}),"\n"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"在比如 clean-webpack-plugin 第三方的插件，它其实就是在 Webpack 打包之前的生命周期时刻，去做了一些事情——删除我们打包的目录"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"这两个 Plugins 相信你们的项目中都会用到，回去翻一翻项目的配置，结合文档，在细品细品。"}),"\n",(0,c.jsxs)(n.h2,{id:"建议",children:["建议",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#建议",children:"#"})]}),"\n",(0,c.jsx)(n.p,{children:"官方提供了很多 Loader、Plugins ，小伙伴们如果在遇到对于某种类型文件打包有问题时，直接百度找资料，看文档，95%的问题都能被解决。"}),"\n",(0,c.jsx)(n.p,{children:"再三思考下，还是没有讲解 Loader 的工作原理，以基础介绍为重点，生怕一上来就讲原理吓倒一批同学，如果有小伙伴对其原理感兴趣，阿宽可以再出一小彩蛋章节介绍。"})]})}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.ah)(),e.components);return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(t,{...e})}):t(e)}let o=x;x.__RSPRESS_PAGE_META={},x.__RSPRESS_PAGE_META["Electron%20%2B%20React%20%E4%BB%8E%200%20%E5%88%B0%201%20%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8E%86%E5%B9%B3%E5%8F%B0%E5%AE%9E%E6%88%98%2F28.%E5%BD%A9%E8%9B%8B%E7%AF%87-Webpack%E5%9F%BA%E7%A1%80%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%B8%A4%E5%A4%A7%E5%88%A9%E5%99%A8.md"]={toc:[{text:"Webpack 概念",id:"webpack-概念",depth:2},{text:"两大利器",id:"两大利器",depth:2},{text:"Loader 模块打包方案",id:"loader-模块打包方案",depth:3},{text:"Plugins 打包更加便捷",id:"plugins-打包更加便捷",depth:3},{text:"总结",id:"总结",depth:2},{text:"建议",id:"建议",depth:2}],title:"28.彩蛋篇-Webpack基础介绍与两大利器",headingTitle:"28.彩蛋篇-Webpack基础介绍与两大利器",frontmatter:{}}}}]);