"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["17437"],{591883:function(e,n,i){i.r(n),i.d(n,{default:()=>g});var r=i(552676),s=i(740453);let t=i.p+"static/image/29daa7b7bc165d8769b9667d5e6ed32c.b736ed07.webp",c=i.p+"static/image/925b884006aadf996df78a0cbf32a4d4.950ea500.webp",a=i.p+"static/image/b2ce61939818caf7603837eb74ef4fab.d010be01.webp",l=i.p+"static/image/2785241b75881aee484298f8f81b2944.3a5f94db.webp",h=i.p+"static/image/de0f27f850a994064619c1a97225c15e.2e104e84.webp",d=i.p+"static/image/03fc058168226597623ac6076bb7ff63.ff796ca8.webp",p=i.p+"static/image/3ee954056f6b97564caf85f6efc76570.11449589.webp",j=i.p+"static/image/6e8157694d010b8c0c9b84bfc66c429b.1c2ae5c1.webp",m=i.p+"static/image/87c546264dc6895d6c8950005fe3c0bb.abcd566e.webp";function x(e){let n=Object.assign({p:"p",a:"a",img:"img",ul:"ul",li:"li",pre:"pre",code:"code",h2:"h2",h3:"h3",strong:"strong"},(0,s.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"这个章节，让我没想到，被迫修改了题目。原来的题目是【编写 vue-cli 插件让用户找到你】。以前的组件库都会使用这样的方案，编写一个 vue-cli 插件，这样就可以使用 vue add 方便地加载组件库了。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/hug-sun/vue-cli-plugin-element3",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/hug-sun/vue-cli-plugin-element3"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:m,alt:"img"})}),"\n",(0,r.jsx)(n.p,{children:"这个技巧，大家如果想学习可以参考我以前的文章。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://juejin.cn/post/6899334776860180494",target:"_blank",rel:"noopener noreferrer",children:"Element3开发内幕 - Vue CLI插件开发 - 掘金"})}),"\n",(0,r.jsx)(n.p,{children:"随着时代的发展，脚手架也不断地变革。更多的脚手架会使用 npm init 或者 npm create 来创建项目。其实这两个命令没什么区别。"}),"\n",(0,r.jsx)(n.p,{children:"以我们常用到 vue-cli 工具。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:j,alt:"img"})}),"\n",(0,r.jsx)(n.p,{children:"目前 vue 的脚手架已经进行版本分化。首先原来的 vue-cli 工具进入了维护状态。目前只支持使用 Webpack 项目的创建。新的脚手架工具全部转为 create-vue，使用 vite 构建。"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["@vue/cli :  ",(0,r.jsx)(n.a,{href:"https://github.com/vuejs/vue-cli",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/vuejs/vue-cli"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create-vue：",(0,r.jsx)(n.a,{href:"https://github.com/vuejs/create-vue",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/vuejs/create-vue"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"哪种构建工具好，不是我们讨论的话题。主要我们来通过这个案例分析一下脚手架工具的流行趋势。"}),"\n",(0,r.jsx)(n.p,{children:"从 vue-cli 到 create-vue 脚手架工具命令行界面的变革。"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Bash",children:"# 20.融入开源生态： 编写 npm init 项目让用户更方便\nsudo npm i @vue/cli\nvue create my-app\n\n# 用 create-vue 创建项目\nnpm create vue my-app\n"})}),"\n",(0,r.jsx)(n.p,{children:"很显然你会发现后者更加的简单，只需要一条语句而且无需提前安装。这个体验真的是太棒了。"}),"\n",(0,r.jsxs)(n.h2,{id:"用户故事userstory",children:["用户故事(UserStory)",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#用户故事userstory",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"让组件库脚手架可以通过 npm create 使用， 让用户使用更方便。"}),"\n",(0,r.jsxs)(n.h2,{id:"任务分解task",children:["任务分解(Task)",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#任务分解task",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"支持 npm init 功能；"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"测试 npm init 功能。"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"支持-npm-init",children:["支持 npm init",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#支持-npm-init",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"其实这个功能实现起来比较简单，不需要修改代码。这个属于一种约定。大家了解一下就可以了。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://docs.npmjs.com/cli/v8/commands/npm-init",target:"_blank",rel:"noopener noreferrer",children:"https://docs.npmjs.com/cli/v8/commands/npm-init"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:p,alt:"img"})}),"\n",(0,r.jsx)(n.p,{children:"我们可以查阅 npm 的官方文档。里面对 npm init 功能有以下描述。"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"npm init <initializer>"})," 可以被用于安装一个新的或已经存在的 npm 软件包。"]}),"\n",(0,r.jsxs)(n.p,{children:["Initializer 是一个被命名为 create-"," 的软件包。它会通过 npm-exec 运行。"]}),"\n",(0,r.jsx)(n.p,{children:"以 smarty-ui 的 cli 为例，你只需要将软件包名称命名为  create-smarty-app，这样就可以通过。"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Bash",children:"npm init smarty-app\n\n# 也可以使用 执行的两者的功能是一致的。\nnpm create smarty-app\n"})}),"\n",(0,r.jsx)(n.p,{children:"我们的库正好是按照这样的命名规约命名，所以不需要修改。"}),"\n",(0,r.jsx)(n.p,{children:"下面测试一下。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:d,alt:"img"})}),"\n",(0,r.jsx)(n.p,{children:"果然这种方法是可以生效的。"}),"\n",(0,r.jsxs)(n.h3,{id:"参与-vite-生态",children:["参与 Vite 生态",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#参与-vite-生态",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["根据 ",(0,r.jsx)(n.a,{href:"https://vitejs.dev/guide/#scaffolding-your-first-vite-project",target:"_blank",rel:"noopener noreferrer",children:"Vite 官方文档 "}),"，Vite 的脚手架目前分为官方脚手架和第三方脚手架。"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:h,alt:"img"})}),"\n",(0,r.jsx)(n.p,{children:"第三方脚手架全部使用 degit 安装。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:l,alt:"img"})}),"\n",(0,r.jsx)(n.p,{children:"degit 是一个简洁版的脚手架工具。它的特点是可以只需要创建项目模版而无需自己编写脚手架 CLI。 只需要使用 degit 就可以克隆模版项目创建自己的项目了。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Rich-Harris/degit",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/Rich-Harris/degit"})}),"\n",(0,r.jsx)(n.p,{children:"首先全局安装 degit。"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Bash",children:"sudo npm install -g degit\n"})}),"\n",(0,r.jsx)(n.p,{children:"下面测试一下我们项目是否可以这样使用， 根据规则 degit 的后面参数应该是模版软件的 github 地址。所以我们按照描述运行。"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Bash",children:"degit smarty-team/smarty-ui-app-js-template my-app\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:a,alt:"img"})}),"\n",(0,r.jsx)(n.p,{children:"经过测试，这个软件是可以创建的，只是没有自己 cli 的加持。连 package.json 中的软件包名字都没有改。不过假设你的模版比较简单，只是为了克隆项目也可以使用这个软件。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:c,alt:"img"})}),"\n",(0,r.jsx)(n.p,{children:"第三方脚手架全部汇总在 awesome-vite 的网站上，如果后期希望推广你的组件库，可以考虑给这个项目 PR。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/vitejs/awesome-vite#templates",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/vitejs/awesome-vite#templates"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:t,alt:"img"})}),"\n",(0,r.jsx)(n.p,{children:"这样你的项目就可以得到更多的曝光机会。"}),"\n",(0,r.jsxs)(n.h2,{id:"复盘",children:["复盘",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#复盘",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"这节课的主要内容是介绍如何实现 npm init 功能。"}),"\n",(0,r.jsxs)(n.p,{children:["这个章节好像内容很少，甚至不需要修改代码。只是阅读了一个简短的英文文档遵循了某个约定就让 npm init 支持了 组件库的安装。其实这就是本章节的意义。 开源社区和 Npm 软件生态像一部庞大的机器，它需要的是你为他添加新的零件。",(0,r.jsx)(n.strong,{children:"这个时候就需要不断地了解规则，遵循规则才能收到效果"}),"。这就好像一个开发团队内部，作为一个开发者和团队的沟通甚至比开发能力更为重要。"]}),"\n",(0,r.jsx)(n.p,{children:"最后留一些扩展任务。"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"思考如何更好的参与 Vite 生态。"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"下节课，使我们的基于部分，使我们的软技能非干货时间，下节课见。"})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}let g=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["%E5%9F%BA%E4%BA%8E%20Vite%20%E7%9A%84%E7%BB%84%E4%BB%B6%E5%BA%93%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%AE%9E%E6%88%98%2F20.%E8%9E%8D%E5%85%A5%E5%BC%80%E6%BA%90%E7%94%9F%E6%80%81%EF%BC%9A%20%E7%BC%96%E5%86%99%20npm%20init%20%E9%A1%B9%E7%9B%AE%E8%AE%A9%E7%94%A8%E6%88%B7%E6%9B%B4%E6%96%B9%E4%BE%BF.md"]={toc:[{text:"用户故事(UserStory)",id:"用户故事userstory",depth:2},{text:"任务分解(Task)",id:"任务分解task",depth:2},{text:"支持 npm init",id:"支持-npm-init",depth:3},{text:"参与 Vite 生态",id:"参与-vite-生态",depth:3},{text:"复盘",id:"复盘",depth:2}],title:"",headingTitle:"",frontmatter:{}}}}]);