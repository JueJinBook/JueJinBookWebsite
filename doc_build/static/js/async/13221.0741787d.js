"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["13221"],{142428:function(e,n,i){i.r(n),i.d(n,{default:()=>k});var r=i(552676),s=i(740453);let c=i.p+"static/image/0d29769bcb8c61e1388432233d0c5806.0acf536d.webp",a=i.p+"static/image/62c349bee6f7b4e232f47586539365dc.036c744a.webp",d=i.p+"static/image/5ff3f9ff7e9b91ccc0b163c752249662.4c87a9e0.webp",o=i.p+"static/image/810dcf440afc06ab62a1859bd11004f3.b293f04a.webp",l=i.p+"static/image/ae8dafe7feeeff1e94db51d36b5d31d2.d812634b.webp",p=i.p+"static/image/5a290aaa15314c15b58e419d0dd40c16.90d36a40.webp",t=i.p+"static/image/e0c4590a3a7969ca50817a57450a262b.b53876b6.webp",h=i.p+"static/image/0dedffd31b692656e23b30ea69a960a7.eaed016d.webp",x=i.p+"static/image/65048577547500bed3234d2572bee632.be23f0e2.webp",j=i.p+"static/image/905919e92bdd7e54edae6cb2512f95f7.31a1b6fd.webp",g=i.p+"static/image/06686e346e11afcad6251006875bf423.d05eb7b3.webp",b=i.p+"static/image/da50ab8914a14a5361980efd5a02e8e4.1f0453cb.webp";function m(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",img:"img",code:"code",strong:"strong",pre:"pre",ul:"ul",li:"li"},(0,s.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"12工具篇神兵利器chrome-浏览器-application-面板剖析",children:["12.工具篇：神兵利器——Chrome 浏览器 Application 面板剖析",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#12工具篇神兵利器chrome-浏览器-application-面板剖析",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"行文至此，本小册的内容已悄然地接近了尾声。在我们已经对浏览器缓存有了一定的认知和了解后，本文将从浏览器缓存分析及操作工具出发，从另一个角度加深大家对浏览器缓存的认识。"}),"\n",(0,r.jsx)(n.p,{children:"而提及前端浏览器工具，市面上再好用的工具也一定不如浏览器自带的开发者工具好用，如果是分析缓存相关的工具，那么自然而然就归属于开发者工具的 Application 面板了，该面板基本涵盖了浏览器存储型缓存的所有类别。下面我们还是以市场占有率最高的 Chorme 浏览器为例进行介绍。"}),"\n",(0,r.jsxs)(n.h2,{id:"application-面板介绍",children:["Application 面板介绍",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#application-面板介绍",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Chrome Application 面板集成了对浏览器存储数据的一系列操作功能，比如清空存储数据、操作查看 Cookie / Web Storage、查看删除 IndexedDB、调试 Service Worker 等。"}),"\n",(0,r.jsxs)(n.h3,{id:"清空存储数据",children:["清空存储数据",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#清空存储数据",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"清空浏览器存储数据是对于开发者而言比较常用的功能，我们可以在面板中的 Storage 菜单中进行操作："}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:b,alt:"20211004211439.jpg"})}),"\n",(0,r.jsxs)(n.p,{children:["我们可以点击 ",(0,r.jsx)(n.code,{children:"Clear site data"})," 按钮进行当前站点存储数据的清空操作，当然也可以选择性的勾选需要清除的存储类型，比如 Service workers、Local and session storage、IndexedDB 等。"]}),"\n",(0,r.jsxs)(n.p,{children:["在该菜单中我们也可以在 ",(0,r.jsx)(n.code,{children:"Usage"})," 栏下查看浏览器的总存储大小及目前已经被使用的容量。"]}),"\n",(0,r.jsxs)(n.h3,{id:"操作查看-cookie--web-storage",children:["操作查看 Cookie / Web Storage",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#操作查看-cookie--web-storage",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"操作查看 Cookie 也是我们常用的功能之一，在左侧 Cookies 菜单中我们选择当前站点的域名后便可以查看该站点所存储的 Cookie 数据。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:g,alt:"20211005140415.jpg"})}),"\n",(0,r.jsx)(n.p,{children:"顶部的功能区域从左往右依次为刷新、搜索、清空全部、删除选中和只展示有问题的 Cookies。而下方的列表区域我们可以查看、双击编辑和选择删除对应 Cookie 的数据值，同时在列表最后一行空白处双击后我们也可以进行 Cookie 的新增操作。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"注：当 Cookie 数据中对应的 HttpOnly 字段显示被勾选时，表示该 Cookie 不可通过 JS 获取和修改。"})}),"\n",(0,r.jsx)(n.p,{children:"Web Storage 的操作区域与 Cookie 类似，分别在 Local Storage 和 Session Storage 菜单下，同样具备查看、双击编辑、选择删除和新增功能。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:j,alt:"20211005142653.jpg"})}),"\n",(0,r.jsxs)(n.h3,{id:"查看删除-indexeddb",children:["查看删除 IndexedDB",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#查看删除-indexeddb",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"如果当前网站存储了 IndexedDB 数据，那么你可以在对应的 IndexedDB 菜单下选择对应的数据库进行查看删除操作（不可在 Application 面板中新增修改）。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:x,alt:"20211005163122.jpg"})}),"\n",(0,r.jsx)(n.p,{children:"当只选中数据库名称时，右侧区域将展示该库所在的站点域名、版本号和下属的表的数量。同时也可以点击下方操作按钮进行库的删除和刷新操作。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:h,alt:"20211005152014.jpg"})}),"\n",(0,r.jsx)(n.p,{children:"当点击数据库中对应的表后右侧会展示该表中的数据内容，顶部的功能区域从左往右依次为刷新、上一页下一页、按照主键 key 搜索、清空表和删除选中行。"}),"\n",(0,r.jsxs)(n.h3,{id:"查看渐进式-web-应用配置",children:["查看渐进式 Web 应用配置",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#查看渐进式-web-应用配置",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"渐进式 Web 应用（PWA）的配置也可以在 Application 面板中查看，比如和其相关的 Manifest 菜单。该菜单中展示的是 PWA 所需的 manifest.json 文件内容，用于告知浏览器如何在桌面上安装此应用及安装后应展示的信息。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:t,alt:"20211005161012.jpg"})}),"\n",(0,r.jsx)(n.p,{children:"上图中指向展示信息项的对应 JSON 文件如下："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "name": "Google Developers",\n    "short_name": "Google Developers",\n    "start_url": "/",\n    "display": "standalone",\n    "orientation": "portrait",\n    "background_color": "#fff",\n    "theme_color": "#fff",\n    "icons": [\n        {\n            "src": "icons/icon-72x72.png",\n            "sizes": "72x72",\n            "type": "image/png"\n        },\n        {\n            "src": "icons/icon-96x96.png",\n            "sizes": "96x96",\n            "type": "image/png"\n        },\n        {\n            "src": "icons/icon-128x128.png",\n            "sizes": "128x128",\n            "type": "image/png"\n        },\n        {\n            "src": "icons/icon-144x144.png",\n            "sizes": "144x144",\n            "type": "image/png"\n        },\n        {\n            "src": "icons/icon-152x152.png",\n            "sizes": "152x152",\n            "type": "image/png"\n        },\n        {\n            "src": "icons/icon-192x192.png",\n            "sizes": "192x192",\n            "type": "image/png"\n        },\n        {\n            "src": "icons/icon-384x384.png",\n            "sizes": "384x384",\n            "type": "image/png"\n        },\n        {\n            "src": "icons/icon-512x512.png",\n            "sizes": "512x512",\n            "type": "image/png"\n        }\n    ],\n    "splash_pages": null\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"这是一份标准的 manifest.json 文件，包含了应用名称、简写名称、背景色、主题色和应用各分辨率图标等的配置。"}),"\n",(0,r.jsx)(n.p,{children:"在访问支持 PWA 的网页时，浏览器地址栏右侧会出现一个安装图标，点击安装后可以将该站点以 APP 的方式安装到桌面上。如下图所示："}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:p,alt:"20211005173602.jpg"})}),"\n",(0,r.jsxs)(n.h3,{id:"调试-service-worker",children:["调试 Service Worker",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#调试-service-worker",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Application 中的一大部分功能都和 Service Worker 有关，比如 Service Workers、Cache Storage 和 Background Services 菜单项和集合。"}),"\n",(0,r.jsxs)(n.p,{children:["首先我们看一下 ",(0,r.jsx)(n.code,{children:"Service Workers"})," 菜单中的内容："]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:l,alt:"20211005174711.jpg"})}),"\n",(0,r.jsx)(n.p,{children:"顶部 3 个复选框分别代表离线、重载更新和绕过缓存从网络获取资源，我们可以勾选需要的功能进行测试。下方区域展示了 Service Worker 的脚本地址、最近接收时间和当前状态等信息，以及我们可以停用或启用当前的 Service Worker。"}),"\n",(0,r.jsxs)(n.p,{children:["同时上述图中还包括了调试 Service Worker 的 ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/PushEvent",target:"_blank",rel:"noopener noreferrer",children:"Push"}),"（推送）、",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/sync_event#examples",target:"_blank",rel:"noopener noreferrer",children:"Sync"}),"（同步） 和 ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/PeriodicSyncEvent",target:"_blank",rel:"noopener noreferrer",children:"Periodic Sync"}),"（定期同步） 操作，分别对应浏览器 Service Worker 的这 3 个事件 API。如以下监听示例："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"self.addEventListener('sync', event => {\n    if (event.tag == 'sync-messages') {\n        event.waitUntil(sendMessage())\n    }\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:["当当前网页的资源被 Service Worker 缓存后我们可以在 ",(0,r.jsx)(n.code,{children:"Cache Storage"})," 菜单中查看被缓存的数据。"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:o,alt:"20211005192048.jpg"})}),"\n",(0,r.jsx)(n.p,{children:"选中右侧对应的资源，在下方可以直接预览资源的头信息和数据信息。同时我们也可以删除选中的缓存资源或通过路径进行搜索。"}),"\n",(0,r.jsxs)(n.p,{children:["最后我们再来介绍 ",(0,r.jsx)(n.code,{children:"Background Services "})," 菜单集合，其包含了："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Background Fetch"}),"\n",(0,r.jsx)(n.li,{children:"Background Sync"}),"\n",(0,r.jsx)(n.li,{children:"Notifications"}),"\n",(0,r.jsx)(n.li,{children:"Payment Handler"}),"\n",(0,r.jsx)(n.li,{children:"Periodic Background Sync"}),"\n",(0,r.jsx)(n.li,{children:"Push Messaging"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"这些我们都把它们归属于后台服务 API，即当我们触发 Service Worker 对应的事件后这些菜单中会保存相应的记录信息，前提是我们需要开启它："}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:d,alt:"20211005193303.jpg"})}),"\n",(0,r.jsx)(n.p,{children:"我们可以点击黑色小圆点开启对应的后台服务记录，开启后即便 Chrome DevTools 没有打开也可以记录 3 天的后台服务事件。"}),"\n",(0,r.jsx)(n.p,{children:"此时我们可以在 Service Workers 菜单下进行事件的触发测试，如下图所示："}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:a,alt:"20211005195149.jpg"})}),"\n",(0,r.jsx)(n.p,{children:"3 个事件触发按钮分别对应 Background Services 的 3 个后台服务，每次触发都会在对应的服务中生成记录信息，我们可以去对应的菜单中进行查看。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:c,alt:"20211005195608.jpg"})}),"\n",(0,r.jsx)(n.p,{children:"右侧的列表区域我们可以看到每条记录的触发时间、事件类型、来源等信息，同时选择单独的数据可以在下方查看详细内容。"}),"\n",(0,r.jsx)(n.p,{children:"至此，Chrome 开发者工具中和浏览器缓存相关的 Application 控制面板的介绍便告一段落，虽然仍有一小部分使用场景很少的菜单没有进行讲解，比如 Web SQL 等，也无伤大雅。有兴趣的读者可以在本文的基础上进行进一步的实际操作和应用。"}),"\n",(0,r.jsxs)(n.h2,{id:"结语",children:["结语",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#结语",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"正所谓“工欲善其事，必先利其器”。本文立足浏览器缓存，从工具角度介绍了 Chrome Application 控制面板中浏览器缓存开发和调试的相关菜单，进一步反应了工具在我们日常开发过程中的重要地位。"}),"\n",(0,r.jsx)(n.p,{children:"至此，本小册介绍浏览器缓存的相关篇章也于此落下了帷幕，希望各位读者在读完本文后能够进行相应的归纳和总结，对所学知识进行一次“提炼和升华”。"})]})}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}let k=f;f.__RSPRESS_PAGE_META={},f.__RSPRESS_PAGE_META["%E5%89%8D%E7%AB%AF%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF%E4%B8%8E%E6%96%B9%E6%A1%88%E8%A7%A3%E6%9E%90%2F12.%E5%B7%A5%E5%85%B7%E7%AF%87%EF%BC%9A%E7%A5%9E%E5%85%B5%E5%88%A9%E5%99%A8%E2%80%94%E2%80%94Chrome%20%E6%B5%8F%E8%A7%88%E5%99%A8%20Application%20%E9%9D%A2%E6%9D%BF%E5%89%96%E6%9E%90.md"]={toc:[{text:"Application 面板介绍",id:"application-面板介绍",depth:2},{text:"清空存储数据",id:"清空存储数据",depth:3},{text:"操作查看 Cookie / Web Storage",id:"操作查看-cookie--web-storage",depth:3},{text:"查看删除 IndexedDB",id:"查看删除-indexeddb",depth:3},{text:"查看渐进式 Web 应用配置",id:"查看渐进式-web-应用配置",depth:3},{text:"调试 Service Worker",id:"调试-service-worker",depth:3},{text:"结语",id:"结语",depth:2}],title:"12.工具篇：神兵利器——Chrome 浏览器 Application 面板剖析",headingTitle:"12.工具篇：神兵利器——Chrome 浏览器 Application 面板剖析",frontmatter:{}}}}]);