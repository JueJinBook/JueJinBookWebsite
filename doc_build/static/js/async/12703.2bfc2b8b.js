"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["12703"],{935516:function(e,n,s){s.r(n),s.d(n,{default:()=>t});var h=s(552676),r=s(740453);let A="data:image/webp;base64,UklGRhACAABXRUJQVlA4IAQCAADwLgCdASqjAh8BPp1OpU4lo6OiIDgIALATiWlu4XdhG169PkvSAADPch77ZOQ99snIe+2TkPfbJyHvtk5D32ych76wH4EtuZChSGch77ZOQ99snIe+2TkPfbJyG8TQfgdpYB77ZOQ99snIe+2TkPfbJyK92ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+sAA/v/cdQBEfhYL5Of9//9/7dURzuvqsQYPc2mmfkW0NsKLQYEYKYYgwe1Tji3K06kshL1p0OtHzZRRL/u5sYv/uqSSjda+tQIs//MqPqd95pCPGVrHQ8vd8rIT/Nkk/MrTHKqCEkMGp8dcvGnLqMObAAAAAAAAAAAAAAAAAAAAAAAAAAA=";function c(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",img:"img",ul:"ul",li:"li",blockquote:"blockquote",pre:"pre",h3:"h3"},(0,r.ah)(),e.components);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(n.h1,{id:"4初级入门-----基本图元绘制线段",children:["4.初级入门 --- 基本图元绘制：线段",(0,h.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#4初级入门-----基本图元绘制线段",children:"#"})]}),"\n",(0,h.jsxs)(n.p,{children:["上节我们通过三角形的绘制方式，了解到 WebGL 开发的基本要素，以及如何通过缓冲区向着色器传递数据。本节我们学习最后一种基本图元",(0,h.jsx)(n.code,{children:"线段"}),"。"]}),"\n",(0,h.jsx)(n.p,{children:"本节内容虽然简单，但是我仍然想向那些钟爱 WebGL 的新手同学们详细地讲解一下，毕竟这是 WebGL 知识体系中的一部分，有经验的同学可以略过哈~"}),"\n",(0,h.jsxs)(n.h2,{id:"目标",children:["目标",(0,h.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#目标",children:"#"})]}),"\n",(0,h.jsx)(n.p,{children:"本节通过鼠标点击动态绘制线段的示例，学习线段图元的分类以及绘制特点，效果如下："}),"\n",(0,h.jsx)(n.p,{children:(0,h.jsx)("img",{src:A,alt:""})}),"\n",(0,h.jsxs)(n.ul,{children:["\n",(0,h.jsx)(n.li,{children:(0,h.jsx)(n.a,{href:"http://ifanqi.top/webgl/pages/lesson5.html",target:"_blank",rel:"noopener noreferrer",children:"演示地址"})}),"\n",(0,h.jsx)(n.li,{children:(0,h.jsx)(n.a,{href:"https://github.com/lucefer/webgl/blob/master/pages/lesson5.html",target:"_blank",rel:"noopener noreferrer",children:"源码地址"})}),"\n"]}),"\n",(0,h.jsxs)(n.h2,{id:"线段图元的分类",children:["线段图元的分类",(0,h.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#线段图元的分类",children:"#"})]}),"\n",(0,h.jsx)(n.p,{children:"线段图元分为三种："}),"\n",(0,h.jsxs)(n.ul,{children:["\n",(0,h.jsx)(n.li,{children:"LINES：基本线段。"}),"\n",(0,h.jsx)(n.li,{children:"LINE_STRIP：带状线段。"}),"\n",(0,h.jsx)(n.li,{children:"LINE_LOOP：环状线段。"}),"\n"]}),"\n",(0,h.jsx)(n.p,{children:"接下来我们还是以实战为主，练习线段图元的绘制，并介绍他们之间的区别。"}),"\n",(0,h.jsxs)(n.h2,{id:"lines-图元",children:["LINES 图元",(0,h.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#lines-图元",children:"#"})]}),"\n",(0,h.jsx)(n.p,{children:"LINES 图元称为基本线段图元，绘制每一条线段都需要明确指定构成线段的两个端点。"}),"\n",(0,h.jsx)(n.p,{children:"我们还是通过每次点击产生一个点，并将点击位置坐标放进 positions 数组中。"}),"\n",(0,h.jsxs)(n.blockquote,{children:["\n",(0,h.jsx)(n.p,{children:"注意，我们的坐标还是相对于屏幕坐标系，顶点着色器中会将屏幕坐标系转换到裁剪坐标系，也就是坐标区间在[-1, 1]之间。"}),"\n"]}),"\n",(0,h.jsx)(n.pre,{children:(0,h.jsx)(n.code,{className:"language-javascript",children:"var positions = [];\ncanvas.addEventListener('mouseup', e => {\n    var x = e.pageX;\n    var y = e.pageY;\n    positions.push(x);\n    positions.push(y);\n    if (positions.length > 0) {\n        gl.bufferData(\n        gl.ARRAY_BUFFER,\n        new Float32Array(positions),\n        gl.DYNAMIC_DRAW\n    );\n        render(gl);\n    }\n});\n"})}),"\n",(0,h.jsx)(n.p,{children:"之后进行绘制，注意执行 drawArrays 时，图元参数应该设置为 gl.LINES。"}),"\n",(0,h.jsx)(n.pre,{children:(0,h.jsx)(n.code,{className:"language-javascript",children:"gl.drawArrays(gl.LINES, 0, positions.length / 2);\n"})}),"\n",(0,h.jsx)(n.p,{children:(0,h.jsx)("img",{src:"data:image/webp;base64,UklGRg4CAABXRUJQVlA4IAICAADwLwCdASqjAh8BPp1OpE4lpCOiIFM4ALATiWlu4XdhG16uPlL/EdSAASpBvyecUtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqo/BcrmpEaCHCzIIaqk122i4QZBDVUmu20XBuSxWHoCRBODiltFwgyCGqpNdtouEGQQ1VTi22i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk1YAAD++2UAAAAAAAAAAAAAAAAl8H1gBs6sRTEsCRu+6XfiMBsI7xvbP7zoQhcXGJN6YWTvjmHUb4od3LTmQE/3Z/xQQGf5kvtFnpLdi9JsBjOInlLdwzTfOdnuS0e6zj/bfrL0/Xoh+O3iZJBb8c6E1KAAAAAAAAAAAAAA",alt:""})}),"\n",(0,h.jsx)(n.p,{children:"可以看到，每次点击两次之后才能绘制一条新的线段，也就是说，采用 gl.LINES 进行绘制的话，必须制定两个端点坐标。"}),"\n",(0,h.jsxs)(n.p,{children:["基本线段图元的绘制比较简单，我们看一下",(0,h.jsx)(n.code,{children:"带状线段"}),"的绘制特点。"]}),"\n",(0,h.jsxs)(n.h3,{id:"line_strip",children:["LINE_STRIP",(0,h.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#line_strip",children:"#"})]}),"\n",(0,h.jsxs)(n.p,{children:[(0,h.jsx)(n.code,{children:"LINE_STRIP"})," 图元的绘制特点和 ",(0,h.jsx)(n.code,{children:"LINES"})," 的有所区别，在绘制线段时，它会采用前一个顶点作为当前线段的起始端点。我们还是通过一个例子理解一下。"]}),"\n",(0,h.jsx)(n.p,{children:"依然采用上面的代码，只不过这次在绘制时，将图元设置为 LINE_STRIP："}),"\n",(0,h.jsx)(n.pre,{children:(0,h.jsx)(n.code,{className:"language-javascript",children:"gl.drawArrays(gl.LINE_STRIP, 0, positions.length);\n"})}),"\n",(0,h.jsx)(n.p,{children:(0,h.jsx)("img",{src:"data:image/webp;base64,UklGRg4CAABXRUJQVlA4IAICAAAQLwCdASqjAh8BPp1OpE4lpCOiIDqoALATiWlu4XdhG16+szvdAABplhyXhvFych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOFBAx40mbZOQ99snIe+2TkPfbJyHvtkxAwIZyHch77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych76wAAP77ZQAAAAAAAAAAAAAcPuV23XcIvgR/S/t3PzZzsognDf47e+SpGDVvPU1lX3cg3TdPpHEq4GnRCNZI+vKZbYyPxvk7qDMJfMKptbb0SFfaQ0m9TUPqyuWXxMEkX5sxrm6TYgXPEeWw++jonDX5fmNZhURcqAAAAAAAAAAAAAAA",alt:""})}),"\n",(0,h.jsx)(n.p,{children:"可以看到，除了第一条线段需要指定两个端点，之后每次点击一个新的点，都会自动绘制一条新线段，新线段的起点是上一个线段的终点。"}),"\n",(0,h.jsxs)(n.p,{children:["LINE_STRIP 也比较简单，接下来看下环状线段",(0,h.jsx)(n.code,{children:"LINE_LOOP"}),"的特点。"]}),"\n",(0,h.jsxs)(n.h3,{id:"line_loop",children:["LINE_LOOP",(0,h.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#line_loop",children:"#"})]}),"\n",(0,h.jsx)(n.p,{children:"顾名思义，环状线段除了包含 LINE_STRIP 的绘制特性，还有一个特点就是将线段的终点和第一个线段的起点进行连接，形成一个线段闭环。"}),"\n",(0,h.jsx)(n.p,{children:"废话不多说，看下效果大家就明白了。"}),"\n",(0,h.jsxs)(n.blockquote,{children:["\n",(0,h.jsxs)(n.p,{children:["注意，不要忘记将绘制图元更改为 ",(0,h.jsx)(n.code,{children:"LINE_LOOP"}),"。"]}),"\n"]}),"\n",(0,h.jsx)(n.pre,{children:(0,h.jsx)(n.code,{className:"language-javascript",children:"gl.drawArrays(gl.LINE_LOOP, 0, positions.length);\n"})}),"\n",(0,h.jsx)(n.p,{children:(0,h.jsx)("img",{src:"data:image/webp;base64,UklGRhQCAABXRUJQVlA4IAgCAACQLwCdASqjAh8BPp1OpU4lpCOiIDgIALATiWlu4XdhG16mtA7eAP0AAF6IBXcvFych77ZOQ99snIe+2TkPfbJx/CEtk5D32ych77ZOQ99snIe+2ThQdHg2EpOsIiYdbvPJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZMQAD++2UAAG31Tvzy1/Eva0mcBQ+Dr0Sw3N8n/+T4aTxNRo7x3zVLjsnRjAD3uTlC/veCc4zZH4F+vq2/znos5WJiRjDG2gaxZVc1VlCqT8+aj9VsgJbrWd3zqfHxrXfvKCWn/HEyELDZ/dt376/adgwAAAAAAAAAAAAAAAAAAAAAAAAA",alt:""})}),"\n",(0,h.jsxs)(n.h2,{id:"回顾",children:["回顾",(0,h.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#回顾",children:"#"})]}),"\n",(0,h.jsx)(n.p,{children:"线段图元的绘制方式到此就结束了，比较简单。我们可以用线段做路线标注，也可以用它绘制一些线状图形，再加上一些动画做出有创意的效果。"}),"\n",(0,h.jsxs)(n.blockquote,{children:["\n",(0,h.jsx)(n.p,{children:"事实上，webgl 的知识是有限的，但是我们的创意是无限的，有的时候并不需要技术多牛逼，只要创意够好，简单的技术也能实现让人惊艳的效果。"}),"\n"]}),"\n",(0,h.jsx)(n.p,{children:"题外话：我一直觉得我的想象力是很差的，有时候还不如自己三岁的女儿。在做这个 demo 的时候，我女儿的一次胡乱点击，让我大吃一惊，她的绘制路径像极了一个五角星，我在此大致还原了一下她的点击路径："}),"\n",(0,h.jsx)(n.p,{children:(0,h.jsx)("img",{src:A,alt:""})}),"\n",(0,h.jsx)(n.p,{children:"一个胖胖、扁扁的的五角星，PS：偷笑。"}),"\n",(0,h.jsxs)(n.p,{children:["下一节进入本节的一个重点，我会通过绘制",(0,h.jsx)(n.code,{children:"渐变三角形"}),"来带大家深入学习",(0,h.jsx)(n.code,{children:"顶点缓冲区"}),"的使用，并解答第三章节的三个遗留问题。"]})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,h.jsx)(n,{...e,children:(0,h.jsx)(c,{...e})}):c(e)}let t=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["WebGL%20%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E8%B7%B5%2F4.%E5%88%9D%E7%BA%A7%E5%85%A5%E9%97%A8%20---%20%E5%9F%BA%E6%9C%AC%E5%9B%BE%E5%85%83%E7%BB%98%E5%88%B6%EF%BC%9A%E7%BA%BF%E6%AE%B5.md"]={toc:[{text:"目标",id:"目标",depth:2},{text:"线段图元的分类",id:"线段图元的分类",depth:2},{text:"LINES 图元",id:"lines-图元",depth:2},{text:"LINE_STRIP",id:"line_strip",depth:3},{text:"LINE_LOOP",id:"line_loop",depth:3},{text:"回顾",id:"回顾",depth:2}],title:"4.初级入门 --- 基本图元绘制：线段",headingTitle:"4.初级入门 --- 基本图元绘制：线段",frontmatter:{}}}}]);