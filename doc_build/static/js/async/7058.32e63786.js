"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["7058"],{281069:function(e,n,i){i.r(n),i.d(n,{default:()=>r});var s=i(552676),a=i(740453);function c(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",strong:"strong",h3:"h3",pre:"pre",code:"code",blockquote:"blockquote",br:"br"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"13列表渲染",children:["13.列表渲染",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#13列表渲染",children:"#"})]}),"\n",(0,s.jsxs)(n.h2,{id:"27-列表渲染",children:["2.7 列表渲染",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#27-列表渲染",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["在",(0,s.jsx)(n.strong,{children:"数据绑定"}),"的章节，我们学习了如何渲染",(0,s.jsx)(n.strong,{children:"数组类型"}),"和",(0,s.jsx)(n.strong,{children:"对象类型"}),"的数据，但是当时只是输出了数组里或对象的数组里的某一个数据，如果是要输出整个列表呢？这个时候就需要用到列表渲染啦。"]}),"\n",(0,s.jsxs)(n.h3,{id:"271-渲染数组里的所有数据",children:["2.7.1 渲染数组里的所有数据",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#271-渲染数组里的所有数据",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"相同的结构是列表渲染的前提"}),"，在实际的开发场景里，商品、新闻、股票、收藏、书架列表等都会有几千上万条的数据，他们都有一个共同的特征就是数据的结构相同，这也是我们可以批量化渲染的前提。还是以前面的互联网快讯的数据为例，下面的新闻标题他们的结构就非常单一。"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'data: {\n  newstitle:[\n    "瑞幸咖啡：有望在三季度达到门店运营的盈亏平衡点",\n    "腾讯：广告高库存量还是会持续到下一年",\n    "上汽集团云计算数据中心落户郑州，总投资20亿元",\n    "京东：月收入超2万元快递小哥数量同比增长163%",\n    "腾讯：《和平精英》日活跃用户已超五千万",\n  ],\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"那我们应该如何把整个列表都渲染出来呢？这里涉及到JavaScript数组遍历的知识，JavaScript数组遍历的方法非常多，因此小程序数组的渲染也有很多方法，所以大家看技术文档的时候会有点混乱。"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"技术文档："}),(0,s.jsx)(n.a,{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html",target:"_blank",rel:"noopener noreferrer",children:"列表索引"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<view wx:for="{{newstitle}}" wx:key="*this">\n  {{item}}\n</view>\n'})}),"\n",(0,s.jsx)(n.p,{children:"这里wx:for=”{{newstitle}}”，也就是在数组newstitle里进行循环，*this 代表在 for 循环中的 item 本身，而{{item}}的item是默认的。也可以使用如下方法："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<view wx:for-items="{{newstitle}}" wx:for-item="title" wx:key="*this">\n  {{title}}\n</view>\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["默认数组的当前项的下标变量名默认为 index，数组当前项的变量名默认为 item；",(0,s.jsx)(n.br,{}),"\n","使用 wx:for-item 可以指定数组当前元素的变量名，使用 wx:for-index 可以指定数组当前下标的变量名。"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"272-电影列表页面",children:["2.7.2 电影列表页面",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#272-电影列表页面",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"首先我们把多部电影的数据写在data里面，相当于是一个数组类型的数据里面，包含着多个对象类型的数据。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'movies: [{\n  name: "肖申克的救赎", \n  img:"https://img3.doubanio.com/view/photo/s_ratio_poster/public/p480747492.webp",\n  desc:"有的人的羽翼是如此光辉，即使世界上最黑暗的牢狱，也无法长久地将他围困！"},\n  {\n    name: "霸王别姬",\n    img: "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p1910813120.webp",\n    desc: "风华绝代。"\n  },\n  {\n    name: "这个杀手不太冷",\n    img: "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p511118051.webp",\n    desc: "怪蜀黍和小萝莉不得不说的故事。"\n  },\n  {\n    name: "阿甘正传",\n    img: "https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2372307693.webp",\n    desc: "一部美国近现代史。"\n  },\n  {\n    name: "美丽人生",\n    img: "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p510861873.webp",\n    desc: "最美的谎言。"\n  },\n  {\n    name: "泰坦尼克号",\n    img: "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p457760035.webp",\n    desc: "失去的才是永恒的。"\n  },\n  {\n    name: "千与千寻",\n    img: "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p1606727862.webp",\n    desc: "最好的宫崎骏，最好的久石让。"\n  },\n  {\n    name: "辛德勒名单",\n    img: "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p492406163.webp",\n    desc: "拯救一个人，就是拯救整个世界。"\n  },     \n],\n'})}),"\n",(0,s.jsx)(n.p,{children:"然后我们也把数据绑定章节的代码改一下，添加一个wx:for语句，来把列表里的数据给循环渲染出来。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<view class="page__bd">\n	<view class="weui-panel weui-panel_access">\n		<view class="weui-panel__bd" wx:for="{{movies}}" wx:for-item="movies" wx:key="*item">\n			<navigator url="" class="weui-media-box weui-media-box_appmsg" hover-class="weui-cell_active">\n				<view class="weui-media-box__hd weui-media-box__hd_in-appmsg">\n					<image class="weui-media-box__thumb" mode="widthFix" src="{{movies.img}}" sytle="height:auto"></image>\n				</view>\n				<view class="weui-media-box__bd weui-media-box__bd_in-appmsg">\n					<view class="weui-media-box__title">{{movies.name}}</view>\n					<view class="weui-media-box__desc">{{movies.desc}}</view>\n				</view>\n			</navigator>\n		</view>\n	</view>\n</view>\n'})}),"\n",(0,s.jsx)(n.p,{children:"这里用到了一个wx:for-item，给了它一个值是movies，其实也可以是其他值，比如dianying，那{{movies.img}}、{{movies.name}}、{{movies.desc}}也相应的为{{dianying.img}}、{{dianying.name}}、{{dianying.desc}}。为什么这样？这个也是JavaScript的一个知识，可以先不必深究。"}),"\n",(0,s.jsx)(n.p,{children:"我们发现电影列表里面的图片是变形的，为什么呢？回到我们之前学的image组件，我们去查看一下image组件文档，从技术文档里找答案。"}),"\n",(0,s.jsxs)(n.p,{children:["技术文档：",(0,s.jsx)(n.a,{href:"https://developers.weixin.qq.com/miniprogram/dev/component/image.html",target:"_blank",rel:"noopener noreferrer",children:"image组件文档"})]}),"\n",(0,s.jsx)(n.p,{children:"在技术文档里，我们发现如果我们不写图片的模式mode，图片的模式默认为scaleToFill，也就是不保持纵横比缩放图片，使图片的宽高完全拉伸至填满 image 元素。"}),"\n",(0,s.jsx)(n.p,{children:"那我们希望图片保持宽度不变，高度自动变化，保持原图宽高比不变，那就需要用到widthFix的模式啦。"}),"\n",(0,s.jsx)(n.p,{children:"我们给image组件添加widthFix模式，"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<image class="weui-media-box__thumb" mode="widthFix" src="{{movies.img}}"\n'})}),"\n",(0,s.jsx)(n.p,{children:"添加完模式之后，发现图片比例显示正常了，但是image组件出现了溢出的现象，这是因为weui给class为weui-media-box__hd_in-appmsg 的组件定义了一个height:60px的css样式，也就是限制了高度，那我们可以在home.wxss里添加"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-css",children:".weui-media-box__hd_in-appmsg{\n  height: auto;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"把这个height:60px给覆盖掉。"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"css的覆盖原理是按照优先级来的，越是写在css文件后面的样式优先级越高，会把前面的给覆盖掉；在小程序里页面里的wxss的优先级比app.wxss的优先级更高，所以也可以覆盖掉。"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"点击电影列表是没有链接的，大家可以回顾前面的知识点，给每部电影添加链接，在pages配置项里把每个页面的路径都添加上。"}),"\n",(0,s.jsxs)(n.h3,{id:"273-grid九宫格样式参考",children:["2.7.3 Grid九宫格样式参考",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#273-grid九宫格样式参考",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"大家经常会在App里看到一些分类都是以九宫格的方式来布局的。我们在WeUI小程序里用模拟器找到基础组件下的grid，看一下grid所呈现的样式。然后参考WeUI小程序文件结构里example文件夹下grid页面文件grid.wxml里的代码，在home.wxml里添加代码："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<view class="page__bd">\n	<view class="weui-grids">\n		<block wx:for="{{grids}}" wx:for-item="grid" wx:key="*this">\n			<navigator url="" class="weui-grid" hover-class="weui-grid_active">\n				<image class="weui-grid__icon" src="{{grid.imgurl}}" />\n				<view class="weui-grid__label">{{grid.title}}</view>\n			</navigator>\n		</block>\n	</view>\n</view>\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["在WeUI的源代码里，我们看到有一个","的标签，这个标签主要是说明里面包含的是一个多节点的结构块，换成","组件也没有太大影响，就好像","换成","没有影响一样，用不同的组件主要是为了一个区分。"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"然后在home.js添加data数据"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'grids:[\n  { imgurl:"https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/icon1.png",\n    title:"招聘"\n  },\n  {\n    imgurl: "https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/icon2.png",\n    title: "房产"\n  },\n  {\n    imgurl: "https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/icon3.png",\n    title: "二手车新车"\n  },\n  {\n    imgurl: "https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/icon4.png",\n    title: "二手"\n  },\n  {\n    imgurl: "https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/icon5.png",\n    title: "招商加盟"\n  },\n  {\n    imgurl: "https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/icon6.png",\n    title: "兼职"\n  },\n  {\n    imgurl: "https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/icon7.png",\n    title: "本地"\n  },\n  {\n    imgurl: "https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/icon8.png",\n    title: "家政"\n  },\n  {\n    imgurl: "https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/icon9.png",\n    title: "金币夺宝"\n  },\n  {\n    imgurl: "https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/icon10.png",\n    title: "送现金"\n  },\n]\n'})}),"\n",(0,s.jsx)(n.p,{children:"大家就可以看到一个很多App界面都有的一个九宫格了。这里的九宫格是一行三列，如何让九宫格变成一行五列呢？首先我们要知道为什么这个九宫格会变成一行三列，在weui.wxss里给weui-grid定义了一个width:33.33333333%的样式，我们可以在home.wxss里添加一个样式来覆盖原有的宽度。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:".weui-grid{\n  width: 20%;\n}\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"274-list样式参考",children:["2.7.4 List样式参考",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#274-list样式参考",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"大家可以先在开发者工具的模拟器里体验一下WeUI小程序表单下面的List的样式，以及找到list样式所对应的wxml代码，在开发者工具的文件目录的example/list目录下。我们可以参考一下里面的代码，并结合前面的案例在home.wxml里面输入以下代码："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<view class="weui-cells weui-cells_after-title">\n	<block wx:for="{{listicons}}" wx:for-item="listicons">\n		<navigator url="" class="weui-cell weui-cell_access" hover-class="weui-cell_active">\n			<view class="weui-cell__hd">\n				<image src="{{listicons.icon}}" style="margin-right: 5px;vertical-align: middle;width:20px; height: 20px;"></image>\n			</view>\n			<view class="weui-cell__bd">{{listicons.title}}</view>\n			<view class="weui-cell__ft weui-cell__ft_in-access">{{listicons.desc}}</view>\n		</navigator>\n	</block>\n</view>\n'})}),"\n",(0,s.jsx)(n.p,{children:"在home.js的data里添加以下数据："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'listicons:[{\n  icon:"https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/listicons1.png",\n  title:"我的文件",\n  desc:""\n},\n{\n  icon:"https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/listicons2.png",\n  title:"我的收藏",\n  desc:"收藏列表"\n},\n{\n  icon:"https://hackweek.oss-cn-shanghai.aliyuncs.com/hw18/hackwork/weapp/listicons3.png",\n  title:"我的邮件",\n  desc:""\n}],\n'})}),"\n",(0,s.jsx)(n.p,{children:"再来查看效果，这里第一个和第三个的desc没有写内容，也是不影响这个列表展示的。"})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}let r=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BA%91%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%2F13.%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93.md"]={toc:[{text:"2.7 列表渲染",id:"27-列表渲染",depth:2},{text:"2.7.1 渲染数组里的所有数据",id:"271-渲染数组里的所有数据",depth:3},{text:"2.7.2 电影列表页面",id:"272-电影列表页面",depth:3},{text:"2.7.3 Grid九宫格样式参考",id:"273-grid九宫格样式参考",depth:3},{text:"2.7.4 List样式参考",id:"274-list样式参考",depth:3}],title:"13.列表渲染",headingTitle:"13.列表渲染",frontmatter:{}}}}]);