"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["73935"],{555488:function(e,n,t){t.r(n),t.d(n,{default:()=>p});var s=t(552676),r=t(740453);let i=t.p+"static/image/c9db40e1454114148a618954c0bb8576.f61c0e79.webp",d=t.p+"static/image/66cc478cd6adcc78c540e916c0d89f9e.757273d9.webp",c=t.p+"static/image/f9c435f57d14ab17f0c5724bb4e5ec74.d81e2e7a.webp",l=t.p+"static/image/51eaa52408d4345bdda44f1c9ec75dc2.d02ac0d2.webp",h=t.p+"static/image/01c325cd24e778c793fbf1e6add20891.1d99f041.webp";function a(e){let n=Object.assign({h1:"h1",a:"a",p:"p",img:"img",h2:"h2",ul:"ul",li:"li",h3:"h3",pre:"pre",code:"code",strong:"strong",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,r.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"6单元测试-二-搭建vitest的单元测试环境",children:["6.单元测试 (二)： 搭建Vitest的单元测试环境",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#6单元测试-二-搭建vitest的单元测试环境",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"这节课，我们来学习如何给组件库添加单元测试。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:h,alt:"img"})}),"\n",(0,s.jsx)(n.p,{children:"在 Vite 栈的项目中，我首推 Vitest 作为测试框架。"}),"\n",(0,s.jsxs)(n.h2,{id:"为什么要选择-vitest",children:["为什么要选择 Vitest？",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#为什么要选择-vitest",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"在 Vitest 之前，前端普遍的测试框架是 Jest。Jest 是由 Facebook 开源的一款测试框架，它本身集成了断言库、mock、快照测试、覆盖率报告等功能。比如 Vue3.0 还有流行的 ElementUI 组件库都是使用 Jest 完成的单元测试。"}),"\n",(0,s.jsx)(n.p,{children:"Vitest 是一个基于 Vite 的测试框架，它可以做到与 Vite 通用配置。也就是说，如果你在 Vite 中使用插件支持了JSX语法，做单元测试的时候就无需再配置一遍了，这点非常重要。并且 Vite 兼容了大部分 Jest 的使用方法，这样以往 Jest 的使用经验依然可以用在 Vitest 中使用，没有太多的重复学习过程。另外 Vitest 更加注重性能，尽可能多地使用 Worker 线程并发执行，可以提高测试的运行效率。"}),"\n",(0,s.jsx)(n.p,{children:"总结一下 Vitest 的优点："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Vite 同配置；"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"大量兼容 JestAPI；"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"高执行效率。"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["本章节代码分支： ",(0,s.jsx)(n.a,{href:"https://github.com/smarty-team/smarty-admin/tree/chapter06/packages/smarty-ui-vite",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/smarty-team/smarty-admin/tree/chapter06/packages/smarty-ui-vite"})]}),"\n",(0,s.jsxs)(n.h2,{id:"用户故事userstory",children:["用户故事(UserStory)",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#用户故事userstory",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"通过VItest实现对组件的单元测试。"}),"\n",(0,s.jsxs)(n.h2,{id:"任务分解task",children:["任务分解(Task)",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#任务分解task",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"搭建Vitest单元测试环境。"}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"任务实现",children:["任务实现",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#任务实现",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"搭建测试环境",children:["搭建测试环境",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#搭建测试环境",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'pnpm i -D vitest@"0.21.1" happy-dom@"6.0.4" @vue/test-utils@"2.0.2"\n'})}),"\n",(0,s.jsx)(n.p,{children:"配置 Vitest 测试组件库需要以下三个库："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"vitest ：测试框架，用于执行整个测试过程并提供断言库、mock、覆盖率；"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"happy-dom：是用于提供在 Node 环境中的 Dom 仿真模型；"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"@vue/test-utils 工具库： Vue推荐的测试工具库。"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"@vue/test-utils 工具库是为了简化vue的测试过程而设计的。实际上使用 jest 或者 vitest 也可以直接对 vue 的进行测试。但是如果每次都需要编写初始化vue实例、渲染组件等操作，并且对Dom 断言也比较繁琐。比较好的办法是将这些针对 vue 测试的过程进程封装。当然这些封装是针对虽有vue项目通用的。这也就是 @vue/test-utils 的来历。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://v1.test-utils.vuejs.org/zh/installation/choosing-a-test-runner.html",target:"_blank",rel:"noopener noreferrer",children:"@vue/test-utils 的文档地址"})}),"\n",(0,s.jsx)(n.p,{children:"首先、需要在vite.config.ts 中增加Vitest配置。"}),"\n",(0,s.jsx)(n.p,{children:"vite.config.ts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"import { defineConfig } from 'vite'\n\nexport default defineConfig({\n \xa0// ...\n \xa0test: {\n \xa0 \xa0// enable jest-like global test APIs\n \xa0 \xa0globals: true,\n \xa0 \xa0// simulate DOM with happy-dom\n \xa0 \xa0// (requires installing happy-dom as a peer dependency)\n \xa0 \xa0environment: 'happy-dom',\n \xa0 \xa0// 支持tsx组件，很关键\n \xa0 \xa0transformMode: {\n \xa0 \xa0 \xa0web: [/.[tj]sx$/]\n \xa0  }\n  }\n})\n"})}),"\n",(0,s.jsx)(n.p,{children:"其中的重要属性，我们需要讲解一下。"}),"\n",(0,s.jsx)(n.p,{children:"enviroment属性中配置了 happy-dom，用于提供测试所需要的 Dom 仿真。测试是在 node 环境中运行的，而不是浏览器中，需要提供一个 Dom 对象的仿真。然后就是 transformMode，由于代码中使用的 TSX 语法，所以需要设置转换处理。"}),"\n",(0,s.jsx)(n.p,{children:"在配置时，我们发现 ts文件会报错。这是由于 test 属性属于 Vitest 的扩展属性，vite 原生配置中并没有定义这个属性。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:l,alt:"img"})}),"\n",(0,s.jsx)(n.p,{children:"解决的办法就是在 vite.config.ts 中增加一个类型定义声明"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:c,alt:"img"})}),"\n",(0,s.jsx)(n.p,{children:"代码如下："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"/// <reference types=\"vitest\" />\nimport { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport vueJsx from '@vitejs/plugin-vue-jsx'\n​\n// https://vitejs.dev/config/\nexport default defineConfig({\n \xa0 \xa0...\n})\n"})}),"\n",(0,s.jsx)(n.p,{children:"这样的话报警就可以取消了。"}),"\n",(0,s.jsxs)(n.h3,{id:"代码的小重构",children:["代码的小重构",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#代码的小重构",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"测试之前做一个代码的小重构。就是给每一个组件添加一个入口 index.ts。\n将原来的 index.tsx => Button.tsx\n新建一个 index.ts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import Button from "./Button";\n\n// 导出Button组件\nexport default Button ;\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"编写测试用例",children:["编写测试用例",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#编写测试用例",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["在 /src/button/",(0,s.jsx)(n.strong,{children:"test"})," 中添加 Button.spec.ts："]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:"img"})}),"\n",(0,s.jsx)(n.p,{children:"Button.spec.ts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'import Button from "../Button";\n\nimport { shallowMount } from "@vue/test-utils";\nimport { describe, expect, test } from "vitest";\n// 测试分组\ndescribe(\'Button\', () => {\n // mount\n test("mount  @vue/test-utils", () => {\n  // @vue/test-utils\n  const wrapper = shallowMount(Button, {\n   slots: {\n    default: \'Button\'\n    }\n   });\n  \n  // 断言\n  expect(wrapper.text()).toBe("Button");\n\n});\n })\n'})}),"\n",(0,s.jsx)(n.p,{children:"在测试文件中创建一个 describe 分组。在第一个参数中输入【Button】，表明是针对 Button 的测试。编写测试用例 test ，使用 shallowMount 初始化组件，测试按钮是否工作正常，只需要断言判断按钮中的字符串是否正确就可以了。"}),"\n",(0,s.jsx)(n.p,{children:"下面增加测试运行脚本。"}),"\n",(0,s.jsx)(n.p,{children:"package.json"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'  {\n \xa0 \xa0 \xa0"scripts": {\n \xa0 \xa0 \xa0 \xa0 \xa0"test": "vitest",\n \xa0 \xa0  }\n }\n'})}),"\n",(0,s.jsx)(n.p,{children:"启动单元测试："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm test\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:d,alt:"img"})}),"\n",(0,s.jsx)(n.p,{children:"上面的测试只是测试了按钮的默认状态。对于按钮组件来讲，它的主要逻辑是根据不同的 props 属性来定制不同的样式。下面我们针对这些逻辑继续编写测试。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:i,alt:"img"})}),"\n",(0,s.jsx)(n.p,{children:"比如： color 属性是根据传入的不同条件定义不同的颜色，只需要让断言判断是否加载不同的属性就行了。"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Color: default"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.table,{children:["\n",(0,s.jsxs)(n.thead,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.th,{children:"输入：color"}),"\n",(0,s.jsx)(n.th,{children:"输出：css"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.tbody,{children:["\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"空(默认)"}),"\n",(0,s.jsx)(n.td,{children:"bg-blue-500"}),"\n"]}),"\n",(0,s.jsxs)(n.tr,{children:["\n",(0,s.jsx)(n.td,{children:"red"}),"\n",(0,s.jsx)(n.td,{children:"bg-red-500"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:" \xa0describe('color', () => {\n \xa0 \xa0test(\"default\", () => {\n \xa0 \xa0 \xa0const wrapper = shallowMount(Button, {\n \xa0 \xa0 \xa0 \xa0slots: {\n \xa0 \xa0 \xa0 \xa0 \xa0default: 'Button'\n \xa0 \xa0 \xa0  }\n \xa0 \xa0  });\n \xa0 \xa0 \xa0expect(wrapper.classes().map(v => v.replace('\\n','')).includes('bg-blue-500')).toBe(true)\n \xa0  });\n \xa0 \xa0test(\"red\", () => {\n \xa0 \xa0 \xa0const wrapper = shallowMount(Button, {\n \xa0 \xa0 \xa0 \xa0slots: {\n \xa0 \xa0 \xa0 \xa0 \xa0default: 'Button'\n \xa0 \xa0 \xa0  },\n \xa0 \xa0 \xa0 \xa0props: {\n \xa0 \xa0 \xa0 \xa0 \xa0color: 'red'\n \xa0 \xa0 \xa0  }\n \xa0 \xa0  });\n \xa0 \xa0 \xa0expect(wrapper.classes().map(v => v.replace('\\n','')).includes('bg-red-500')).toBe(true)\n \xa0  });\n  })\n"})}),"\n",(0,s.jsx)(n.p,{children:"编写测试的时候，使用 describe 创建一个子分组，用于测试 color 属性。然后设置不同的 color 属性值，用断言来判断是否输出对应的 css 样式。"}),"\n",(0,s.jsxs)(n.p,{children:["剩余的属性测试和 color 的测试非常类似，我们就不再赘述。",(0,s.jsx)(n.strong,{children:"在代码编写阶段，建议只对重点功能进行测试，没必要一定追求过高的测试覆盖率"}),"，因为前期过度地测试也会提高开发成本，拖慢开发进度。关于测试覆盖率的问题，我们会在后续章节介绍。"]}),"\n",(0,s.jsx)(n.p,{children:"到目前为止，已经把组件库的测试框架搭好了。"}),"\n",(0,s.jsxs)(n.p,{children:["本章节代码分支： ",(0,s.jsx)(n.a,{href:"https://github.com/smarty-team/smarty-admin/tree/chapter06/packages/smarty-ui-vite",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/smarty-team/smarty-admin/tree/chapter06/packages/smarty-ui-vite"})]}),"\n",(0,s.jsxs)(n.h2,{id:"复盘",children:["复盘",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#复盘",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"这节课我们主要讲了组件库添加测试环境，引入Vitest 实现，整体上 Vitest 和 Jest 风格非常类似。基本上可以 0 学习成本切换。而且得益于通属于 Vite 生态，可以做到通用配置和更好的执行效率。"}),"\n",(0,s.jsx)(n.p,{children:"对于 Vue 框架开发代码的测试，当然可以使用原始的的测试框架进行测试。但是，为了简化测试，也会有人将执行过程和测试断言做进一步的封装， 比如 Vue Test Unit 这样的工具库，利用工具库封装了执行过程可以简化单元测试的编写。"}),"\n",(0,s.jsx)(n.p,{children:"最会要总结的就是，要认真编写描述字符串和合理的使用 describe 测试分组。描述字符串会在测试不通过的时候直接显示到命令行中，直接告诉你哪个组件的什么功能没有通过测试。而更好的测试分组可以有效提高测试的可读性。"}),"\n",(0,s.jsx)(n.p,{children:"最后留一些思考题帮助大家复习，也欢迎在留言区讨论。"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"如何配置 Vitest 环境？"}),"\n",(0,s.jsx)(n.li,{children:"如何使用 @vue/test-utils 完成 Vue3 项目的测试？"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"下节课，我们将给大家讲解如何配置自动化检查工具，下节课见。"})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}let p=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["%E5%9F%BA%E4%BA%8E%20Vite%20%E7%9A%84%E7%BB%84%E4%BB%B6%E5%BA%93%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%AE%9E%E6%88%98%2F6.%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%20(%E4%BA%8C)%EF%BC%9A%20%E6%90%AD%E5%BB%BAVitest%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83.md"]={toc:[{text:"为什么要选择 Vitest？",id:"为什么要选择-vitest",depth:2},{text:"用户故事(UserStory)",id:"用户故事userstory",depth:2},{text:"任务分解(Task)",id:"任务分解task",depth:2},{text:"任务实现",id:"任务实现",depth:2},{text:"搭建测试环境",id:"搭建测试环境",depth:3},{text:"代码的小重构",id:"代码的小重构",depth:3},{text:"编写测试用例",id:"编写测试用例",depth:3},{text:"复盘",id:"复盘",depth:2}],title:"6.单元测试 (二)： 搭建Vitest的单元测试环境",headingTitle:"6.单元测试 (二)： 搭建Vitest的单元测试环境",frontmatter:{}}}}]);