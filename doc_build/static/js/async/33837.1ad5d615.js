"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["33837"],{961360:function(n,e,d){d.r(e),d.d(e,{default:()=>c});var h=d(552676),r=d(740453);function s(n){let e=Object.assign({h1:"h1",a:"a",p:"p",hr:"hr",h2:"h2",code:"code",ul:"ul",li:"li",h3:"h3"},(0,r.ah)(),n.components);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(e.h1,{id:"22后悔了怎么办--undo-日志",children:["22后悔了怎么办 —— undo 日志",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#22后悔了怎么办--undo-日志",children:"#"})]}),"\n",(0,h.jsx)(e.p,{children:"标签： MySQL 是怎样运行的"}),"\n",(0,h.jsx)(e.hr,{}),"\n",(0,h.jsxs)(e.h2,{id:"事务回滚的需求",children:["事务回滚的需求",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#事务回滚的需求",children:"#"})]}),"\n",(0,h.jsxs)(e.p,{children:["我们说过",(0,h.jsx)(e.code,{children:"事务"}),"需要保证",(0,h.jsx)(e.code,{children:"原子性"}),"，也就是事务中的操作要么全部完成，要么什么也不做。但是偏偏有些时候做到一半的时候会出一些情况，比如："]}),"\n",(0,h.jsxs)(e.ul,{children:["\n",(0,h.jsxs)(e.li,{children:["\n",(0,h.jsx)(e.p,{children:"情况一：事务执行过程中可能遇到各种错误，比如服务器本身的错误，操作系统错误，甚至是突然断电导致的错误。"}),"\n"]}),"\n",(0,h.jsxs)(e.li,{children:["\n",(0,h.jsxs)(e.p,{children:["情况二：程序员可以在事务执行过程中手动输入",(0,h.jsx)(e.code,{children:"ROLLBACK"}),"语句结束当前的事务的执行。"]}),"\n"]}),"\n"]}),"\n",(0,h.jsxs)(e.p,{children:["这两种情况都会导致事务执行到一半就结束，但是事务执行过程中可能已经修改了很多东西，为了保证事务的原子性，我们需要把东西改回原先的样子，这个过程就称之为",(0,h.jsx)(e.code,{children:"回滚"}),"（英文名：",(0,h.jsx)(e.code,{children:"rollback"}),"），这样就可以造成一个假象：","这个事务看起来什么都没做","，所以符合",(0,h.jsx)(e.code,{children:"原子性"}),"要求。"]}),"\n",(0,h.jsxs)(e.p,{children:["小时候我非常痴迷于象棋，总是想找厉害的大人下棋，赢棋是不可能赢棋的，这辈子都不可能赢棋的，又不想认输，只能偷偷的悔棋才能勉强玩的下去。",(0,h.jsx)(e.code,{children:"悔棋"}),"就是一种非常典型的",(0,h.jsx)(e.code,{children:"回滚"}),"操作，比如棋子往前走两步，",(0,h.jsx)(e.code,{children:"悔棋"}),"对应的操作就是向后走两步；比如棋子往左走一步，",(0,h.jsx)(e.code,{children:"悔棋"}),"对应的操作就是向右走一步。数据库中的回滚跟",(0,h.jsx)(e.code,{children:"悔棋"}),"差不多，你插入了一条记录，",(0,h.jsx)(e.code,{children:"回滚"}),"操作对应的就是把这条记录删除掉；你更新了一条记录，",(0,h.jsx)(e.code,{children:"回滚"}),"操作对应的就是把该记录的更新为旧值；你删除了一条记录，",(0,h.jsx)(e.code,{children:"回滚"}),"操作对应的自然就是把该记录再插进去。说的貌似很简单的样子[手动偷笑\uD83D\uDE0F]"]}),"\n",(0,h.jsxs)(e.h2,{id:"具体介绍每一种类型的修改对应的undo日志最小信息",children:["具体介绍每一种类型的修改对应的undo日志最小信息。",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#具体介绍每一种类型的修改对应的undo日志最小信息",children:"#"})]}),"\n",(0,h.jsxs)(e.h2,{id:"介绍undo记录存储的位置以及具体方式",children:["介绍undo记录存储的位置以及具体方式",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#介绍undo记录存储的位置以及具体方式",children:"#"})]}),"\n",(0,h.jsxs)(e.h3,{id:"undo表空间",children:["undo表空间",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#undo表空间",children:"#"})]}),"\n",(0,h.jsx)(e.p,{children:"innodb_undo_tablespaces"}),"\n",(0,h.jsx)(e.p,{children:"innodb_undo_directory"}),"\n",(0,h.jsx)(e.p,{children:"innodb_max_undo_log_size"}),"\n",(0,h.jsx)(e.p,{children:"innodb_undo_log_truncate"}),"\n",(0,h.jsx)(e.p,{children:"innodb_undo_logs"}),"\n",(0,h.jsx)(e.p,{children:"优惠码不好复制，给您单发一下，期盼能有回复\uD83D\uDE4F\uD83D\uDE4F"}),"\n",(0,h.jsxs)(e.h2,{id:"undo日志的真实格式",children:["undo日志的真实格式",(0,h.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#undo日志的真实格式",children:"#"})]})]})}function i(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,r.ah)(),n.components);return e?(0,h.jsx)(e,{...n,children:(0,h.jsx)(s,{...n})}):s(n)}let c=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["MySQL%20%E6%98%AF%E6%80%8E%E6%A0%B7%E8%BF%90%E8%A1%8C%E7%9A%84%EF%BC%9A%E4%BB%8E%E6%A0%B9%E5%84%BF%E4%B8%8A%E7%90%86%E8%A7%A3%20MySQL%2F22%E5%90%8E%E6%82%94%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E%20%E2%80%94%E2%80%94%20undo%20%E6%97%A5%E5%BF%97.md"]={toc:[{text:"事务回滚的需求",id:"事务回滚的需求",depth:2},{text:"具体介绍每一种类型的修改对应的undo日志最小信息。",id:"具体介绍每一种类型的修改对应的undo日志最小信息",depth:2},{text:"介绍undo记录存储的位置以及具体方式",id:"介绍undo记录存储的位置以及具体方式",depth:2},{text:"undo表空间",id:"undo表空间",depth:3},{text:"undo日志的真实格式",id:"undo日志的真实格式",depth:2}],title:"22后悔了怎么办 —— undo 日志",headingTitle:"22后悔了怎么办 —— undo 日志",frontmatter:{}}}}]);