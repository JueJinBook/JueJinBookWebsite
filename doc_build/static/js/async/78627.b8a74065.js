"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["78627"],{697293:function(n,d,e){n.exports=e.p+"static/image/8d5f4ea116ea5ff91c3f0e55be9e3872.89524197.webp"},904239:function(n,d,e){n.exports=e.p+"static/image/bf430287bf0219cd9131c2dbab2659cf.23b76ced.webp"},45499:function(n,d,e){e.r(d),e.d(d,{default:()=>l});var s=e(552676),r=e(740453),h=e(904239),i=e(697293);function t(n){let d=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",img:"img",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,r.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.h1,{id:"176-聊天室技术选型和数据库设计",children:["176. 聊天室：技术选型和数据库设计",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#176-聊天室技术选型和数据库设计",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"上节梳理了需求，画了原型图，这节来设计下技术方案。"}),"\n",(0,s.jsxs)(d.h2,{id:"技术栈",children:["技术栈",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#技术栈",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"前端部分还是 React + Antd Design，脚手架用 create-vite："}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)("img",{src:i,alt:""})}),"\n",(0,s.jsx)(d.p,{children:"后端部分是 Nest + Prisma + Socket.io。"}),"\n",(0,s.jsx)(d.p,{children:"Prisma 是 ORM 框架，Socket.io 用来做 WebSocket 通信。"}),"\n",(0,s.jsx)(d.p,{children:"数据库是 mysql + redis，mysql 做持久化存储，redis 做缓存以及临时数据的存储。"}),"\n",(0,s.jsx)(d.p,{children:"用 minio 做 OSS 对象存储服务，存储上传的文件。"}),"\n",(0,s.jsx)(d.p,{children:"文档用 swagger 生成，部署用 docker compose + pm2。"}),"\n",(0,s.jsxs)(d.h2,{id:"数据库设计",children:["数据库设计",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#数据库设计",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"然后来设计下数据库表："}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)("img",{src:h,alt:""})}),"\n",(0,s.jsx)(d.p,{children:"需要这些表。"}),"\n",(0,s.jsx)(d.p,{children:"用户表存储用户信息，好友关系表就是存储用户和用户的关联关系。"}),"\n",(0,s.jsx)(d.p,{children:"好友申请表存储用户对用户的好友申请的记录。"}),"\n",(0,s.jsx)(d.p,{children:"聊天室表存储聊天室的信息。"}),"\n",(0,s.jsx)(d.p,{children:"用户所在聊天室表存储用户和聊天室的关联。"}),"\n",(0,s.jsx)(d.p,{children:"聊天记录表存储持久化的聊天记录。"}),"\n",(0,s.jsx)(d.p,{children:"收藏表存储用户收藏的聊天记录。"}),"\n",(0,s.jsx)(d.p,{children:"详细设计如下："}),"\n",(0,s.jsx)(d.p,{children:"用户表 users："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"用户ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"username"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"用户名"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"password"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"密码"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"nick_name"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"昵称"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"email"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"邮箱"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"head_pic"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(100)"}),"\n",(0,s.jsx)(d.td,{children:"头像"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"create_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"创建时间"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"update_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"更新时间"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"好友关系表 friendship："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"user1_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"用户1"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"user2_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"用户2"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"聊天室表 chatroom："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"聊天室ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"name"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"群聊名"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"type"}),"\n",(0,s.jsx)(d.td,{children:"BOOLEAN"}),"\n",(0,s.jsx)(d.td,{children:"类型（单聊、群聊）"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"create_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"创建时间"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"update_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"更新时间"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"用户所在聊天室表 user_chatroom："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"user_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"用户ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"chatroom_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"聊天室ID"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"聊天记录表 chat_history："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"聊天记录ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"content"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(500)"}),"\n",(0,s.jsx)(d.td,{children:"聊天内容"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"chatroom_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"聊天室ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"sender_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"发送者ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"send_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"发送时间"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"update_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"更新时间"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"好友申请表 friend_request："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"好友申请id"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"from_user_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"发送方"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"to_user_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"待添加好友"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"reason"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(100)"}),"\n",(0,s.jsx)(d.td,{children:"添加理由"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"status"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(10)"}),"\n",(0,s.jsx)(d.td,{children:"状态（待处理、已同意、已拒绝）"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"create_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"创建时间"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"update_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"更新时间"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"收藏表 favorite："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"user_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"用户 ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"chat_history_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"聊天记录ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"create_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"创建时间"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"update_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"更新时间"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"然后划分下模块："}),"\n",(0,s.jsxs)(d.h2,{id:"模块划分",children:["模块划分",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#模块划分",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"首先是用户模块，实现登录、注册、信息修改的功能："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"接口路径"}),"\n",(0,s.jsx)(d.th,{children:"请求方式"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/login"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"用户登录"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/register"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"用户注册"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/update"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"用户个人信息修改"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/update_password"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"用户修改密码"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"好友管理模块："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"接口路径"}),"\n",(0,s.jsx)(d.th,{children:"请求方式"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/friendship/add"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"添加好友"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/friendship/delete"}),"\n",(0,s.jsx)(d.td,{children:"DELETE"}),"\n",(0,s.jsx)(d.td,{children:"删除好友"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/friendship/list"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"好友列表"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"聊天室管理模块："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"接口路径"}),"\n",(0,s.jsx)(d.th,{children:"请求方式"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/chatroom/join"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"加入聊天室"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/chatroom/exit"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"退出聊天室"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/chatroom/list"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"聊天室列表"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/chatroom/add"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"新建聊天室（单聊、群聊）"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"聊天模块："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"接口路径"}),"\n",(0,s.jsx)(d.th,{children:"请求方式"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/chat"}),"\n",(0,s.jsx)(d.td,{children:"WEBSOCKET"}),"\n",(0,s.jsx)(d.td,{children:"聊天"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"收藏管理模块："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"接口路径"}),"\n",(0,s.jsx)(d.th,{children:"请求方式"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/favorite/add"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"添加收藏"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/favorite/delete"}),"\n",(0,s.jsx)(d.td,{children:"DELETE"}),"\n",(0,s.jsx)(d.td,{children:"删除收藏"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/favorite/list"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"收藏列表"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"好友请求管理模块："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"接口路径"}),"\n",(0,s.jsx)(d.th,{children:"请求方式"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/friend_request/list"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"好友请求列表"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/friend_request/agree"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"同意好友请求"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/friend_request/reject"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"拒绝好友请求"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.h2,{id:"总结",children:["总结",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"这节我们设计了下技术方案。"}),"\n",(0,s.jsx)(d.p,{children:"技术栈：前端是 antd + react + vite，后端是 nest + prisma + socket.io，数据库是 mysql + redis，对象存储用 minio，API 文档用 swagger 生成，部署用 docker compose + pm2，网关使用 nginx。"}),"\n",(0,s.jsx)(d.p,{children:"数据库表有 7 个：用户表 users、好友关系表 friendship、聊天室表 chatroom、用户所在聊天室表 user_chatroom、聊天记录表 chat_history、好友申请表 friend_request、收藏表 favorite。"}),"\n",(0,s.jsx)(d.p,{children:"模块有 6 个：用户模块、好友管理模块、聊天室管理模块、聊天模块、收藏管理模块、好友请求管理模块。"}),"\n",(0,s.jsx)(d.p,{children:"下节正式开始开发。"})]})}function c(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:d}=Object.assign({},(0,r.ah)(),n.components);return d?(0,s.jsx)(d,{...n,children:(0,s.jsx)(t,{...n})}):t(n)}let l=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["Nest%20%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%20%20%E6%9C%80%E6%96%B0200%E7%AB%A0%2F176.%20%E8%81%8A%E5%A4%A9%E5%AE%A4%EF%BC%9A%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1.md"]={toc:[{text:"技术栈",id:"技术栈",depth:2},{text:"数据库设计",id:"数据库设计",depth:2},{text:"模块划分",id:"模块划分",depth:2},{text:"总结",id:"总结",depth:2}],title:"176. 聊天室：技术选型和数据库设计",headingTitle:"176. 聊天室：技术选型和数据库设计",frontmatter:{}}}}]);