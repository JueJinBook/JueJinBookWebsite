"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["87668"],{107522:function(e,c,n){n.r(c),n.d(c,{default:()=>m});var i=n(552676),s=n(740453);let a=n.p+"static/image/b0290c08fb7805459bbb63b1540818f3.cec4d071.gif",r=n.p+"static/image/6ee46537135c74f360ad79f8509f73cf.a3854a09.gif",d=n.p+"static/image/9684223514d9401b8692ff6e579eb7fc.cc7bae4b.gif",t=n.p+"static/image/be51619cf3bc685fd4876e8ccdc40a3c.72bc2f1d.webp",l=n.p+"static/image/a340c44e9d465d01e68e68487cbfe9e6.753b5f28.gif",p=n.p+"static/image/c4fc05185a0991b638ab75c1aa6d4e61.8fa587e8.webp",h=n.p+"static/image/faa0305c933114a9b8aec79415dc0316.15ebb4ee.webp",j=n.p+"static/image/13467a70e33575f7e43a14ce4c55466d.cbd272d7.webp",x=n.p+"static/image/77797829d28035e9ba3a38362f65aa56.f29dd2b0.gif",o=n.p+"static/image/0b78203f45b9d99c42b80a9d4400dd14.f3dae53d.webp",b=n.p+"static/image/7b0e0c4847ff36ce1b5cd326cb08baeb.4d6515be.webp";function f(e){let c=Object.assign({h1:"h1",a:"a",p:"p",img:"img",h2:"h2",ul:"ul",li:"li"},(0,s.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.h1,{id:"第33章一次超爽的react调试体验",children:["第33章—一次超爽的React调试体验",(0,i.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#第33章一次超爽的react调试体验",children:"#"})]}),"\n",(0,i.jsx)(c.p,{children:"\uFEFF我们学了如何在 VSCode 里断点调试 React 组件，也学了用 click-to-react-component 点击页面元素直接在 VSCode 打开对应组件。"}),"\n",(0,i.jsx)(c.p,{children:"这俩单独使用都很不错，而如果把两者结合起来用，会有更爽的调试体验。"}),"\n",(0,i.jsx)(c.p,{children:"比如我们要调试这个页面，理清这个输入框的内容是哪里来的："}),"\n",(0,i.jsx)(c.p,{children:(0,i.jsx)("img",{src:b,alt:""})}),"\n",(0,i.jsx)(c.p,{children:"我们先在项目里引入 click-to-react-component"}),"\n",(0,i.jsx)(c.p,{children:(0,i.jsx)("img",{src:o,alt:""})}),"\n",(0,i.jsx)(c.p,{children:"用它来定位这个输入框的源码在哪，按住 option + 点击元素即可："}),"\n",(0,i.jsx)(c.p,{children:(0,i.jsx)("img",{src:x,alt:""})}),"\n",(0,i.jsx)(c.p,{children:"添加调试配置后启动 debug："}),"\n",(0,i.jsx)(c.p,{children:(0,i.jsx)("img",{src:j,alt:""})}),"\n",(0,i.jsx)(c.p,{children:"然后在刚定位到的组件 return 的地方打个断点："}),"\n",(0,i.jsx)(c.p,{children:(0,i.jsx)("img",{src:h,alt:""})}),"\n",(0,i.jsx)(c.p,{children:"发现这个 value 是从父组件通过 props 传进来的。"}),"\n",(0,i.jsx)(c.p,{children:"所以要继续去父组件里打断点。"}),"\n",(0,i.jsx)(c.p,{children:"但是 React 组件渲染的时候调用栈里都是 react 源码，找不到父组件在哪。"}),"\n",(0,i.jsx)(c.p,{children:(0,i.jsx)("img",{src:p,alt:""})}),"\n",(0,i.jsx)(c.p,{children:"那怎么办呢？"}),"\n",(0,i.jsx)(c.p,{children:"这时候可以借助 click-to-react-component 展示所有父组件的能力："}),"\n",(0,i.jsx)(c.p,{children:"按住 option + 右键，会展示这个元素所在组件的所有父组件。"}),"\n",(0,i.jsx)(c.p,{children:"点击父组件："}),"\n",(0,i.jsx)(c.p,{children:(0,i.jsx)("img",{src:l,alt:""})}),"\n",(0,i.jsx)(c.p,{children:"这样就定位到了父组件里渲染这个子组件的源码位置："}),"\n",(0,i.jsx)(c.p,{children:(0,i.jsx)("img",{src:t,alt:""})}),"\n",(0,i.jsx)(c.p,{children:"这时候发现这个值依然是通过 props 传进来的。"}),"\n",(0,i.jsx)(c.p,{children:"所以我们用同样的方式继续往上找："}),"\n",(0,i.jsx)(c.p,{children:(0,i.jsx)("img",{src:d,alt:""})}),"\n",(0,i.jsx)(c.p,{children:"定位到了一个自定义 hooks，参数都是这里返回的："}),"\n",(0,i.jsx)(c.p,{children:(0,i.jsx)("img",{src:r,alt:""})}),"\n",(0,i.jsxs)(c.p,{children:["在这里打个断点调试下：\n",(0,i.jsx)("img",{src:a,alt:""})]}),"\n",(0,i.jsx)(c.p,{children:"不断 step into 进入函数内部，最终，我们找到了这个参数的来源："}),"\n",(0,i.jsx)(c.p,{children:"在 localStorage 里读取了某个 key，key 的名字也调试出来了。"}),"\n",(0,i.jsx)(c.p,{children:"这样我们就达成了调试目标。"}),"\n",(0,i.jsx)(c.p,{children:"整个过程我们根本不需要去理清业务代码的逻辑。"}),"\n",(0,i.jsx)(c.p,{children:"想想看，你是接手这个业务项目的新人，虽然你还没看这些业务代码，但你可以快速定位界面上显示的值的来源，定位到代码在哪里改。"}),"\n",(0,i.jsx)(c.p,{children:"是不是就很高效！"}),"\n",(0,i.jsxs)(c.h2,{id:"总结",children:["总结",(0,i.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,i.jsx)(c.p,{children:"这节我们把 VSCode 断点调试 React 组件和 click-to-react-component 点击元素在 VSCode 打开组件结合了起来。"}),"\n",(0,i.jsx)(c.p,{children:"引入 click-to-react-component，然后添加一个调试配置。"}),"\n",(0,i.jsx)(c.p,{children:"按照这样的步骤来："}),"\n",(0,i.jsxs)(c.ul,{children:["\n",(0,i.jsx)(c.li,{children:"option + 点击页面上想调试的元素，定位到 VSCode 里的源码"}),"\n",(0,i.jsx)(c.li,{children:"打断点看一下值的来源"}),"\n",(0,i.jsx)(c.li,{children:"如果是来自父组件，那就用 option + 右键查找父组件，直接定位到父组件的源码"}),"\n",(0,i.jsx)(c.li,{children:"在定位到的父组件源码里打断点"}),"\n",(0,i.jsx)(c.li,{children:"不断往上找，直到找到产生这个值的地方，断点调试"}),"\n"]}),"\n",(0,i.jsx)(c.p,{children:"这样，就算你不懂这段业务逻辑，也能快速梳理清楚整个流程，并知道在哪里改代码。"}),"\n",(0,i.jsx)(c.p,{children:"两者结合用，调试体验是非常爽的。"})]})}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:c}=Object.assign({},(0,s.ah)(),e.components);return c?(0,i.jsx)(c,{...e,children:(0,i.jsx)(f,{...e})}):f(e)}let m=g;g.__RSPRESS_PAGE_META={},g.__RSPRESS_PAGE_META["React%20%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%2F%E7%AC%AC33%E7%AB%A0%E2%80%94%E4%B8%80%E6%AC%A1%E8%B6%85%E7%88%BD%E7%9A%84React%E8%B0%83%E8%AF%95%E4%BD%93%E9%AA%8C.md"]={toc:[{text:"总结",id:"总结",depth:2}],title:"第33章—一次超爽的React调试体验",headingTitle:"第33章—一次超爽的React调试体验",frontmatter:{}}}}]);