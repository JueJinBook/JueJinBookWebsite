"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["84549"],{393574:function(n,e,i){i.r(e),i.d(e,{default:()=>o});var r=i(552676),s=i(740453);let l=i.p+"static/image/20a9858ce3a699324d63a7bbd28bd166.3e3a4046.webp",d=i.p+"static/image/9f6c85c8da576ff5559f84e72fedab16.d08b311b.webp";function c(n){let e=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",code:"code",blockquote:"blockquote",img:"img",pre:"pre",h3:"h3",h4:"h4"},(0,s.ah)(),n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.h1,{id:"8初级入门-----绘制立方体球体椎体如何用基本图形构建规则形体",children:["8.初级入门 --- 绘制立方体、球体、椎体：如何用基本图形构建规则形体",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#8初级入门-----绘制立方体球体椎体如何用基本图形构建规则形体",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"从本节开始，我们学习绘制 3D 形体，仍然是从简单模型入手，我们首先学习绘制一个立方体。"}),"\n",(0,r.jsxs)(e.h2,{id:"目标",children:["目标",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#目标",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"本节通过绘制常见的立方体、球体、椎体来学习如何使用基本图形构建规则的形体。"}),"\n",(0,r.jsx)(e.p,{children:"通过本节学习，你将掌握如下内容："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["WebGL 坐标系。","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"裁剪坐标系。"}),"\n",(0,r.jsx)(e.li,{children:"NDC 坐标系。"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["坐标系变换。","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"模型变换。"}),"\n",(0,r.jsx)(e.li,{children:"投影变换。"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"立方体、球体、椎体是如何用三角面组成的。"}),"\n",(0,r.jsx)(e.li,{children:"背面剔除的作用。"}),"\n"]}),"\n",(0,r.jsxs)(e.h2,{id:"webgl-坐标系",children:["WebGL 坐标系",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#webgl-坐标系",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["本节开始学习 3D\n形体的绘制，与之前几个章节绘制点和面不同，3D 形体的顶点坐标需要包含深度信息 Z 轴 坐标。所以我们先了解一下 WebGL ",(0,r.jsx)(e.code,{children:"坐标系"})," 的概念。"]}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["后续章节有关于",(0,r.jsx)(e.a,{href:"https://juejin.cn/book/6844733755580481543/section/6844733755937013773",target:"_blank",rel:"noopener noreferrer",children:"WebGL 坐标系"}),"和",(0,r.jsx)(e.a,{href:"https://juejin.cn/book/6844733755580481543/section/6844733755937030157",target:"_blank",rel:"noopener noreferrer",children:"坐标系基本变换原理与算法实现"}),"的深入讲解，但是为了本节学习的方便，还是要在此介绍一下坐标系的相关知识。"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"WebGL 采用左手坐标系，X 轴向右为正，Y 轴向上为正，Z 轴沿着屏幕往里为正，如下图："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:d,alt:""})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-!",children:"讲到这里，我想有很多同学会质疑了：WebGL 不是遵循右手坐标系吗，这里怎么成左手坐标系了？\n"})}),"\n",(0,r.jsxs)(e.p,{children:["没错，WebGL 是",(0,r.jsx)(e.code,{children:"遵循"}),"右手坐标系，但仅仅是遵循，是期望大家遵守的规范。其实 WebGL 内部 (裁剪坐标系) 是基于左手坐标系的，Z 轴沿屏幕向里为正方向。如果您迫切想知道为什么？请点击",(0,r.jsx)(e.a,{href:"https://juejin.cn/book/6844733755580481543/section/6844733755937013773",target:"_blank",rel:"noopener noreferrer",children:"WebGL坐标系章节"}),"，该章节会有示例来证明。"]}),"\n",(0,r.jsxs)(e.p,{children:["WebGL 坐标系 X、Y、Z 三个坐标分量的的范围是【-1，1】，即一个边长为 2 的正方体，原点在正方体中心。这点在之前的章节有介绍，我们也称这个坐标系为标准设备坐标系，简称 ",(0,r.jsx)(e.code,{children:"NDC 坐标系"}),"。"]}),"\n",(0,r.jsxs)(e.p,{children:["大家应该还记得，前面章节我们经常在顶点着色器中使用内置属性 ",(0,r.jsx)(e.code,{children:"gl_Position"}),"，并且在为 ",(0,r.jsx)(e.code,{children:"gl_Position"})," 赋值之前做了一些坐标系转换（屏幕坐标系转换到裁剪坐标系）操作。"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-!",children:"为了理解 gl_Position 接收坐标前所做的变换目的，这就需要理解 `gl_Position` 接收什么样的坐标。\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"gl_Position"})," 接收一个 4 维浮点向量，该向量代表的是",(0,r.jsx)(e.code,{children:"裁剪坐标系"}),"的坐标。读者可能会问了，",(0,r.jsx)(e.code,{children:"裁剪坐标系"}),"又是怎么冒出来的？这里先不细说，大家只需要记住，gl_Position 接收的坐标范围是顶点在裁剪坐标系中的坐标就可以了。"]}),"\n",(0,r.jsxs)(e.p,{children:["裁剪坐标系中的坐标通常由四个分量表示：(x, y, z, w)。请注意，w 分量代表",(0,r.jsx)(e.code,{children:"齐次坐标分量"}),"，在之前的例子中，w 都是设置成 ",(0,r.jsx)(e.code,{children:"1"})," ，这样做的目的是让裁剪坐标系和 NDC 坐标系就保持一致，省去裁剪坐标到 NDC 坐标的转换过程。"]}),"\n",(0,r.jsxs)(e.p,{children:["gl_Position 接收到裁剪坐标之后，顶点着色器会对坐标进行",(0,r.jsx)(e.code,{children:"透视除法"}),"，透视除法的公式是 ",(0,r.jsx)(e.code,{children:"(x/w, y/w, z/w, w/w)"})," ，透视除法过后，顶点在",(0,r.jsx)(e.code,{children:"裁剪坐标系"}),"中的坐标就会变成 ",(0,r.jsx)(e.code,{children:"NDC 坐标系"}),"中的坐标，各个坐标的取值范围将被限制在【-1，1】之间，如果某个坐标超出这个范围，将会被 GPU 丢弃。"]}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"透视除法这个步骤是顶点着色器程序黑盒执行的，对开发者来说是透明的，无法通过编程手段干预。但是我们需要明白有这么一个过程存在。"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"在之前章节的例子中，我们给出的顶点坐标都是基于屏幕坐标系，然后在顶点着色器中对顶点作简单转换处理，转变成 NDC 坐标。"}),"\n",(0,r.jsxs)(e.p,{children:["本节我们不着重讲解坐标系变换，而是为了讲解物体如何由三角形组成，所以会忽略",(0,r.jsx)(e.code,{children:"裁剪坐标系"}),"之前的一些坐标变换，在 JavaScript 中直接采用",(0,r.jsx)(e.code,{children:"裁剪坐标系坐标"}),"来表示顶点位置。"]}),"\n",(0,r.jsxs)(e.h2,{id:"如何用三角形构建正方体",children:["如何用三角形构建正方体",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#如何用三角形构建正方体",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"一个只包含坐标信息的立方体实际上是由 6 个正方形，每个正方形由两个三角形组成，每个三角形由三个顶点组成，所以一个立方体由 6 个正方形 * 2 个三角形 * 3 个顶点 = 36 个顶点组成，但是这 36个顶点中有很多是重复的，我们很容易发现：一个纯色立方体实际上由 6 个矩形面，或者 8 个不重复的顶点组成。"}),"\n",(0,r.jsxs)(e.p,{children:["请谨记，顶点的",(0,r.jsx)(e.code,{children:"重复与否"}),"，不只取决于顶点的坐标信息一致，还取决于该顶点所包含的其他信息是否一致。比如顶点纹理坐标 uv、顶点法线，顶点颜色等。一旦有一个信息不同，就必须用两个顶点来表示。"]}),"\n",(0,r.jsxs)(e.p,{children:["仍然以矩形举例，每个顶点只包含",(0,r.jsx)(e.code,{children:"坐标"}),"和",(0,r.jsx)(e.code,{children:"颜色"}),"两类信息。如果我们的矩形是纯色的，假设是红色。"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"//顶点信息\nvar positions = [\n    30, 30, 1, 0, 0, 1,    //V0\n    30, 300, 1, 0, 0, 1,   //V1\n    300, 300, 1, 0, 0, 1,  //V2\n    30, 30, 1, 0, 0, 1,    //V0\n    300, 300, 1, 0, 0, 1,  //V2\n    300, 30, 1, 0, 0, 1    //V3\n]\n"})}),"\n",(0,r.jsx)(e.p,{children:"很明显，V0 和 V2 这两个顶点坐标和颜色完全一致，所以，该顶点是重复的，我们可以忽略重复的顶点。"}),"\n",(0,r.jsxs)(e.p,{children:["同样地，还是这样一个矩形，每个顶点还是只包含坐标和颜色两类信息，我们想实现一个渐变矩形，从 ",(0,r.jsx)(e.code,{children:"V0 -> V1V2"})," 为红绿渐变，从",(0,r.jsx)(e.code,{children:"V1V2 -> V3"})," 为黄蓝渐变。\n如下图所示："]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)("img",{src:"data:image/webp;base64,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",alt:""}),"\n我们看一下顶点数组："]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"//顶点信息\nvar positions = [\n    30, 30, 1, 0, 0, 1,    //V0，红色\n    30, 300, 0, 1, 0, 1,   //V1，绿色\n    300, 300, 0, 1, 0, 1,  //V2，绿色\n    30, 30, 1, 1, 0, 1,  //V4，黄色\n    300, 300, 1, 1, 0, 1,//V5，黄色\n    300, 30, 0, 0, 1, 1    //V3，蓝色\n]\n"})}),"\n",(0,r.jsx)(e.p,{children:"可以看到，虽然 V0 和 V4，V2 和 V5 的顶点坐标一致，但是顶点颜色不一样，所以我们只能把他们当做不同的顶点处理，否则达不到我们想要的效果。"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["一定要理解",(0,r.jsx)(e.code,{children:"重复顶点"}),"的定义：两个顶点必须是所有信息一致，才可以称之为重复顶点。"]}),"\n"]}),"\n",(0,r.jsxs)(e.h2,{id:"彩色立方体",children:["彩色立方体",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#彩色立方体",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"为了在视觉层面区分出立方体的各个面，接下来我们绘制一个彩色立方体。"}),"\n",(0,r.jsxs)(e.p,{children:["立方体是 3 维形体，所以它们的顶点坐标需要从 2 维扩展成 3 维，除了 ",(0,r.jsx)(e.code,{children:"x、y"})," 坐标，还需要深度值： ",(0,r.jsx)(e.code,{children:"z"})," 轴坐标。"]}),"\n",(0,r.jsxs)(e.h3,{id:"代码调整",children:["代码调整",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#代码调整",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"本节代码组织上和之前章节有所不同，主要有以下两点："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"顶点属性不再使用一个 buffer 混合存储，改为每个属性对应一个 buffer，便于维护。"}),"\n",(0,r.jsx)(e.li,{children:"顶点坐标我们不再使用屏幕坐标系，而是采用 NDC 坐标系。如果使用屏幕坐标系，会涉及到相对复杂的坐标系变换，大家可能不容易理解。"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"我们还是按照之前的套路："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"定义顶点"}),"\n",(0,r.jsx)(e.li,{children:"传递数据"}),"\n",(0,r.jsx)(e.li,{children:"执行绘制。"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"首先定义顶点，由于立方体包含六个面，每个面采用同一个颜色，所以我们需要定义 6 个矩形面 * 4 个顶点 = 24 个不重复的顶点。"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"    //正方体 8 个顶点的坐标信息\nlet zeroX = 0.5;\nlet zeroY = 0.5;\nlet zeroZ = 0.5;\nlet positions = [\n    [-zeroX, -zeroY, zeroZ],  //V0\n    [zeroX, -zeroY, zeroZ],  //V1\n    [zeroX, zeroY, zeroZ],   //V2\n    [-zeroX, zeroY, zeroZ],  //V3\n    [-zeroX, -zeroY, -zeroZ],//V4\n    [-zeroX, zeroY, -zeroZ], //V5\n    [zeroX, zeroY, -zeroZ],  //V6\n    [zeroX, -zeroY, -zeroZ]  //V7\n]\n"})}),"\n",(0,r.jsx)(e.p,{children:"接下来定义六个面包含的顶点索引："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const CUBE_FACE_INDICES = [\n  [0, 1, 2, 3], //前面\n  [4, 5, 6, 7], //后面\n  [0, 3, 5, 4], //左面\n  [1, 7, 6, 2], //右面\n  [3, 2, 6, 5], //上面\n  [0, 4, 7, 1] // 下面\n];\n"})}),"\n",(0,r.jsx)(e.p,{children:"定义六个面的颜色信息："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const FACE_COLORS = [\n    [1, 0, 0, 1], // 前面，红色\n    [0, 1, 0, 1], // 后面，绿色\n    [0, 0, 1, 1], // 左面，蓝色\n    [1, 1, 0, 1], // 右面，黄色\n    [1, 0, 1, 1], // 上面，品色\n    [0, 1, 1, 1]  // 下面，青色\n]\n"})}),"\n",(0,r.jsx)(e.p,{children:"有了顶点坐标和颜色信息，接下来我们写一个方法生成立方体的顶点属性。\n该方法接收三个参数：宽度、高度、深度，返回一个包含组成立方体的顶点坐标、颜色、索引的对象。"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"function createCube(width, height, depth) {\n  let zeroX = width / 2;\n  let zeroY = height / 2;\n  let zeroZ = depth / 2;\n\n  let cornerPositions = [\n    [-zeroX, -zeroY, -zeroZ],\n    [zeroX, -zeroY, -zeroZ],\n    [zeroX, zeroY, -zeroZ],\n    [-zeroX, zeroY, -zeroZ],\n    [-zeroX, -zeroY, zeroZ],\n    [-zeroX, zeroY, zeroZ],\n    [zeroX, zeroY, zeroZ],\n    [zeroX, -zeroY, zeroZ]\n  ];\n  let colorInput = [\n    [255, 0, 0, 1],\n    [0, 255, 0, 1],\n    [0, 0, 255, 1],\n    [255, 255, 0, 1],\n    [0, 255, 255, 1],\n    [255, 0, 255, 1]\n  ];\n\n  let colors = [];\n  let positions = [];\n  var indices = [];\n\n  for (let f = 0; f < 6; ++f) {\n    let faceIndices = CUBE_FACE_INDICES[f];\n    let color = colorInput[f];\n    for (let v = 0; v < 4; ++v) {\n      let position = cornerPositions[faceIndices[v]];\n      positions = positions.concat(position);\n      colors = colors.concat(color);\n    }\n    let offset = 4 * f;\n    indices.push(offset + 0, offset + 1, offset + 2);\n    indices.push(offset + 0, offset + 2, offset + 3);\n  }\n  indices = new Uint16Array(indices);\n  positions = new Float32Array(positions);\n  colors = new Float32Array(colors);\n  return {\n    positions: positions,\n    indices: indices,\n    colors: colors\n  };\n} \n\n"})}),"\n",(0,r.jsx)(e.p,{children:"有了生成立方体顶点的方法，我们生成一个边长为 1 的正方体："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"var cube = createCube(1, 1, 1);\n"})}),"\n",(0,r.jsx)(e.p,{children:"拿到了顶点的信息，就可以用我们熟悉的索引绘制方法来进行绘制了，这部分代码和之前一样，我们就不写了，看下效果："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:l,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"看到这个红色矩形，有的同学或许有疑问了："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"我们定义的立方体的边长都是 1 ，也就是一个正方体，每个面应该是正方形，为什么渲染到屏幕后就成长方形了？"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"如何才能看到立方体的其他表面？"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.h4,{id:"第一个问题的答案",children:["第一个问题的答案",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#第一个问题的答案",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["这是因为，我们给 gl_Position 赋的坐标，在 渲染到屏幕之前，GPU 还会对其做一次坐标变换：",(0,r.jsx)(e.code,{children:"视口变换"}),"。该变换会将 NDC 坐标转换成对应设备的视口坐标。"]}),"\n",(0,r.jsx)(e.p,{children:"假设有一顶点 P（0.5，0.5，0.5，1）， gl_Position 接收到坐标后，会经历如下阶段："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["首先执行透视除法，将顶点 P 的坐标从裁剪坐标系转换到 NDC 坐标系，转换后的坐标为： ",(0,r.jsx)(e.code,{children:"P1（0.5 / 1, 0.5 / 1, 0.5 / 1, 1 / 1）"}),"。由于 w 分量是 1， 所以 P1 和 P 的坐标一致。"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"接着，GPU 将顶点渲染到屏幕之前，对顶点坐标执行视口变换。假设我们的 canvas 视口宽度 300，高度 400，顶点坐标在 canvas 中心。那么 3D 坐标转换成 canvas 坐标的算法是:"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"canvas 坐标系 X 轴坐标 = NDC 坐标系下 X 轴坐标 * 300 / 2 = 0.5 * 150 = 75"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"canvas 坐标系 Y 轴坐标 = NDC 坐标系下 Y 轴坐标 * 400 / 2 = 0.5 * 200 = 100"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"所以会有一个问题，立方体的每个面宽度和高度虽然都是 1 ，但是渲染效果会随着显示设备的尺寸不同而不同。"}),"\n",(0,r.jsxs)(e.p,{children:["这个问题该如何解决呢？这就引出了 WebGL 坐标系的一个重要变换：",(0,r.jsx)(e.code,{children:"投影变换"}),"。"]}),"\n",(0,r.jsxs)(e.h4,{id:"第二个问题的答案",children:["第二个问题的答案",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#第二个问题的答案",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["因为我们绘制的是立方体，没有施加动画效果，所以我们只能看到立方体前表面，那如何看到其他表面呢？大家稍微一想就能知道，我们可以让立方体转动起来，转起来之后我们就能看到其他表面了。\n那如何让立方体转动起来呢？\n这就引出了 WebGL 坐标系的另一个重要变换：",(0,r.jsx)(e.code,{children:"模型变换"}),"。"]}),"\n",(0,r.jsx)(e.p,{children:"针对这两个问题的解决方案是对顶点施加投影和模型变换，本节我们采用业界常用的变换算法，暂时不做算法原理的讲解，只讲如何使用，让我们的正方体可以正常渲染并且能转动起来。"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"请谨记：每个转换可以用一个矩阵来表示，转换矩阵相乘，得出的最终矩阵用来表示组合变换。大家先记住这点，在中级进阶中的数学矩阵及运算中我会详细讲解。"}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"让立方体转动起来",children:["让立方体转动起来。",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#让立方体转动起来",children:"#"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["引入",(0,r.jsx)(e.code,{children:"模型变换"}),"让立方体可以转动，以便我们能观察其他表面。"]}),"\n",(0,r.jsxs)(e.li,{children:["引入",(0,r.jsx)(e.code,{children:"投影变换"}),"让我们的正方体能够以正常比例渲染到目标设备，不再随视口的变化而拉伸失真。"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["为了引入这两个变换，我们需要引入",(0,r.jsx)(e.code,{children:"矩阵乘法"}),"、",(0,r.jsx)(e.code,{children:"绕 X 轴旋转"}),"、",(0,r.jsx)(e.code,{children:"绕 Y 轴旋转"}),"、",(0,r.jsx)(e.code,{children:"正交投影"}),"四个方法，如下："]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"//返回一个单位矩阵\nfunction identity() {}\n//计算两个矩阵的乘积，返回新的矩阵。\nfunction multiply(matrixLeft, matrixRight){}\n//绕 X 轴旋转一定角度，返回新的矩阵。\nfunction rotationX(angle) {}\n//绕 Y 轴旋转一定角度，返回新的矩阵。\nfunction rotateY(m, angle) {}\n//正交投影，返回新的矩阵\nfunction ortho(left, right, bottom, top, near, far, target) {}\n"})}),"\n",(0,r.jsx)(e.p,{children:"在顶点着色器中定义一个变换矩阵，用来接收 JavaScript 中传过来的模型投影变换矩阵，同时将变换矩阵左乘顶点坐标。"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-glsl",children:"    // 接收顶点坐标 (x, y, z)\n    precision mediump float;\n    attribute vec3 a_Position;\n    attribute vec4 a_Color;\n    varying vec4 v_Color;\n    uniform mat4 u_Matrix;\n    void main(){\n      gl_Position =  u_Matrix * vec4(a_Position, 1);\n      v_Color = a_Color;\n    }\n"})}),"\n",(0,r.jsx)(e.p,{children:"增加旋转动画效果：每隔 50 ms 分别绕 X 轴和 Y 轴转动 1 度，然后将旋转对应的矩阵传给顶点着色器。"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"//生成单位矩阵\nvar initMatrix = matrix.identify();\nvar currentMatrix = null;\nvar xAngle = 0;\nvar yAngle = 0;\nvar deg = Math.PI / 180;\nfunction animate(e) {\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n      } else {\n        timer = setInterval(() => {\n          xAngle += 1;\n          yAngle += 1;\n          \n          currentMatrix = matrix.rotationX(deg * xAngle);\n          currentMatrix = matrix.rotateY(currentMatrix, deg * yAngle);\n          gl.uniformMatrix4fv(u_Matrix, false, currentMatrix);\n          render(gl);\n        }, 50);\n      }\n    }\n\n"})}),"\n",(0,r.jsx)(e.p,{children:"我们看下效果："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,r.jsx)(e.p,{children:"可以看到，渲染画面不再只是一幅静态的平面了，而是一个能够自由转动的立方体。"}),"\n",(0,r.jsx)(e.p,{children:"立方体的构建比较简单，我们看下如何使用三角面构建球体。"}),"\n",(0,r.jsxs)(e.h2,{id:"如何用三角面构建球体",children:["如何用三角面构建球体",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#如何用三角面构建球体",children:"#"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-!",children:"我们学会了使用三角面构建立方体，那么球体该如何用三角面组成呢？\n"})}),"\n",(0,r.jsx)(e.p,{children:"我们可以将球体按照纬度等分成 n 份，形成 n 个圆面，每个圆面的 Y 坐标都相同，然后将每个圆面按照经度划分成 m 份，形成 m 个顶点，这 m 个顶点的 Y 坐标也都相同。按照这个逻辑，我们思考下球体的顶点生成过程："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"function createSphere(radius, divideByYAxis, divideByCircle) {\n  let yUnitAngle = Math.PI / divideByYAxis;\n  let circleUnitAngle = (Math.PI * 2) / divideByCircle;\n  let positions = [];\n  for (let i = 0; i <= divideByYAxis; i++) {\n    let yValue = radius * Math.cos(yUnitAngle * i);\n    let yCurrentRadius = radius * Math.sin(yUnitAngle * i);\n\n    for (let j = 0; j <= divideByCircle; j++) {\n      let xValue = yCurrentRadius * Math.cos(circleUnitAngle * j);\n      let zValue = yCurrentRadius * Math.sin(circleUnitAngle * j);\n      positions.push(xValue, yValue, zValue);\n    }\n  }\n\n  let indices = [];\n  let circleCount = divideByCircle + 1;\n  for (let j = 0; j < divideByCircle; j++) {\n    for (let i = 0; i < divideByYAxis; i++) {\n      indices.push(i * circleCount + j);\n      indices.push(i * circleCount + j + 1);\n      indices.push((i + 1) * circleCount + j);\n\n      indices.push((i + 1) * circleCount + j);\n      indices.push(i * circleCount + j + 1);\n      indices.push((i + 1) * circleCount + j + 1);\n    }\n  }\n  return {\n    positions: new Float32Array(positions),\n    indices: new Uint16Array(indices)\n  };\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"通过这个函数，我们得到了一个顶点对象，该对象包含所有顶点的坐标信息和索引信息。接下来我们为球体的每个三角面增加颜色信息。"}),"\n",(0,r.jsxs)(e.p,{children:["我们知道，如果一个顶点的坐标相同，颜色不同的话，也必须视为两个顶点，否则会产生渐变颜色。因此，我们目前得到的球体的顶点仅仅坐标相同，如果我们要为每一个三角面绘制一种颜色的话，需要额外增加顶点，且不再使用",(0,r.jsx)(e.code,{children:"索引绘制"}),"，而是采用",(0,r.jsx)(e.code,{children:"顶点数组绘制"}),"。"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"function transformIndicesToUnIndices(vertex) {\n  let indices = vertex.indices;\n  let vertexsCount = indices.length;\n  let destVertex = {};\n\n  Object.keys(vertex).forEach(function(attribute) {\n    if (attribute == 'indices') {\n      return;\n    }\n    let src = vertex[attribute];\n    let elementsPerVertex = getElementsCountPerVertex(attribute);\n    let dest = [];\n    let index = 0;\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = 0; j < elementsPerVertex; j++) {\n        dest[index] = src[indices[i] * elementsPerVertex + j];\n        index++;\n      }\n    }\n    let type = getArrayTypeByAttribName();\n    destVertex[attribute] = new type(dest);\n  });\n  return destVertex;\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"该方法将我们第一步获取的球体顶点数组展开，得到所有三角形的顶点对象。"}),"\n",(0,r.jsx)(e.p,{children:"接着，我们可以为顶点施加颜色了。"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"function createColorForVertex(vertex) {\n  let vertexNums = vertex.positions;\n  let colors = [];\n  let color = {\n    r: 255,\n    g: 0,\n    b: 0\n  };\n\n  for (let i = 0; i < vertexNums.length; i++) {\n    if (i % 36 == 0) {\n      color = randomColor();\n    }\n    colors.push(color.r, color.g, color.b, 255);\n  }\n\n  vertex.colors = new Uint8Array(colors);\n  return vertex;\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"生成球体顶点、增加三角面颜色这两个关键步骤做完之后，我们就可以执行绘制操作了，看下绘制后的效果："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,r.jsxs)(e.h2,{id:"构建椎体柱体台体",children:["构建椎体、柱体、台体",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#构建椎体柱体台体",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"椎体、柱体、台体可以归为一类构建方法，因为他们都受上表面、下表面、高度这三个因素的影响。\n按照这种思路，我们再思考下它们的构建方法："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"定义上表面的半径：topRadius。"}),"\n",(0,r.jsx)(e.li,{children:"定义下表面的半径：bottomRadius。"}),"\n",(0,r.jsx)(e.li,{children:"定义高度：height。"}),"\n",(0,r.jsx)(e.li,{children:"定义横截面的切分数量：bottomDivide。"}),"\n",(0,r.jsx)(e.li,{children:"定义垂直方向的切分数量：verticalDivide。"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"生成算法如下："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"function createCone(\n  topRadius,\n  bottomRadius,\n  height,\n  bottomDivide,\n  verticalDivide\n) {\n    \n  let vertex = {};\n  let positions = [];\n  let indices = [];\n\n  for (let i = -1; i <= verticalDivide + 1; i++) {\n    let currentRadius = 0;\n    if (i > verticalDivide) {\n      currentRadius = topRadius;\n    } else if (i < 0) {\n      currentRadius = bottomRadius;\n    } else {\n      currentRadius =\n        bottomRadius + (topRadius - bottomRadius) * (i / verticalDivide);\n    }\n    let yValue = (height * i) / verticalDivide - height / 2;\n    if (i == -1 || i == verticalDivide + 1) {\n      currentRadius = 0;\n      if (i == -1) {\n        yValue = -height / 2;\n      } else {\n        yValue = height / 2;\n      }\n    }\n\n    for (let j = 0; j <= bottomDivide; j++) {\n      let xValue = currentRadius * Math.sin((j * Math.PI * 2) / bottomDivide);\n      var zValue = currentRadius * Math.cos((j * Math.PI * 2) / bottomDivide);\n      positions.push(xValue, yValue, zValue);\n    }\n  }\n\n  // indices\n  let vertexCountPerRadius = bottomDivide + 1;\n  for (let i = 0; i < verticalDivide + 2; i++) {\n    for (let j = 0; j < bottomDivide; j++) {\n      indices.push(i * vertexCountPerRadius + j);\n      indices.push(i * vertexCountPerRadius + j + 1);\n      indices.push((i + 1) * vertexCountPerRadius + j + 1);\n\n      indices.push(\n        vertexCountPerRadius * (i + 0) + j,\n        vertexCountPerRadius * (i + 1) + j + 1,\n        vertexCountPerRadius * (i + 1) + j\n      );\n    }\n  }\n\n  vertex.positions = new Float32Array(positions);\n  vertex.indices = new Uint16Array(indices);\n  return vertex;\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"当我们定义上表面的半径为 0 时，得出的形体是椎体："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"let coneVertex = createCone(6, 0, 12, 12, 12);\n"})}),"\n",(0,r.jsx)(e.p,{children:"效果如下："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,r.jsx)(e.p,{children:"当我们定义上表面和下表面的半径相同，且都不为 0  时，得出的形体是柱体："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"let coneVertex = createCone(4, 4, 12, 12, 12);\n"})}),"\n",(0,r.jsx)(e.p,{children:"效果如下："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,r.jsx)(e.p,{children:"当我们定义上表面和下表面的半径不同，且都不为 0  时，得出的形体是台体（也可以称为棱锥体）："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"let coneVertex = createCone(6, 3, 12, 12, 12);\n"})}),"\n",(0,r.jsx)(e.p,{children:"效果如下："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,r.jsxs)(e.h2,{id:"回顾",children:["回顾",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#回顾",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["本节主要教大家掌握使用普通三角面构建复杂形体的思路，顺便让大家简单了解",(0,r.jsx)(e.code,{children:"投影变换"}),"和",(0,r.jsx)(e.code,{children:"模型变换"}),"的用法（详细的变换我们在中级进阶深入讲解）。"]}),"\n",(0,r.jsx)(e.p,{children:"下一节，我们将绘制方法封装一下，练习绘制多个模型。"})]})}function t(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,s.ah)(),n.components);return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}let o=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["WebGL%20%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E8%B7%B5%2F8.%E5%88%9D%E7%BA%A7%E5%85%A5%E9%97%A8%20---%20%E7%BB%98%E5%88%B6%E7%AB%8B%E6%96%B9%E4%BD%93%E3%80%81%E7%90%83%E4%BD%93%E3%80%81%E6%A4%8E%E4%BD%93%EF%BC%9A%E5%A6%82%E4%BD%95%E7%94%A8%E5%9F%BA%E6%9C%AC%E5%9B%BE%E5%BD%A2%E6%9E%84%E5%BB%BA%E8%A7%84%E5%88%99%E5%BD%A2%E4%BD%93.md"]={toc:[{text:"目标",id:"目标",depth:2},{text:"WebGL 坐标系",id:"webgl-坐标系",depth:2},{text:"如何用三角形构建正方体",id:"如何用三角形构建正方体",depth:2},{text:"彩色立方体",id:"彩色立方体",depth:2},{text:"代码调整",id:"代码调整",depth:3},{text:"第一个问题的答案",id:"第一个问题的答案",depth:4},{text:"第二个问题的答案",id:"第二个问题的答案",depth:4},{text:"让立方体转动起来。",id:"让立方体转动起来",depth:3},{text:"如何用三角面构建球体",id:"如何用三角面构建球体",depth:2},{text:"构建椎体、柱体、台体",id:"构建椎体柱体台体",depth:2},{text:"回顾",id:"回顾",depth:2}],title:"8.初级入门 --- 绘制立方体、球体、椎体：如何用基本图形构建规则形体",headingTitle:"8.初级入门 --- 绘制立方体、球体、椎体：如何用基本图形构建规则形体",frontmatter:{}}}}]);