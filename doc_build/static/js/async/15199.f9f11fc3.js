"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["15199"],{12720:function(e,n,s){e.exports=s.p+"static/image/b39d2c1c360e6a9ec883c01b56c78b49.0bcaaa51.webp"},673715:function(e,n,s){s.r(n),s.d(n,{default:()=>I});var c=s(552676),d=s(740453);let i=s.p+"static/image/de9be29f9bfa64417e07b69bf0da8a16.89d8c9ac.webp",a=s.p+"static/image/cc489fbe4a546780372d14617dbc7975.45f22d2b.webp",r=s.p+"static/image/a6ee67478c6138f94c936e200da471a8.e349db05.webp",t=s.p+"static/image/b4a80aa03b88b2969852ea21f0295d8c.88f68daf.webp",l=s.p+"static/image/93d526a5ddc35c2398608d4b4a88bc6e.eef33270.webp",p=s.p+"static/image/e84115aaeeb514802a31a6d8cd06248d.656a8076.webp",h=s.p+"static/image/07171a01ffbf4cd844eeec378c68e135.68a6b4eb.webp",j=s.p+"static/image/13a70cdf7ab1522d4d34510669bb4a1d.8e007154.webp",x=s.p+"static/image/a522264501a97717626c52c79ecd6992.399d4939.webp",b=s.p+"static/image/39f5c7bfd13885d01aa6eaff91a7e042.f8462df0.webp",o=s.p+"static/image/bed51c5c50694c8d4cc1c20de5ca32c2.dd6149d2.webp",f=s.p+"static/image/940e666110553376012c62fd7861fa11.ecccf7b2.webp",g=s.p+"static/image/500589c3612b88ae3a079ff67bfc47f5.3111cdc5.webp",m=s.p+"static/image/3ada2f42cfac7a8c58bdf006a8e6f25b.dd93a3ea.webp",w=s.p+"static/image/0b3bdb167b44db5fb2652f8b825fb9a4.55476b31.webp",v=s.p+"static/image/2e58b44a7063e887fdc4671abeaff67b.7df281ab.webp",u=s.p+"static/image/86bfb8dd218ade638a04a75292bc9622.c90ff2dc.webp",B=s.p+"static/image/233cbe9112217c08be7f814447ec4e40.8194d0bd.webp",A=s.p+"static/image/8dd6440301e6e1d57def753fb9e256dd.62e24051.webp",E=s.p+"static/image/6b12e830b431aae68007cf1d6e973b69.fadb0c9f.webp";var W=s(12720);let Q=s.p+"static/image/f6cf1efbcf9883856e65e5eb7dbca1a7.8832cb5f.webp",T=s.p+"static/image/c9625d7d6125f3c7f87a3cc54e5c7315.889de8c9.webp",q=s.p+"static/image/90fad1ec0598d5cadd92dd508b8d7a02.e64479b1.webp",k=s.p+"static/image/842f032d4338bb2c9b4a6c961d83f05f.a1453729.webp",C=s.p+"static/image/da5d890f911e807158471bed0d7e87ba.f6229258.webp",P=s.p+"static/image/24c9293dd0f177e813e62c5db02e7335.b67ce66d.webp",S=s.p+"static/image/e5ae1fec442c97445bc4206a7303a5a0.c45b8142.webp",V=s.p+"static/image/89947cf0234242d3ff688340c4581777.844b44a0.webp",O=s.p+"static/image/3fd6084a096fcb6ddb43fb556eef1df0.99f9b4ca.webp",X=s.p+"static/image/08221a7f5e64b80751f593ad8c2d3a7c.73e449aa.webp",Z=s.p+"static/image/60746bf083e260632b87592facdd04a5.a2bfdc50.webp",y=s.p+"static/image/2e5faa9d2b433184e311058984e28645.0c1bc4f4.webp";function N(e){let n=Object.assign({h1:"h1",a:"a",p:"p",img:"img",pre:"pre",code:"code",h2:"h2"},(0,d.ah)(),e.components);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.h1,{id:"7-如何调试-nest-项目",children:["7. 如何调试 Nest 项目",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#7-如何调试-nest-项目",children:"#"})]}),"\n",(0,c.jsx)(n.p,{children:"不少同学都是用 console.log 调试的，哪怕工作很多年依然是这样，这样有个致命的缺点："}),"\n",(0,c.jsx)(n.p,{children:"你只能看到某个点的变量值，而看不到代码的整个执行路线。"}),"\n",(0,c.jsx)(n.p,{children:"对于复杂的项目来说，会用断点调试是必须的，因为这样可以看到作用域、调用栈，也就是代码的执行路线，然后单步运行来看变量的变化。"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:y,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"所以这一节我们来学下如何调试 nest 项目。"}),"\n",(0,c.jsx)(n.p,{children:"首先，先看下 node 调试："}),"\n",(0,c.jsx)(n.p,{children:"创建个项目："}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"mkdir debug-test\ncd debug-test\nnpm init -y\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:Z,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"添加 index.js"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:"const os = require('os');\n\nconst homedir = os.homedir();\n\nconsole.log(homedir);\n"})}),"\n",(0,c.jsx)(n.p,{children:"通过 os 模块拿到了 home 目录的路径。"}),"\n",(0,c.jsx)(n.p,{children:"直接 node 执行会输出结果："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,c.jsx)(n.p,{children:"我们以调试模式跑起来："}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"node --inspect-brk index.js\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:X,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"--inspect 是调试模式运行，而 --inspect-brk 还会在首行断住。"}),"\n",(0,c.jsx)(n.p,{children:"可以看到，它起了一个 ws 服务。"}),"\n",(0,c.jsx)(n.p,{children:"然后我们用调试客户端连上它，比如用 Chrome DevTools。"}),"\n",(0,c.jsxs)(n.p,{children:["打开 ",(0,c.jsx)(n.a,{href:"/chrome://inspect/",children:"chrome://inspect/"}),"，可以看到可以调试的目标："]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:O,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"如果没有，就配置下 network target，加上 localhost:9229"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:V,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"点击 inspect 就可以看到调试界面了："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:S,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"代码在首行断住了，右侧也可以看到作用域和调用栈。"}),"\n",(0,c.jsx)(n.p,{children:"可以单步调试："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:P,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"nest 也是 node 项目，自然也是这样来调试的。"}),"\n",(0,c.jsx)(n.p,{children:"nest start 有个 --debug 的选项，"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:C,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"原理就是 node --inspect。"}),"\n",(0,c.jsx)(n.p,{children:"这时候 inspect 发现啥也没："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:k,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"因为 --inspect 并不会和 --inspect-brk 一样在首行断住。"}),"\n",(0,c.jsx)(n.p,{children:"我们在 controller 里加个 debugger："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:q,alt:""})}),"\n",(0,c.jsxs)(n.p,{children:["然后访问下 ",(0,c.jsx)(n.a,{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer",children:"http://localhost:3000"})]}),"\n",(0,c.jsx)(n.p,{children:"这时候你会发现代码在断点处断住了："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:T,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"可以看到代码的整个执行路线："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:Q,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"这样，就可以调试 nest 项目了。"}),"\n",(0,c.jsx)(n.p,{children:"但是这样调试还是太麻烦，我们一般在 VSCode 里写代码，能不能直接在 VSCode 里边写代码边调试呢？"}),"\n",(0,c.jsx)(n.p,{children:"当然是可以的。"}),"\n",(0,c.jsx)(n.p,{children:"VSCode 也实现了 Debugger 的客户端。"}),"\n",(0,c.jsx)(n.p,{children:"点击调试面板的 create launch.json file，它会创建 .vscode/launch.json 的调试配置文件："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:W,alt:""})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:E,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"然后输入 node，快速创建一个 node 调试配置："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:A,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"我们先调试下前面那个 index.js 文件："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:B,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"stopOnEntry 是在首行断住，和 --inspect-brk 一样的效果。"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:u,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"这样，就可以在 vscode 里调试 node 代码了。"}),"\n",(0,c.jsx)(n.p,{children:"在 vscode 里调试代码，最爽的是可以边改代码边调试。"}),"\n",(0,c.jsx)(n.p,{children:"比如你调试的过程中修改了代码，然后点击重新调试，就可以马上看到改动之后的效果："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:v,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"调试体验就很棒！"}),"\n",(0,c.jsx)(n.p,{children:"nest 自然也可以这样调试："}),"\n",(0,c.jsx)(n.p,{children:"还是 nest start --debug 来启动 nest 服务："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:w,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"添加一个 attach 类型的调试配置："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:m,alt:""})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:g,alt:""})}),"\n",(0,c.jsxs)(n.p,{children:["然后在 controller 里打个断点，访问 ",(0,c.jsx)(n.a,{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer",children:"http://localhost:3000"})]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:f,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"代码同样会在断点处断住。"}),"\n",(0,c.jsx)(n.p,{children:"这样就可以直接在 vscode 里打断点了。"}),"\n",(0,c.jsx)(n.p,{children:"不过如果是用 VSCode 调试，可以不用 nest start --debug，有更简便的方式："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:o,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"创建 npm scripts 的调试配置："}),"\n",(0,c.jsx)(n.p,{children:"（如果创建出的调试配置 type 是 pwa-node 也可以，和 node 类型差不多，据说 pwa-node 功能多一点）"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n    "type": "node",\n    "request": "launch",\n    "name": "debug nest",\n    "runtimeExecutable": "npm",\n    "args": [\n        "run",\n        "start:dev",\n    ],\n    "skipFiles": [\n        "<node_internals>/**"\n    ],\n    "console": "integratedTerminal",\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:"和我们命令行执行 npm run start:dev 一样。"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:b,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"这里的 runtimeExecutable 代表执行什么命令，args 传参数。"}),"\n",(0,c.jsx)(n.p,{children:"要指定 console 为 integratedTerminal，也就是用 vscode 的内置终端来打印日志，不然默认会用 debug console 跑，那个没有颜色："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:x,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"点击调试模式启动："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:j,alt:""})}),"\n",(0,c.jsxs)(n.p,{children:["然后浏览器访问 ",(0,c.jsx)(n.a,{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer",children:"http://localhost:3000"})]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:h,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"代码同样会在断点处断住。"}),"\n",(0,c.jsx)(n.p,{children:"这是最方便的调试 nest 项目的方式。"}),"\n",(0,c.jsx)(n.p,{children:"最后，介绍几种断点的类型，也是挺常用的："}),"\n",(0,c.jsx)(n.p,{children:"有的时候只想打印日志，不想断住，又不想加 console.log 污染代码，这时候可以用 logpoint："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:p,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"右键选择 logpoint："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:l,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"输入打印的信息，变量用 {} 包裹。"}),"\n",(0,c.jsx)(n.p,{children:"代码执行到这里就会打印："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:t,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"这样适合不需要断住，但想打印日志的情况。不用在代码里加 console.log。"}),"\n",(0,c.jsx)(n.p,{children:"再就是条件断点："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:r,alt:""})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:a,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"表达式成立才会断住。"}),"\n",(0,c.jsx)(n.p,{children:"再就是异常断点，可以在没有处理的异常处自动断住："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:i,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"这些断点类型只要有个印象，用到的时候能想起来就行。"}),"\n",(0,c.jsxs)(n.h2,{id:"总结",children:["总结",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,c.jsx)(n.p,{children:"复杂的代码需要用断点调试查看调用栈和作用域，也就是代码的执行路线，然后单步执行。"}),"\n",(0,c.jsx)(n.p,{children:"node 代码可以加上 --inspect 或者 --inspect-brk 启动调试 ws 服务，然后用 Chrome DevTools 或者 vscode debugger 连上来调试。"}),"\n",(0,c.jsx)(n.p,{children:"nest 项目的调试也是 node 调试，可以使用 nest start --debug 启动 ws 服务，然后在 vscode 里 attach 上来调试，也可以添加个调试配置来运行 npm run start:dev。"}),"\n",(0,c.jsx)(n.p,{children:"nest 项目最方便的调试方式还是在 VSCode 里添加 npm run start:dev 的调试配置。"}),"\n",(0,c.jsx)(n.p,{children:"此外，我们还理解了 logpoint、条件断点、异常断点等断点类型。"}),"\n",(0,c.jsx)(n.p,{children:"学会了 nest 项目的调试，就可以直接在代码里打断点了。"})]})}function U(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.ah)(),e.components);return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(N,{...e})}):N(e)}let I=U;U.__RSPRESS_PAGE_META={},U.__RSPRESS_PAGE_META["Nest%20%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%20%20%E6%9C%80%E6%96%B0200%E7%AB%A0%2F7.%20%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%20Nest%20%E9%A1%B9%E7%9B%AE.md"]={toc:[{text:"总结",id:"总结",depth:2}],title:"7. 如何调试 Nest 项目",headingTitle:"7. 如何调试 Nest 项目",frontmatter:{}}}}]);