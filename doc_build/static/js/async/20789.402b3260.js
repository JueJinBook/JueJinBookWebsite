"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["20789"],{11250:function(e,n,r){r.r(n),r.d(n,{default:()=>V});var i=r(552676),s=r(740453);let a=r.p+"static/image/8a700431a55835d45967446ad04cfd5c.655d3c9c.webp",c=r.p+"static/image/ce55b8620b8ba56d6e0ece8ff6acb49c.e402a86b.webp",o=r.p+"static/image/8924eb0f1a0333ee78ad585cf7677062.e8275c36.webp",l=r.p+"static/image/49e0153109e3e96e7be73808f970aa34.389b2986.webp",d=r.p+"static/image/9b0f0024b9ea6a789bab5c3d50231bfc.b0bc7425.webp",t=r.p+"static/image/a63759edbd8b91fe7cfd45f009b2d351.08ed730a.webp",h=r.p+"static/image/8a78603ad9a379c9213d48064c5dc482.16310714.webp",p=r.p+"static/image/50db1df2df93a4fe663a01a490e34a84.77809728.webp",x=r.p+"static/image/276a257301fdfaf47ee45cbfa22d5e57.139cb04f.webp",g=r.p+"static/image/161a8a3bcc2be6da6840d13634aaebd5.089cb71a.webp",j=r.p+"static/image/ed4416216af4a735f5d3b2198dddda84.4edf87a7.webp",A=r.p+"static/image/9677a173271b8f1f16431a4715c22011.c8305909.webp",u=r.p+"static/image/e523c2b04856e3474f3f58d96759c58a.8db0e927.webp",b=r.p+"static/image/c185be0ddbdd61d10f93488bb9e3398b.826e2137.webp",m=r.p+"static/image/717d1e9087a2a976a9b9ae1586cba85e.08eb5cd4.webp",f=r.p+"static/image/4f0cf2fa34b0666dd9a755ce890fb0c1.c459068f.webp",C=r.p+"static/image/8f288ba6a874381758e2e247af9c0f7c.f46fe004.webp",S=r.p+"static/image/175789cb41c5e5a5677d21965d79f90c.fd523b32.webp",k=r.p+"static/image/d7edc6d850b85953d2586740fed68ac9.02f71dff.webp",y=r.p+"static/image/0bb1257f8edf177d0b317ea509e7bc08.4f08c8d9.webp",q=r.p+"static/image/b03e99dc2a073c7115e785e700fa2b7e.3638f47d.webp",Q=r.p+"static/image/12031c67cf1791c19047647b17874f5e.33b87d75.webp",v=r.p+"static/image/4f71b9b03259162e6a3197d8ae0958ae.b40d4ebe.webp",I=r.p+"static/image/ed305272519266d7e8d06d28ae96c784.54a6c42b.webp",w=r.p+"static/image/a6be5b88e765dad209a98f215fd7d39e.bf917242.webp";function E(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",strong:"strong",h2:"h2",pre:"pre",img:"img",blockquote:"blockquote",ul:"ul",li:"li",h3:"h3"},(0,s.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"第36章css自定义属性property",children:["第36章—CSS自定义属性：@property",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#第36章css自定义属性property",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["\uFEFF我们花了两节课（《",(0,i.jsx)(n.a,{href:"https://juejin.cn/book/7223230325122400288/section/7249357815410589733",target:"_blank",rel:"noopener noreferrer",children:"24 | CSS 自定义属性你知道多少"}),"》和《",(0,i.jsx)(n.a,{href:"https://juejin.cn/book/7223230325122400288/section/7252964839705247755",target:"_blank",rel:"noopener noreferrer",children:"25 | CSS 自定义属性可以用来做些什么"}),"》）的篇幅介绍了 CSS 自定义属性的特性和使用场景。从这两节课中可以体会到 CSS 自定义属性的强大之处，但原生的 CSS 自定义属性也存在一定的局限性，比如无法定义自定义属性的类型，比如在 ",(0,i.jsx)(n.code,{children:"@keyframes"})," 中无法直接使用原生的自定义属性。庆幸的是，",(0,i.jsx)(n.a,{href:"https://css-houdini.rocks/",target:"_blank",rel:"noopener noreferrer",children:"CSS Houdini "}),"所提供的 ",(0,i.jsx)(n.code,{children:"@property"})," 规则补齐了这方面的短板，",(0,i.jsx)(n.strong,{children:"它允许 Web 开发者显式地定义他们的 CSS 自定义属性，而且允许进行属性类型检查、设定默认值以及定义该自定义属性是否可以被继承"}),"。"]}),"\n",(0,i.jsxs)(n.p,{children:["那么，",(0,i.jsx)(n.code,{children:"@property"})," 如何使用呢？它又将给 CSS 带来哪些变化呢？接下来，我将尝试着使用一些案例向大家介绍 CSS 的 ",(0,i.jsx)(n.code,{children:"@property"})," 规则，希望大家能更好的掌握它，并且能将它运用于实际项目当中。"]}),"\n",(0,i.jsxs)(n.h2,{id:"回顾-css-自定义属性",children:["回顾 CSS 自定义属性",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#回顾-css-自定义属性",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["虽然小册已经花了两节课（《",(0,i.jsx)(n.a,{href:"https://juejin.cn/book/7223230325122400288/section/7249357815410589733",target:"_blank",rel:"noopener noreferrer",children:"24 | CSS 自定义属性你知道多少"}),"》和《",(0,i.jsx)(n.a,{href:"https://juejin.cn/book/7223230325122400288/section/7252964839705247755",target:"_blank",rel:"noopener noreferrer",children:"25 | CSS 自定义属性可以用来做些什么"}),"》）的篇幅介绍了 CSS 自定义属性的特性和使用场景，但这里还是花一点点时间，让大家回顾一下 CSS 自定义属性。"]}),"\n",(0,i.jsxs)(n.p,{children:["在 CSS 中，我们可以在任何代码块（",(0,i.jsx)(n.code,{children:"{}"})," 内）使用双折线（",(0,i.jsx)(n.code,{children:"--"}),"）定义一个 CSS 自定义属性，然后使用 ",(0,i.jsx)(n.code,{children:"var()"})," 函数来调用它。例如："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:":root {\n \xa0 \xa0--color: #09f;\n}\n​\n.element {\n \xa0 \xa0color: var(--color);\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"这是原生 CSS 自定义属性最基础的部分。"}),"\n",(0,i.jsx)(n.p,{children:"如果你阅读了小册前面关于 CSS 自定义属性的相关课程，那么对于 CSS 的利弊会有所了解。拿下面这个示例为例："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:w,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/eYbmgLZ",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/eYbmgLZ"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"在这个示例中就有 CSS 自定义属性的身影："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"img {\n \xa0 \xa0--a: 8deg; /* 控制旋转角度，越小效果越好 */\n \xa0 \xa0transform: perspective(400px) rotate3d(var(--r,1,-1),0,calc(var(--i,1)*var(--a)));\n \xa0 \xa0transition: .4s;\n}\n​\n.alt {\n \xa0 \xa0--r: 1,1;\n}\n​\nimg:hover {\n \xa0 \xa0--i: -1;\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"就上面这个示例而言，CSS 自定义属性使得我们的 CSS 代码变得更为简洁。这仅是 CSS 自定义属性好处之一。但 CSS 自定义属性也有相应的不足之处。例如，CSS 自定义属性没有严格的值类型，例如："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:":root {\n \xa0 \xa0--color: red;\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["在 CSS 中没有办法定义 ",(0,i.jsx)(n.code,{children:"--color"})," 值类型，大多数仅依赖于 Web 开发者自身对其进行约束，这就存在一定的风险，它有可能被运用于非 ",(0,i.jsx)(n.code,{children:"<color>"})," 值类型的属性上，例如："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:":root {\n \xa0 \xa0--color: red; /* Web 开发者认为它是 <color> 值类型 */\n}\n​\n.element {\n \xa0 \xa0width: var(--color); /* 它可能被运用于非 <color> 值类型的属性上 */\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["上面代码中，",(0,i.jsx)(n.code,{children:"--color"})," 被运用于非 ",(0,i.jsx)(n.code,{children:"<color>"})," 值类型的属性上，严格上来说，这样使用上没有任何意义的，因为 CSS 代码并不会生效，但它也不会报错，Web 开发者是无法感知到它的错误。"]}),"\n",(0,i.jsxs)(n.p,{children:["除此之外，CSS 原生自定义属性在一些场景中使用离你预期的效果会差很远很远，比如 ",(0,i.jsx)(n.code,{children:"@keyframes"})," 中 CSS 自定义属性："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:".box {\n \xa0 \xa0--offset: 0;\n \xa0 \xa0transform: translateX(var(--offset));\n \xa0 \xa0animation: moveBox 2s linear infinite;\n}\n​\n@keyframes moveBox {\n \xa0 \xa00% {\n \xa0 \xa0 \xa0 \xa0--offset: 0;\n \xa0  }\n \xa0\n \xa0 \xa050% {\n \xa0 \xa0 \xa0 \xa0--offset: 300px;\n \xa0  }\n \xa0 \xa0\n \xa0 \xa0100% {\n \xa0 \xa0 \xa0 \xa0--offset: 600px;\n \xa0  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["上面代码分别在不同的帧中调整了自定义属性 ",(0,i.jsx)(n.code,{children:"--offset"})," 的值，期望改变元素 ",(0,i.jsx)(n.code,{children:".box"})," 在 ",(0,i.jsx)(n.code,{children:"x"})," 轴的位移位置。这样做，元素 ",(0,i.jsx)(n.code,{children:".box"})," 是在 ",(0,i.jsx)(n.code,{children:"x"})," 轴移动了，但它整个效果非常的生硬："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:"data:image/webp;base64,UklGRkIEAABXRUJQVlA4IDYEAACQbQCdASrEA/ABPp1OpU4lpCOiIF64ALATiWlu4XdhH8AGgApgPkCYAKQAAB75QQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEChEweOUXKJoY8izs7EE4pbRcIMghqqTXbaLhBkENVSa7bRb6LsMRdhzEE4pbRcIMghqqTXbaLhBkENVSa7bRcG5dhiLsOYgnFLaLhBkENVSa7bRcIMghqqTXbaLg3Aun7W5RcoieaJSMw1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgxyAAA/v/OEExEiAQgAAAAAAAAAAAAAAAAAAAAAAAAAAGUTPllWyH9metO6YNjflJEbbDd59tP19n4hjL5Vv7YgA4gFtxan+OHi88VGS8cmUgWwUZ/zA+sG7s98oHb46l9h/JIm+WULJNTP38CDAe6ECR07RUAA2K7CgIIwNwnvZC34TD/bCJY2BBqJXWIx8JqjFSIW/Bv2QKtlMx0tsnZv+dPN+xY7UvGYQP8z0UAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/XWoJpvM",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/XWoJpvM"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"这样的效果不是你所期望的。"}),"\n",(0,i.jsxs)(n.p,{children:["而 CSS 的 ",(0,i.jsx)(n.code,{children:"@property"})," 可以很容易的做到这些，比如明确指定自定义属性的值类型，比如使得上面示例的动效变得更丝滑。"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@property --offset {\n \xa0 \xa0syntax: "<length-percentage>"; /* 指定自定义属性 --offset 值类型 */\n \xa0 \xa0inherits: true;\n \xa0 \xa0initial-value: 0px;\n}\n​\n.box {\n \xa0 \xa0--offset: 0;\n \xa0 \xa0transform: translateX(var(--offset));\n \xa0 \xa0animation: moveBox 2s linear infinite;\n}\n​\n@keyframes moveBox {\n \xa0 \xa00% {\n \xa0 \xa0 \xa0 \xa0--offset: 0;\n \xa0  }\n \xa0 \xa050% {\n \xa0 \xa0 \xa0 \xa0--offset: 300px;\n \xa0  }\n \xa0 \xa0100% {\n \xa0 \xa0 \xa0 \xa0--offset: 600px;\n \xa0  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:"data:image/webp;base64,UklGRtYEAABXRUJQVlA4IMoEAAAwbgCdASrMA9gBPp1Opk4lpKOiIFQIALATiWlu4XdhH9paY10/iA4gYdsE83Cn6O6qf0vuRFLB0FPghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXaki6iVHghqqTXbaLhBkENVSa7bRcIMghqqTXbaLfQ/uMa5KBLyn1IkG+8WBduIiodVSa7bRcIMghqqTXbaLhBkENVSa7bRb6Nlcc5QgqE02D6n652IJxS2i4QZBDVUmu20XCDIIaqk122i30KDPb1dkdne+RI6qk122i4QZBDVUmu20XCDIIaqk122iEoYY1z/bff57LVdOqpNdtouEGQQ1VJrttFwgyCGqpNdtouEL8yquEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgUAD+/9CXhxocAAAAAAAAAAAAAAAAAAAAAAAAAClnSSBxiqe0CY+dI6JkABaMAI7K2BdIIAuA1fAjeTNL941O4vubrtsHT2AEzf68AbD55et+BtzQhTmaLeij2aNTVyyFxdpfpv8Tlss/aoPuPtPqdFchbbmJJ3ANvkhrPJG10Y0+QiMx456pkQVPSIxXI+QjCJaexiKb5XWvO084d57wFsuOQNNKQCz2aFdvgHfYTFf7j/9x06oBuDpkoCrgTff/ETybz7V+trHJdqWMR6tnfevyNO1iAxUOkmbHLWp7OvVbzf29cWJ1R3crvEbdFcrOFsZCGpC3DZ08zYTqgC6YV3yOiATaSM4O9w/P30vp8ohAoCE5fn4xXgjI3o7FdDNOlBP4aupeyTsn3It531IzH2HzPwW5bs9q6fIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/mdayWya",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/mdayWya"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["我想你一定会对 ",(0,i.jsx)(n.code,{children:"@property"})," 感到好奇，甚至想一探其究竟。接下来，我们一起来探讨它！"]}),"\n",(0,i.jsxs)(n.h2,{id:"css-的--规则property",children:["CSS 的 @ 规则：@property",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#css-的--规则property",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["首先要说的是，",(0,i.jsx)(n.code,{children:"@property"})," 是 CSS 的 ",(0,i.jsx)(n.code,{children:"@"})," 规则之一，但它隶属于 CSS Houdini，它是 ",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css-properties-values-api-1/",target:"_blank",rel:"noopener noreferrer",children:"CSS Houdini 中的一个基础 API "}),"。"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:I,alt:"img"})}),"\n",(0,i.jsx)(n.p,{children:"它允许 Web 开发者显式地自定义他们的 CSS 自定义属性，并且允许对自定义属性进行属性类型检查、设定默认值（初始值）以及定义该自定义属性是否可被继承。"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["为了能和 CSS 原生自定义属性有所区分，我更喜欢称之为 ",(0,i.jsx)(n.strong,{children:"CSS Houdini 变量"}),"。在接下来的内容中，所提到的 CSS 自定义属性是指 CSS Houdini 定义的属性。"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"我们有两种方式可以用来声明（或者定义）一个 CSS 自定义属性："}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["在 ",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css-properties-values-api-1/#at-property-rule",target:"_blank",rel:"noopener noreferrer",children:"CSS 中使用 @property 规则来定义"})]}),"\n",(0,i.jsxs)(n.li,{children:["在 ",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css-properties-values-api-1/#registering-custom-properties",target:"_blank",rel:"noopener noreferrer",children:"JavaScript 中使用 CSS.registerProperty() 来定义"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"例如："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@property --custom-property-name {\n \xa0 \xa0syntax: "<color>";\n \xa0 \xa0inherits: false;\n \xa0 \xa0initial-value: #c0ffee;\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-JavaScript",children:'CSS.registerProperty({\n \xa0 \xa0name: "--custom-property-name",\n \xa0 \xa0syntax: "<color>",\n \xa0 \xa0inherits: false,\n \xa0 \xa0initialValue: "#c0ffee"\n});\n'})}),"\n",(0,i.jsx)(n.p,{children:"简单地解释一下："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:v,alt:"img"})}),"\n",(0,i.jsx)(n.p,{children:"其中："}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["紧跟 ",(0,i.jsx)(n.code,{children:"@property"})," 后的 ",(0,i.jsx)(n.code,{children:"--custom-property-name"})," 或者 ",(0,i.jsx)(n.code,{children:"CSS.registerProperty()"})," 中的 ",(0,i.jsx)(n.code,{children:"name"})," 的值 ",(0,i.jsx)(n.code,{children:"--custom-property-name"})," 就是自定义属性的名称，它的命名方式和原生 CSS 自定义属性命名方式相同，必须以双折线（",(0,i.jsx)(n.code,{children:"--"}),"）为前缀。命名好的自定义属性就可以通过 CSS 的 ",(0,i.jsx)(n.code,{children:"var()"})," 函数进行引用，即 ",(0,i.jsx)(n.code,{children:"var(--custom-property-name)"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"syntax"})," 用来指定自定义属性的语法规则，即自定义属性的值类型，例如 ",(0,i.jsx)(n.code,{children:"<color>"})," 、",(0,i.jsx)(n.code,{children:"<length>"})," 等。",(0,i.jsx)(n.strong,{children:"它是定义自定义属性的必须描述符"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inherits"})," 用来指定自定义属性是否允许被继承，即自定义属性是否为继承属性，如果值为 ",(0,i.jsx)(n.code,{children:"true"})," 表示该自定义属性是可继承属性，如果值为 ",(0,i.jsx)(n.code,{children:"false"})," 表示该自定义属性是非可继承属性。",(0,i.jsx)(n.strong,{children:"它是定义自定义属性的必须描述符"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"initial-value"})," 或 ",(0,i.jsx)(n.code,{children:"initialValue"})," 用来指定自定义属性的初始值，比如上面示例中的 ",(0,i.jsx)(n.code,{children:"#c0ffee"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"上面这些参数和 W3C 规范中的属性定义是非常相似的，例如："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:Q,alt:"img"})}),"\n",(0,i.jsxs)(n.p,{children:["在这几个参数中，",(0,i.jsx)(n.code,{children:"syntax"})," 可取的值比较多，基本上涵盖了 CSS 的值类型："]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<length>"})})," ：任何有效的",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css3-values/#length-value",target:"_blank",rel:"noopener noreferrer",children:"长度值"}),"，例如 ",(0,i.jsx)(n.code,{children:"10px"})," ，",(0,i.jsx)(n.code,{children:"10vw"})," 等"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<number>"})})," ：任何有效的",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css3-values/#number-value",target:"_blank",rel:"noopener noreferrer",children:"数字值"}),"，例如 ",(0,i.jsx)(n.code,{children:"1"})," 、",(0,i.jsx)(n.code,{children:"1000"})," 等"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<percentage>"})})," ：任何有效的",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css3-values/#percentage-value",target:"_blank",rel:"noopener noreferrer",children:"百分比值"}),"，例如 ",(0,i.jsx)(n.code,{children:"10%"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<length-percentage>"})})," ：任何有效的长度值（",(0,i.jsx)(n.code,{children:"<length>"}),"）或百分比值（",(0,i.jsx)(n.code,{children:"<percentage>"}),"），例如 ",(0,i.jsx)(n.code,{children:"10px"})," 或 ",(0,i.jsx)(n.code,{children:"10%"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<color>"})})," ：任何有效的",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css-color-3/#valuea-def-color",target:"_blank",rel:"noopener noreferrer",children:"颜色值"}),"，例如 ",(0,i.jsx)(n.code,{children:"red"})," 、",(0,i.jsx)(n.code,{children:"#fff"})," 、",(0,i.jsx)(n.code,{children:"rgb(0 0 0)"})," 等"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<image>"})})," ：任何有效的",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css3-images/#image-type",target:"_blank",rel:"noopener noreferrer",children:"图像值"}),"，例如 ",(0,i.jsx)(n.code,{children:"url()"})," 函数引入的图像，",(0,i.jsx)(n.code,{children:"<gradient>"})," （渐变）绘制的图像等"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<url>"})})," ：任何有效的 ",(0,i.jsx)(n.code,{children:"url 值"}),"，例如 ",(0,i.jsx)(n.code,{children:"url(star.png)"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<integer>"})})," ：任何有效的",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css3-values/#integer-value",target:"_blank",rel:"noopener noreferrer",children:"整数值"}),"，例如 ",(0,i.jsx)(n.code,{children:"1"})," 、",(0,i.jsx)(n.code,{children:"2"})," 等"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<angle>"})})," ：任何有效的",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css3-values/#angle-value",target:"_blank",rel:"noopener noreferrer",children:"角度值"}),"，例如 ",(0,i.jsx)(n.code,{children:"360deg"})," 、",(0,i.jsx)(n.code,{children:"400grad"})," 、",(0,i.jsx)(n.code,{children:"1rad"})," 和 ",(0,i.jsx)(n.code,{children:"1turn"})," 等"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<time>"})})," ：任何有效的",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css3-values/#time-value",target:"_blank",rel:"noopener noreferrer",children:"时间值"}),"，例如 ",(0,i.jsx)(n.code,{children:".2s"})," 、",(0,i.jsx)(n.code,{children:"200ms"})," 等"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<resolution>"})})," ：任何有效的",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css3-values/#resolution-value",target:"_blank",rel:"noopener noreferrer",children:"分辨率值"}),"，例如 ",(0,i.jsx)(n.code,{children:"dpi"}),"、",(0,i.jsx)(n.code,{children:"dpcm"})," 和 ",(0,i.jsx)(n.code,{children:"dppx"}),"等"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<transform-list>"})})," ：任何有效的",(0,i.jsx)(n.a,{href:"https://www.w3.org/TR/css-transforms-1/#typedef-transform-function",target:"_blank",rel:"noopener noreferrer",children:"变换函数"}),"，例如 ",(0,i.jsx)(n.code,{children:"rotate()"})," 、",(0,i.jsx)(n.code,{children:"translate()"})," 等"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<custom-ident>"})})," ：任何有效的 ",(0,i.jsx)(n.code,{children:"ident 值"}),"，例如 ",(0,i.jsx)(n.code,{children:"easing"})," 、",(0,i.jsx)(n.code,{children:"linear"})," 等"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"syntax"})," 可以接受一些特殊的类型定义："]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"+"})," （",(0,i.jsx)(n.code,{children:"U+002B"}),"）：接受以空格分隔的列表，例如 ",(0,i.jsx)(n.code,{children:"<length>+"})," ，表示接受以空格分隔的长度值（",(0,i.jsx)(n.code,{children:"<length>"}),"）列表"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"#"})," （",(0,i.jsx)(n.code,{children:"U+0023"})," ）：接受以逗号分隔的列表，例如 ",(0,i.jsx)(n.code,{children:"<color>#"})," ，表示接受以逗号分隔的颜色值（",(0,i.jsx)(n.code,{children:"<color>"}),"）列表"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"|"})," （",(0,i.jsx)(n.code,{children:"U+007C"})," ）：接受以竖线分隔的列表，例如 ",(0,i.jsx)(n.code,{children:"<length> | <lenthg>+"})," ，表示接受单个长度值（",(0,i.jsx)(n.code,{children:"<length>"}),"）或者以空格分隔的长度值列表"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["像下面这些，都是有效 ",(0,i.jsx)(n.code,{children:"syntax"})," 字符串："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'syntax: "<color>"; \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 /* 接收一个颜色值 */\nsyntax: "<length> | <percentage>"; /* 接收长度或百分比参数，但是二者之间不进行计算合并 */\nsyntax: "small | medium | large"; \xa0/* 接收这些参数值之一作为自定义标识符 */\nsyntax: "*"; \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 /* 任何有效字符 */\n'})}),"\n",(0,i.jsxs)(n.p,{children:["在定义自定义属性时，规则中 ",(0,i.jsx)(n.code,{children:"syntax"})," 和 ",(0,i.jsx)(n.code,{children:"inherits"})," 描述符是必需的；如果其中任何一项缺失，整条规则都将失效并且会被忽略。 ",(0,i.jsx)(n.code,{children:"initial-value"})," （或 ",(0,i.jsx)(n.code,{children:"initialValue"}),"）描述符仅在 ",(0,i.jsx)(n.code,{children:"syntax"})," 描述符为通用 ",(0,i.jsx)(n.code,{children:"syntax"})," 定义（即 ",(0,i.jsx)(n.code,{children:"syntax: *"}),"）时是可选的，否则 ",(0,i.jsx)(n.code,{children:"initial-value"})," （或 ",(0,i.jsx)(n.code,{children:"initialValue"}),"）也是必需的——如果此时该描述符缺失，整条规则都将失效且被忽略。"]}),"\n",(0,i.jsxs)(n.p,{children:["另外，我们在定义自定义属性时，",(0,i.jsx)(n.code,{children:"initial-value"})," （或 ",(0,i.jsx)(n.code,{children:"initialValue"}),"）描述符的值类型需要与 ",(0,i.jsx)(n.code,{children:"syntax"})," 描述符中定义的类型相匹配。例如，",(0,i.jsx)(n.code,{children:"syntax"})," 的值为 ",(0,i.jsx)(n.code,{children:"<length>"})," ，那么 ",(0,i.jsx)(n.code,{children:"initail-value"})," （或 ",(0,i.jsx)(n.code,{children:"initialValue"}),"）的值就应该是一个有效的长度值，例如 ",(0,i.jsx)(n.code,{children:"10px"})," ，但不能是别的类型值，例如 ",(0,i.jsx)(n.code,{children:"10%"})," ，否则整条规则都将失效且被忽略，即自定义的属性不生效。"]}),"\n",(0,i.jsxs)(n.h2,{id:"css-houdini-自定义属性-vs-css-原生自定义属性",children:["CSS Houdini 自定义属性 vs. CSS 原生自定义属性",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#css-houdini-自定义属性-vs-css-原生自定义属性",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"你可能会感到好奇，既然我们可以直接使用 CSS 原生自定义属性了，为什么 CSS Houdini 还要对自定义属性做扩展呢？其实他们之间有着明显的差异。"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"CSS 原生自定义属性的值都是字符串"}),"。比如："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:":root { \n    --stop: 50%; \n} \n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-JavaScript",children:'const customName = document.documentElement.style.getPropertyPriority( "--stop" ); \nconsole.log(typeof customName);  // => string \n'})}),"\n",(0,i.jsxs)(n.p,{children:["但使用 ",(0,i.jsx)(n.code,{children:"@property"})," 或 ",(0,i.jsx)(n.code,{children:"CSS.registerProperty()"})," 注册的 CSS Houdini 自定义属性可以指定值类型："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@property --stop { \n    syntax: "<percentage>"; \n    initial-value: 50%; \n    inherits: false; \n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["这个时候浏览器就知道 ",(0,i.jsx)(n.code,{children:"--stop"})," 自定义属性是一个百分比值（",(0,i.jsx)(n.code,{children:"<percentage>"}),"）而不是一个字符串。我们来看一个示例："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'/* 原生CSS定义属性 */ \n:root { \n \xa0 \xa0--stopPoint: 50px; \n} \n​\n/* CSS Houdini 注册的CSS自定义属性 */ \n@property --stop { \n \xa0 \xa0syntax: "<percentage>"; /* 指定值的语法类型是百分比 */ \n \xa0 \xa0initial-value: 50%; \n \xa0 \xa0inherits: false; \n} \n'})}),"\n",(0,i.jsxs)(n.p,{children:["我们在 ",(0,i.jsx)(n.code,{children:"body"})," 上调用 ",(0,i.jsx)(n.code,{children:"@property"})," 定义的自定义属性 ",(0,i.jsx)(n.code,{children:"--stop"})," ，并且重新声明它的值为 ",(0,i.jsx)(n.code,{children:"50px"})," ："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"body { \n \xa0 \xa0--stop: 50px; \n \xa0 \xa0background-image: linear-gradient( to right, red, red var(--stop), gold var(--stop), gold ); \n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["虽然在 ",(0,i.jsx)(n.code,{children:"body"})," 中显式的重置了 ",(0,i.jsx)(n.code,{children:"--stop: 50px"}),"，但最终还是运用了 ",(0,i.jsx)(n.code,{children:"@property"})," 中声明 ",(0,i.jsx)(n.code,{children:"--stop"})," 的初始值 ",(0,i.jsx)(n.code,{children:"50%"}),"，那是因为在 ",(0,i.jsx)(n.code,{children:"body"})," 中重置的 ",(0,i.jsx)(n.code,{children:"--stop"})," 值并不是 ",(0,i.jsx)(n.code,{children:"<percentage>"})," 值，而是 ",(0,i.jsx)(n.code,{children:"<length>"})," 值。"]}),"\n",(0,i.jsxs)(n.p,{children:["接着在 ",(0,i.jsx)(n.code,{children:"div"})," 中调用 ",(0,i.jsx)(n.code,{children:":root{}"})," 中声明的 ",(0,i.jsx)(n.code,{children:"--stopPoint"}),"，并且重新声明它的值为 ",(0,i.jsx)(n.code,{children:"30%"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"div { \n \xa0 \xa0--stopPoint: 30%; \n \xa0 \xa0background-image: linear-gradient( to right, gold, gold var(--stopPoint), red var(--stopPoint), red ); \n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["虽然在 ",(0,i.jsx)(n.code,{children:":root{}"})," 中声明了 ",(0,i.jsx)(n.code,{children:"--stopPoint: 50px"}),"，但在 ",(0,i.jsx)(n.code,{children:"div"})," 中的 ",(0,i.jsx)(n.code,{children:"--stopPont: 30%"})," 覆盖了 ",(0,i.jsx)(n.code,{children:":root{}"})," 中声明的 ",(0,i.jsx)(n.code,{children:"--stopPoint"}),"。 对比效果如下："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:q,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/PoXwxyy",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/PoXwxyy"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"再来看继承方面的差异。"}),"\n",(0,i.jsxs)(n.p,{children:["在《",(0,i.jsx)(n.a,{href:"https://juejin.cn/book/7223230325122400288/section/7249357815410589733",target:"_blank",rel:"noopener noreferrer",children:"24 | CSS 自定义属性你知道多少"}),"》这节课中着重介绍了 CSS 原生自定义属性继续方面的特性，从课程中我们可以得知“",(0,i.jsx)(n.strong,{children:"CSS 原生自定义属性（像许多其他 CSS 属性一样）通过 HTML 结构进行继承"}),"”。"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:y,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/xxQqyrY",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/xxQqyrY"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["正如你所看到的，第二个 ",(0,i.jsx)(n.code,{children:".module"})," 运用的自定义属性 ",(0,i.jsx)(n.code,{children:"--background"})," ，它离 ",(0,i.jsx)(n.code,{children:".sidebar"})," 中的 ",(0,i.jsx)(n.code,{children:"--background"})," 更近，离 ",(0,i.jsx)(n.code,{children:"body"})," 中的 ",(0,i.jsx)(n.code,{children:"--background"})," 却更远，因此，",(0,i.jsx)(n.code,{children:"--background"})," 被解析为 ",(0,i.jsx)(n.code,{children:"#fe890a"})," ，而在其他地方解析为 ",(0,i.jsx)(n.code,{children:"#5500fe"})," 。"]}),"\n",(0,i.jsxs)(n.p,{children:["对于 CSS Houdini 自定义属性的继承特性显得要更清晰很多，因为我们在使用 ",(0,i.jsx)(n.code,{children:"@property"})," 或 ",(0,i.jsx)(n.code,{children:"CSS.registerProperty()"})," 注册自定义属性时，必须得在 ",(0,i.jsx)(n.code,{children:"inherits"})," 描述上指定该属性是否可继承（",(0,i.jsx)(n.code,{children:"true"})," 表示可继承，",(0,i.jsx)(n.code,{children:"false"})," 表示不可继承）。比如下面这个示例："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-HTML",children:'<body>\n \xa0 \xa0<main>\n \xa0 \xa0 \xa0 \xa0<div class="module">位于 main 中的 module</div>\n \xa0 \xa0</main>\n \xa0 \xa0\n \xa0 \xa0<aside class="sidebar">\n \xa0 \xa0 \xa0 \xa0<div class="module">位于 sidebar 中的 module</div>\n \xa0 \xa0</aside>\n</body>\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@layer property {\n \xa0  @property --background {\n \xa0 \xa0 \xa0  syntax: "<color>";\n \xa0 \xa0 \xa0  initial-value: #5500fe;\n \xa0 \xa0 \xa0  inherits: true;\n \xa0  }\n​\n \xa0  body {\n \xa0 \xa0 \xa0  --background: #fe890a;\n \xa0  }\n​\n \xa0  .sidebar {\n \xa0 \xa0 \xa0  --background: #900; \n \xa0  }\n​\n \xa0  .module {\n \xa0 \xa0 \xa0  background-color: var(--background); \n \xa0  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["我们使用 ",(0,i.jsx)(n.code,{children:"@property"})," 注册了一个名为 ",(0,i.jsx)(n.code,{children:"--background"})," 的自定义属性，该自定义属性是一个可继承属性，并且其初始值为 ",(0,i.jsx)(n.code,{children:"#5500fe"})," 。就该示例而言，位于 ",(0,i.jsx)(n.code,{children:"<main>"})," 中的 ",(0,i.jsx)(n.code,{children:".module"})," 将会继承 ",(0,i.jsx)(n.code,{children:"body"})," 元素的 ",(0,i.jsx)(n.code,{children:"--background"})," ，因为离它最近且设置 ",(0,i.jsx)(n.code,{children:"--background"})," 的父元素是 ",(0,i.jsx)(n.code,{children:"body"})," ；位于 ",(0,i.jsx)(n.code,{children:"<aside>"})," 中的 ",(0,i.jsx)(n.code,{children:".module"})," 将会继承他父元素 ",(0,i.jsx)(n.code,{children:".sidebar"})," 中的 ",(0,i.jsx)(n.code,{children:"--background"})," 。你将看到的效果如下："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:k,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/PoXwXWv",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/PoXwXWv"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["如果我们在注册 ",(0,i.jsx)(n.code,{children:"--background"})," 时，设置它是不可继承的属性："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@layer property {\n \xa0 \xa0@property --background {\n \xa0 \xa0 \xa0 \xa0syntax: "<color>";\n \xa0 \xa0 \xa0 \xa0initial-value: #5500fe;\n \xa0 \xa0 \xa0 \xa0inherits: false;\n \xa0  }\n​\n \xa0 \xa0body {\n \xa0 \xa0 \xa0 \xa0--background: #fe890a;\n \xa0  }\n​\n \xa0 \xa0.sidebar {\n \xa0 \xa0 \xa0 \xa0--background: #900;\n \xa0  }\n​\n \xa0 \xa0.module {\n \xa0 \xa0 \xa0 \xa0background-color: var(--background);\n \xa0  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["在此情况之下，两个 ",(0,i.jsx)(n.code,{children:".module"})," 都元素法继承其祖先元素的 ",(0,i.jsx)(n.code,{children:"--background"})," 自定义属性的值，在当前元素（",(0,i.jsx)(n.code,{children:".module"}),"）未显式设置自定义属性 ",(0,i.jsx)(n.code,{children:"--background"})," 的值时，将会使用 ",(0,i.jsx)(n.code,{children:"@property"})," 规则中 ",(0,i.jsx)(n.code,{children:"initial-value"})," 描述符所设置的值，此例是 ",(0,i.jsx)(n.code,{children:"#5500fe"})," ："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:S,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/zYyxyXa",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/zYyxyXa"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"可以将它们结合起来看，这样更易于理解 CSS Houdini 自定义属性的继承机制："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:C,alt:"img"})}),"\n",(0,i.jsxs)(n.p,{children:["你有可能在样式表中使用 ",(0,i.jsx)(n.code,{children:"@property"})," 规则在不同的地方定义两个相同名称的自定义属性，它也会遵守 CSS 级联的规则，后面的将会覆盖前面的，或者说权重更大的会覆盖权重更小的。例如："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@property --colorPrimary { \n \xa0 \xa0syntax: "<color>"; \n \xa0 \xa0initial-value: magenta; \n \xa0 \xa0inherits: true; \n} \n​\n@property --colorPrimary { \n \xa0 \xa0syntax: "<color>"; \n \xa0 \xa0initial-value: #09f; \n \xa0 \xa0inherits: false; \n} \n​\nbody { \n \xa0 \xa0--colorPrimary: #f36; \n \xa0 \xa0background-color: var(--colorPrimary); \n} \n​\ndiv { \n \xa0 \xa0background-color: var(--colorPrimary); \n} \n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:f,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/XWobKeJ",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/XWobKeJ"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["如果使用 ",(0,i.jsx)(n.code,{children:"CSS.registerProperty()"})," 同时注册相同名称的自定义属性时则会报错："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'CSS.registerProperty({ \n \xa0 \xa0name: "--stop", \n \xa0 \xa0syntax: "<length>", \n \xa0 \xa0initialValue: "100px", \n \xa0 \xa0inherits: false \n}); \n​\nCSS.registerProperty({ \n \xa0 \xa0name: "--stop", \n \xa0 \xa0syntax: "<percentage>", \n \xa0 \xa0initialValue: "50%", \n \xa0 \xa0inherits: false \n});\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:m,alt:"img"})}),"\n",(0,i.jsxs)(n.h2,{id:"css-houdini-自定义属性可以做什么",children:["CSS Houdini 自定义属性可以做什么？",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#css-houdini-自定义属性可以做什么",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"上面我们花了一些篇幅介绍了CSS Houdini 自定义属性的基本使用，那么它能给我们真正带来什么样的变化呢？接下来，我们通过一些实例来向大家展示 CSS Houdini 自定义属性给我们带来的变化。"}),"\n",(0,i.jsxs)(n.h3,{id:"让颜色动起来",children:["让颜色动起来",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#让颜色动起来",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["在现代 CSS 中，我们可以仅改变一个颜色的通道值就可以得到不同的颜色，例如 ",(0,i.jsx)(n.code,{children:"hsl()"})," 颜色，在原始色的基础上仅调整 ",(0,i.jsx)(n.code,{children:"L"})," 颜色通道的值。有了 CSS 自定义属性之后，改变颜色亮度得到不同的颜色变得更容易，比如："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:b,alt:"img"})}),"\n",(0,i.jsx)(n.p,{children:"来看一个简单的示例："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:".circle {\n \xa0 \xa0--size: .5;\n \xa0 \xa0--base-l: 10;\n \xa0 \xa0--base-color: #09f;\n \xa0 \xa0\n \xa0 \xa0--shadow-color-1: hsl(from var(--base-color) h s calc(var(--base-l) * 1 * 1%));\n \xa0 \xa0--shadow-color-2: hsl(from var(--base-color) h s calc(var(--base-l) * 2 * 1%));\n \xa0 \xa0--shadow-color-3: hsl(from var(--base-color) h s calc(var(--base-l) * 3 * 1%));\n \xa0 \xa0--shadow-color-4: hsl(from var(--base-color) h s calc(var(--base-l) * 4 * 1%));\n \xa0 \xa0--shadow-color-5: hsl(from var(--base-color) h s calc(var(--base-l) * 5 * 1%));\n \xa0 \xa0--shadow-color-6: hsl(from var(--base-color) h s calc(var(--base-l) * 6 * 1%));\n \xa0 \xa0--shadow-color-7: hsl(from var(--base-color) h s calc(var(--base-l) * 7 * 1%));\n \xa0 \xa0--shadow-color-8: hsl(from var(--base-color) h s calc(var(--base-l) * 8 * 1%));\n \xa0 \xa0\n \xa0 \xa0box-shadow: \n \xa0 \xa0 \xa0 \xa00 0 0 calc(var(--size) * 1 * 1em) var(--shadow-color-1),\n \xa0 \xa0 \xa0 \xa00 0 0 calc(var(--size) * 2 * 1em) var(--shadow-color-2),\n \xa0 \xa0 \xa0 \xa00 0 0 calc(var(--size) * 3 * 1em) var(--shadow-color-3),\n \xa0 \xa0 \xa0 \xa00 0 0 calc(var(--size) * 4 * 1em) var(--shadow-color-4),\n \xa0 \xa0 \xa0 \xa00 0 0 calc(var(--size) * 5 * 1em) var(--shadow-color-5),\n \xa0 \xa0 \xa0 \xa00 0 0 calc(var(--size) * 6 * 1em) var(--shadow-color-6),\n \xa0 \xa0 \xa0 \xa00 0 0 calc(var(--size) * 7 * 1em) var(--shadow-color-7),\n \xa0 \xa0 \xa0 \xa00 0 0 calc(var(--size) * 8 * 1em) var(--shadow-color-8);\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:u,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/qBLdNyr",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/qBLdNyr"})," （请使用 Safari 16.4+ 查看该 Demo）"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"上面这个示例，我们可以："}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["改变 ",(0,i.jsx)(n.code,{children:"--base-color"})," 自定义属性的值来改变基础颜色"]}),"\n",(0,i.jsxs)(n.li,{children:["改变 ",(0,i.jsx)(n.code,{children:"--base-l"})," 来改变 ",(0,i.jsx)(n.code,{children:"hsl()"})," 颜色的 ",(0,i.jsx)(n.code,{children:"L"})," 通道的值，而且这里采用了相对颜色语法规则，基于 ",(0,i.jsx)(n.code,{children:"--base-color"})," 来调整 ",(0,i.jsx)(n.code,{children:"L"})," 通道颜色值（即 ",(0,i.jsx)(n.code,{children:"--base-l"}),"），从而得到一个新的颜色"]}),"\n",(0,i.jsxs)(n.li,{children:["改变 ",(0,i.jsx)(n.code,{children:"--size"})," 来调整阴影尺寸"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"注意，上面 Demo 使用的是 CSS 原生自定义属性。"}),"\n",(0,i.jsxs)(n.p,{children:["接下来，基于上面示例做一点调整，将在 ",(0,i.jsx)(n.code,{children:"@keyframes"})," 中来改变 ",(0,i.jsx)(n.code,{children:"--base-l"})," 的值："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"@layer animation {\n \xa0 \xa0@keyframes change-color {\n \xa0 \xa0 \xa0 \xa0from {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--base-l: 5%;\n \xa0 \xa0 \xa0  }\n \xa0 \xa0 \xa0 \xa0to {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--base-l: 10%;\n \xa0 \xa0 \xa0  }\n \xa0  }\n \xa0\n \xa0 \xa0.circle {\n \xa0 \xa0 \xa0 \xa0animation: change-color 2s linear alternate infinite both;\n \xa0  }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:A,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/JjwdRdy",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/JjwdRdy"})," （请使用 Safari 16.4+ 查看该 Demo）"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["示例中的 ",(0,i.jsx)(n.code,{children:"--base-l"})," 也可以换成 ",(0,i.jsx)(n.code,{children:"@property"})," 来定义："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@layer animation {\n \xa0 \xa0@property --base-l {\n \xa0 \xa0 \xa0 \xa0syntax: "<percentage>";\n \xa0 \xa0 \xa0 \xa0initial-value: "5%";\n \xa0 \xa0 \xa0 \xa0inherits: false ;\n \xa0  }\n \xa0 \xa0\n \xa0 \xa0@keyframes change-color {\n \xa0 \xa0 \xa0 \xa0from {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--base-l: 5%;\n \xa0 \xa0 \xa0  }\n \xa0 \xa0 \xa0 \xa0to {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--base-l: 10%;\n \xa0 \xa0 \xa0  }\n \xa0  }\n \xa0\n \xa0 \xa0.circle {\n \xa0 \xa0 \xa0 \xa0animation: change-color 2s linear alternate infinite both;\n \xa0  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:j,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/poqJEbj",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/poqJEbj"})," （请使用 Safari 16.4+ 查看该 Demo）"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["两种自定义属性实现的效果似乎是相同的，并没有体现出 ",(0,i.jsx)(n.code,{children:"@property"})," 的优势。但我想通过这个示例告诉大家，有了 ",(0,i.jsx)(n.code,{children:"@property"})," 属性之后，在 CSS 中你可以对很多东西进行动画化，比如颜色、位置、大小等等。"]}),"\n",(0,i.jsxs)(n.p,{children:["除此之外，还有更多的想象空间，比如下面这个示例，按钮的边框（",(0,i.jsx)(n.code,{children:"border"}),"）和阴影（",(0,i.jsx)(n.code,{children:"box-shadow"}),"）会在鼠标悬浮的时候流转一整个色轮的颜色："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@layer animation {\n \xa0 \xa0@keyframes hueJump {\n \xa0 \xa0 \xa0 \xa0to {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--hue: 360;\n \xa0 \xa0 \xa0  }\n \xa0  }\n \xa0 \xa0\n \xa0 \xa0button {\n \xa0 \xa0 \xa0  &:hover {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0animation: hueJump 0.75s infinite linear;\n \xa0 \xa0 \xa0  }\n \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0  &:active {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0animation-play-state: paused;\n \xa0 \xa0 \xa0  }\n \xa0  }\n}\n​\n@layer property {\n \xa0 \xa0@property --hue {\n \xa0 \xa0 \xa0 \xa0syntax: "<integer>";\n \xa0 \xa0 \xa0 \xa0inherits: true;\n \xa0 \xa0 \xa0 \xa0initial-value: 0;\n \xa0  }\n​\n \xa0 \xa0button {\n \xa0 \xa0 \xa0 \xa0--bg: #1a1a1a;\n \xa0 \xa0 \xa0 \xa0--button-bg: #000;\n \xa0 \xa0 \xa0 \xa0--border: hsl(var(--hue, 0) 0% 50%);\n \xa0 \xa0 \xa0 \xa0--shadow: hsl(var(--hue, 0) 0% 80%);\n \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0 \xa0background: var(--button-bg);\n \xa0 \xa0 \xa0 \xa0border-color: var(--border);\n \xa0 \xa0\n \xa0 \xa0 \xa0  &:hover {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--border: hsl(var(--hue, 0) 80% 50%);\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--shadow: hsl(var(--hue, 0) 80% 50%);\n \xa0 \xa0 \xa0  }\n \xa0  }\n}\n​\n@layer demo {\n \xa0 \xa0body {\n \xa0 \xa0 \xa0 \xa0transform-style: preserve-3d;\n \xa0 \xa0 \xa0 \xa0perspective: 800px;\n \xa0  }\n​\n \xa0 \xa0button {\n \xa0 \xa0 \xa0 \xa0box-shadow: 0 1rem 2rem -1.5rem var(--shadow);\n \xa0 \xa0 \xa0 \xa0transition: transform 0.2s, box-shadow 0.2s;\n \xa0 \xa0\n \xa0 \xa0 \xa0  &:hover {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0transform: rotateY(10deg) rotateX(10deg);\n \xa0 \xa0 \xa0  }\n \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0  &:active {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0transform: rotateY(10deg) rotateX(10deg) translate3d(0, 0, -15px);\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0box-shadow: 0 0rem 0rem 0rem var(--shadow);\n \xa0 \xa0 \xa0  }\n \xa0  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:"data:image/webp;base64,UklGRrYIAABXRUJQVlA4IKoIAACQbQCdASqOA3YBPp1Ook4lpC6pIHQIWdATiWlu4XaxG/Np8xdjP+W+oD1z8Tnoj275dL0n2niI9SXqBfh/8e/0W9ZgA/J/6f+pfIX3KPF6UAP0d6A2ff6Z9gv+Yf2TfKQT096SBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQID4ZOMgjnbJtTyq0AXRuCNlVoAujcEbKnNZzjYhWv4KTAWpBYsWLFixYsWLFixYsU2qDRPekgQExurOdE96SBAgQIECBAgQIECBAfFxpiO8lUb5CD0q7LbDCkwCPLzF7zmcERCleXvLpBzDK8I4Nth/eXgZWn5S4AiLqEGJnVwLnGQK+NtO2uWGPfWVJ1bF7sL9HY3VnOie9JAgQIECBAgQIECBAgPi3jKBOCCsxWces54MkJEbPZntGAe76CWsZiVzrQ17zbQ7uvg1flA2bPkJ/kQnX5bMAgeZq+v1JH1y06UJ7qznRPekgQIECBAgQIECBAgQHxbzDL04NZ1dZTFOjyxB1TIcOvw4hILFixYsWLFixYsWLFixTJSMcQ9PVDu8eCNlVoAujcEbKrQBdG4CDXdpOE8xz9wiXDXiap/Oie9JAgQIECBAgQIECBAT9wUSJpSRQKA+okLUgsWLFixYsWLFixYsWLFixY3gCLRaLRZrsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixYsWLFixTAAA/v+rfgAAAAAAAAAAAAAAAAA9EDeZBf5TWqHcQqJVWAIvW6K7hMMxQ7hls8l1EbNZZkOHoAbecyATjJlsWotG2giYgpLV2Fi8YlAb9PC7zABW5svtuknl6GISneXGS7c287GTc+vYpokxPWnEeVziOpx9s/jwbzz3DabDjYgwpSRvu+v9YB3LCagHwHG87n/z7MqYgxYqnzUMWTwLRLv1sJ0WEUmwo1/uSJDwvX9xxzR774399xrg7wVv0o0jfbKfv/N5vrgZrFEYf6gRPNRqEX81rYT5A+Gf1QeM/f6e4b6IpPO8lixDcgdW18925pgX/3hjbt5izp2T0VxEFO8h6wgmnW0TZH41tWfe5i/6FiOAMOHWMlXNbKYQpwp6NgiAOZ0C9iuoSuthrROrdDNxsi7jhbzyzNG1wqf0yZ3gXzkfC9qF+T6yJhwQUUjrbAUd375yHWD/1N7/rTmCXgeO/uCJZfPi8lQHf8xW7YHqwVuzDRl9xeMFbje/95P6RgH6c7MtnbHxlU4QUloKJd9VytlVl9Z2YMY27/SRwavrfTW/H/akPiWU23U3Tc+d2EBH+3Atre5NNPjK19lB4AWGkIwviDVLIrSiYRBfZou6DVZ05SHyxiQv1jw3xdossAIUWCPARFi6NtUD7QT4OnZS04Kb3VUgey0zXs9WDB8Xakqigzunpz0cmUzB7EQfTpW3dmPDQf9nGi/XRKGYt1/OupaFjccRIBAr8PPi7VRezfKncBrKWlKvVjKjl5PXht+t9lPH/yJ5uukfNUk0d1RzS8WI7TLbVRekPfCICu8jLmRM5jV9junntZswkqCvRBG7khkQsHYl8EyOAZiUz9qKJPy4ZhiMgsna2z7MpUf+FY8T71JcCVpbJB/+OmB4+2/JihPsLWvokPoB0BTaOgcNXI7KNs/vUVFYWGGB4P1R2B0p8RlTTcWG0wrW15YDC40xpcEfurxyU9I3qWhS73V7/KEuNrt4jl4fXNt/2Pd89Kh6bKNzP5JEUbe293NY4CZ7+Ctx1Hc+735Fiv+Olb4VT88AOwLsRLOUjvbdvxbVLXy0/zHgGwskPNlKbKF/jDcsdw86nXyZLCBfL1i3AS9aPeczUJr2E0N7ewwlKan72gNiB04vtE41jNeseh5okW4o0evBUR2oThUWCPztdkM4IAigSudIOiVDOqiOAv+6VR/VYS71MdcI4CbnQzl3wUvWxkAg2yPgnBzYGJr/VIm4aH8TGP/z6v5dnLYJLmOROE+nBBNRuC97/bWF0sorjykt3+kCvILw/S64NehRMSFTEmOTbIu3LtdVAEkaPGjmz6ATtrNDcsWzc7HIuChlvACCq1kmN6EiCdY38R5BnhIFxlYmHwtzl61+eqnBwyu6WLgYVr10ITod9WW374w+L7lN1A22oKXhagL3xQJBL2sImvavLLoQgdK1v2kb9bjHVicvirZcHuCK7xORC1EPAlh+Ebdcq3bj+Iv4ZOKfvofa/79V+wUM5ghPUHebxYVZdf5MAACTBAe4SXx0qed9CW7TgD561r7Rs8PMuVqMcgkXK9DUYwQcBgQyYUlQ71MiOd+rgl9Sz9qINpy5yRmzFdz3Pz/s37PjJ0XWhU5oQm11oRN/uGNG2FNw5BmdnZD7Y3UF1mdxACjx1hixJLWwnI5i9Xcy27zOAPjea4e8afh9+hc9+QcPdxAV88/wRRn5pu5+dzRa9bBRh185gp0d6GYfz/EvAGCCTcErzK+Ki0zhLVv+VJYCAAAAAAAAAAAAAAAAAAAA",alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/dywopzj",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/dywopzj"})]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"使渐变动效更丝滑",children:["使渐变动效更丝滑",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使渐变动效更丝滑",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["在 CSS 中，给渐变添加动效往往是在 ",(0,i.jsx)(n.code,{children:"@keyframes"})," 中调整 ",(0,i.jsx)(n.code,{children:"background-position"})," 的值，例如："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"@keyframes gradient {\n \xa0 \xa00% {\n \xa0 \xa0 \xa0 \xa0background-position: 0% 50%;\n \xa0  }\n \xa0 \xa0\n \xa0 \xa050% {\n \xa0 \xa0 \xa0 \xa0background-position: 100% 50%;\n \xa0  }\n \xa0 \xa0\n \xa0 \xa0100% {\n \xa0 \xa0 \xa0 \xa0background-position: 0% 50%;\n \xa0  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["现在我们可以使用 ",(0,i.jsx)(n.code,{children:"@property"})," 定义的自定义属性，使其效果变得更丝滑。我们来看一个简单的渐变动画效果："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@property --startColor {\n \xa0 \xa0syntax: "<color>";\n \xa0 \xa0initial-value: magenta;\n \xa0 \xa0inherits: false;\n}\n​\n@property --stopColor {\n \xa0 \xa0syntax: "<color>";\n \xa0 \xa0initial-value: magenta;\n \xa0 \xa0inherits: false;\n}\n​\n@property --stop {\n \xa0 \xa0syntax: "<percentage>";\n \xa0 \xa0initial-value: 50%;\n \xa0 \xa0inherits: false;\n}\n​\n.gradient__css__houdini {\n \xa0 \xa0--startColor: #2196f3;\n \xa0 \xa0--stopColor: #ff9800;\n \xa0\n \xa0 \xa0transition: --stop 0.5s, --startColor 0.2s, --stopColor 0.2s;\n \xa0 \xa0background: linear-gradient(\n \xa0 \xa0 \xa0 \xa0to right,\n \xa0 \xa0 \xa0 \xa0var(--startColor) var(--stop),\n \xa0 \xa0 \xa0 \xa0var(--stopColor)\n \xa0  );\n}\n​\n.gradient__css__houdini:hover {\n \xa0 \xa0--startColor: #ff9800;\n \xa0 \xa0--stopColor: #2196f3;\n \xa0 \xa0--stop: 80%;\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"你可以对比一下 CSS 原生自定义属性创建的效果："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:g,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/ZEVGpMy",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/ZEVGpMy"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["还可以使用 ",(0,i.jsx)(n.code,{children:"@property"})," 给渐变的颜色位置添加动效，比如下面这个效果："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:"data:image/webp;base64,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",alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/WNLvGYw",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/WNLvGYw"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"关键代码如下："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@layer property {\n \xa0 \xa0@keyframes load {\n \xa0 \xa0 \xa0 \xa00%,\n \xa0 \xa0 \xa0 \xa010% {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--a: 0deg;\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--h: 0;\n \xa0 \xa0 \xa0  }\n \xa0 \xa0 \xa0 \xa0100% {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--a: 360deg;\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--h: 100;\n \xa0 \xa0 \xa0  }\n \xa0  }\n​\n \xa0 \xa0@property --a {\n \xa0 \xa0 \xa0 \xa0initial-value: 0deg;\n \xa0 \xa0 \xa0 \xa0inherits: false;\n \xa0 \xa0 \xa0 \xa0syntax: "<angle>";\n \xa0  }\n \xa0 \xa0\n \xa0 \xa0@property --h {\n \xa0 \xa0 \xa0 \xa0initial-value: 0;\n \xa0 \xa0 \xa0 \xa0inherits: false;\n \xa0 \xa0 \xa0 \xa0syntax: "<number>";\n \xa0  }\n​\n \xa0 \xa0.loader {\n \xa0 \xa0 \xa0 \xa0--charge: hsl(var(--h, 0) 80% 50%);\n​\n \xa0 \xa0 \xa0 \xa0border-image: \n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0conic-gradient(var(--charge) var(--a),transparent calc(var(--a) + 0.5deg))\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa030;\n \xa0 \xa0 \xa0 \xa0animation: load 2s infinite ease-in-out;\n \xa0  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["示例中使用 ",(0,i.jsx)(n.code,{children:"@property"})," 定义了两个自定义属性，即 ",(0,i.jsx)(n.code,{children:"--a"})," （渐变的角度）和 ",(0,i.jsx)(n.code,{children:"--h"})," （渐变颜色的色相），这两个自定义属性都用在 ",(0,i.jsx)(n.code,{children:"conic-gradient()"})," 函数，它将会绘制一个锥形渐变图像，最终用于 ",(0,i.jsx)(n.code,{children:"border-image"})," 属性上。如此一来，元素 ",(0,i.jsx)(n.code,{children:".loader"})," 就具有一个渐变边框效果。"]}),"\n",(0,i.jsxs)(n.p,{children:["然后，在 ",(0,i.jsx)(n.code,{children:"@keyframes"})," 中调整 ",(0,i.jsx)(n.code,{children:"--a"})," 和 ",(0,i.jsx)(n.code,{children:"--h"})," 值，从而使图片边框有一个动画效果："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"@keyframes load {\n \xa0 \xa00%,\n \xa0 \xa010% {\n \xa0 \xa0 \xa0 \xa0--a: 0deg;\n \xa0 \xa0 \xa0 \xa0--h: 0;\n \xa0  }\n \xa0 \xa0100% {\n \xa0 \xa0 \xa0 \xa0--a: 360deg;\n \xa0 \xa0 \xa0 \xa0--h: 100;\n \xa0  }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"使用同样的原理，你还可以给图片添加一个带有动效的花式边框："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"@layer demo {\n \xa0 \xa0img {\n \xa0 \xa0 \xa0 \xa0--t: 3px;\n \xa0 \xa0 \xa0 \xa0--s: 40px;\n \xa0 \xa0 \xa0 \xa0--g: 8px;\n \xa0 \xa0 \xa0 \xa0--c: #755c3b;\n \xa0 \xa0\n \xa0 \xa0 \xa0 \xa0padding: calc(2 * var(--t) + var(--g));\n \xa0 \xa0 \xa0 \xa0border: var(--t) solid #0000;\n \xa0 \xa0 \xa0 \xa0background: \n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0conic-gradient(at var(--s) calc(3 * var(--t)),#0000 75%,var(--c) 0) 0 0 / calc(100% - var(--s)) calc(100% - 3 * var(--t)) border-box,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0conic-gradient(at calc(3 * var(--t)) var(--s), #0000 75%, var(--c) 0) 0 0 / calc(100% - 3 * var(--t)) calc(100% - var(--s)) border-box,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0linear-gradient(0deg, var(--c) calc(2 * var(--t)), #0000 0) 50% var(--t) / calc(100% - 2 * (var(--s) + var(--g))) 100% repeat-y padding-box,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0linear-gradient(-90deg, var(--c) calc(2 * var(--t)), #0000 0) var(--t) 50%/100% calc(100% - 2 * (var(--s) + var(--g))) repeat-x padding-box;\n \xa0 \xa0 \xa0 \xa0transition: --s 0.5s;\n \xa0 \xa0 \xa0 \xa0cursor: pointer;\n \xa0  }\n \xa0 \xa0\n \xa0 \xa0img:hover {\n \xa0 \xa0 \xa0 \xa0--s: 80px;\n \xa0  }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:x,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/NWeqbmy",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/NWeqbmy"})]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"动态计数",children:["动态计数",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#动态计数",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["有了 ",(0,i.jsx)(n.code,{children:"@property"})," 之后，我们可以借助 ",(0,i.jsx)(n.a,{href:"https://juejin.cn/book/7223230325122400288/section/7259668400379527205",target:"_blank",rel:"noopener noreferrer",children:"CSS 的 counter-reset 、counter-increment 和 counter() 等特性"}),"实现动态计数的效果。"]}),"\n",(0,i.jsxs)(n.p,{children:["比如下面这个示例。我们使用 ",(0,i.jsx)(n.code,{children:"counter()"})," 以及伪元素的 ",(0,i.jsx)(n.code,{children:"content"})," 将数字转换成字符串，并使用这些字符串作为伪元素 ",(0,i.jsx)(n.code,{children:"content"})," 的值："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"@property --milliseconds {\n \xa0 \xa0inherits: false;\n \xa0 \xa0initial-value: 0;\n \xa0 \xa0syntax: '<integer>';\n}\n​\n.counter {\n \xa0 \xa0position: relative;\n \xa0 \xa0counter-reset: ms var(--milliseconds);\n \xa0 \xa0animation: count 100s steps(100) infinite;\n}\n​\n.counter:after {\n \xa0 \xa0content: counter(ms);\n}\n​\n@keyframes count {\n \xa0 \xa0to {\n \xa0 \xa0 \xa0 \xa0--milliseconds: 100;\n \xa0  }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:"data:image/webp;base64,UklGRswEAABXRUJQVlA4IMAEAAAwZQCdASoaBIwBPp1Opk4lpCQiIFToCLATiWlu4XdhG5bGuGXAxoz+nAFPghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBjswAjbinBuRBRrBXKUV3bVpJ+JaPhE++BlzhqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBjkrsOdD1Bk38TACy/YifDjQu7lr0VcIMghqqTXbaLhBkENVSa7bRcIMghqjq7DkmR4VecREhNRLlkRoynwQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgvUERYHzRuARWiQXE2up/VUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIao4AD+/8hF8A+IAAAAAAAAAAAAAAAAAAAAAAAAdD3xBDsvehWbKH8wUW5ZVsP8d9PvctgRG7V0zBVjtUiDIRx4A60PbS53gWVDar/IuiuaMI4+VEn3m1wirYhVLZHg6yXdsz73dGMzhnvX34EF8CPIruSW1vaNrxZu04q/k/db3r8LNS5C8rI5SQh/Pg37/LZrMAF9uZnDhUfhLk0l9lc7g9E184AHUyAFmMDaLCS7v4MARMhBr/4nAkNSa5Lz+CI+xB0CvSUleiN2SEbNj7jCB6Lz9/6HLBfw69g+Ur7fA/1MV8L1J9newc6exRoFgwACY0t67PMNZv24jN27nG80YGmSoPiSuduRVfVeXNMOQvvTkpq/VVj2dFSuehvEY4JAEKc5DD8s99s8xgFv0QWgpFWpfAFJCkYsJc0DvcRpX0sAbHLn0zJSWZp4P/2/ZAR9NsR6Kj19RikSlAa5BxHPLblm1vjBifiTffkip9ktZ83xwSBziN7/iH3qr84AAAAAAAAAAAAAAAAAAAAAAAAA",alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/abPOpoo",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/abPOpoo"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"你也可以反过来，使用它们制作一个十秒倒计时的效果："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@property --num {\n \xa0 \xa0syntax: "<integer>";\n \xa0 \xa0initial-value: 0;\n \xa0 \xa0inherits: false;\n}\n​\ndiv {\n \xa0 \xa0counter-reset: num var(--num);\n \xa0 \xa0animation: counter 10s steps(10) both;\n}\n​\ndiv::after {\n \xa0 \xa0content: counter(num);\n}\n​\n@keyframes counter {\n \xa0 \xa0from {\n \xa0 \xa0 \xa0 \xa0--num: 10;\n \xa0  }\n \xa0 \xa0to {\n \xa0 \xa0 \xa0 \xa0--num: 0;\n \xa0  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:p,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/MWZwJgZ",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/MWZwJgZ"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["也就是说，如果你不想要非常精准的秒表动效（一般秒表记数是使用 JavaScript 来实现，比如通过 ",(0,i.jsx)(n.code,{children:"selInterval"})," 实现），那它和上面示例中的计数器效果是等同的。",(0,i.jsx)(n.a,{href:"https://codepen.io/jh3y/full/jOVmJBL",target:"_blank",rel:"noopener noreferrer",children:"@Jhey 在 Codepen 上就用这个原理实现了一个纯 CSS 的秒表记时器"}),"："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:h,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/jh3y/full/jOVmJBL",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/jh3y/full/jOVmJBL"})]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"让变换transform变得更酷",children:["让变换（transform）变得更酷",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#让变换transform变得更酷",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["使用 CSS 开发 Web 动效的时候，很多情况之下都离不开 CSS 的 ",(0,i.jsx)(n.code,{children:"transform"})," 特性，不管是 2D 的 Transform 还是 3D 的 Transform。但在使用它们在制作动效时，有的时候会显得非常的生硬（看起来不像它应有的效果）。比如下面这个抛物线效果，即从 ",(0,i.jsx)(n.code,{children:"A"})," 点移到 ",(0,i.jsx)(n.code,{children:"B"})," 点，并同时模仿带有重力的效果："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"@keyframes throw { \n \xa0 \xa00% { \n \xa0 \xa0 \xa0 \xa0transform: translate(-500%, 0); \n \xa0  } \n \xa0 \xa050% { \n \xa0 \xa0 \xa0 \xa0transform: translate(0, -250%); \n \xa0  } \n \xa0 \xa0100% { \n \xa0 \xa0 \xa0 \xa0transform: translate(500%, 0); \n \xa0  } \n} \n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:"data:image/webp;base64,UklGRuYDAABXRUJQVlA4INoDAADQWQCdASoQBGgBPp1Op04lpKOiIEgAsBOJaW7hd2Ee+AnDZAcuVWElAdQBoswAU+CGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1VJrttFwgyCGqpNdtouEGQQ1SZrqUIaqk122i4QZBDVUmu20XCDIIaqk122i4QZAUMi3oH5GJQhW8wxCr2a7bRcIMghqqTXbaLhBkENVSa7bRcIMghqjj4a38KrFw3xlmZFr0VcIMghqqTXbaLhBkENVSa7bRcIMghqpsHyeZCbec2Gitn0xwIB1V622i4QZBDVUmu20XCDIIaqk122i4QZBDVVJOm977cteirhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghqqTXbaLhBkENVSa7bRcIMghpgAAP7/zhBH6LtwBIQAAAAAAAAAAACIj/AoQVMSgijgAD96KbDughbO9KBOfyDSn90QLv+NQX/kC//3n/4StPF+MkF6lhtQAjynitV/nLMK8Le7PgdJna8mEr9c9vKjyxk7W/a5Q5P3iGMmq+zy3EE7wtaHlpoEPekU3KoNHQh3/GWE6n4kcGcYVBeKAULNcplaR2q1SZjF4ndTJLxYN4QC1JpTgcSxw9+heEYKn3JWayy2oeu8fammQ4Kzb///53rTqcD7l/NE/c4yQILez/6dVBi8tJEkjCX+QP2QVr+YBRoEu8awgbYPs9yTZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/XWobpbL",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/XWobpbL"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["以前，我们主要是靠在动画元素上套个容器，然后分别在 ",(0,i.jsx)(n.code,{children:"x"})," 和 ",(0,i.jsx)(n.code,{children:"y"})," 两个方向添加动画来实现这个效果："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:"data:image/webp;base64,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",alt:"img"})}),"\n",(0,i.jsxs)(n.p,{children:["有了 ",(0,i.jsx)(n.code,{children:"@property"})," 之后，我们可以同时给变换中每个函数添加动画："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"@property --x { \n \xa0 \xa0inherits: false; \n \xa0 \xa0initial-value: 0%; \n \xa0 \xa0syntax: '<percentage>'; \n} \n​\n@property --y { \n \xa0 \xa0inherits: false; \n \xa0 \xa0initial-value: 0%; \n \xa0 \xa0syntax: '<percentage>';\n} \n​\n@property --rotate { \n \xa0 \xa0inherits: false; \n \xa0 \xa0initial-value: 0deg; \n \xa0 \xa0syntax: '<angle>'; \n} \n​\n.ball { \n \xa0 \xa0animation: throw 1s infinite alternate ease-in-out; \n \xa0 \xa0transform: translateX(var(--x)) translateY(var(--y)) rotate(var(--rotate)); \n} \n"})}),"\n",(0,i.jsxs)(n.p,{children:["接着在 ",(0,i.jsx)(n.code,{children:"@keyframes"})," 不同的帧中调整已注册的 ",(0,i.jsx)(n.code,{children:"--x"})," 和 ",(0,i.jsx)(n.code,{children:"--rotate"})," 的值："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"@keyframes throw { \n \xa0 \xa00% { \n \xa0 \xa0 \xa0 \xa0--x: -500%; \n \xa0 \xa0 \xa0 \xa0--rotate: 0deg; \n \xa0  } \n \xa0 \xa050% { \n \xa0 \xa0 \xa0 \xa0--y: -250%; \n \xa0  } \n \xa0 \xa0100% { \n \xa0 \xa0 \xa0 \xa0--x: 500%; \n \xa0 \xa0 \xa0 \xa0--rotate: 360deg; \n \xa0  }\n} \n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:"data:image/webp;base64,UklGRkoEAABXRUJQVlA4ID4EAACQWACdASq0A3oBPp1Op04lpKOiIF0YCLATiWlu4XdhHvDeLgyNbzBkPiv/BT4Iaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu2oYKXEj/hIRcj7FwgyCGqpNdtouEGQQ1VJrttFwgyCGqo/F9G3WJIGzrBcacVthDVUmu20XCDIIaqk122i4QZBDVUmu20WcIHO0aCoABHNX+mGqpNdtouEGQQ1VJrttFwgyCGqpNdtos5clEdPJF8GVfxLWeAzIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVTo7CDIIaqk122i4QZBDVUmu20XCDIIaqk122iEY71TbVUAa7RNpUFLaLhBkENVSa7bRcIMghqqTXbaLhBkENMIAFjEi2i4QZBDVUmu20XCDIIaqk122i4QZBDVUxbmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu20XCDIIaqk122i4QZBDVUmu2zQAA/v/OEEtdmIBnAAAAAAAAAAATURRuYFhAV0+7ltVTwj5qbDCdw7t2kQl+9QbbeJf5sIO7P5Bj/8YEnGy4SZhDurnssBoKodM/E57/8TtZQn3hABVd5tVXvz8SD9+dH9PGxM4Gl8p8FgwYvpl3abrwp35Eu50YfrU14c9Rbz/xMdEARWoT7mBkDGSH4c/vYYsT6Xwj+y15XxTU8mzRB7H+8B47OlVH1OMG/wxW0CaorbyLXjWBw9AEWXbfJL2+vUwq8lxX//m8bGgXyfuj/UP8i88aDZV9qsV6uw89N55JHHIHLeFV//X/FigqFAAAAAAAAAAAAABvlSWGZrjY5wK/D4ExXfc/uvMYlw0237bxgH+KFQWt7DObMypqGzVD9tk0rUyy139pAql/T6pF2i/U/EfIHtSdsfveLJxo87mfvITfifhxZM6gKf+xM4f+U2O4x4ddNW0NeFacQAa+9As3QV9rW8WwoAAAAAAAAAAAAAA=",alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/oNJXBxL",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/oNJXBxL"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"使用同样的技术，你还可以制作出更复杂的变换效果，例如下面这个 3D 图像效果："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:t,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/t_afif/full/yLRRBKj",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/t_afif/full/yLRRBKj"})]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"制作饼图和圆形进度条",children:["制作饼图和圆形进度条",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#制作饼图和圆形进度条",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["在 CSS 中，我们可以使用 ",(0,i.jsx)(n.code,{children:"conic-gradient()"})," 或 ",(0,i.jsx)(n.code,{children:"repeating-conic-gradient()"})," 两个属性绘制饼图效果："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:"div {\n \xa0 \xa0border-radius: 50%;\n \xa0 \xa0background-image: conic-gradient(magenta 40%, aqua 0 70%, red 0);\n​\n \xa0  &:nth-of-type(2) {\n \xa0 \xa0 \xa0 \xa0background-image: conic-gradient(\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0red 20%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0yellow 0 40%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0lime 0 60%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0aqua 0 80%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0blue 0\n \xa0 \xa0 \xa0  );\n \xa0  }\n​\n \xa0  &:nth-of-type(3) {\n \xa0 \xa0 \xa0 \xa0background-image: conic-gradient(\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0red 10%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0yellow 0 20%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0lime 0 30%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0aqua 0 40%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0blue 0 50%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0magenta 0 60%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0red 0 70%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 0 80%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#40f 0 90%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#aee 0\n \xa0 \xa0 \xa0  );\n \xa0  }\n​\n \xa0  &:nth-of-type(4) {\n \xa0 \xa0 \xa0 \xa0background-image: conic-gradient(\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 5%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#f36 0 10%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 0 15%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#f36 0 20%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 0 25%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#f36 0 30%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 0 35%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#f36 0 40%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 0 45%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#f36 0 50%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 0 55%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#f36 0 60%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 0 65%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#f36 0 70%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 0 75%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#f36 0 80%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 0 85%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#f36 0 90%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#09f 0 95%,\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0#f36 0\n \xa0 \xa0 \xa0  );\n \xa0  }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:d,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/dywoNNO",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/dywoNNO"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["在这个基础上，把 ",(0,i.jsx)(n.code,{children:"@property"})," 定义的自定义属性运用到 ",(0,i.jsx)(n.code,{children:"conic-gradient()"})," 就可以创建带有动效的饼图："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@layer pie {\n \xa0 \xa0@property --p {\n \xa0 \xa0 \xa0 \xa0inherits: true;\n \xa0 \xa0 \xa0 \xa0initial-value: 0;\n \xa0 \xa0 \xa0 \xa0syntax: "<integer>";\n \xa0  }\n​\n \xa0 \xa0.pie {\n \xa0 \xa0 \xa0 \xa0--stop-list: #ab3e5b calc(var(--p) * 1%), #ef746f 0%; \xa0 \n \xa0 \xa0 \xa0 \xa0--a: calc(0.5 * var(--p) / 100 * 1turn - 90deg);\n \xa0 \xa0 \xa0 \xa0--pos: rotate(var(--a)) translate(5rem) rotate(calc(-1 * var(--a)));\n \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0 \xa0background: conic-gradient(var(--stop-list));\n \xa0 \xa0\n \xa0 \xa0 \xa0 \xa0transition: --p 0.5s;\n \xa0 \xa0\n \xa0 \xa0 \xa0  &::after {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0transform: translate(-50%, -50%) var(--pos);\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0counter-reset: p var(--p);\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0content: counter(p) "%";\n \xa0 \xa0 \xa0  }\n \xa0 \xa0\n \xa0 \xa0 \xa0  :is(#radio1:checked) ~ & {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--p: 20;\n \xa0 \xa0 \xa0  }\n \xa0 \xa0\n \xa0 \xa0 \xa0  :is(#radio2:checked) ~ & {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--p: 30;\n \xa0 \xa0 \xa0  }\n \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0  :is(#radio3:checked) ~ & {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0--p: 50;\n \xa0 \xa0 \xa0  }\n \xa0  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:l,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/mdaJRmB",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/mdaJRmB"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"还可以用来制作带有动效的进度条："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-HTML",children:"<div class=\"progress\" style='--c0: #ec6056; --c1: #ea2963'></div>\n<div class=\"progress\" style='--c0: #86dd54; --c1: #4ba75c'></div>\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@layer progress {\n \xa0  @property --p {\n \xa0 \xa0 \xa0  syntax: "<integer>";\n \xa0 \xa0 \xa0  initial-value: 0;\n \xa0 \xa0 \xa0  inherits: true;\n \xa0  }\n​\n \xa0  @keyframes p {\n \xa0 \xa0 \xa0  95%,\n \xa0 \xa0 \xa0  100% {\n \xa0 \xa0 \xa0 \xa0 \xa0  --p: 100;\n \xa0 \xa0 \xa0  }\n \xa0  }\n​\n \xa0  .progress {\n \xa0 \xa0 \xa0  counter-reset: p var(--p);\n \xa0 \xa0 \xa0  animation: p 8s linear infinite;\n \xa0 \xa0\n \xa0 \xa0 \xa0 \xa0&::before {\n \xa0 \xa0 \xa0 \xa0 \xa0  content: counter(p) "%";\n \xa0 \xa0 \xa0 \xa0 \xa0  --mask: \n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0  linear-gradient(red, red) text, \n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0  radial-gradient(closest-side,transparent calc(100% - 2 * 4px - 1px),red calc(100% - 2 * 4px)\n \xa0 \xa0 \xa0 \xa0 \xa0  );\n \xa0 \xa0 \xa0 \xa0 \xa0  background: \n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0  radial-gradient(circle at 50% 4px,var(--c0) 4px,transparent 0),\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0  conic-gradient(var(--c0), var(--c1) calc(var(--p) * 1%), transparent 0%);\n \xa0 \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0 \xa0 \xa0  mask: var(--mask);\n \xa0 \xa0 \xa0  }\n \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0 \xa0&::after {\n \xa0 \xa0 \xa0 \xa0 \xa0  transform: \n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0  rotate(calc(4grad * var(--p)))\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0  translatey(calc(0.5 * 4px - 0.5 * 3.5em));\n \xa0 \xa0 \xa0 \xa0 \xa0  box-shadow: 0 0 1px var(--c1);\n \xa0 \xa0 \xa0 \xa0 \xa0  background: var(--c1);\n \xa0 \xa0 \xa0  }\n \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0 \xa0&:nth-child(2) {\n \xa0 \xa0 \xa0 \xa0 \xa0  animation-duration: 5s;\n \xa0 \xa0 \xa0 \xa0 \xa0  animation-delay: -4s;\n \xa0 \xa0 \xa0  }\n \xa0  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:o,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/WNLvRKP",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/WNLvRKP"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["上面这两个示例都使用了 CSS 的蒙板相关的特性，即 ",(0,i.jsx)(n.code,{children:"mask"})," 。如果你对 ",(0,i.jsx)(n.code,{children:"mask"})," 不了解，也不需过于担心，小册后面会有这方面的内容。"]}),"\n",(0,i.jsxs)(n.p,{children:["也正如你看到的，将 CSS 的 ",(0,i.jsx)(n.code,{children:"mask"})," 和 ",(0,i.jsx)(n.code,{children:"@property"})," 结合在一起，可以制作出很多酷炫的悬浮效果："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:c,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/airen/full/xxmGgeq",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/airen/full/xxmGgeq"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"拿上图中第一个效果为例，它的关键代码如下："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@property --segment-size {\n \xa0 \xa0syntax: "<length>";\n \xa0 \xa0inherits: false;\n \xa0 \xa0initial-value: 0px;\n}\n​\n.blinds {\n \xa0 \xa0--initial-segment-size: 20px;\n \xa0 \xa0--segment-size: var(--initial-segment-size);\n \xa0 \xa0\n \xa0 \xa0mask-image: repeating-linear-gradient(\n \xa0 \xa0 \xa0 \xa0to bottom,\n \xa0 \xa0 \xa0 \xa0#000000,\n \xa0 \xa0 \xa0 \xa0#000000 var(--segment-size),\n \xa0 \xa0 \xa0 \xa0transparent var(--segment-size),\n \xa0 \xa0 \xa0 \xa0transparent var(--initial-segment-size)\n \xa0  );\n \xa0 \xa0transition: --segment-size 0.5s cubic-bezier(0.16, 1, 0.3, 1);\n \xa0 \xa0\n \xa0  &:hover {\n \xa0 \xa0 \xa0 \xa0--segment-size: 0px;\n \xa0  }\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"不一样的时间轴",children:["不一样的时间轴",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#不一样的时间轴",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["时间轴组件很常见，但这个时间轴效果和其他的有所不同，",(0,i.jsx)(n.a,{href:"https://codepen.io/utilitybend/full/dyQmQYy",target:"_blank",rel:"noopener noreferrer",children:"它是使用 CSS 滚动驱动特性与 @property 一起构建的"}),"："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:a,alt:"img"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Demo 地址：",(0,i.jsx)(n.a,{href:"https://codepen.io/utilitybend/full/dyQmQYy",target:"_blank",rel:"noopener noreferrer",children:"https://codepen.io/utilitybend/full/dyQmQYy"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"其核心代码如下："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-CSS",children:'@property --clip-vertical {\n \xa0 \xa0syntax: "<percentage>";\n \xa0 \xa0initial-value: 95%;\n \xa0 \xa0inherits: false;\n}\n​\n@property --clip-horizontal {\n \xa0 \xa0syntax: "<percentage>";\n \xa0 \xa0initial-value: 100%;\n \xa0 \xa0inherits: false;\n}\n​\n@property --intro-radial {\n \xa0 \xa0syntax: "<percentage>";\n \xa0 \xa0initial-value: 0%;\n \xa0 \xa0inherits: false;\n}\n​\nmain {\n \xa0 \xa0--timeline-width: 100%;\n}\n​\n.stop {\n \xa0 \xa0--clip-horizontal: 100%;\n \xa0 \xa0--clip-vertical: 93%;\n​\n \xa0 \xa0width: calc(var(--timeline-width) / 2);\n​\n \xa0  &::before {\n \xa0 \xa0 \xa0 \xa0animation: popIn linear both;\n \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0 \xa0/* 滚动驱动相关特性 */\n \xa0 \xa0 \xa0 \xa0animation-timeline: view(block);\n \xa0 \xa0 \xa0 \xa0animation-range: cover 5% contain 22%;\n \xa0  }\n \xa0 \xa0\n \xa0  &::after {\n \xa0 \xa0 \xa0 \xa0clip-path: inset(0 0 var(--clip-vertical) var(--clip-horizontal));\n \xa0 \xa0 \xa0 \xa0animation: showLine linear both;\n \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0 \xa0/* 滚动驱动相关特性 */\n \xa0 \xa0 \xa0 \xa0animation-timeline: view(block);\n \xa0 \xa0 \xa0 \xa0animation-range: cover 10% contain 40%;\n \xa0  }\n​\n \xa0  &:nth-child(even) {\n \xa0 \xa0 \xa0 \xa0margin-left: calc(var(--timeline-width) / 2);\n \xa0 \xa0 \xa0 \xa0\n \xa0 \xa0 \xa0  &::after {\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0clip-path: inset(0 var(--clip-horizontal) var(--clip-vertical) 0);\n \xa0 \xa0 \xa0  }\n \xa0  }\n}\n​\n.text {\n \xa0 \xa0animation: slideIn linear both;\n \xa0 \xa0\n \xa0 \xa0/* 滚动驱动相关特性 */\n \xa0 \xa0animation-timeline: view(block);\n \xa0 \xa0animation-range: cover 0% contain 12%;\n}\n​\n/* 帧动画 */\n@keyframes popIn {\n \xa0 \xa00% {\n \xa0 \xa0 \xa0 \xa0scale: 0;\n \xa0  }\n \xa0 \xa060% {\n \xa0 \xa0 \xa0 \xa0scale: 1.2;\n \xa0  }\n}\n​\n@keyframes moveGradient {\n \xa0 \xa0to {\n \xa0 \xa0 \xa0 \xa0--intro-radial: 100%;\n \xa0  }\n}\n​\n@keyframes showLine {\n \xa0 \xa00% {\n \xa0 \xa0 \xa0 \xa0--clip-horizontal: 100%;\n \xa0 \xa0 \xa0 \xa0--clip-vertical: 95%;\n \xa0  }\n \xa0 \xa060% {\n \xa0 \xa0 \xa0 \xa0--clip-horizontal: 0%;\n \xa0 \xa0 \xa0 \xa0--clip-vertical: 95%;\n \xa0  }\n \xa0 \xa0100% {\n \xa0 \xa0 \xa0 \xa0--clip-horizontal: 0%;\n \xa0 \xa0 \xa0 \xa0--clip-vertical: 0%;\n \xa0  }\n}\n​\n@keyframes slideIn {\n \xa0 \xa00% {\n \xa0 \xa0 \xa0 \xa0opacity: 0;\n \xa0 \xa0 \xa0 \xa0translate: 0 50%;\n \xa0  }\n \xa0 \xa0100% {\n \xa0 \xa0 \xa0 \xa0opacity: 1;\n \xa0 \xa0 \xa0 \xa0translate: 0 3%;\n \xa0  }\n}\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"有关于滚动驱动动效相关的特性，小册后面会有相关内容对其进行详细阐述，敬请期待！"}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"小结",children:["小结",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#小结",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["CSS 的 ",(0,i.jsx)(n.code,{children:"@property"})," 的基础特性很简单，它最为出色的是，我们使用它的能力能实现很多复杂，具有创意的动效。课程中很多案例都是使用 ",(0,i.jsx)(n.code,{children:"@property"})," 构建的。最后希望课程中不同动效案例能够激发你学习，然后制作你自己的超赞例子的兴趣！非常期待能在评论中看到你使用 ",(0,i.jsx)(n.code,{children:"@property"})," 构建的各种有创意的案例。"]})]})}function B(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(E,{...e})}):E(e)}let V=B;B.__RSPRESS_PAGE_META={},B.__RSPRESS_PAGE_META["%E7%8E%B0%E4%BB%A3CSS%2F%E7%AC%AC36%E7%AB%A0%E2%80%94CSS%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7%EF%BC%9A%40property.md"]={toc:[{text:"回顾 CSS 自定义属性",id:"回顾-css-自定义属性",depth:2},{text:"CSS 的 @ 规则：@property",id:"css-的--规则property",depth:2},{text:"CSS Houdini 自定义属性 vs. CSS 原生自定义属性",id:"css-houdini-自定义属性-vs-css-原生自定义属性",depth:2},{text:"CSS Houdini 自定义属性可以做什么？",id:"css-houdini-自定义属性可以做什么",depth:2},{text:"让颜色动起来",id:"让颜色动起来",depth:3},{text:"使渐变动效更丝滑",id:"使渐变动效更丝滑",depth:3},{text:"动态计数",id:"动态计数",depth:3},{text:"让变换（transform）变得更酷",id:"让变换transform变得更酷",depth:3},{text:"制作饼图和圆形进度条",id:"制作饼图和圆形进度条",depth:3},{text:"不一样的时间轴",id:"不一样的时间轴",depth:3},{text:"小结",id:"小结",depth:2}],title:"第36章—CSS自定义属性：@property",headingTitle:"第36章—CSS自定义属性：@property",frontmatter:{}}}}]);