"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["93549"],{436121:function(n,A,d){d.r(A),d.d(A,{default:()=>l});var e=d(552676),r=d(740453);let p=d.p+"static/image/1786a7d3c8d0430a4a5745f7ac2b5667.1bf4a6c2.webp";function i(n){let A=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",h3:"h3",pre:"pre",img:"img",blockquote:"blockquote",ul:"ul",li:"li",h4:"h4",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",br:"br"},(0,r.ah)(),n.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(A.h1,{id:"29深入研究-----混合效果",children:["29.深入研究 --- 混合效果",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#29深入研究-----混合效果",children:"#"})]}),"\n",(0,e.jsxs)(A.p,{children:["到现在为止，我们还没有接触过如何为模型增加透明度效果，大家也许会说，在模型的顶点缓冲信息中，改变颜色的  ",(0,e.jsx)(A.code,{children:"alpha"})," 值不就是增加透明度了吗？没错，透明度信息是这么传入着色器中的，但是仅仅有透明度信息，并不能实现透过前面透明物体看到后面物体的效果，我们只能改变前面物体的颜色，后面的物体在深度检测阶段会检测失败，相应的片段就会被抛弃，不被渲染。"]}),"\n",(0,e.jsxs)(A.h2,{id:"片元舍弃",children:["片元舍弃",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#片元舍弃",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"片元是像素的前置阶段，片元在成为屏幕像素之前要经历一些检测过程，如果检测失败的话 GPU 会舍弃该片元，从而不被渲染。也就是说片元要么显示，要么不显示，不存在片元混合的现象。比如前后两个物体，处于后面的物体，由于被前面物体遮挡，深度测试就会失败，GPU 便会舍弃该片元不再进行渲染。"}),"\n",(0,e.jsxs)(A.h3,{id:"深度检测",children:["深度检测",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#深度检测",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"下面这个例子："}),"\n",(0,e.jsx)(A.pre,{children:(0,e.jsx)(A.code,{className:"language-javascript",children:"let face1 = createFace(2, 3, 1, [255，0, 0, 125]);\nlet face2 = createFace(3, 2, 0, [0, 255, 0, 255]);\n"})}),"\n",(0,e.jsxs)(A.p,{children:["创建了两个矩形，",(0,e.jsx)(A.code,{children:"face1"})," 为世界空间下深度值为 1 的半透明红色矩形，",(0,e.jsx)(A.code,{children:"face2"})," 为世界空间下深度值为 0 的不透明绿色矩形，此时 face1 在face2 的前面。当开启深度检测的时候，",(0,e.jsx)(A.code,{children:"face1"})," 会遮挡住 ",(0,e.jsx)(A.code,{children:"face2"}),"，大家猜猜看能不能透过红色矩形看到后面的绿色矩形？"]}),"\n",(0,e.jsx)(A.p,{children:"下图是显示结果："}),"\n",(0,e.jsx)(A.p,{children:(0,e.jsx)("img",{src:"data:image/webp;base64,UklGRg4KAABXRUJQVlA4IAIKAADQ7ACdASqMBYQCPp1Op02lpSQiIZ74ELATiWlu4XdhGrBZJKYD5y8gugx54DokvRV0mDKngZ6IBXepBfidE96SBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQE26anX+tfWvrX1r619a+tfWvrX1r619a+tfWvrX1r619a+tfWgn8IFqQX4nRPekgQIECBAgQIECBAgQIECBAgQIECA+LgAXlCIKUlBSkoKUlBSkoKUlBSkoKUlBSkoKUlBSkOPhWsYtSC/E6J70kCBAgQIECBAgQIECBAgQIECBAgQHxeuolIL8TonvSQHxHfXDAWpBfidE96SBAgQIECBAgQIECBAgQIECBAgJjgpeuGAtSC/E6J06zS3XDAWpBfidE96SBAgQIECBAgQIECBAgQIECA+L11EpBfidE96SA+I764YC1IL8TonvSQIECBAgQIECBAgQIECBAgQIEBMcFL1wwFqQX4nROnWaW64YC1IL8TonvSQIECBAgQIECBAgQIECBASRIwCuGi9Y0XnsxAwVXo6VUFKSgpSUFKSgpSUFKSgpSUFKSgpSUFKSgpSDfpBdkFKSgpSENDkuH4tSC/E6J70kCBAgQIECBAgQIECBAgQICWs0t1wwFqQX4nRPekiCP7z3xgLUgvxOie9JAgQIECBAgQIECBAgQIEBLWq0t1wwFqQX4nRPekgPiPirQIECBAgQIECBAgQIECBAgQIECBAgQICWs0t1wwFqQX4nRPekgQEtc7b0kCBAgQIECBAgQIECBAgQIECBAgQID4jyfXDAWpBfidE96SBAgJa523pIECBAgQIECBAgQIECBAgQIECBAgQHxHfXDAWpBfidE96SBAgPiPirQIECBAgQIECBAgQIECBAgQIECBAgQICWtVpbrhgLUgvxOie9JAfEfFWgQIECBAgQIECBAgQIECBAgQIECBAgQEtZpbrhgLUgvxOie9JAgJa523pIECBAgQIECBAgQIECBAgQIECBAgQHxHk+uGAtSC/E6J70kCBAS1ztvSQIECBAgQIECBAgQIECBAgQIECBAgPiO+uGAtSC/E6J70kCBAfEfFWgQIECBAgQIECBAgQIECBAgQIECBAgQEtarS3XDAWpBfidE96SA+I+KtAgQIECBAgQIECBAgQIECBAgQIECBAgJazS3XDAWpBfidE96SBAS1ztvSQIECBAgQIECBAgQIECBAgQIECBAgPiPJ9cMBakF+J0T3pIECAlrnbekgQIECBAgQIECBAgQIECBAgQIECBAfEd9cMBakF+J0T3pIECA+I+KtAgQIECBAgQIECBAgQIECBAgQIECBAgJa1WluuGAtSC/E6J70kB8R8VaBAgQIECBAgQIECBAgQIECBAgQIECBAS1mluuGAtSC/E6J70kCAlrnbekgQIECBAgQIECBAgQIECBAgQIECBAfEeT64YC1IL8TonvSQIEBLXO29JAgQIECBAgQIECBAgQIECBAgQIECA+I764YC1IL8TonvSQIEB8R8VaBAgQIECBAgQIECBAgQIECBAgQIECBAS1mluuGAtSC/E6J70kCAlrnbekgQIECBAgQIECBAgQIECBAgQIECBAfEd9cMBakF+J0T3pIECA+I+KtAgQIECBAgQIECBAgQIECBAgQIECBAgJazS3XDAWpBfidE96SBAS1ztvSQIECBAgQIECBAgQIECBAgQIECBAgPgPJ5yVY/GYj4yjTb3Azw6TYKUlBSkoKUlBSkoKUlBSkoKUlBSkoKUlBSkDQDj/oMxHxmI8XnNeqqwvE6J70kCBAgQIECBAgQIECBAgQIECBAg7SWaS84hof//////////////////////wIP86Mn5CDDAWpBfidE96SBAgQIECBAgQIECBAgQIECA+L11IeukF+J0T3pHxHfXDAWpBfidE96SBAgQIECBAgQIECBAgQIECBAgJjgpp9cMBakF+J0RacWkgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAfF66kLpBfidE96SAlrNLdcMBakF+J0T3pIECBAgQIECBAgQIECBAgQID4vU7zx6OpVKpVKpVKpVKpUQO+uGAtSC/E6J70kCBAgQIECBAgQIECBAgQIECBATDGRfkqWUDResaL1jResaL1jResaL1jResaL1jResZ16RalhOie9JAgQIECBAgQIECBAgQIECBAgQIECBAgQIEQrptQgV02oQK6bUIFXeJ0T3pIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgJAAP7+wcAAAAAAAAAAAAB5usiQOAG+cZw58gkElfFjfvO+E8feATAAIyssY31/3OD1HrLdmx03ZsdoXVK6Z5/cRGlCIOoAc5wOBwOBwOBwOBwOBwOBwOBwOBquWyajRRQscICdUQKHyd03jrgAAAWQAAAAAAAAAAAAAAOv1/exhR95umS/+mj/P/Ab/4oe9BdPptIBsajayuLduQT4mX6RIlTf7twV/Rtf2CzVE9ThtUOI0Yl7mrLaVvHdNWbiuW4rluK5biuW4rluK5biuW4rluK5biuW4rluK5biuW4rluK5biuW4rpBtnCl9///VCP+rkegof/7OM5IIN/HPDrtGAPAjUQrxTUuYr7mK+5V3YhAK/EILoO4m+jL/NCVeXum3p+AAAFNmxAAAABvXwAIsUfVuIEAYQpZ24gQBWxcW4gQBhClnbiBAFbFxbiBAGEKWduIEAVsXFuIEAYQpZ24gQBWxcW4gQBhClnbiBAFbFxbiBAGEKWduIEAVsXFuIEAYQpZ24gQBWxcW4gQBhClnbiBAEkKWduIEASQpZ24gQBJClnbiBAEhi57MrKyXzFnH//4S1/Shp4cfywoUfsc15PfOZbW7pDh/yi/gNWbSZFmYMVk+KGm+Eb/hSbm5ubm5ubm5ubm5ubm5ubm5twVA+Qbf6q/CK0j/pkUhTPXYX/VHF1vuC417B6NAjf0JdsT8lRt+cTDvV46JAnLfqBeqlefXIgABBdXIKB0nJwQBQaEDvj/QAZmQIY0DMyBDGgZmQIY0AfcgJLOiHB9keJIBAAApxQKRY3gAAB9aiAACZ1EADzfHEe8fLY3UQAE2ALKurbC0IvCSGPTKolnw0q/gHKg2rugAAAAAAAAAAAAAAAAAAA=",alt:""})}),"\n",(0,e.jsx)(A.p,{children:"事实上，由于深度检测，尽管 face1 的颜色信息包含半透明，但是 GPU 检测到 face2 的片元在 face1 的后面，基于深度检测机制，GPU 舍弃了 face2 的片元，使得我们只能看到红色的face1。"}),"\n",(0,e.jsxs)(A.h3,{id:"主动舍弃片元",children:["主动舍弃片元",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#主动舍弃片元",children:"#"})]}),"\n",(0,e.jsxs)(A.p,{children:["舍弃片元的时机除了深度测试不通过以外，我们还可以用编程的手段来主动舍弃。\n这涉及到一个着色器命令",(0,e.jsx)(A.code,{children:"discard"}),"。"]}),"\n",(0,e.jsx)(A.p,{children:"下面这段代码演示了舍弃片元操作："}),"\n",(0,e.jsx)(A.pre,{children:(0,e.jsx)(A.code,{className:"language-glsl",children:"varying vec4 v_Color;\nuniform bool u_Discard;\nvoid main(){\n    if(v_Color.r < 0.8){\n        if(u_Discard)\n        discard;\n    }\n    gl_FragColor = v_Color;\n}\n"})}),"\n",(0,e.jsx)(A.p,{children:"当我们启用 discard 命令时候，片元着色器就会判断当前片元颜色的 r 分量是否小于 0.8 ，小于 0.8 的话，就将该片元舍弃不再渲染。"}),"\n",(0,e.jsx)(A.p,{children:(0,e.jsx)("img",{src:p,alt:""})}),"\n",(0,e.jsxs)(A.p,{children:["那么，如何实现真正的透明效果呢？这就是本节要讲的混合",(0,e.jsx)(A.code,{children:"Blending"}),"技巧，混合的实质就是将前后多个重叠模型的颜色混合成一种新的颜色，该颜色包含前后多个模型的颜色信息。换句话说，这种技术能够实现透过透明物体（也可以是其他有透明度的物体）看到后面的物体效果。"]}),"\n",(0,e.jsxs)(A.h2,{id:"透明度",children:["透明度",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#透明度",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"我们知道，透明度是一个从 0 到 1 之间的浮点数，0 代表全透明，1 代表不透明，介于 0 和 1  之间的数值代表半透明。"}),"\n",(0,e.jsx)(A.p,{children:"全透明的特点是能够让后面物体的颜色完全体现出来，半透明效果体现的颜色则是透明物体和后面物体颜色的混合颜色，比如当透明度为 0.5 时，显示的颜色由自身颜色的一半和后面物体颜色的一半混合而成，不透明则是完全不显示后面物体的颜色成分。"}),"\n",(0,e.jsxs)(A.h2,{id:"如何实现混合",children:["如何实现混合",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#如何实现混合",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"那么，如何实现颜色的混合呢？"}),"\n",(0,e.jsx)(A.p,{children:"首先我们需要开启混合特效。"}),"\n",(0,e.jsx)(A.pre,{children:(0,e.jsx)(A.code,{className:"language-javascript",children:"gl.enable(gl.BLEND);\n"})}),"\n",(0,e.jsx)(A.p,{children:"接下来我们需要告诉 GPU 如何混合两种颜色。"}),"\n",(0,e.jsx)(A.p,{children:"下面是 WebGL 混合两种颜色的方式之一："}),"\n",(0,e.jsx)(A.p,{children:"$\nResult = C_{source} * F_{source} + C_{dest} * F_{dest}\n$"}),"\n",(0,e.jsxs)(A.blockquote,{children:["\n",(0,e.jsx)(A.p,{children:"此处我们以相加的方式来混合两种颜色，事实上，WebGL 可以设置运算方式，不一定是相加，也可以是相减、取两者中较大值、取两者中较小值、以及一些逻辑运算等。"}),"\n"]}),"\n",(0,e.jsx)(A.p,{children:"思考如下一个场景，有一个绿色物体，在它前面放一个透明度为 0.6 的红色玻璃，那么透过红色玻璃看到绿色物体的颜色是什么呢？我们找出公式中四个参数："}),"\n",(0,e.jsxs)(A.ul,{children:["\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsx)(A.p,{children:"$C_{source}$：源颜色，代表将要绘制的RGBA 颜色信息，用向量（Rs, Gs, Bs, As） 来表示，此处即红色玻璃的颜色RGBA（1， 0，0 ，0.6）。"}),"\n"]}),"\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsx)(A.p,{children:"$F_{source}$：源因子，代表将要绘制的颜色的透明度，用向量（Sr, Sg, Sb, Sa）来表示，此处代表红色玻璃使用的透明度因子，我们可以采用玻璃自身的透明度，也可以重新设置。"}),"\n"]}),"\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsx)(A.p,{children:"$ C_{dest}$：目标颜色的颜色信息，用向量（Rd, Gd, Bd, Ad）来表示，此处代表绿色物体的RGBA颜色。"}),"\n"]}),"\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsx)(A.p,{children:"$F_{source}$：目标（绿色物体）颜色的透明度因子，用向量（Dr, Dg, Db, Da）来表示。通常我们用 1 减去源颜色（即玻璃）的透明度因子作为目标颜色的透明度因子，即(1- Sr, 1- Sg, 1- Sb, 1- Sa)。"}),"\n"]}),"\n"]}),"\n",(0,e.jsx)(A.p,{children:"需要记住的是，这四个参数都是 4 维向量，分别代表 RGBA 对应位置的信息。"}),"\n",(0,e.jsxs)(A.h4,{id:"因子设置",children:["因子设置",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#因子设置",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"那么，源颜色和目标颜色是已知的，我们只需要设置好源因子和目标因子就可以了，WebGL 为我们内置了一些因子："}),"\n",(0,e.jsxs)(A.table,{children:["\n",(0,e.jsxs)(A.thead,{children:["\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.th,{children:"参数"}),"\n",(0,e.jsx)(A.th,{children:"值"}),"\n"]}),"\n"]}),"\n",(0,e.jsxs)(A.tbody,{children:["\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.ZERO"}),"\n",(0,e.jsx)(A.td,{children:"(0,0,0,0)"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.ONE"}),"\n",(0,e.jsx)(A.td,{children:"(1,1,1,1)"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.SRC_COLOR"}),"\n",(0,e.jsx)(A.td,{children:"(Rs, Gs, Bs, As)"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.DST_COLOR"}),"\n",(0,e.jsx)(A.td,{children:"(Rd, Gd, Bd, Ad)"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.ONE_MINUS_SRC_COLOR"}),"\n",(0,e.jsx)(A.td,{children:"(1- Rs, 1- Gs, 1- Bs, 1- As)"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.ONE_MINUS_DST_COLOR"}),"\n",(0,e.jsx)(A.td,{children:"(1- Rd, 1- Gd, 1- Bd, 1- Ad)"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.SRC_ALPHA"}),"\n",(0,e.jsx)(A.td,{children:"(As, As, As, As)"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.DST_ALPHA"}),"\n",(0,e.jsx)(A.td,{children:"(Ad,Ad, Ad, Ad)"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.ONE_MINUS_SRC_ALPHA"}),"\n",(0,e.jsx)(A.td,{children:"(1-As, 1- As, 1- As, 1- As)"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.ONE_MINUS_DST_ALPHA"}),"\n",(0,e.jsx)(A.td,{children:"（1-Ad, 1- Ad, 1- Ad, 1- Ad）"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.CONSTANT_COLOR"}),"\n",(0,e.jsx)(A.td,{children:"常量颜色的RGBA值"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.ONE_MINUS_CONSTANT_COLOR"}),"\n",(0,e.jsx)(A.td,{children:"1 减去常量颜色的 RGBA值"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.CONSTANT_ALPHA"}),"\n",(0,e.jsx)(A.td,{children:"常量透明度"}),"\n"]}),"\n",(0,e.jsxs)(A.tr,{children:["\n",(0,e.jsx)(A.td,{children:"gl.ONE_MINUS_CONSTANT_ALPHA"}),"\n",(0,e.jsx)(A.td,{children:"1减去常量透明度"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,e.jsx)(A.p,{children:"以上就是内置的因子系数，这些系数都是包含 4 个分量的向量。"}),"\n",(0,e.jsxs)(A.blockquote,{children:["\n",(0,e.jsx)(A.p,{children:"请一定要分清源颜色和目标颜色："}),"\n",(0,e.jsxs)(A.ul,{children:["\n",(0,e.jsx)(A.li,{children:"源颜色：将要绘制的颜色，通常指将要绘制的拥有透明度物体的颜色。"}),"\n",(0,e.jsx)(A.li,{children:"目标颜色：已经绘制的颜色，通常指被透明度物体盖住的后面物体的颜色。"}),"\n"]}),"\n"]}),"\n",(0,e.jsx)(A.p,{children:"有了这四个参数，GPU 就会按照如下公式替我们计算像素的最终颜色了："}),"\n",(0,e.jsxs)(A.p,{children:["$\n\\begin{aligned}\nResult &= (1, 0, 0, 0.6) * (0.6, 0.6, 0.6, 0.6)\\\\ \\\\  &+ (0,1,0, 1) * (0.4,0.4,0.4,0.4) \\",(0,e.jsx)(A.br,{}),"\n","\\",(0,e.jsx)(A.br,{}),"\n","&=(0.6,  0.4,  0, 0.76)\n\\end{aligned}\n$"]}),"\n",(0,e.jsxs)(A.blockquote,{children:["\n",(0,e.jsx)(A.p,{children:"源颜色因子和目标颜色因子也都是 4 维向量，也就是(0.6, 0.6, 0.6, 0.6)和(0.4, 0.4, 0.4，0.4）"}),"\n"]}),"\n",(0,e.jsxs)(A.p,{children:["上面我们是将源颜色和目标颜色的RGBA 信息乘以一个固定的向量因子，事实上，WebGL 允许我们单独为 RGB 和 Alpha 设置对应的因子，使用 ",(0,e.jsx)(A.code,{children:"gl.blendFuncSeparate"}),"函数可完成该功能。"]}),"\n",(0,e.jsx)(A.pre,{children:(0,e.jsx)(A.code,{className:"language-javascript",children:"gl.blendFuncSeparate(src_rgb_factor,  des_rgb_factor, src_alpha_factor,  des_alpha_factor)\n"})}),"\n",(0,e.jsx)(A.p,{children:"其中："}),"\n",(0,e.jsxs)(A.ul,{children:["\n",(0,e.jsx)(A.li,{children:"src_rgb_factor: 代表源颜色的 RGB 因子。"}),"\n",(0,e.jsx)(A.li,{children:"des_rgb_factor: 代表目标颜色的RGB 因子。"}),"\n",(0,e.jsx)(A.li,{children:"src_alpha_factor：代表源颜色的透明度部分的因子。"}),"\n",(0,e.jsx)(A.li,{children:"des_alpha_factor：代表目标颜色的透明度部分的因子。"}),"\n"]}),"\n",(0,e.jsx)(A.p,{children:"假设我们需要将源颜色的 RGB 因子设置为源颜色的透明度，源颜色的透明度因子采用自身的透明度，目标颜色的 RGB 因子设置为 1，目标颜色的透明度因子设置为 0，那么我们可以这样设置："}),"\n",(0,e.jsx)(A.pre,{children:(0,e.jsx)(A.code,{className:"language-javascript",children:"gl.blendFuncSeparate(gl.SRC_ALPHA,  gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ZERO);\n"})}),"\n",(0,e.jsxs)(A.h4,{id:"混合公式设置",children:["混合公式设置",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#混合公式设置",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"上面我们以源颜色和混合颜色的加法公式来计算，WebGL 还提供了减法、逻辑运算等方式来计算最终颜色。使用gl.blendEquation来指定运算规则，规则有以下几种："}),"\n",(0,e.jsxs)(A.ul,{children:["\n",(0,e.jsxs)(A.li,{children:["gl.FUNC_ADD：相加。","\n",(0,e.jsxs)(A.ul,{children:["\n",(0,e.jsx)(A.li,{children:"源颜色 * 源因子 + 目标颜色 * 目标因子"}),"\n"]}),"\n"]}),"\n",(0,e.jsxs)(A.li,{children:["gl.FUNC_SUBTRACT：相减。","\n",(0,e.jsxs)(A.ul,{children:["\n",(0,e.jsx)(A.li,{children:"源颜色 * 源因子 - 目标颜色 * 目标因子"}),"\n"]}),"\n"]}),"\n",(0,e.jsxs)(A.li,{children:["gl.FUNC_REVERSE_SUBTRACT：反减。","\n",(0,e.jsxs)(A.ul,{children:["\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsx)(A.p,{children:"目标颜色 - 源颜色。"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,e.jsxs)(A.h2,{id:"混合实战",children:["混合实战",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#混合实战",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"以上就是混合的理论，比较简单，主要是针对颜色和透明度的设置，接下来，我们就要进入实战阶段了。"}),"\n",(0,e.jsxs)(A.h3,{id:"混合前的注意事项",children:["混合前的注意事项",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#混合前的注意事项",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"在写代码之前，我们再回顾一下深度测试的概念。"}),"\n",(0,e.jsx)(A.p,{children:"深度测试是这样的，GPU 绘制一个像素点的时候，会先检测当前位置是否存在片元，如果存在片元，则比较即将绘制的片元与已经存在的片元之间的 Z 值深度，距离屏幕远的片元会被舍弃，保留距离近的片元，同时将深度缓存值更新为最近保留的片元深度，如此循环测试，最终保留离屏幕最近的片元，完成遮挡效果。"}),"\n",(0,e.jsx)(A.p,{children:"在混合之前，我们需要考虑这个问题。因为场景中透明物体和不透明物体的顺序是不确定的，那如何绘制才能保证正确的混合和正确的遮挡呢？"}),"\n",(0,e.jsx)(A.p,{children:"记住下面这两个准则："}),"\n",(0,e.jsxs)(A.ul,{children:["\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsx)(A.p,{children:"透明物体在不透明物体前面时，混合颜色。"}),"\n"]}),"\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsx)(A.p,{children:"透明物体在不透明物体后面时，不混合颜色，采用深度检测遮挡。"}),"\n"]}),"\n"]}),"\n",(0,e.jsx)(A.p,{children:"对应的策略是："}),"\n",(0,e.jsxs)(A.ul,{children:["\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsx)(A.p,{children:"将透明物体和不透明物体区分开。"}),"\n"]}),"\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsxs)(A.p,{children:["首先开启深度更新功能",(0,e.jsx)(A.code,{children:"gl.depthMask(true)"}),"，关闭混合功能",(0,e.jsx)(A.code,{children:"gl.disable(gl.BLEND)"}),"。绘制所有不透明物体，绘制完后，深度缓存里保留的是离屏幕最近的物体的深度信息。"]}),"\n"]}),"\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsx)(A.p,{children:"对透明物体由远及近进行排序。"}),"\n"]}),"\n",(0,e.jsxs)(A.li,{children:["\n",(0,e.jsx)(A.p,{children:"开启混合功能，关闭深度更新功能，按照顺序对透明物体绘制。"}),"\n"]}),"\n"]}),"\n",(0,e.jsxs)(A.h3,{id:"绘制两个物体",children:["绘制两个物体",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#绘制两个物体",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"准备两个物体，第一个物体是一个红色玻璃，透明度为 0.5，第二个物体是一个不透明的绿色箱子，红色玻璃在前，绿色箱子在后面。"}),"\n",(0,e.jsx)(A.pre,{children:(0,e.jsx)(A.code,{className:"language-javascript",children:"//开启混合功能\ngl.enable(gl.BLENDING);\nlet face1 = createFace(2, 3, 1, [255，0, 0, 125]);\nlet face2 = createFace(3, 2, 0, [0, 255, 0, 255]);\n"})}),"\n",(0,e.jsx)(A.p,{children:"源透明因子采用源目标的透明度，目标透明因子用 1减去源透明因子。"}),"\n",(0,e.jsx)(A.pre,{children:(0,e.jsx)(A.code,{className:"language-javascript",children:"gl.blendFunc(gl.SRC_ALPHA,  gl.ONE_MINUS_SRC_ALPHA);\n"})}),"\n",(0,e.jsxs)(A.h4,{id:"混合相加",children:["混合相加",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#混合相加",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"设置成混合相加，这也是默认的混合方式："}),"\n",(0,e.jsx)(A.pre,{children:(0,e.jsx)(A.code,{className:"language-javascript",children:"gl.blendEquation(gl.FUNC_ADD);\n"})}),"\n",(0,e.jsx)(A.p,{children:"效果如下："}),"\n",(0,e.jsx)(A.p,{children:(0,e.jsx)("img",{src:"data:image/webp;base64,UklGRv4KAABXRUJQVlA4IPIKAABwCAGdASrwBaQCPp1Op02lpKQiIVq4GLATiWlu4XdhGwQHl9bXP9ek7/gRoBZWQKb6zbjp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06EckC5D6ujLwM0Eeeroy8DNBHnq6MvAzQR56ujLwM0Ed951HhwB+dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnToTt28KFChQoUKE00TJ/fv379+/fv379+/fv379+/fv379+/fv379+/fv379umdJyZMmTJkyZLzRMn9+/fv379+/fv379+/fv379+/fv379+/fv379+/fv26Z0nJkyZMmTJkvNEyf379+/fv379+/fv379+/fv379+/fv379+/fv379+/bpnScmTJkyZMmS80TJ/fv379+/fv379+/fv379+/fv379+/fv379+/fvsF5JI89XRl39lh9FZiz1dTBHnq6MvAzQR56ujLwM0Eeeroy8DNBHnq6MTCwmDQGn1dGXgZnHwg0x06dOnTp06dOnTp06dOnTp06dOnTp06dOnToWi1JHWZoDos+S6/LfJdflvkutSzlkI9Euh7eFChQoUKFChQoUKFChQoUKFChQoUKFChQoTTQ9u0d2T+/fv379+/fZ5nDUlTQ9vChQoUKFChQoUKFChQoUKFChQoUKFChQoUJpohNslXWCRIkSJEiRIgW0eWs9mB+dOnTp06dOnTp06dOnTp06dOnTp06dOnTp0LRCbZKusEiRIkSJEiRAto8tZ7MD86dOnTp06dOnTp06dOnTp06dOnTp06dOnToWiE2yVdYJEiRIkSJEiBbR5az2YH506dOnTp06dOnTp06dOnTp06dOnTp06dOnQtEJtkq6wSJEiRIkSJEC2jy1nswPzp06dOnTp06dOnTp06dOnTp06dOnTp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",alt:""})}),"\n",(0,e.jsxs)(A.h4,{id:"混合相减",children:["混合相减",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#混合相减",children:"#"})]}),"\n",(0,e.jsx)(A.pre,{children:(0,e.jsx)(A.code,{className:"language-javascript",children:"gl.blendEquation(gl.FUNC_SUBTRACT);\n"})}),"\n",(0,e.jsx)(A.p,{children:"效果如下："}),"\n",(0,e.jsx)(A.p,{children:(0,e.jsx)("img",{src:"data:image/webp;base64,UklGRm4IAABXRUJQVlA4IGIIAAAQwACdASqWBGoCPp1Opk0lpKQiIj84ALATiWdu4XdFJZAWqX4D2X1jVuT1Ubc/zHY7IAZPy8QuN9TUAV4hcb6moArxC431NQBXiFxvqagCvELjfU1AFeIXG+pqAK8QuN9TUAV4hcb6moArxC431NQBXiFxvqagCvELjfU1AFeIXG+pqAK8QuN9TUAV4hcb6moArxC431NQBXiFxvqagCvELjfU1AFeIXG+pqAK8QuN9TUAV4hcb6moArxC431NQBXiFNF+v7v/kuS5LkuS5LkuS5LkuS5LkuS5LkuS5HGODsrzGIXG+pqAK8QuN9TUAV4hcb6moArw/w3kg5BHOTYdhlorNPhCZA56sy8QuN9TUAV4hcb6moArxC431NQBXg+DJqAK8QuN9S2dwpG+pqAK8QuN9TUAV4hcb6moArxC431LZ3Ckb6moArxCng56sy8QuN9TUAV4hcb6moArxC431NQBXg+DnqzLxC431NF2gYb6moArxC431NQBXiFxvqagCvELi9W/1D+i/ov6L+gTXNMfWYSXJclyXJclyXJclyXJclyXJclyXJcjbktSJcX/Lvvj8i/QCRzU7e+MVeIXG+pqAK8QuN9TUAV4hcX2urTxF9x1mXiFxvpwmBmTtGpyagCvELjfU1AFeIXG+pqAK8QpkPSyfTyO4UjfU1AFeIU8HPUs7hSN9TUAV4hcb6moArxC431NQBVM4em/ErzFxvqagCuqRqyVVN110b6moArxC431NQBXiFxvqaf42cNx8SvMXG+pqAK6pGpxvxK8xcb6moArxC431NQBXiFxvqaeR2SL7XVqvELjfU0/xtAwvtdWq8QuN9TUAV4hcb6moArxC43034cREGHw8vELjfU08juFHYYfDy8QuN9TUAV4hcb6moArxC43xVMOD4OerMvELjfU0XaCC9hh8PLxC431NQBXiFxvqagCvELjfFUw4Pg56sy8QuN9TRdoGF9rq1XiFxvqagCvELjfU1AFeIXG+m/DiIgw+Hl4hcb6mnkdwo7DD4eXiFxvqagCvELjfU1AFeIXG+KphwfBz1Zl4hcb6mi7QML7XVqvELjfU1AFeIXG+pqAK8QuN9N+HERBh8PLxC431NPI7iCbwc9WZeIXG+pqAK8QuN9TUAV4hcbj4cREGHw8vELjfU08juFHYYfDy8QuN9TUAV4hcb6moArxC43xVMOD4OerMvELjfU0XaBhfa6tV4hcb6moArxC431NQBXiFxvpvw4iIMPh5eIXG+pp5HcKOww+Hl4hcb6moArxC431NQBXiFxviqYcHwc9WZeIXG+pou0EF7DD4eXiFxvqagCvELjfU1AFeIXG+KphwfBz1Zl4hcb6mi7QML7XVqvELjfU1AFeIXG+pqAK8QuN9N+HERBh8PLxC431NPI7hR2GHw8vELjfU1AFeIXG+pqAK8QuN8VTDg+DnqzLxC431NF2gYX2urVeIXG+pqAK8QuN9TUAV4hcb6bGU8zZ3ned53lLqO4R1DWR2HYdh2HYdh2HYdh2HYdh2HYdh2HYcvNhFYxmRUlSVJUrPqPupKvELjfU1AFeIXG+pqAK8QuN9TeqqpnE7NY476L+WHNZO0X3H/Dy8QuN9TUAV4hcb6moArxC431NQA7CAL8TGFMX8T2NiexpUvsy8QuN9TUAV4hcb6moArxC431NQBXiFPBk1AFeIXG+pbO4gpG+pqAK8QuN9TUAV4hcb6moArxC43034cRdG+pqAK8HwZNQBXiFxvqagCvELjfU1AFeIXG+pqAK6jCyX5o7DsOw7DsOw7DsOw7DsOw7DsOw7DsOONtSEAK8QuN9TUAV4hcb6moArxC431NQBXiGDaLx+Px+Px+Px+JupqAK8QuN9TUAV4hcb6moArxC431NQBXiFxvqagCvELjfU1AFeIXG+pqAK8QuN9TUAV4hcb6moArxC431NQBXiFxvqagCvELjfU1AFeIXG+pqAK8QuN9TUAV4hcb6moArxC431NQBXiFxvqagCvELjfU1AFeIXG+pqAK8QuN9TUAV4hcb6moArxC431NP8AAA/v+1ngAAAAAAAAAAAAAAAcPaw0e9/AJ8O44DVIkl8R/9hX0VJp1WA+mZjUwb/b/DnwY/+pBlzPDfkwPIN4XQP3B/p31vqx+qKbHz9/ACRKmuz4BhYOr6EAAFReAAAKnAAA5hwBAmcOHZH/0FS8v/pZXOJo3CN1bXEOErIoEzaTTNoDdMZyXHce/0f0ZBUHMd4opiTmv7ida41WVlZWVlZWVlZWVlZWVkKIkdI9WXsisHvBFdr8QP/2kvabLXK8aqimyuqLLdOfzoaxfIZRaRZXgyGZP/VkpmmOoBScBo5//jhwQOHg0tKHAAYn+OwkBnAGjCAwFqLI8oSgoBamhTTQJ+EbhARE0KyjV/DgIrRHTz2OwONwgIiaFZNyDgIrRHTz2n4RuEBETQrKNX8OAitEdPPY7A43CAiJoVk3IOAitEdPPafhG4QERNCso1fw4CK0R089jsDjcICImhWTcg4CK0R089p+EbhARE0KyjV/DgIrRHTz2OwONwgCohkXvCngtobd0P3+0+rkNVCqHg1LXuFamPbLfzdS1UMF2nhDbGItSgTHCbDRe5o28t0GRkXtdubojPJvqa7D5j8baawBVsAGG8XxQ9ID73R3IATekb4eUQfkcWf3c7dryhmY/nbteUMzH87dryhmarGpOH/2PQd2voQA3AAS1rc8AAaI+QhgAAMUKgAUGj8q6MVN/ocqN26PRG3+nCnNpYn6ERbgjdkIU7G9vb29vb29vb29vb29vS0CaiNwf+cXfpSd3h2Yfz/bhR8AAAAAAAAAAAAAAAAAAAAAAA",alt:""})}),"\n",(0,e.jsx)(A.p,{children:"可以看到，中间相交部分的颜色变成了黑色，大家用上面的公式算一下就会理解。"}),"\n",(0,e.jsxs)(A.p,{children:["$\n\\begin{aligned}\nC_{result} &= (1 * 0.5 - 0 * 0.5, 0 * 0.5 - 1 * 0.5, 0 * 0.5 - 0 * 0.5, 0.5 * 0.5 - 0.5 * 1 )\n\\",(0,e.jsx)(A.br,{}),"\n","& = (0.5, -0.5, 0, -0.25) \\",(0,e.jsx)(A.br,{}),"\n","& = (0.5, 0, 0, 0)\n\\end{aligned}\n$"]}),"\n",(0,e.jsx)(A.p,{children:"透明度是 0  ，所以显示黑色。"}),"\n",(0,e.jsxs)(A.h4,{id:"混合反减",children:["混合反减",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#混合反减",children:"#"})]}),"\n",(0,e.jsx)(A.pre,{children:(0,e.jsx)(A.code,{className:"language-javascript",children:"gl.blendEquation(gl.FUNC_SUBTRACT);\n"})}),"\n",(0,e.jsx)(A.p,{children:(0,e.jsx)("img",{src:"data:image/webp;base64,UklGRpQFAABXRUJQVlA4IIgFAACwgQCdASp4BLQBPp1OpE2lpSOiIR24GLATiWlu4XdhGwJsFH3M/RvtwNwBvUwA586dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp06dOnTp03xeLpOwwTGOMcY4xxjjHGOMV1etC906dOnTp06dOnTp06dOnTp06dOnTp06dOnSqYpUze7pXuGDBYsWLFixYsWLFixYsWLFixYsWLFixYsWLFg0xPJkyZDVyo0aNGjRo0aNGjRo0aNGjRo0aNGjRo0aNGi8B5s02kpkGuwwTGOMcY4xxjjFXo+OUX506dOnTp06dOnTp06dOnTp06dOnTp06dOm/NrjsQvJeQ9SyZMmTJkyZMmTJkyZMmTJkyZMmTJkyZMmTHmy2Ij1asxXRfOnTp06dOnTp06dOnTp06dOnTp06dOnTp0ddNghYsWDTGerVq1atWrVq1atWrVq1atWrVq1atWrVq1am3TYIWLFg0xnq1atWrVq1atWrVq1atWrVq1atWrVq1atWpt02NfgwYCV0Xzp06dOnTp06dOnTp06dOnTp06dOnTp06dHXTYIWLFg0xnq1atWrVq1atWrVq1atWrVq1atWrVq1atWpt02CFixYNMZ6tWrVq1atWrVq1atWrVq1atWrVq1atWrVqbdNghYsWDTGerVq1atWrVq1atWrVq1atWrVq1atWrVq1am3TYIWLFg0xnq1atWrVq1atWrVq1atWrVq1atWrVq1atWpoK+X3/RfuXrLwbwbwbwbwbwbwAUFg/Cs6dOnTp06dOnTp06dOnTp06dOnTp06dOnSo95Lj7l+i+DeDeDeDeDeDeDd/4/3zIGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwErowndHoyDoQy7M6dOnTp06dOnTp06dOnTp06dOnTp06dOnIBI34TxGDVh2GCYxxjjHGOMcYq58ppLyEGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBg1q94CZPClZ5CDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDBgwYMGDAQAD+/94H+AAjAAAAAAAAAAAAAAtmoS85uczm6n68q/8BWczn/+MWEQkZ5D/vbHHU0y/ZJ89xyZT9VORKrbbbkeSbZFEVvev/v95Anf/4a6hE4AAkBRKAslIVN652VaXAK/fiowpWL/mQH1KZRQUvFwACgzqmAYAOcQOGABx2Q+yHRp9BgdNfan0Q9KoNlAvELo+IIzLjD2WY+GkUFTWKdgyTnLfiABYi1gIwwNNIh5yZ7IWOCAASLDsCABLvsAAfzUAgATsVAAA+hQAD8FAAPwUAA/BQAAMzQJp+QhejCWt0asyJaoQAVtA/QADmiLNFaG6XhfgsheyPkGHgUAtZeP1+v1+v1+tAqPqfxBxFTgo/GwyZB0AFfTJbQAAAKfwpkEsB2f2qnJjEP/OxQXEDy8+MixeX9dr7PIzCc7GWPWuraAWnenenenenenem+RSY8e8VfdzJVrxv/O2DG0qH4CAAAAAAAAAAAAAAAAAAAAAAAAA=",alt:""})}),"\n",(0,e.jsx)(A.p,{children:"红色相间部分为半透明绿色，验证步骤如下："}),"\n",(0,e.jsxs)(A.p,{children:["$\n\\begin{aligned}\nC_{result} &= ( 0 * 0.5  - 1 * 0.5 ,  1 * 0.5 -  0 * 0.5,   0 * 0.5 - 0 * 0.5,   0.5 * 1 - 0.5 * 0.5 )\\",(0,e.jsx)(A.br,{}),"\n","& = (-0.5, 0.5, 0, 0.25) \\",(0,e.jsx)(A.br,{}),"\n","& = (0, 0.5, 0, 0.25)\n\\end{aligned}\n$"]}),"\n",(0,e.jsxs)(A.h3,{id:"回顾",children:["回顾",(0,e.jsx)(A.a,{className:"header-anchor","aria-hidden":"true",href:"#回顾",children:"#"})]}),"\n",(0,e.jsx)(A.p,{children:"本节，我们讲述了混合的使用技巧，学习了透明颜色的计算方式，并进一步理解了深度测试与深度保持的意义。"}),"\n",(0,e.jsxs)(A.p,{children:["下一节，我们学习 WebGL 的另一个重要技术：",(0,e.jsx)(A.code,{children:"帧缓冲"}),"。"]})]})}function s(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:A}=Object.assign({},(0,r.ah)(),n.components);return A?(0,e.jsx)(A,{...n,children:(0,e.jsx)(i,{...n})}):i(n)}let l=s;s.__RSPRESS_PAGE_META={},s.__RSPRESS_PAGE_META["WebGL%20%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E8%B7%B5%2F29.%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6%20---%20%E6%B7%B7%E5%90%88%E6%95%88%E6%9E%9C.md"]={toc:[{text:"片元舍弃",id:"片元舍弃",depth:2},{text:"深度检测",id:"深度检测",depth:3},{text:"主动舍弃片元",id:"主动舍弃片元",depth:3},{text:"透明度",id:"透明度",depth:2},{text:"如何实现混合",id:"如何实现混合",depth:2},{text:"因子设置",id:"因子设置",depth:4},{text:"混合公式设置",id:"混合公式设置",depth:4},{text:"混合实战",id:"混合实战",depth:2},{text:"混合前的注意事项",id:"混合前的注意事项",depth:3},{text:"绘制两个物体",id:"绘制两个物体",depth:3},{text:"混合相加",id:"混合相加",depth:4},{text:"混合相减",id:"混合相减",depth:4},{text:"混合反减",id:"混合反减",depth:4},{text:"回顾",id:"回顾",depth:3}],title:"29.深入研究 --- 混合效果",headingTitle:"29.深入研究 --- 混合效果",frontmatter:{}}}}]);