"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["96889"],{217709:function(e,s,a){a.r(s),a.d(s,{default:()=>et});var n=a(552676),c=a(740453);let i=a.p+"static/image/d4abe5ca90cb87968c5775f26f8c9cb7.55fa592e.webp",d=a.p+"static/image/091ad562950ad7a0c1c7500dde63ded9.854674fe.webp",r=a.p+"static/image/8ecba5b4e660a7de4668279d6139b505.3e359a9d.webp",t=a.p+"static/image/4b542eb860a353c502c9e021a53b61af.655a6515.webp",l=a.p+"static/image/ed46081a4c57f4c02c2ddfac8a92a460.21afd0dc.webp",p=a.p+"static/image/de1600eb74c7e64ea12d7fca6afdc03c.1421f095.webp",j=a.p+"static/image/63a5e8d429406c454d6193458e886867.10271d99.webp",x=a.p+"static/image/9396c7b03b512911134c9aab23d9803b.fe3e47b0.webp",h=a.p+"static/image/320f68d173d2c578f6009077bc59843e.da13ec7c.webp",b=a.p+"static/image/2a76ef30d067ef0168476adce50fca28.30e7993d.webp",f=a.p+"static/image/dbc3f65b4881c6b6b3eef53d73a5ab53.9ba9e0f1.webp",o=a.p+"static/image/8450a89095d8d143869421afe08f6ef1.9977dc51.webp",m=a.p+"static/image/de6c32f4d8a556d819ddba8c72a1541a.85c25d11.webp",g=a.p+"static/image/bddc1055ff0327f7ea7d6ab03d33fb08.53aa050a.webp",A=a.p+"static/image/85d7c46017db36ebd5640c5871e1b90a.54d31b9b.webp",P=a.p+"static/image/be72c11e4af95595c3310d757ed1c4ea.09155390.webp",w=a.p+"static/image/d48824b9c420020cafee7d202de6b82b.485aa769.webp",u=a.p+"static/image/2b703200e7e25ec45727feb4b1683b73.4af6ff51.webp",S=a.p+"static/image/074a175e7fe8e7337f5ba3c6311f2303.6ebb784b.webp",O=a.p+"static/image/100631a1e6afb2538131b5b83a9747c6.c6e0c62f.webp",v=a.p+"static/image/29becd24308fbe706865ef2ea148dbb9.6153b156.webp",B=a.p+"static/image/ccfb3691c9021401930fb4a3928421d2.14f7bdde.webp",N=a.p+"static/image/ec3d239e627dad1a265862c9487dd6c5.ce6c228c.webp",z=a.p+"static/image/729a805e0f104c3028878e6ee254565c.a89c0147.webp",L=a.p+"static/image/6fb3424c386043c81d5df009371bf79d.0e5e93a1.webp",I=a.p+"static/image/e4aa73019e4244a3c24506e839e2d880.9f6f4d3d.webp",y=a.p+"static/image/76ad5f799cfa2d1de2e0e22d256b54a8.37026d8f.webp",M=a.p+"static/image/a8e323bed50e6c47c47f03887a4c2d2e.060928d0.webp",T=a.p+"static/image/5d1bb90fe87fd20e7201b0c029710593.f1ada8ba.webp",Z=a.p+"static/image/c45dd3432361ec9f5206f62b4eef18b5.fe32c730.webp",H=a.p+"static/image/6cfbed6f7b9223089a191979749103c9.093de37e.webp",C=a.p+"static/image/d1a31f8a91e4f2c979ffe2f600cd39f4.dd1268b1.webp",R=a.p+"static/image/c2ba8480ef40607161295a31e21b9ada.ea639099.webp",k=a.p+"static/image/0a361ce85a61667e41799d70126c1e67.34b3098c.webp",J=a.p+"static/image/8d8a1befae67350f510a423487470c87.f682f5ee.webp",Q=a.p+"static/image/b20486f5d13f609af1d9c57212ceba8a.7f9d4d6a.webp",X=a.p+"static/image/e640ded44a806f43d1e4954d9bc45715.87030dd0.webp",D=a.p+"static/image/52c3779f5d8c2898169539df961fadec.85564009.webp",G=a.p+"static/image/51b9962eb893124308db67b55d84607d.34b7070d.webp",U=a.p+"static/image/d3c1e09b2f646d2ae75f999134dbf491.0cc462c1.webp",E=a.p+"static/image/d5cc3cd54a74ff2b2d6b15ced8d62cf4.ff335d73.webp",q=a.p+"static/image/1491bbd56adaadf467095eda6861a687.cdbe557a.webp",Y=a.p+"static/image/ecd7dd75452a6dd9c220bea46870107a.d915d37e.webp",W=a.p+"static/image/3fddecffabaa609d821c572385a29202.f3912e24.webp",V=a.p+"static/image/e04df804d88117267ee6859a5d8680fc.f60af5ee.webp",F=a.p+"static/image/1eb3fa49cdc504301600f311eb1af432.e65fdb6f.webp",K=a.p+"static/image/0ecb415926273497a1dcd8691230c590.39d2930c.webp",_=a.p+"static/image/bda6c0fd5629835395a2bcd9bce72aee.0ad80af8.webp",$=a.p+"static/image/06334540717580a921f3996f405a41a5.9f1007d7.webp",ee=a.p+"static/image/e3d7d1887ff0d52a2a853b3d3a9bbaf4.54e69849.webp",es=a.p+"static/image/fd87cda2fa210fa8090b9b85fca5a70a.0e113e34.webp",ea=a.p+"static/image/9ba1650c89da11defaf3b30cebc76581.b2efc7ad.webp",en=a.p+"static/image/8f36a35ced6c8cef1a246f3b25edc7d3.33f8ff1b.webp",ec=a.p+"static/image/d4b8451a925909a7d4ba332992b2b0e8.a439c056.webp",ei=a.p+"static/image/710285627e9b5312f53ef0e860194f09.df234749.webp";function ed(e){let s=Object.assign({h1:"h1",a:"a",p:"p",pre:"pre",code:"code",img:"img",h2:"h2",ul:"ul",li:"li"},(0,c.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"11-一网打尽-nest-全部装饰器",children:["11. 一网打尽 Nest 全部装饰器",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#11-一网打尽-nest-全部装饰器",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"Nest 的功能都是大多通过装饰器来使用的，这节我们就把所有的装饰器过一遍。"}),"\n",(0,n.jsx)(s.p,{children:"我们创建个新的 nest 项目："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"nest new all-decorator -p npm\n"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:ei,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"Nest 提供了一套模块系统，通过 @Module声明模块："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:ec,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"通过 @Controller、@Injectable 分别声明其中的 controller 和 provider："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:en,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:ea,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这个 provider 可以是任何的 class："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:es,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"注入的方式可以是构造器注入："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:ee,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"或者属性注入："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:$,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"属性注入要指定注入的 token，可能是 class 也可能是 string。"}),"\n",(0,n.jsx)(s.p,{children:"你可以通过 useFactory、useValue 等方式声明 provider："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:_,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这时候也需要通过 @Inject 指定注入的 token："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:K,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:F,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这些注入的依赖如果没有的话，创建对象时会报错。但如果它是可选的，你可以用 @Optional 声明一下，这样没有对应的 provider 也能正常创建这个对象。"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:V,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"如果模块被很多地方都引用，为了方便，可以用 @Global 把它声明为全局的，这样它 exports 的 provider 就可以直接注入了："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:W,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"filter 是处理抛出的未捕获异常的，通过 @Catch 来指定处理的异常："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:Y,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"然后通过 @UseFilters 应用到 handler 上："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:q,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:E,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"除了 filter 之外，interceptor、guard、pipe 也是这样用："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:U,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"当然，pipe 更多还是单独在某个参数的位置应用："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:G,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这里的 @Query 是取 url 后的 ?bbb=true，而 @Param 是取路径中的参数，比如 /xxx/111 种的 111"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:D,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:X,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"此外，如果是 @Post 请求，可以通过 @Body 取到 body 部分："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:Q,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"我们一般用 dto 的 class 来接受请求体里的参数："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:J,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"nest 会实例化一个 dto 对象："}),"\n",(0,n.jsx)(s.p,{children:"用 postman 发个 post 请求："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:k,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"可以看到 nest 接受到了 body 里的参数："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:R,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"除了 @Get、@Post 外，还可以用 @Put、@Delete、@Patch、@Options、@Head 装饰器分别接受 put、delete、patch、options、head 请求："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:C,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"handler 和 class 可以通过 @SetMetadata 指定 metadata："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:H,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"然后在 guard 或者 interceptor 里取出来："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:Z,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:T,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"你可以通过 @Headers 装饰器取某个请求头 或者全部请求头："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:M,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:y,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"通过 @Ip 拿到请求的 ip："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,n.jsx)(s.p,{children:"通过 @Session 拿到 session 对象："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:I,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"但要使用 session 需要安装一个 express 中间件："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"npm install express-session\n"})}),"\n",(0,n.jsx)(s.p,{children:"在 main.ts 里引入并启用："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:L,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"指定加密的密钥和 cookie 的存活时间。"}),"\n",(0,n.jsx)(s.p,{children:"然后刷新页面："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:z,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"会返回 set-cookie 的响应头，设置了 cookie，包含 sid 也就是 sesssionid。"}),"\n",(0,n.jsx)(s.p,{children:"之后每次请求都会自动带上这个 cookie："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:N,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这样就可以在 session 对象里存储信息了。"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:B,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:v,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"@HostParam 用于取域名部分的参数："}),"\n",(0,n.jsx)(s.p,{children:"我们再创建个 controller："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"nest g controller aaa --no-spec --flat\n"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:O,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这样指定 controller 的生效路径："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"import { Controller, Get, HostParam } from '@nestjs/common';\n\n@Controller({ host: ':host.0.0.1', path: 'aaa' })\nexport class AaaController {\n    @Get('bbb')\n    hello() {\n        return 'hello';\n    }\n}\n"})}),"\n",(0,n.jsx)(s.p,{children:"controller 除了可以指定某些 path 生效外，还可以指定 host："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:S,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"然后再访问下："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:u,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这时候你会发现只有 host 满足 xx.0.0.1 的时候才会路由到这个 controller。"}),"\n",(0,n.jsx)(s.p,{children:"host 里的参数就可以通过 @HostParam 取出来："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"import { Controller, Get, HostParam } from '@nestjs/common';\n\n@Controller({ host: ':host.0.0.1', path: 'aaa' })\nexport class AaaController {\n    @Get('bbb')\n    hello(@HostParam('host') host) {\n        return host;\n    }\n}\n"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:w,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"前面取的这些都是 request 里的属性，当然也可以直接注入 request 对象："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:P,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"通过 @Req 或者 @Request 装饰器，这俩是同一个东西："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:A,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"注入 request 对象后，可以手动取任何参数："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:g,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"当然，也可以 @Res 或者 @Response 注入 response 对象，只不过 response 对象有点特殊："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,n.jsx)(s.p,{children:"当你注入 response 对象之后，服务器会一直没有响应："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:m,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"因为这时候 Nest 就不会再把 handler 返回值作为响应内容了。"}),"\n",(0,n.jsx)(s.p,{children:"你可以自己返回响应："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:o,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:b,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"Nest 这么设计是为了避免你自己返回的响应和 Nest 返回的响应的冲突。"}),"\n",(0,n.jsx)(s.p,{children:"如果你不会自己返回响应，可以通过 passthrough 参数告诉 Nest："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:f,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:b,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"除了注入 @Res 不会返回响应外，注入 @Next 也不会："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:h,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"当你有两个 handler 来处理同一个路由的时候，可以在第一个 handler 里注入 next，调用它来把请求转发到第二个 handler："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:x,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"Nest 不会处理注入 @Next 的 handler 的返回值。"}),"\n",(0,n.jsx)(s.p,{children:"handler 默认返回的是 200 的状态码，你可以通过 @HttpCode 修改它："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:j,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"当然，你也可以修改 response header，通过 @Header 装饰器："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:"data:image/webp;base64,UklGRkgPAABXRUJQVlA4IDwPAADwSgCdASpYAaoAPp1IoEwlpCMiI1M6gLATiWdu4XKRDF5cHiInm/wV3XcYP4ehH+87p/nUP+N6z/8P0zXqzejZ0t/+OyY/wN/Ovx48GP794Z/i3zX+R/Jb1wcg/X7/ZeiH8i+2H537dPZHvf4AX4z/QP9jvIum+YF6+/Zf9J9zfpNahHfP/ne4B/Mf7X/xfWf+5+DR9m/7HsB/zD++erL/beP388/2X7WfAh+wn/a7KJCQjpMjM4yYCADtguiueQXOZaEMTuH9ULYdVvpsIS5tqlzzUxHgbrp2wXVdOozoAfwPJ7T6nmRcdGAFi9BXgzWogwpQ+7hwUcSHC4v60Sa8R1pildHCY5Jad0LKRmAyrA0BUS0zjJgIAO1Y0BfKsVK2zWFGLdsUbDy53ApqnzCVxMUKjl7aj36SF+/XTklVW1O4Q7Lx2gmAf9AWx9za3L+1isAI9d5UG9vheedLXfIeZg481X7gZXsDfacK+Fg4D0MUvO97GX0Co2ItTwQ14oU0cr15efp5gI79b/rGjmdZM8GamaPiHlN9s5MBz7hhoHbjGoIvy8UEGHoGrfVrojX2FcixjFaTotiEAFnK6e7H2rhpHbP+WEg9OywGJwE6JWEfdOQIe24TzkxL25Sy6r53toSkueHE8oH1JthuNbx4nlTOdh4Pdi2Hw47o/90oitnqm0zDxTjMMzjGpyYQtIDBArRzPj5Jve7lIkJCGpJe6YrmXNO0UepNHMcXYjIFmLOWOLbnTtgMqEjAx4PsfJ6c3bCtumQopJ/YA222tIC2C6rp2wWlkcOD3h1AhBteAAD+/rN4BKBwrtnxwuS84fUD4VhB6hJJ5aTr3/WTVv3IQsORSJkCCVjyIH+FXtG+738BdtV+rddp4N40xQeZuPHOpCNd0f5+jwkYtGGnD49jibxfiqPFhufiDsRee6OHb1H4Tzviu4Wh9IB5YTb6DxGFI4AgRcPR1+mSU/nI9PLaa33U2o50vXCPFkQ2Ox2FyivTm1dQ9InPsi+fp8gBJNomMr1xQyyGePndcG4r1xQyyGB0qwKnraLaVdeQtlhpCpdt53HtkDoTpKL2Y0KaBoDDwpI/mAz98Y3P573pMzqiM3VlglX5rJObhg/fWiRfvSRwRCtJxZvTynnF95r8vLz1wZwSm+jvpNzU2nyoipnCTzJX5gLikrkqJfT7PvnNef9rLIlhOrPnzWZbDtG7/GZREecxSzXExDSs6Hvufm5f4BSU9E8LnAuHCS4nl6f0FBOsHKf/WEj6ypUpd2MW6eFcaXiSwX68jzR+oDquPcc0+YOR1eV+8Uow6sfr3zUbNg6IT+25kNMejbzoRm4dfkVmeEQmBKaz4FJZquWGQX8X0eX8wGXFM9qePFJemR0JrKq14LGFDgHaNwzkpC2F6HcpPdmJOvHa3tCQY4OCYjgOt/IdLa/cgJOckT/R+xDSo//5ZUDeDq4qS4G7eXiutPE2lgcM4lmmbP3xpbIsY/XufJDkAGP4qmjKNR+dV0FNFYzkJoL67UpeAOWI+D7+9jLeMEimIa2MR9uo6gPwsopAZMKaj8pCcJA+BzegyoszIIgWSIDeTtajH70CzOk81DQD+Bpguxm9rwcXl20tkQlE7USd6qQTjInipoyjUfeEF/uBMg4rqnLPj3C2Oviw1+fuoUP2L4If7LTw1VJUXE+ueY1Tir76Xf+gyoszIIgXHyeDNJKa72uP8r+uR9EUiaHIyfHVRTBaRxw65SbCCXbYXnSOrAiVI4SoSvFDiixjpIx3Hx2xJDg5rwJbgvcfJFAAIwG3vjqYNsLT60thj/Tikx4xiIJxiSbDL56UJPFWs+PRLRQLtDHfaDjfUgr0CIYCBJjt22oJP4thXOwHwb3xC/kFLN8GJdpR8TDEgWyk2HCpTM5KnWUbOE5gDJqM+gp4+mwRVMXMxR1zMwzgvPST/bYwmAZrsThfbAIeIxF5fy7cfHJDSi+ZPH0iPKjz+uEu112784W+DUmZRU2qWgjsdSugqxRjnv2QCCNOfwE6M83XcXiJGRGlr+5zv1Qm+OBTUpNrPWe3zEiHE8+1NfFMoIofRBExMLm6rI01rTXafhPguyu765bKxollny5XE+IGPIsUCSJHgoeO6KNmvE5hEpGgtIiVOthG8epwOIdbSNisxPpVhsBV1+JJgHmdkSfGH6wZW0v7tTDPxaLzroMkQ36UZR8A0aymmUzXqKIc6LyaSzCw/ZGLn/CFE6YfqzDGtYb3lUWI5GdWzS5Ko+R8kAM3CtjVvY/fy8uFBehPsZvufBMEjYONGeRaUSspDsrqR4FOrO5sUmX3KfAqdW1T3xojmkn3nYZNBcFoWZ4FinB9xyq+JYQGYZf3wkku5N6FXQnb+RZvJzw13Qb2Z9fUMEnnec6jFg9N7I8GC+25jJB9bbExRIDkJFA2CZvHUTYeGmVnrJ0fUSFV4ze1GvapwXEX83yePOR+Xazg35+qAdt0JG2LQ8sfTC8a+0GiqvTBwPAckmziq+5T6MlbUeta1CLmo28IKeVMM4+KBCA+S0SHoXOaaTxAM8VINkwfdKgvScGErjtRioGN/E6jOzGEdUYRl7pDbLIyPX3ci8ZQBR9PQjfqkyzvJy/IYkLaNYbjpy4p7HiNELp+eKpa7eneAbXyrGC+xTO7gRCnbABXtxLIIwqsIwllzT/cXtSawZjY5TbmZMHjXnrafT/hpGOzBSKGfakL6jcn6Pt3OsezTvh4gCzsOgIHtnCM6SpjS3Jc8sF9kJFsuPnr04VaEeh7apMam6LGqgHcROTP7+dHpftEpsOCXcTL5qu0k8SUP3bWZsrQwdYTwFgcN1ynuGmSvSegdL4WFbYZloYyxCZl3u/9Mo3EkJiJeQ9rv6sQFIs7OEeSTpVkGakFk0P0GYm0Qk6YN9eydZrHrqgRQWxndwbepZJ+F4M/BuRVCZ4w++fZymcukzHkz0K/2MLwGOxpNVydKiS32yFr3QezuLgPWYMRxuWQ5/7mdovpJjO1IKQ+2cVW0rQLHTWhD4qS9j4JEqI1T5hRLhYqOQdAf0Ca0i0pbQb60/qmn51JFlQl3SDbVbpxPR1F1gQ0HKj5q15iNrX+69mM9AWH/F1BuU2xbMdHXWoS0zM3r0NW0bVquRnF+qOvuAceMEUh2iZQzQLGbAcmPy+UhE+hmReUDvrFzBe+UGP8YHv1IJ0ocjWJ+yxPdycpFAJ6SITSW0GX1tIGeRiVnD/5NEXYHI1bVcQ8Sqymyh2ohxY9aq9M5Qk5j/jqDe1z0GzTMdAyCkJfTesC3s11iJ+scIPyE8iecmfacOuOn6sviro1V6ZyhHhUwLutzlz/O1YNwr4NfF82QPkUjlYE1p51EBc3BpM5Jtdhr0wc3d+K0hH8M8KbmWzodCA3EStqk4UqbrBfTVFPgKXg4o4NUAEYbY2/F3cUS4iQ/ZmRQ/14dPu8EDk0Jydh4p1yUcNDs9qgAjDbG34u7iiXESH7MyKH+vD/DpcNoAZ3nKH0PwfrVRwP4vb0wMr9Lvxio7kTAHMDEg4SrjR8JuGfDHPeiaWVL8YCxtXnYF5cAfrmfYC92FftCpJRkKxBhVAjTf9LexO2P9VYRsth0NIsaKiw4uuWbsZn9D/ZjR8E3Joqwqb0S0Gpch5gJVrBNnnb2osLpvD09jopxzNG+w9liBfbI5Yk0PPDPhIFDYdADB5o597lSWHwl7gnPaiMJG6AQRkzcxnDjKl0Cg15tVzgbP9Ho1wpLNdRW9qIJzBcz58dwVXmudnvBMi7SXKxlwNSLS7KhVNwAKaFMQd/Yw8M2gOIbtu/dCGkaG9KXtKc8HLC2Ujp/xDQdMR3cZetgjtbJhGr2GGPBqm0t/tur0lmwIS06lsasyql6BeQpDBgz3eeARXNKU2KZirzS4CtSHXvuX65tZ02jmH6FibALOvvQBI5KraGVmx+0Uw3SRoJux3K6zhJq+R5kG9IHOUXElhDNFWtFvgydL4ws8ur6w5pe2VTWGOnfnRB7epH6AniqACGcHZ3LfNs5EZMsM1w2QxKckRTq5Mf1a/UISY0TEN3EJe2iSLp8AdBSTEMZv0VCVZfz1cjfcTbsLDvNOlgqQEzD9mQYIXV6086BxDNOKzpJAY0TLkIuy5VC2KifqALOpbnta4F7xL8lM/WaIHsC3K4g/gtN3iwWeSNZjmmyxP7OAnVPsZ4J0VEXPV+20SqdfugIWftU77WJyVmKnS7ya2DNPFtMBIUbOj4ivGVzXDw+Uq394yXLtGVUucrqOfssmzh4lHSwp7rh58InvKosN7l2pS6aNgR/xm03gSJyYMjyy8zAc+fs4i9VYvdoSjmmlaEBE++nj66VgQGi99H7NQhOBnHV5oFZapoz2xylxErTCLEIKd+5BGqSE17FkPtmv/LFz4OEq/8+pMx1m5D4YPtBaiDrkp4nSjH697GB0IA/lQZxcD0ozHUKt3vvZRGalIeJQRb8yChOyj0ffXLms/j/z+2AlQfF+YfGZZ958nsiGdUBWDAH8fxb0wz8jgnYmajRN/uhyc9LZjh+YkLCGZnULY/I1CT3YX7rfXbA1XD6WgL9p/sTjJLrM4+NItnwbpAVjIpIjXlzUd8MBIk6ex9gghiQd6hYDi1rIxjdJP9ROty8WCiSGboJAsVGpO700ddiT1tXsnEJ9udckGU5WKq56Tw728dJGq4UKjtigosgC7GcLSYIQkCA6zMu/MULgC3uU26GC4LyzSF1ADxOwQUPxz82P+JdeV+jAwHzm57RHr0MR1VpZhYpaX2jThHpgvMjz80VLQPZcqHOD61buRU0VtZLyA5k9lZX+6i9eeTZ6TiEGu/94ZcorXh5HRJqj4sNgHjd6SIfNQpifFv3wqDtGUPbK0pJnDDE5Jc1wU4+mv/V/M/vRQVJKpitIaA2/9yiFtGPu60v1iBaDAstbqr8LfWxr33YGKKC+ZKHb4yDPneYqxkzeUSudt6AvHtLISZVCqwdyYAACbXsLL0NyAO15WUHrxtK4khW51OI4FULg5wMWEyvZQLRAKEyTqZFAFnt7oQYR0L3lh9GuM0eapsDB5mpkCIr+J464A1MAFGmN9pHqEG1OnypL0QqtZVUEbLikAmOWFXgH4lgxi4iUaRY8V07LmjKS76Pgvfx5ZCfFloNd6bEpB+3YOjNxRAR+3SQ97JDZWgSec6CeXSqMVlp3CEsQUD1b64AAA=",alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:p,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"此外，你还可以通过 @Redirect 装饰器来指定路由重定向的 url："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:l,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"或者在返回值的地方设置 url："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"@Get('xxx')\n@Redirect()\nasync jump() {\n    return {\n      url: 'https://www.baidu.com',\n      statusCode: 302\n    }  \n}\n"})}),"\n",(0,n.jsx)(s.p,{children:"你还可以给返回的响应内容指定渲染引擎，不过这需要先这样设置："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:t,alt:""})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"import { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app.module';\nimport { NestExpressApplication } from '@nestjs/platform-express';\nimport { join } from 'path';\n\nasync function bootstrap() {\n  const app = await NestFactory.create<NestExpressApplication>(AppModule);\n\n  app.useStaticAssets(join(__dirname, '..', 'public'));\n  app.setBaseViewsDir(join(__dirname, '..', 'views'));\n  app.setViewEngine('hbs');\n\n  await app.listen(3000);\n}\nbootstrap();\n\n"})}),"\n",(0,n.jsx)(s.p,{children:"分别指定静态资源的路径和模版的路径，并指定模版引擎为 handlerbars。"}),"\n",(0,n.jsx)(s.p,{children:"当然，还需要安装模版引擎的包 hbs："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"npm install --save hbs\n"})}),"\n",(0,n.jsx)(s.p,{children:"然后准备图片和模版文件："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:r,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"在 handler 里指定模版和数据："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:d,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"就可以看到渲染出的 html 了："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:i,alt:""})}),"\n",(0,n.jsxs)(s.p,{children:["案例代码在",(0,n.jsx)(s.a,{href:"https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/all-decorator",target:"_blank",rel:"noopener noreferrer",children:"小册仓库"}),"。"]}),"\n",(0,n.jsxs)(s.h2,{id:"总结",children:["总结",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"这节我们梳理了下 Nest 全部的装饰器"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"@Module： 声明 Nest 模块"}),"\n",(0,n.jsx)(s.li,{children:"@Controller：声明模块里的 controller"}),"\n",(0,n.jsx)(s.li,{children:"@Injectable：声明模块里可以注入的 provider"}),"\n",(0,n.jsx)(s.li,{children:"@Inject：通过 token 手动指定注入的 provider，token 可以是 class 或者 string"}),"\n",(0,n.jsx)(s.li,{children:"@Optional：声明注入的 provider 是可选的，可以为空"}),"\n",(0,n.jsx)(s.li,{children:"@Global：声明全局模块"}),"\n",(0,n.jsx)(s.li,{children:"@Catch：声明 exception filter 处理的 exception 类型"}),"\n",(0,n.jsx)(s.li,{children:"@UseFilters：路由级别使用 exception filter"}),"\n",(0,n.jsx)(s.li,{children:"@UsePipes：路由级别使用 pipe"}),"\n",(0,n.jsx)(s.li,{children:"@UseInterceptors：路由级别使用 interceptor"}),"\n",(0,n.jsx)(s.li,{children:"@SetMetadata：在 class 或者 handler 上添加 metadata"}),"\n",(0,n.jsx)(s.li,{children:"@Get、@Post、@Put、@Delete、@Patch、@Options、@Head：声明 get、post、put、delete、patch、options、head 的请求方式"}),"\n",(0,n.jsx)(s.li,{children:"@Param：取出 url 中的参数，比如 /aaa/:id 中的 id"}),"\n",(0,n.jsx)(s.li,{children:"@Query: 取出 query 部分的参数，比如 /aaa?name=xx 中的 name"}),"\n",(0,n.jsx)(s.li,{children:"@Body：取出请求 body，通过 dto class 来接收"}),"\n",(0,n.jsx)(s.li,{children:"@Headers：取出某个或全部请求头"}),"\n",(0,n.jsx)(s.li,{children:"@Session：取出 session 对象，需要启用 express-session 中间件"}),"\n",(0,n.jsx)(s.li,{children:"@HostParm： 取出 host 里的参数"}),"\n",(0,n.jsx)(s.li,{children:"@Req、@Request：注入 request 对象"}),"\n",(0,n.jsx)(s.li,{children:"@Res、@Response：注入 response 对象，一旦注入了这个 Nest 就不会把返回值作为响应了，除非指定 passthrough 为true"}),"\n",(0,n.jsx)(s.li,{children:"@Next：注入调用下一个 handler 的 next 方法"}),"\n",(0,n.jsx)(s.li,{children:"@HttpCode： 修改响应的状态码"}),"\n",(0,n.jsx)(s.li,{children:"@Header：修改响应头"}),"\n",(0,n.jsx)(s.li,{children:"@Redirect：指定重定向的 url"}),"\n",(0,n.jsx)(s.li,{children:"@Render：指定渲染用的模版引擎"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"把这些装饰器用熟，就掌握了 nest 大部分功能了。"})]})}function er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,c.ah)(),e.components);return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(ed,{...e})}):ed(e)}let et=er;er.__RSPRESS_PAGE_META={},er.__RSPRESS_PAGE_META["Nest%20%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%20%20%E6%9C%80%E6%96%B0200%E7%AB%A0%2F11.%20%E4%B8%80%E7%BD%91%E6%89%93%E5%B0%BD%20Nest%20%E5%85%A8%E9%83%A8%E8%A3%85%E9%A5%B0%E5%99%A8.md"]={toc:[{text:"总结",id:"总结",depth:2}],title:"11. 一网打尽 Nest 全部装饰器",headingTitle:"11. 一网打尽 Nest 全部装饰器",frontmatter:{}}}}]);