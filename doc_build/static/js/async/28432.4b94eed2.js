"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["28432"],{390257:function(e,n,i){i.r(n),i.d(n,{default:()=>E});var c=i(552676),a=i(740453);let r=i.p+"static/image/6849bac8de4de7a0bf2d58d3acc144ad.ee0ff11c.webp",t=i.p+"static/image/d04413695e17e94ddfa0c163441698dc.e0817d26.gif",s=i.p+"static/image/6064516fe407afe9356f19bf4ee0773a.7eed2e52.webp",l=i.p+"static/image/3485e13c01cb4e107cd24d86b5103b8c.1c8cdaa8.webp",d=i.p+"static/image/918466cce99b4d4bf32bb4c602ffed7c.ccd7c8db.webp",p=i.p+"static/image/cfe1eccbdcd7135961bc4511fb5e2b0c.54b1e1f8.webp",j=i.p+"static/image/e3f90b0b5735bd8ce614ada2e0de11ef.b104174d.gif",o=i.p+"static/image/6bcc1749e42ffcb9e74ed2980856c00f.af07d667.webp",h=i.p+"static/image/9b9c9a479e93c190a574e8a561ae8698.251f6996.webp",x=i.p+"static/image/33ec17cd0b19b2cca40c170eb3f2f189.05b639d4.webp",g=i.p+"static/image/72bdd9fe5d7b629ef0ad404b451f015b.e91cdc19.webp",b=i.p+"static/image/42e279abced58339659c1025cf65adc6.fcca8ef0.gif",f=i.p+"static/image/857feb4cb8188d79880a7a0852a1012a.ac16c17c.webp",m=i.p+"static/image/35a1d38515d356ce1aceb85df343508c.d2a329aa.webp",u=i.p+"static/image/884d26bfda4eada195c4f3b8d014d7f6.b65ed512.webp";function _(e){let n=Object.assign({h1:"h1",a:"a",p:"p",img:"img",pre:"pre",code:"code",h2:"h2"},(0,a.ah)(),e.components);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.h1,{id:"第81章reactflow振荡器调音项目介绍",children:["第81章—ReactFlow振荡器调音：项目介绍",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#第81章reactflow振荡器调音项目介绍",children:"#"})]}),"\n",(0,c.jsx)(n.p,{children:"\uFEFF学完 React Flow，我们来做一个实战案例：振荡器调音。"}),"\n",(0,c.jsx)(n.p,{children:"什么是振荡器呢？"}),"\n",(0,c.jsx)(n.p,{children:"我们知道，声音是由振动产生的，不同的频率，不同的振动波型，就会产生不同的声音。"}),"\n",(0,c.jsx)(n.p,{children:"比如钢琴的琴键，每个键的声音都不同，这个就是不同的振荡频率产生的。"}),"\n",(0,c.jsxs)(n.p,{children:["浏览器提供了振荡器的 api ",(0,c.jsx)(n.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/BaseAudioContext/createOscillator",target:"_blank",rel:"noopener noreferrer",children:"createOscillator"}),"："]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:u,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:"这样用："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:m,alt:"image.png"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:'var audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n\nvar oscillator = audioCtx.createOscillator();\n\noscillator.type = "square";\noscillator.frequency.setValueAtTime(3000, audioCtx.currentTime);\noscillator.connect(audioCtx.destination);\noscillator.start();\n'})}),"\n",(0,c.jsx)(n.p,{children:"你可以现在打开 devtools 跑下这段代码："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:f,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:"是不是听到了一个持续的尖锐的声音？"}),"\n",(0,c.jsx)(n.p,{children:"这就是振荡器生成的。"}),"\n",(0,c.jsx)(n.p,{children:"我们可以设置不同的频率、波形，产生不同的声音。"}),"\n",(0,c.jsxs)(n.p,{children:["频率好理解，不同波形也就是",(0,c.jsx)(n.a,{href:"https://codepen.io/gregh/pen/LxJEaj",target:"_blank",rel:"noopener noreferrer",children:"这个"}),"："]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:b,alt:"2024-08-29 10.20.08.gif"})}),"\n",(0,c.jsxs)(n.p,{children:["你可以打开",(0,c.jsx)(n.a,{href:"https://codepen.io/gregh/pen/LxJEaj",target:"_blank",rel:"noopener noreferrer",children:"链接"}),"听一下区别。"]}),"\n",(0,c.jsx)(n.p,{children:"正弦波（sine）："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:g,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://lf-activity-static.juejin.cn/obj/juejin-activity-static/user_book/2788017216685118_1724899586576_5433.mp3",target:"_blank",rel:"noopener noreferrer",children:"jaudio"})}),"\n",(0,c.jsx)(n.p,{children:"方波（square）："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:x,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://lf-activity-static.juejin.cn/obj/juejin-activity-static/user_book/2788017216685118_1724899664151_1724.mp3",target:"_blank",rel:"noopener noreferrer",children:"jaudio"})}),"\n",(0,c.jsx)(n.p,{children:"三角波（triangle）："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:h,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://lf-activity-static.juejin.cn/obj/juejin-activity-static/user_book/2788017216685118_1724899767351_9069.mp3",target:"_blank",rel:"noopener noreferrer",children:"jaudio"})}),"\n",(0,c.jsx)(n.p,{children:"锯齿波（sawtooth）："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:o,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://lf-activity-static.juejin.cn/obj/juejin-activity-static/user_book/2788017216685118_1724899782636_3047.mp3",target:"_blank",rel:"noopener noreferrer",children:"jaudio"})}),"\n",(0,c.jsx)(n.p,{children:"有的同学可能会问，这有什么用呢？"}),"\n",(0,c.jsx)(n.p,{children:"有很多用处："}),"\n",(0,c.jsxs)(n.p,{children:["比如生成",(0,c.jsx)(n.a,{href:"https://codepen.io/gregh/pen/RKVNgB",target:"_blank",rel:"noopener noreferrer",children:"钢琴不同琴键的声音"}),"："]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:j,alt:"2024-08-29 10.26.21.gif"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://lf-activity-static.juejin.cn/obj/juejin-activity-static/user_book/2788017216685118_1724898368513_3903.mp3",target:"_blank",rel:"noopener noreferrer",children:"jaudio"})}),"\n",(0,c.jsx)(n.p,{children:"实现原理就是正弦波，不同琴键振荡频率不同："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:p,alt:""})}),"\n",(0,c.jsx)(n.p,{children:"所以说，通过 createOscillator 创建振荡器，然后修改波形、修改频率，就能产生不同的声音。"}),"\n",(0,c.jsx)(n.p,{children:"这个频率在网上也可以搜到："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:d,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:"声音调好了之后，你还可以通过 GainNode 调节音量："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:l,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:"比如下面的代码："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:s,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:"通过 createOscillator 创建振荡器，然后用 createGain 创建调节音量的节点。"}),"\n",(0,c.jsx)(n.p,{children:"oscillator 连接 gainNode，gainNode 连接最终输出。"}),"\n",(0,c.jsx)(n.p,{children:"这样，就实现了调音、音量修改、输出声音的流程。"}),"\n",(0,c.jsx)(n.p,{children:"这个过程很适合用流程图来做："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:t,alt:"2024-08-29 11.25.33.gif"})}),"\n",(0,c.jsx)(n.p,{children:"在振荡器节点调节频率和波形，在 Gain 节点调节音量，最后在输出节点播放调节好的声音。"}),"\n",(0,c.jsx)(n.p,{children:"而且振荡器节点是可以设置多个的，会把多种声音合并播放："}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)("img",{src:r,alt:"image.png"})}),"\n",(0,c.jsx)(n.p,{children:"这就是我们要做的实战项目，通过 React Flow 添加振荡器节点、设置参数，节点连接之后，播放合成的声音。"}),"\n",(0,c.jsxs)(n.h2,{id:"总结",children:["总结",(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,c.jsx)(n.p,{children:"这节我们学了 AudioContext 的 createOscillator api，它会创建一个振荡器，可以设置不同的波形、频率，产生不同的声音。"}),"\n",(0,c.jsx)(n.p,{children:"比如钢琴琴键的声音，游戏中的一些音效，都是设置不同波形、频率产生的。"}),"\n",(0,c.jsx)(n.p,{children:"而且还可以通过 GainNode 来调节音量。"}),"\n",(0,c.jsx)(n.p,{children:"可以通过流程图来可视化的创建 Oscillator 节点，设置参数，最后输出声音。"}),"\n",(0,c.jsx)(n.p,{children:"下节开始我们正式进入开发。"})]})}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(_,{...e})}):_(e)}let E=w;w.__RSPRESS_PAGE_META={},w.__RSPRESS_PAGE_META["React%20%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%2F%E7%AC%AC81%E7%AB%A0%E2%80%94ReactFlow%E6%8C%AF%E8%8D%A1%E5%99%A8%E8%B0%83%E9%9F%B3%EF%BC%9A%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D.md"]={toc:[{text:"总结",id:"总结",depth:2}],title:"第81章—ReactFlow振荡器调音：项目介绍",headingTitle:"第81章—ReactFlow振荡器调音：项目介绍",frontmatter:{}}}}]);