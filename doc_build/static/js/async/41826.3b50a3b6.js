"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["41826"],{886239:function(n,e,l){l.r(e),l.d(e,{default:()=>h});var i=l(552676),d=l(740453);function s(n){let e=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",ul:"ul",li:"li",blockquote:"blockquote",h3:"h3"},(0,d.ah)(),n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h1,{id:"14中级进阶-----webgl-与数学我们需要哪些数学知识",children:["14.中级进阶 --- WebGL 与数学：我们需要哪些数学知识？",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#14中级进阶-----webgl-与数学我们需要哪些数学知识",children:"#"})]}),"\n",(0,i.jsxs)(e.p,{children:["在前面章节的学习中，大家已经接触过",(0,i.jsx)(e.code,{children:"矩阵"}),"、",(0,i.jsx)(e.code,{children:"向量"}),"等数学概念了。那么除了",(0,i.jsx)(e.code,{children:"矩阵"}),"和",(0,i.jsx)(e.code,{children:"向量"}),"， 关于 3D 开发我们还需要哪些数学知识？这些数学知识又能够帮助我们解决什么问题呢?"]}),"\n",(0,i.jsx)(e.p,{children:"本节为大家做一个概括，接下来的章节我们就深入学习这些数学知识。"}),"\n",(0,i.jsxs)(e.h2,{id:"你能学到什么",children:["你能学到什么？",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#你能学到什么",children:"#"})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"明确图形学开发与数学基础的密切关系。"}),"\n",(0,i.jsx)(e.li,{children:"学好图形学开发需要掌握哪些数学知识。"}),"\n",(0,i.jsx)(e.li,{children:"这些数学知识能够帮助我们解决什么问题。"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"那么，3D 应用涵盖哪些数学知识呢？"}),"\n",(0,i.jsxs)(e.h2,{id:"一-坐标系",children:["一、 坐标系",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#一-坐标系",children:"#"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"坐标系"}),"是一个重中之重的概念，我们在开发 3D 应用的过程中，经常会涉及到坐标系之间的转换，最经典的坐标转换流水线就涉及到六种坐标系，由此可见坐标系的重要性。"]}),"\n",(0,i.jsxs)(e.h2,{id:"二-点",children:["二、 点",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#二-点",children:"#"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"点"}),"在 3D 领域通常指",(0,i.jsx)(e.code,{children:"顶点坐标"}),"，3D 世界由很多",(0,i.jsx)(e.code,{children:"模型"}),"组成，模型又由很多",(0,i.jsx)(e.code,{children:"面"}),"组成，而面又由很多",(0,i.jsx)(e.code,{children:"点"}),"组成。因此，",(0,i.jsx)(e.code,{children:"点"}),"是组成 3D 世界的基本元素。WebGL 渲染的过程，就是将组成模型的",(0,i.jsx)(e.code,{children:"顶点"}),"传递给 ",(0,i.jsx)(e.code,{children:"GPU"}),"，GPU 按照指定图元",(0,i.jsx)(e.code,{children:"装配"}),"并",(0,i.jsx)(e.code,{children:"插值"}),"这些顶点数据，然后通过片元着色器对像素进行着色，最终渲染成 ",(0,i.jsx)(e.code,{children:"3D 模型"}),"。由此可见",(0,i.jsx)(e.code,{children:"顶点"}),"是模型的起始数据，重要性可见一斑。"]}),"\n",(0,i.jsxs)(e.h2,{id:"三向量",children:["三、向量",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#三向量",children:"#"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"向量"}),"是另一个非常重要的知识点。物理和数学中的向量代表既有",(0,i.jsx)(e.code,{children:"大小"}),"又有",(0,i.jsx)(e.code,{children:"方向"}),"的量。"]}),"\n",(0,i.jsxs)(e.p,{children:["通常我们使用",(0,i.jsx)(e.code,{children:"向量容器"}),"来表示数学中的",(0,i.jsx)(e.code,{children:"点"}),"和",(0,i.jsx)(e.code,{children:"向量"}),"。"]}),"\n",(0,i.jsxs)(e.p,{children:["比如我们经常会使用 ",(0,i.jsx)(e.code,{children:"3 维向量"}),"来表示",(0,i.jsx)(e.code,{children:"顶点坐标"}),"，3 维向量还可以理解为一个 ",(0,i.jsx)(e.code,{children:"3 x 1"})," 阶矩阵，将 ",(0,i.jsx)(e.code,{children:"3 x 3"})," 阶变换矩阵左乘顶点坐标（3 * 1 阶矩阵），按照矩阵的运算法则，",(0,i.jsx)(e.code,{children:"m行n列"})," 矩阵左乘 ",(0,i.jsx)(e.code,{children:"n 行 o 列"}),"矩阵可以得到一个 ",(0,i.jsx)(e.code,{children:"m 行 o 列"}),"矩阵，所以我们矩阵和向量相乘结果是一个新的 3 * 1 阶 矩阵，也就是 3 维向量，它表示变换后的顶点坐标。"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["这从数学角度解释了",(0,i.jsx)(e.code,{children:"变换矩阵"}),"左乘",(0,i.jsx)(e.code,{children:"顶点坐标向量"}),"的结果是一个新的顶点坐标的原因。"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["通常在对模型执行坐标转换的时候，",(0,i.jsx)(e.code,{children:"变换矩阵"}),"左乘",(0,i.jsx)(e.code,{children:"顶点坐标"}),"代表对这个顶点执行",(0,i.jsx)(e.code,{children:"坐标转换"}),"，这是顶点着色器中对顶点执行的最常用的操作。"]}),"\n",(0,i.jsx)(e.p,{children:"又比如在为模型表面计算光照强度的时候，我们会用到法向量和光线入射向量，利用他们之间的点积计算光照强度。"}),"\n",(0,i.jsx)(e.p,{children:"向量的重要性可见一斑。"}),"\n",(0,i.jsxs)(e.h3,{id:"向量计算",children:["向量计算",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#向量计算",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"3D 编程中经常使用的向量运算有以下几种。"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"点积"}),"\n",(0,i.jsx)(e.li,{children:"叉积"}),"\n",(0,i.jsx)(e.li,{children:"归一化向量"}),"\n",(0,i.jsx)(e.li,{children:"向量长度"}),"\n",(0,i.jsx)(e.li,{children:"两个向量之间的距离"}),"\n",(0,i.jsxs)(e.li,{children:["向量基本运算","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"向量相加"}),"\n",(0,i.jsx)(e.li,{children:"向量相减"}),"\n",(0,i.jsx)(e.li,{children:"向量相乘"}),"\n",(0,i.jsx)(e.li,{children:"向量相除"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"后续章节我们会详细学习它们的运算规律，并提供 JavaScript 版本的分析与实现。"}),"\n",(0,i.jsxs)(e.h2,{id:"四矩阵",children:["四、矩阵",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#四矩阵",children:"#"})]}),"\n",(0,i.jsxs)(e.p,{children:["3D 数学中最重要的一个知识点我想就是",(0,i.jsx)(e.code,{children:"矩阵"}),"了，矩阵能够帮助我们以一种非常简单的方式解决大量运算的问题。"]}),"\n",(0,i.jsx)(e.p,{children:"比如坐标转换。"}),"\n",(0,i.jsxs)(e.p,{children:["那有同学会问了，坐标转换无非就是对顶点坐标的计算，我用普通的",(0,i.jsx)(e.code,{children:"加减乘除"}),"和",(0,i.jsx)(e.code,{children:"三角函数"}),"运算也能做到呀。"]}),"\n",(0,i.jsx)(e.p,{children:"说的没错，那大家有没有想过，如果要对一个坐标执行多种变换，大家需要写多少计算逻辑？"}),"\n",(0,i.jsx)(e.p,{children:"我想大家会崩溃的。"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"矩阵"}),"就是为了帮助我们解决这个问题，一个矩阵代表一种变换，多个矩阵相乘就代表多个变换。有了矩阵，我们就不用再使用三角函数，加减乘除等繁杂的数学公式来完成坐标转换，仅仅使用一个矩阵就可以代替多种运算步骤。"]}),"\n",(0,i.jsxs)(e.p,{children:["前面在构建立方体的章节我们已经接触到了矩阵，仅仅让一个",(0,i.jsx)(e.code,{children:"旋转矩阵"}),"左乘",(0,i.jsx)(e.code,{children:"顶点坐标"}),"，就实现了立方体的旋转，由此可见矩阵在 3D 数学运算中的重要性。"]}),"\n",(0,i.jsx)(e.p,{children:"这就是矩阵的主要作用。但使用矩阵还有一点考虑，就是在 GPU 中执行矩阵运算性能会高很多，这得益于 GPU 并行计算的优势，在绘制大量顶点的场景下会有很大的性能提升。"}),"\n",(0,i.jsxs)(e.h3,{id:"矩阵运算",children:["矩阵运算",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#矩阵运算",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"3D 编程中经常用到的矩阵运算有以下几种。"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"单位化矩阵"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"矩阵基本运算"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"矩阵相加。"}),"\n",(0,i.jsx)(e.li,{children:"矩阵相减。"}),"\n",(0,i.jsx)(e.li,{children:"矩阵相乘。"}),"\n",(0,i.jsx)(e.li,{children:"转置矩阵"}),"\n",(0,i.jsx)(e.li,{children:"逆矩阵"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"旋转矩阵"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"绕 X 轴旋转。"}),"\n",(0,i.jsx)(e.li,{children:"绕 Y 轴旋转。"}),"\n",(0,i.jsx)(e.li,{children:"绕 Z 轴旋转。"}),"\n",(0,i.jsx)(e.li,{children:"绕轴向量旋转。"}),"\n",(0,i.jsx)(e.li,{children:"根据欧拉角推导旋转矩阵。"}),"\n",(0,i.jsx)(e.li,{children:"根据四元数推导旋转矩阵。"}),"\n",(0,i.jsx)(e.li,{children:"旋转矩阵与欧拉角、四元数之间的变换。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"平移"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"沿 X 轴平移。"}),"\n",(0,i.jsx)(e.li,{children:"沿 Y 轴平移。"}),"\n",(0,i.jsx)(e.li,{children:"沿 Z 轴平移。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"缩放"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"沿 X 轴缩放。"}),"\n",(0,i.jsx)(e.li,{children:"沿 Y 轴缩放。"}),"\n",(0,i.jsx)(e.li,{children:"沿 Z 轴缩放。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"观察矩阵"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"正射投影矩阵"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"透视投影矩阵"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"如果我们不理解矩阵和向量的运算规则，我们就写不出数学库，自然就没办法开发 3D 应用。接下来我们就要着重讲解这方面的内容，另外我还会详细推导变换矩阵的 JavaScript 算法实现，封装出一个我们自己的数学库。"}),"\n",(0,i.jsxs)(e.h2,{id:"五-常用数学函数",children:["五、 常用数学函数",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#五-常用数学函数",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:"3D 开发时我们经常需要使用一些数学函数完成一些数值运算，常用的有如下几种："}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"sin (θ)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"指定角度 θ 的正弦值。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"asin (value)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"指定正弦值 value 对应的角度值。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"cos (θ)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"指定角度 θ 的余弦值。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"acos (value)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"指定余弦值 value 对应的角度值。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"atan (value)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"指定正切值 value 对应的角度。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"tan (θ)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"求 θ 的正切值。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"abs (value)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"取 value 的绝对值。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"max (value1, value2)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"取 value1 和 value2 之间的最大值。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"min (value1, value2)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"取 value1 和 value2 之间的最小值。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"clamp (value, min, max)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"如果 value 小于 min，返回 min，如果 value 大于 max ，返回 max，如果 value 介于 min 和 max 之间，返回 value。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"pow (x, n)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"求 x 的 n 次幂。"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"。。。"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"还有一些函数就不一一介绍了，在需要的时候大家可以查一下。"}),"\n",(0,i.jsxs)(e.h2,{id:"六其它高等函数",children:["六、其它高等函数",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#六其它高等函数",children:"#"})]}),"\n",(0,i.jsxs)(e.p,{children:["上面的数学知识，足以支撑我们完成大部分 3D 效果了，但在做一些曲线相关应用的时候，我们还会用到一些曲线公式来求坐标，如",(0,i.jsx)(e.code,{children:"正弦"}),"、",(0,i.jsx)(e.code,{children:"余弦"}),"、",(0,i.jsx)(e.code,{children:"贝塞尔"}),"公式等。本小册不对它们做过多介绍，感兴趣的话大家可以去看看 ThreeJS 对它们的实现。"]}),"\n",(0,i.jsxs)(e.h2,{id:"回顾",children:["回顾",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#回顾",children:"#"})]}),"\n",(0,i.jsxs)(e.p,{children:["以上就是我们在 3D 编程中将会用到的数学知识，业界一般将这些数学算法抽象出来以方便调用，比如 ",(0,i.jsx)(e.code,{children:"Threejs"})," 就有单独的 ",(0,i.jsx)(e.code,{children:"matrix"})," 、",(0,i.jsx)(e.code,{children:"vector"}),"、",(0,i.jsx)(e.code,{children:"euler"}),"等数学类。JavaScript没有提供向量和矩阵的表示和运算，所以我们需要封装。但是 ",(0,i.jsx)(e.code,{children:"GLSL"})," 内置了大部分数学运算。"]}),"\n",(0,i.jsxs)(e.p,{children:["有的同学会问，既然 ",(0,i.jsx)(e.code,{children:"GLSL"})," 内置了这些计算，",(0,i.jsx)(e.code,{children:"Threejs"}),"  为什么还要封装呢？"]}),"\n",(0,i.jsxs)(e.p,{children:["这是因为有些运算没有必要放在 ",(0,i.jsx)(e.code,{children:"GLSL"})," 中，如果放在 ",(0,i.jsx)(e.code,{children:"GLSL"})," 中反而会影响性能。比如",(0,i.jsx)(e.code,{children:"全局变换矩阵"}),"，如果放在 ",(0,i.jsx)(e.code,{children:"GLSL"})," 中计算，那么每个顶点变换前，都要重新计算出矩阵。模型的顶点都是很多的，这会造成大量重复运算。尽管 ",(0,i.jsx)(e.code,{children:"GPU"})," 的运算能力很强，但那么多的无用运算还是会造成性能问题。"]}),"\n",(0,i.jsx)(e.p,{children:"下一节，我们开始详细介绍这些数学知识。"})]})}function c(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,d.ah)(),n.components);return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(s,{...n})}):s(n)}let h=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["WebGL%20%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E8%B7%B5%2F14.%E4%B8%AD%E7%BA%A7%E8%BF%9B%E9%98%B6%20---%20WebGL%20%E4%B8%8E%E6%95%B0%E5%AD%A6%EF%BC%9A%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E5%93%AA%E4%BA%9B%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86%EF%BC%9F.md"]={toc:[{text:"你能学到什么？",id:"你能学到什么",depth:2},{text:"一、 坐标系",id:"一-坐标系",depth:2},{text:"二、 点",id:"二-点",depth:2},{text:"三、向量",id:"三向量",depth:2},{text:"向量计算",id:"向量计算",depth:3},{text:"四、矩阵",id:"四矩阵",depth:2},{text:"矩阵运算",id:"矩阵运算",depth:3},{text:"五、 常用数学函数",id:"五-常用数学函数",depth:2},{text:"六、其它高等函数",id:"六其它高等函数",depth:2},{text:"回顾",id:"回顾",depth:2}],title:"14.中级进阶 --- WebGL 与数学：我们需要哪些数学知识？",headingTitle:"14.中级进阶 --- WebGL 与数学：我们需要哪些数学知识？",frontmatter:{}}}}]);