"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["44859"],{29979:function(n,e,r){r.r(e),r.d(e,{default:()=>g});var s=r(552676),d=r(740453);let i=r.p+"static/image/97ca9c95cd79fba2793202c145e512ee.b7b96324.webp",A=r.p+"static/image/08746d00b099c2e1b44a32f11eca6c46.1fa61c4d.webp",c=r.p+"static/image/e0764a444794f5f63d182a2399cf87f5.1062486c.webp",a=r.p+"static/image/c946fd4136114c5fbfa609a985aef6ba.5386a6e1.webp",h=r.p+"static/image/bb0fd6ae25ee962a62d8aaa2c2e4ed66.c8bc78ca.webp",l=r.p+"static/image/da411c10f6df0fcc5fea0b3deddd7017.e3b9906d.webp",x=r.p+"static/image/8b9e005b306656e92df4be6a2f3c98de.ff6627de.webp";function t(n){let e=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",ul:"ul",li:"li",br:"br",img:"img",blockquote:"blockquote",h3:"h3",h4:"h4",pre:"pre",h5:"h5",em:"em"},(0,d.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.h1,{id:"22深入研究-----更高级的旋转欧拉角四元数",children:["22.深入研究 --- 更高级的旋转：欧拉角、四元数。",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#22深入研究-----更高级的旋转欧拉角四元数",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:["在之前的",(0,s.jsx)(e.code,{children:"坐标系基本变换"}),"章节中，我们学习了 3D 基本旋转的四个方法：绕 3 个坐标轴、绕任意轴的旋转，并讲述了推导过程。本节介绍另外两个旋转的表示方法：",(0,s.jsx)(e.code,{children:"欧拉角"}),"与",(0,s.jsx)(e.code,{children:"四元数"}),"。"]}),"\n",(0,s.jsx)(e.p,{children:"任何一个概念的提出都有它自身的意义，新概念的诞生大多是为了解决一些问题，欧拉角与四元数也不例外。"}),"\n",(0,s.jsxs)(e.h2,{id:"欧拉角",children:["欧拉角",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#欧拉角",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"我们看下前四种旋转的特点，前四种旋转可以归结为旋转矩阵。"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"首先，旋转矩阵是一个 3 X 3 矩阵，需要 9 个数字来表示一个旋转。"}),"\n",(0,s.jsx)(e.li,{children:"其次，旋转矩阵通过 3 个绕基本坐标轴的矩阵相乘得到，计算过程相对繁琐。"}),"\n",(0,s.jsx)(e.li,{children:"最后，物体旋转用矩阵来描述的话不易理解。为什么不易理解，是因为我们习惯于用角度来描述旋转状态，比如向左旋转多少度，绕着什么什么旋转多少度，这种说法很容易在脑子里想象出来。但如果我们看到一种旋转用如下方式来表示："}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["$\n\\begin{aligned}\nR = \\begin{pmatrix}\n0.25 & 0.1 & 0.3 \\",(0,s.jsx)(e.br,{}),"\n","0.1 & 0.02 & 0.2 \\",(0,s.jsx)(e.br,{}),"\n","0.1 & 0.02 & 0.2\n\\end{pmatrix}\n\\end{aligned}\n$"]}),"\n",(0,s.jsxs)(e.p,{children:["我想，这种反人类的",(0,s.jsx)(e.code,{children:"旋转表示方法"}),"，人类是无法理解的，当然计算机是能读懂这种旋转的。"]}),"\n",(0,s.jsxs)(e.p,{children:["那么，如何表示才能让人很容易地理解旋转呢？于是欧拉角的表示方法诞生了。关于欧拉角的详细介绍，大家可以从",(0,s.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Euler_angles",target:"_blank",rel:"noopener noreferrer",children:"这里"}),"了解，本节不做具体描述。"]}),"\n",(0,s.jsxs)(e.p,{children:["欧拉角是飞控系统中用于描述飞行器姿态的方式，使用三个角度来表示，分别是yaw",(0,s.jsx)(e.code,{children:"偏航角"}),"、pitch",(0,s.jsx)(e.code,{children:"俯仰角"}),"、roll",(0,s.jsx)(e.code,{children:"滚转角"}),"。"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"yaw：偏航角，是指飞行器偏离原来航线的角度。"}),"\n",(0,s.jsx)(e.li,{children:"pitch：俯仰角，是指飞行器机头抬起的角度。"}),"\n",(0,s.jsx)(e.li,{children:"roll：滚转角，是指飞行器绕着自身头尾轴线翻滚的角度。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:x,alt:""})}),"\n",(0,s.jsx)(e.p,{children:"对比到笛卡尔坐标系，偏航角是绕着 Y 轴旋转的角度 α，俯仰角是绕着 X 轴旋转的角度 β，滚转角是绕着 Z 轴旋转的角度 γ。"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"欧拉角旋转时绕的轴系，既可以参照世界坐标系，也可以参照自身坐标系。本节所讲的内容都是参照自身坐标系。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"可以看出，欧拉角很容易就能表示出一个旋转运动，而且用角度来描述旋转，容易被人理解。"}),"\n",(0,s.jsx)(e.p,{children:"$R = (\n\\alpha, \\beta, \\gamma)$"}),"\n",(0,s.jsxs)(e.h3,{id:"欧拉角旋转顺序",children:["欧拉角旋转顺序。",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#欧拉角旋转顺序",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"上面讲到，欧拉角是由三个角度构成，那么这三个角度的旋转顺序又是如何表示呢？"}),"\n",(0,s.jsx)(e.p,{children:"我们必须清楚，欧拉角的旋转顺序必须保证统一性。如果顺序不统一，同样的三个角度，旋转结果也会不一样。就好比我们平常走路，向左转α然后向右转β，向右转α然后向左转β，两种旋转最终表示的姿态也会不同。"}),"\n",(0,s.jsxs)(e.p,{children:["我们常说的欧拉角严格意义上还可以细分为欧拉角",(0,s.jsx)(e.code,{children:"Euler-angles"}),"和泰特布莱恩角",(0,s.jsx)(e.code,{children:"Tait-Bryan-angles"}),"，这两种方法都利用了笛卡尔坐标系的三个坐标轴作为旋转轴，区别主要在于绕轴的旋转顺序。"]}),"\n",(0,s.jsxs)(e.h4,{id:"欧拉角-1",children:["欧拉角",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#欧拉角-1",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"欧拉角的选取顺序有以下6种："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"XYX"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"XZX"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"YZY"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"YXY"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"ZXZ"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"ZYZ"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"以 XYX 欧拉角为例，最开始物体的坐标系和世界坐标系保持一致，首先物体绕 X 轴旋转 α角度，此时物体的坐标系发生了变化，产生了新的坐标系E1，然后绕新坐标系E1的 Y 轴旋转 β角度，这时又产生了新的坐标系 E2， 接着绕 E2 的 X 轴旋转 γ 角度，此时即物体的最终姿态。"}),"\n",(0,s.jsx)(e.p,{children:"可以看到，这种顺序有一个共同点：第一个旋转轴和最后一个旋转轴在物体这个参照系下相同，可以理解为对称型欧拉角。"}),"\n",(0,s.jsxs)(e.h4,{id:"泰特布莱恩角",children:["泰特布莱恩角。",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#泰特布莱恩角",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"泰特布莱恩角的选取顺序有如下 6 种："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"XYZ"}),"\n",(0,s.jsx)(e.li,{children:"XZY"}),"\n",(0,s.jsx)(e.li,{children:"ZXY"}),"\n",(0,s.jsx)(e.li,{children:"ZYX"}),"\n",(0,s.jsx)(e.li,{children:"YXZ"}),"\n",(0,s.jsx)(e.li,{children:"YZX"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"可以看出，此种旋转顺序是非对称型的，我们前面所说的 yaw-pitch-roll 旋转就是采用的泰特布莱恩角。"}),"\n",(0,s.jsxs)(e.h3,{id:"欧拉角的矩阵表示",children:["欧拉角的矩阵表示",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#欧拉角的矩阵表示",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"欧拉角的定义有了，那么我们最终还是要将它推导成对应的旋转矩阵才能使用。"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Euler_angles",target:"_blank",rel:"noopener noreferrer",children:"这里"}),"有这几种顺序的最终推导公式，但接下来我还是要讲解一下这个公式是如何推导出来的。"]}),"\n",(0,s.jsx)(e.p,{children:"前面说过了，顺序不同，所对应的旋转矩阵不同，旋转结果也不同。那么我们根据不同的顺序推导对应的旋转矩阵："}),"\n",(0,s.jsxs)(e.h4,{id:"xyz-顺序",children:["XYZ 顺序",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#xyz-顺序",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"在坐标系基本变换章节我们讲解了矩阵的基本旋转，那么，本节的欧拉旋转其实相当于矩阵绕基本坐标轴的复合旋转。\n以 XYZ 顺序为例，XYZ 顺序的欧拉旋转可以表示如下："}),"\n",(0,s.jsx)(e.p,{children:"$\nR_{xyz} = R_x R_y R_z\n$"}),"\n",(0,s.jsx)(e.p,{children:"看到这个表达式，我们首先要思考一个问题，上面这个表达式表示的是什么样的旋转呢？"}),"\n",(0,s.jsx)(e.p,{children:"请谨记，上面表示的旋转可以用以下两种方式理解："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"参照自身坐标系，先绕X轴旋转，再绕 Y 轴旋转，最后绕 Z 轴旋转。"}),"\n",(0,s.jsx)(e.li,{children:"参照世界坐标系，先绕 Z 轴旋转，再绕 Y 轴旋转，最后绕 X 轴旋转。"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["这两种旋转顺序相反。下面的两个方法可以验证，点击",(0,s.jsx)(e.a,{href:"/",children:"这里查看源码"}),"。"]}),"\n",(0,s.jsx)(e.p,{children:"如何验证参照世界坐标系的旋转顺序？"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"首先改变 Z 轴旋转角度，直到旋转 90 度。"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"其次改变 Y 轴旋转角度，直到旋转 90 度。"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"最后改变 X 轴旋转角度，直到旋转 90 度。"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"我们发现，以世界坐标系为参照，旋转按照先 Z 、再 Y 、最后 X 轴的顺序依次进行。"}),"\n",(0,s.jsx)(e.p,{children:"如何验证参照自身坐标系的旋转顺序？"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"首先改变 X 轴旋转角度，直到旋转 90 度。"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"其次改变 Y 轴旋转角度，直到旋转 90 度。"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"最后改变 Z 轴旋转角度，直到旋转 90 度。"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"我们发现，以自身坐标系为参照，旋转按照先 X 、再 Y 、最后 Z 轴的顺序依次进行。"}),"\n",(0,s.jsx)(e.p,{children:"所以我们得出以下结论：一个复合变换矩阵，既可以理解为世界坐标系下的依次变换，也可以理解为模型坐标系下的依次变换，变换顺序相反。"}),"\n",(0,s.jsxs)(e.h4,{id:"根据欧拉角推导旋转矩阵",children:["根据欧拉角推导旋转矩阵",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#根据欧拉角推导旋转矩阵",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"接下来，我们按照 XYZ 的顺序推导旋转矩阵，如下所示："}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:l,alt:"MommyTalk1677065558787.jpg"})}),"\n",(0,s.jsx)(e.p,{children:"有了推导公式，我们就可以很容易编写JavaScript 算法了："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"function makeRotationFromEuler(euler, target){\n    target = target || new Float32Array(16);\n    \n    var x = euler.x, y = euler.y, z = euler.z;\n    var cx = Math.cos(x), sx = Math.sin(x),\n        cy = Math.cos(y), sy = Math.sin(y),\n        cz = Math.cos(z), sz = Math.sin(z);\n    var sxsz = sx * sz;\n    var cxcz = cx * cz;\n    var cxsz = cx * sz;\n    var sxcz = sx * cz;\n    target[0] = cy * cz;\n    target[1] = sxcz * sy + cxsz;\n    target[2] = sxsz - cxcz * sy;\n    target[3] = 0;\n    \n    target[4] = -cy * sz;\n    target[5] = cxcz - sxsz * sy;\n    target[6] = sxcz + cxsz * sy\n    target[7] = 0;\n    \n    target[8] = sy;\n    target[9] = -sx * cy;\n    target[10] = cx * cy;\n    target[11] = 0;\n    \n    target[12] = 0;\n    target[13] = 0;\n    target[14] = 0;\n    target[15] = 1;\n    \n    return target;\n}\n"})}),"\n",(0,s.jsxs)(e.h4,{id:"其它顺序推导",children:["其它顺序推导",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#其它顺序推导",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"其它顺序的推导公式和 XYZ 类似，大家只需要按照矩阵相乘顺序推导即可，比如："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"XZY 顺序的推导公式："}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"$\nR_{xzy} = R_x R_z R_y\n$"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"YXZ 顺序的推导公式："}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"$\nR_{yxz} = R_y R_x R_z\n$"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"YZX 顺序的推导公式："}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"$\nR_{yzx} = R_y R_z R_x\n$"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ZXY 顺序的推导公式："}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"$\nR_{zxy} = R_z R_x R_y\n$"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ZYX 顺序的推导公式："}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"$\nR_{zyx} = R_z R_y R_x\n$"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"/",children:"点击这里"}),"可以查看不同顺序的欧拉角算法实现。"]}),"\n",(0,s.jsx)(e.p,{children:"有了欧拉角生成旋转矩阵的算法之后，我们就可以按照任意顺序进行旋转了。但请注意，在一个应用中尽量要统一旋转顺序，否则物体的旋转姿态将不是我们期望的。"}),"\n",(0,s.jsxs)(e.h4,{id:"实战演练",children:["实战演练",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#实战演练",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"上面推导出的算法使用起来相当简单，只需传入一个能够表示欧拉角的对象即可："}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"一个欧拉角对象包含x、y、z 三个属性，分别表示绕 X 轴、Y 轴、Z 轴旋转的角度，以及一个表示欧拉旋转的顺序 order。"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"\nvar rotateMatrix = matrix.getMatrixFromEuler({\n    x: deg2radians(uniforms.xRotation),\n    y: deg2radians(uniforms.yRotation),\n    z: deg2radians(uniforms.zRotation),\n    order:'XYZ'\n});\n"})}),"\n",(0,s.jsxs)(e.h3,{id:"欧拉角的缺点",children:["欧拉角的缺点",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#欧拉角的缺点",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"尽管欧拉角易于理解，但它还是有一些缺点的："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"计算过程涉及到大量三角函数计算，运算量大，这点在推导公式的过程中显而易见。"}),"\n",(0,s.jsx)(e.li,{children:"给定方位的欧拉角不唯一，有多个，这会对旋转动画的插值造成困难。同样一个姿态可以由好多个欧拉角来表示，即多对一的关系，那么在插值过程中就可能会引起姿态突变，产生抖动效果。"}),"\n",(0,s.jsx)(e.li,{children:"万向节死锁，这个现象会在第二个旋转轴旋转了90 度时产生，当第二个旋转轴旋转 90 度时，会导致第三个旋转轴和第一个旋转轴重合，此时如果继续绕第三个旋转轴，相当于在第一个旋转轴上旋转。所谓死锁并不是旋转不了了，而是少了一个自由度。"}),"\n"]}),"\n",(0,s.jsxs)(e.h4,{id:"万向节死锁",children:["万向节死锁",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#万向节死锁",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"我们看一下万向节死锁的表现："}),"\n",(0,s.jsx)(e.p,{children:"首先绕 X 轴旋转30度。"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,UklGRtIKAABXRUJQVlA4IMYKAADQfwCdASoZBDsBPp1MoU2lpCqiIXBIsVATiWlu4XaxGx8/6SCArh3ooworTM/QA/QC0jfKf967Yu/vyNeLvbHlUPQ/ZX9Pw78AL0b/iO9r7hIAH45/SP993TvoB9cf9B6o/6H/neN28R9gD+T/3f/d/cZ8en+n5lfz3/Sf+X3Cf5X/ZP+V2HfR4DBjfHleatPK81aeV5qnzudmi+lb48rzVp5XM8op34eZSgNb06DLfLqLEMCuBgxI1YaIpumpmheKTQoVysube3t7e3t7e3LmZ/iIVSZ+UwPLTyvNWnleatPK80O0v2Jo4x4jRxjquyT/4IOFGEaPFWXkKl+8wUiCcjYnNLtbW1tbW1tbWGv3XvIBocWoUTRxjxGjjHiNG8E39K3x5XmrTyuYzStFKUSAn+tx9NCYxJgHFushnKRU7ez0IWwpu05OTk5OTk5NjJf3EM+ZsOLUKJo4x4jRxjxGjitMNaeV5q08rzVntk1uIu/n8uBJVAwWzSmC1SWk1ydpycnJycnJybIXuzKBt0A+xNHGPEaOMeI0cY65bLfHleatPK81THDEVNhUvCmMHoPg/RMc99U0w1ogfT96tyQOGpycnJycnJuGz0eevojpP2Jo4x4jRxjxGjjHhTTwfYmjjHiNHGKIeB/dHBbRwaIpTg+NiNKbAGc7QjQhHh4vr6+vr6+vNdUeqQaARaeV5q08rzVp5XmgFsbcmk8FcWOpnxtyaJOuSfLTyvNWnle6//KYHlp5ZJlp5XmrTyvNWnleSdINfodI3AaOMeI0cY8Ro4x4jRxjxGjjHiNHGPEaOMeEujLwQVdPfFqFE0cY8Ro4x4jRxjxGjjHiNHGPEaOMeIfNYox1bT3xahRNHGPEaOMeI0cY8Ro4x4jRxjxGjjHiHzWKMdW098WoUTRxjxGjjHiNHGPEaOMeI0bsdzlExWx5ld9NxWx5ld9NwE9dNTn2I8JYYSu3fTcVseZXfTcVseZXfQw94wyt8eV5q08rzVp5XmrTzcYlEQALiQexRUkuPNttMqZglptwzlnQoOaOMeI0cY8Ro4x4jRxjxGjjHiNG6tRQKI+a3XtX1FsNJH2Jo4x4jRxjxGjjHiNHGPEaOMeIyuddHm22ooFE0cY8Ro4x4jRxjxGjjHiNHGPEaOMeI0cVM66PNttRTZRjxGjjHiNHGPEaOMeI0cY8Ro4x4jRxjxDwULcf5cbUotyaJaZ8Su0ng9HEnsiXqfsTRxjxGjjHiNHGPEaOMeI0cY8Ro4x4jR1sW9eNq7DAeWnleatPK81aeV5q08rzVp5XmrTyvNWnleaqIHN+xNHGPEaOMeI0cY8Ro4x4jRxjxGjjHiNHGPEaKSd3eV5q08rzVp5XmrTyvNWm0AD+/8VnE0C59n/NuFJYhRHx6LEfOSX+aCPhM0FvAz7JTMvF8TnvGSyqJ81JBj1ARVg+o3VWprYfJ+0CwvVLgDTwdLdHFcPn3+TDC9r31xC0DCSC4HGLWE+mfDjgZwspK/9PLfmjZs61O/2m8h3GDNpEJ+WXoy12ISYMPmzKuv+OaLm1O8MD6PLcRpMd/8+8qSSvjr480miJf6ArBCHpu8SsHxyijRnCktFrEvjUv/88Eh5K9gMAr9v6jL7lcJ3GwZi56fzPOnEY1AJbY9Sged/mIXzJe2iRGENEHqMRZo7vttGKh6QBaFsvrKzqyzLowgEOLo5qAhrHl6046rmgcncbVRzauY/fgzkb56O4Nf6HaRYAkDJ3NuPLe2jsxGXVA/vKOIl71dvVaVIkOa95u3bXzqXqRkY1f4S09XnLjn32/FTb/AI9lmDewsnl3OmdauT/Puv0hqvh6FjywbhYSJAfzh/il13sU4s/F9/aokuk+Fm3ZCN84Ebd220WOg3k/P5jJc8Q2yIZQRhfOftiYZ32agnKHTNyMQAo4bgFIsPoDKaLLJT1dsQGhAI9o7BBpVWEyUvSrr+GVAHnaXlKH/CwEBr23Vc2iexYLureNLE1VSHG32FAq5uHZJd+pHFaAB/CnhhaJRGBPWzXMrkz3fPrKcsEyf9QZ+FhWmCtAtpUxvVahhz9iuihCGsl6expLfy0o0LvTnLgM0ezeBH+uRP/Z483QtbP5L/APsub80bNnZPNmub5MP8aPekcTG0cuGM1s7SP0OeeREPxzRc2p6jNodRoafn06/fD5Fh+HjbIt4ljrzIsX5vefjQxGj6U//QB0XdZdZds5LNWuEZgA3Fhr/2xLyHyNGvTefHh08s35qFtUBhXtlvzt/7b6yrxR8+KuX5Sitmadl8P13XfWgEQ/ttgZFL5AA7V62OeJHDbKwkk+UbXZ5Hua9fikvUU4dddzcpXPC7IBojDM2hw7qUdElTYSe8VP5zjR+JhxyQhBlcAQQOLjR8qT98nDTAp3T6hMxOEYV3v4HStEST4Xn/a+B0D7FN+Aif00AHNvETnewCrwkQk6jHASCkWN9ddB4O5P5BsOt/dx8j7K7J6FqliUEUHTf9JlyGs5zI2Glzm/k0MKumTgj8uOe9wfjeGk1TbFz87ZMBoc10Ub/wK2ix0qUxdH8i2nXf1d8p3awV/vVVijk7zpTmg2+Y+Jd8zjSFoyol9kgUOKRERSUEfCeNb1PbwICL8RJX2vLceNWifOpIl/T9H2ENDM4vmhDRaamIk+WQbmFIi/0qdgW/zpG/SPBgu6t40ruRp4YG8ix/LSFayb+pHFaAD3FPDC0SiMCYvKOHOGPwJwjMH4bi3tegVMN66W9dXfM+ZwoWNQyz+euz0NUXLYMYV93rRC/2ePN0LWz+S/skRCqEwSL2MXdSbNvrkPdbfnHBjSedp9e7iy4GrdCutbPjmi5tTyZ2FcNGA4R5V/sHD9TT/diHKj2evMixfm95+NDEaPpT/9AHRd1l0Lwkr9qv9/TNKQIhZH+O1LNkoSiRsNY/Fw2Y8DlnSfP6tNNp4IiYPqJXvR4hm+lGWf2Vwb3wH7xDyXf4hNHd6I8eNracF9LsGXmn30GNsxMAtEHTjm7iAsWtBQTPjVbnutH0mXgJoVxnw2FDVdvDqHB9Vd2whzWixI+hL4BeM/LGjt6k1XzMVZrVTrb6q+g8VDkgNiHQQe4ANGFYV3fS22UF3aHc94OkuOQoJMXcx+i3tZKNqXjGcYt2MUogKa9KWkxq152u17cDxvhg3aK7ADFeQ/e/pXRS3FucHp5f4pT/3vDZoZRARhfwQMWeVv8k7t5TwCRkWENsvh95GNw/ZwKhriSiY25+ci+8ZbVkH6PsBkzQ7K/V68ErJY347dB0U5N4uxi/P1AHCmyW/QBp1oAcfFL8cipgBe8HByqB6Xe3twl20sza/4/7UJzbi17ZIj42LZneqV4Np8jjxZSniXWgcX8/gOGeK3Q5tfnUPd3WxCf/nk7+u/7PzgAasa6kQeSdCguDELqxSw3JALIgAAC4FAAaIoADRFAHz4zh2G/5w5ddt22w0DwZSWkTRw6SwAPGuby2EgPAWauNmK3/zBzDshH6KjFiCu66u/VAAQLyT6oLVC01ipX9V+QVV+QVV+QVOIAHFcO2fxJjAAB1tRnAAF5cUTwAGX9Qj5l/jp3LZiLf3eNW88a1WBjmD5C4Jq3qsW6C82qAOmMGrIbP1jjsOHzaOVCEUz0LwBQCE//yU/w7+kFqIQAC8BcUwYTRtFFIwHgAAAAAAAAAA",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"接着绕 Y 轴旋转90 度。"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"绕 Y 轴旋转 90 度后，此时自身坐标系的 Z 轴和最开始的 X  轴重合，触发了万向节死锁，那么它会产生什么后果呢？"}),"\n",(0,s.jsx)(e.p,{children:"我们绕 Z 轴做的旋转，等价于在最开始的 X 轴上旋转。那还要 Z 轴有什么用呢？是的，Z 轴的旋转已经没用了，此时我们无论怎么绕物体自身的 Z 轴旋转，都只能在原先 X 轴和 Y 轴上进行旋转，失去了原先 Z 轴方向上的的自由度。"}),"\n",(0,s.jsx)(e.p,{children:"上面的例子最终的旋转角度是(x: 30, y: 90, z: 50)。"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"接下来，我们把 Z 轴的旋转角度放到 X 轴上，不再绕 Z 轴旋转了，此时的欧拉角（x：80， y：90，z：0）。"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"可以看出，欧拉角（x: 80, y: 90, z: 0）和(x: 30, y: 90, z: 50) 表示的旋转一模一样。也就是说，多个欧拉角会对应一个旋转。这在做旋转动画时会导致旋转动画不准确的问题。"}),"\n",(0,s.jsxs)(e.h4,{id:"欧拉角缺陷演示",children:["欧拉角缺陷演示",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#欧拉角缺陷演示",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"有句话说得好，当你没有碰到过使用欧拉角进行旋转所产生的缺陷时，你永远无法理解它的缺点，接下来我通过两个例子来演示一下："}),"\n",(0,s.jsxs)(e.h5,{id:"大圆弧与小圆弧",children:["大圆弧与小圆弧",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#大圆弧与小圆弧",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"我们知道 (0, 0, 330)和(0, 0, -30)所表示的方位一样，如果把物体从(0, 0, 0)旋转到（0，0，330）所代表的方位，我们期望的旋转动画应该是这样的："}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,UklGRkgCAABXRUJQVlA4IDwCAADwQQCdASqZAzkBPp1OpE4lpCOiIAgAsBOJaW7hd2EbQAeiAV3LxcnIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbHAAD++2UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"但是实际上，欧拉角旋转路径却是这样的："}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,UklGRmICAABXRUJQVlA4IFYCAAAQRQCdASqZA0MBPp1OpE4lpCOiIAgAsBOJaW7hd2EbQAeiAV3LxcnIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyG8AA/vtlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"欧拉角的这个特点会导致插值动画产生抖动、跳跃的副作用。"}),"\n",(0,s.jsxs)(e.h5,{id:"动画路径怪异",children:["动画路径怪异",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#动画路径怪异",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"除了上述大小圆弧产生的路径不正确以外，欧拉角的旋转路径有时很怪异，比如下面这个动画过程。"}),"\n",(0,s.jsx)(e.p,{children:"准备一个球体，球体初始状态处于万向节死锁状态，如下："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"    xRotation: 0,\n    yRotation: -90,\n    zRotation: 0,\n"})}),"\n",(0,s.jsx)(e.p,{children:"接下来我们让球体转动到如下状态："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"    xRotation: 0,\n    yRotation: -90,\n    zRotation: 0,\n"})}),"\n",(0,s.jsx)(e.p,{children:"我们看一下球体的旋转路径是怎样的："}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)("img",{src:"data:image/webp;base64,UklGRmABAABXRUJQVlA4IFQBAACQJgCdASrqAUgBPp1OpE4lpCOiIAgAsBOJaW7hd2EbQAeiAV3LxcnIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ3gAD++2UAAAAAAAAAAAAAAAAAAAAAAAAA",alt:""}),"。"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"白色轨迹是采用欧拉角旋转时的运动路线。"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"红色轨迹是我们正常的旋转路线。"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"可见，欧拉角有时会让我们的旋转绕个弯，产生比较怪异的动画效果，万向节死锁还是那么讨厌。"}),"\n",(0,s.jsxs)(e.h5,{id:"连续旋转",children:["连续旋转",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#连续旋转",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"万向节死锁除了会产生上面的问题以外，还会导致在做连续增量旋转时姿态不准确的问题，这个问题在一些跟踪系统中导致的后果是跟丢目标。"}),"\n",(0,s.jsx)(e.p,{children:"举个例子，假设现在我们的飞行器先绕自身 X 轴（此时 X 轴和世界坐标系的 X 轴重合）旋转47 度，接着绕 Y 轴旋转 41 度，最后绕 Z 轴旋转 55 度。"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"var rotateMatrix = matrix.getMatrixFromEuler({\n    x: deg2radians(47),\n    y: deg2radians(41),\n    z: deg2radians(55),\n    order:'XYZ'\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:"接着我们再绕飞行器自身坐标系的 X 轴旋转 8 度。"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"var rotateMoreMatrix = matrix.getMatrixFromEuler({\n    x: deg2radians(8),\n    y: deg2radians(0),\n    z: deg2radians(0),\n    order:'XYZ'\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:"经过两次连续旋转之后，物体姿态如下图："}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:h,alt:""})}),"\n",(0,s.jsx)(e.p,{children:"那么，如果我们不分为两次旋转，而是采用一次旋转，那么物体的旋转姿态有什么不同呢？看一下一次旋转的效果："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"var rotateMatrix = matrix.getMatrixFromEuler({\n    x: deg2radians(55),\n    y: deg2radians(41),\n    z: deg2radians(55),\n    order:'XYZ'\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:a,alt:""})}),"\n",(0,s.jsx)(e.p,{children:"可以看出，虽然有一些差异，但是大体上是一致的。"}),"\n",(0,s.jsx)(e.p,{children:"接下来我们逐渐改变 Y 轴的旋转角度，当 Y 轴旋转角度为 90 度时，我们再用上面的方法比较一下插值和不插值旋转的区别："}),"\n",(0,s.jsx)(e.p,{children:"插值旋转："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"var rotateMatrix = matrix.getMatrixFromEuler({\n    x: deg2radians(47),\n    y: deg2radians(90),\n    z: deg2radians(55),\n    order:'XYZ'\n});\n\nvar rotateMoreMatrix = matrix.getMatrixFromEuler({\n    x: deg2radians(8),\n    y: deg2radians(0),\n    z: deg2radians(0),\n    order:'XYZ'\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:c,alt:""})}),"\n",(0,s.jsx)(e.p,{children:"那么我们看下一次性旋转后的方位："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"var rotateMatrix = matrix.getMatrixFromEuler({\n    x: deg2radians(55),\n    y: deg2radians(90),\n    z: deg2radians(55),\n    order:'XYZ'\n});\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:A,alt:""})}),"\n",(0,s.jsx)(e.p,{children:"这次能够很明显的感觉出插值前和插值后的区别了，结论是当第二个旋转轴越靠近 90 度，经过插值后的旋转姿态与一次旋转后的姿态产生的偏差越大。"}),"\n",(0,s.jsxs)(e.h4,{id:"结论",children:["结论",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#结论",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"实际上欧拉角足以应对大部分场景，虽然它有一些缺点。我们可以做出一些限制来避免它们，比如我们可以将第二个旋转轴的旋转角度限制在 -90 到 +90 之间。但尽管如此，我们仍然无法规避死锁的产生，所以我们急需一种能够避免死锁的旋转方法，也就是接下来要出场的四元数。"}),"\n",(0,s.jsxs)(e.h2,{id:"四元数",children:["四元数",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#四元数",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"还记得我们在基本变换里推导出的绕任意轴进行旋转的算法吗？但是通过轴角方式的旋转插值不是很直观，四元数的引入是对轴角旋转的升级，它能够完美地避免欧拉角的缺陷，并且能够很容易地对旋转进行插值，使物体旋转更自然，更平滑。"}),"\n",(0,s.jsxs)(e.h3,{id:"四元数基础",children:["四元数基础",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#四元数基础",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"四元数，顾名思义，是由四个数字组成，包含一个实数和三个复数，可以表示为："}),"\n",(0,s.jsx)(e.p,{children:"$\nq = (w, x, y, z)\n$"}),"\n",(0,s.jsx)(e.p,{children:"或者"}),"\n",(0,s.jsx)(e.p,{children:"$\nq = w + xi + yj + zk\n$"}),"\n",(0,s.jsx)(e.p,{children:"并且有以下特点："}),"\n",(0,s.jsx)(e.p,{children:"$\ni^2= j^2 = k^2 = -1\n$"}),"\n",(0,s.jsx)(e.p,{children:"四元数还可以理解为一个实数 w 和一个向量 $\\vec u(x,y,z)$"}),"\n",(0,s.jsx)(e.p,{children:"$\nq = (w, \\vec u)\n$"}),"\n",(0,s.jsxs)(e.h3,{id:"基本运算",children:["基本运算",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#基本运算",children:"#"})]}),"\n",(0,s.jsxs)(e.h4,{id:"加法减法运算",children:["加法/减法运算",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#加法减法运算",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"四元数的加减是将对应位置的元素相加或者相减，得到新的四元数。"}),"\n",(0,s.jsxs)(e.p,{children:["$\n\\begin{aligned}\nq0 + q1 &= (w_0, x_0i, y_0j, z_0k) + (w_1, x_1i, y_1j,z_1k)  \\",(0,s.jsx)(e.br,{}),"\n","&=(w_0 + w_1, (x_0 + x_1)i, (y_0 + y_1)j,(z_0+z_1)k)\n\\end{aligned}\n$"]}),"\n",(0,s.jsxs)(e.p,{children:["$\n\\begin{aligned}\nq0 - q1 &= (w_0 + x_0i+ y_0j+ z_0k) - (w_1+ x_1i+ y_1j+z_1k)  \\",(0,s.jsx)(e.br,{}),"\n","&=w_0 - w_1 + (x_0 - x_1)i+(y_0 - y_1)j+(z_0-z_1)k\n\\end{aligned}\n$"]}),"\n",(0,s.jsxs)(e.h4,{id:"乘法运算",children:["乘法运算",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#乘法运算",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:i,alt:"MommyTalk1677066507263.jpg"})}),"\n",(0,s.jsxs)(e.h4,{id:"四元数的模",children:["四元数的模",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#四元数的模",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"$\n\\begin{aligned}\n|q| = \\sqrt{w^2+x^2+y^2+z^2}\n\\end{aligned}\n$"}),"\n",(0,s.jsxs)(e.h4,{id:"四元数的共轭",children:["四元数的共轭",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#四元数的共轭",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:["$\n\\begin{aligned}\nq^* &= (w+xi+yj+zk)^* \\",(0,s.jsx)(e.br,{}),"\n","&=(w-xi-yj-zk)\n\\end{aligned}\n$"]}),"\n",(0,s.jsxs)(e.h4,{id:"四元数的倒数",children:["四元数的倒数",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#四元数的倒数",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"q^{-1} . q &= q . q^{-1} = 1"}),"\n",(0,s.jsx)(e.p,{children:"$\nq^{-1} = \\cfrac{q^*}{w^2+x^2+y^2+z^2}\n$"}),"\n",(0,s.jsxs)(e.h4,{id:"四元数的性质",children:["四元数的性质",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#四元数的性质",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"共轭与倒数的性质："}),"\n",(0,s.jsx)(e.p,{children:"$\n(q_0q_1)^{-1} = q_1^{-1}q_0^{-1}\n$"}),"\n",(0,s.jsxs)(e.p,{children:["$\n(q_0q_1)^{",(0,s.jsx)(e.em,{children:"} = q_1^{"}),"}q_0^{*}\n$"]}),"\n",(0,s.jsx)(e.p,{children:"加法乘法满足结合律和分配律"}),"\n",(0,s.jsx)(e.p,{children:"$\nq_0+q_1+q_2 = q_0 + (q_1 + q_2)\n$\n$\nq_0q_1q_2 = q_0(q_1q_2)\n$"}),"\n",(0,s.jsx)(e.p,{children:"$\nq_0(q_1+q_2) = q_0q_1+ q_0q_2\n$"}),"\n",(0,s.jsx)(e.p,{children:"以上是四元数的运算法则和运算性质，我们对它们进行基本封装。"}),"\n",(0,s.jsxs)(e.h3,{id:"如何用四元数表示旋转",children:["如何用四元数表示旋转？",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#如何用四元数表示旋转",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:["四元数的旋转原理如下：\n先将原向量表示为四元数$ q_0=(0,\\vec{v})$ ，将旋转角度和旋转轴的信息用",(0,s.jsx)(e.code,{children:"单位四元数 q"})," 表示，下面是一个代表旋转的四元数："]}),"\n",(0,s.jsx)(e.p,{children:"$\nq = cos\\theta + \\vec u sin\\theta\n$"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"其中旋转轴 $\\vec{u}$ 必须是单位向量。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"该四元数表示绕轴 $\\vec u$ 旋转 2 * θ 角度，注意是 θ 角的2倍哦。"}),"\n",(0,s.jsx)(e.p,{children:"旋转后得到的向量坐标利用公式 $r = q\\cdot p\\cdot q^*$ 或$ r = q \\cdot p\\cdot q^{-1}$ 计算得出。"}),"\n",(0,s.jsxs)(e.h3,{id:"多个四元数旋转",children:["多个四元数旋转",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#多个四元数旋转",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"一个四元数代表一个旋转过程，那么多个四元数代表多个旋转过程。"}),"\n",(0,s.jsx)(e.p,{children:"假设有一个旋转 M 用四元数表示为 Q1，另一个旋转 N 用四元数表示为 Q2。"}),"\n",(0,s.jsx)(e.p,{children:"那么如果我们按顺序实现这两个旋转，先进行 M 旋转，再执行 N 旋转，我们有两种方式："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["将 Q2 和 Q1 相乘，然后将乘积转化为旋转矩阵。","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"注意顺序：Q2 * Q1。"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["将 Q2 和 Q1 分别转换成旋转矩阵，再将旋转矩阵相乘。","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"注意顺序：N * M"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"注意：在计算四元数乘积或者旋转矩阵乘积时，一定要注意顺序，先进行的旋转矩阵或者旋转四元数要放在乘号右侧。"}),"\n",(0,s.jsx)(e.p,{children:"这两种方式所表达的旋转是一致的，但是显然，第一种方式计算量更小一些。"}),"\n",(0,s.jsxs)(e.h3,{id:"利用四元数实现旋转",children:["利用四元数实现旋转。",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#利用四元数实现旋转",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"我们至少需要以下三个方法才能对物体进行旋转："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["通过如下三种方式构造出四元数。","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"setFromEuler，将一组欧拉角转化成四元数。"}),"\n",(0,s.jsx)(e.li,{children:"setFromAxis，将轴角转化成四元数。"}),"\n",(0,s.jsx)(e.li,{children:"setFromRotationMatrix，将旋转矩阵转化成四元数。"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["已知初始状态四元数和结束状态四元数，构造某一阶段的四元数。","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"slerp"}),"。"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["根据四元数计算出该四元数所代表的旋转矩阵。","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"makeRotationFromQuaternion"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["公式的推导比较复杂，这里就不讲述推导过程了，感兴趣的同学可以点击",(0,s.jsx)(e.a,{href:"/",children:"这里"}),"，自己动动手试着推导一下。同时，",(0,s.jsx)(e.code,{children:"THREEJS"})," 已经为我们封装了关于四元数的函数，在这里我们掌握它提供的一些方法就能覆盖大部分应用场景。"]}),"\n",(0,s.jsx)(e.p,{children:"除了上面的一些方法，THREEJS 还做了一些转换方法："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"将四元数转换成对应欧拉角。"}),"\n",(0,s.jsx)(e.li,{children:"将四元数转换成对应轴向量。"}),"\n",(0,s.jsx)(e.li,{children:"将四元数转换成绕轴向量旋转的角度。"}),"\n",(0,s.jsx)(e.li,{children:"从当前四元数旋转到另一个四元数所经过的角度。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"利用这些方法，很容易地将易于理解的欧拉旋转或者轴角旋转，转换成易于线性插值的四元数。"}),"\n",(0,s.jsxs)(e.h3,{id:"四元数的用法",children:["四元数的用法",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#四元数的用法",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"看一下如何使用四元数进行插值，我们将物体从欧拉角（30，40，50）代表的方向旋转到（70，90，120）。"}),"\n",(0,s.jsx)(e.p,{children:"首先，我们将起始时刻和结束时刻的欧拉角转化为对应的四元数："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"var startQuaternion = matrix.setFromEuler({\n    _x: deg2radians(30),\n    _y: deg2radians(40),\n    _z: deg2radians(50)\n});\n\nvar endQuaternion = matrix.setFromEuler({\n    _x: deg2radians(70),\n    _y: deg2radians(90),\n    _z: deg2radians(120)\n});\n\n"})}),"\n",(0,s.jsxs)(e.p,{children:["有了起始四元数和结束四元数，我们就可以利用",(0,s.jsx)(e.code,{children:"球面插值算法slerp"}),"来求旋转矩阵了。假设我们本次旋转过程设置为 30 帧，那么由初始角度到当前帧所代表角度的旋转用四元数表示如下："]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"var currentQuaternion = matrix.slerp(startQuaternion, endQuaternion, progress / 30);\n"})}),"\n",(0,s.jsx)(e.p,{children:"那么当前方位的旋转矩阵通过以下方法求得："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"var currentMatrix = matrix.makeRotationFromQuaternion(unitQuaternion);\n"})}),"\n",(0,s.jsx)(e.p,{children:"有了初始角度到每一帧角度的旋转矩阵 U ，那么左乘该旋转矩阵 U 可以实现平滑均匀的旋转动画了，如下："}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,UklGRvgBAABXRUJQVlA4IOwBAACQOACdASqZAw0BPp1OpE4lpCOiIAgAsBOJaW7hd2EbQAeiAV3LxcnIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe9IAD++2UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=",alt:""})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"如果让欧拉角来做 30 次连续插值旋转，最终的动画路径和旋转方向可能会不准确。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"四元数在平滑插值上表现出了极大的优势，如果我们想做插值动画，那么四元数无疑是最佳选择。"}),"\n",(0,s.jsxs)(e.h3,{id:"总结",children:["总结",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"四元数相比欧拉角的优势还是很大的："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"计算量相对小一些。"}),"\n",(0,s.jsx)(e.li,{children:"能够更平滑地插值。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"但是四元数也有一定缺点："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"概念复杂，不易理解。"}),"\n"]}),"\n",(0,s.jsxs)(e.h2,{id:"回顾",children:["回顾",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#回顾",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"本节介绍了表示旋转的两种很重要的方法：欧拉角与四元数，并分析了它们的优缺点。在实际编程中，四元数的使用场景比较多，动画中的旋转往往需要平滑线性，这种情况我们采用四元数是最佳选择。"}),"\n",(0,s.jsx)(e.p,{children:"下一节，我们结合学过的算法，学习利用鼠标控制模型旋转的原理。"})]})}function j(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,d.ah)(),n.components);return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(t,{...n})}):t(n)}let g=j;j.__RSPRESS_PAGE_META={},j.__RSPRESS_PAGE_META["WebGL%20%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E8%B7%B5%2F22.%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6%20---%20%E6%9B%B4%E9%AB%98%E7%BA%A7%E7%9A%84%E6%97%8B%E8%BD%AC%EF%BC%9A%E6%AC%A7%E6%8B%89%E8%A7%92%E3%80%81%E5%9B%9B%E5%85%83%E6%95%B0%E3%80%82.md"]={toc:[{text:"欧拉角",id:"欧拉角",depth:2},{text:"欧拉角旋转顺序。",id:"欧拉角旋转顺序",depth:3},{text:"欧拉角",id:"欧拉角-1",depth:4},{text:"泰特布莱恩角。",id:"泰特布莱恩角",depth:4},{text:"欧拉角的矩阵表示",id:"欧拉角的矩阵表示",depth:3},{text:"XYZ 顺序",id:"xyz-顺序",depth:4},{text:"根据欧拉角推导旋转矩阵",id:"根据欧拉角推导旋转矩阵",depth:4},{text:"其它顺序推导",id:"其它顺序推导",depth:4},{text:"实战演练",id:"实战演练",depth:4},{text:"欧拉角的缺点",id:"欧拉角的缺点",depth:3},{text:"万向节死锁",id:"万向节死锁",depth:4},{text:"欧拉角缺陷演示",id:"欧拉角缺陷演示",depth:4},{text:"结论",id:"结论",depth:4},{text:"四元数",id:"四元数",depth:2},{text:"四元数基础",id:"四元数基础",depth:3},{text:"基本运算",id:"基本运算",depth:3},{text:"加法/减法运算",id:"加法减法运算",depth:4},{text:"乘法运算",id:"乘法运算",depth:4},{text:"四元数的模",id:"四元数的模",depth:4},{text:"四元数的共轭",id:"四元数的共轭",depth:4},{text:"四元数的倒数",id:"四元数的倒数",depth:4},{text:"四元数的性质",id:"四元数的性质",depth:4},{text:"如何用四元数表示旋转？",id:"如何用四元数表示旋转",depth:3},{text:"多个四元数旋转",id:"多个四元数旋转",depth:3},{text:"利用四元数实现旋转。",id:"利用四元数实现旋转",depth:3},{text:"四元数的用法",id:"四元数的用法",depth:3},{text:"总结",id:"总结",depth:3},{text:"回顾",id:"回顾",depth:2}],title:"22.深入研究 --- 更高级的旋转：欧拉角、四元数。",headingTitle:"22.深入研究 --- 更高级的旋转：欧拉角、四元数。",frontmatter:{}}}}]);