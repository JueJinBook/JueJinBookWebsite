"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["66132"],{68143:function(A,n,e){e.r(n),e.d(n,{default:()=>p});var i=e(552676),r=e(740453);let s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAD6CAYAAADX7v+sAAAACXBIWXMAAAPoAAAD6AG1e1JrAAADZUlEQVR42u3WMQ0AAAzDsPIn3dKYNBtCrqQAwDuRAAAMAABgAAAAAwAAGAAAwAAAAAYAADAAAIABAAAMAABgAAAAAwAAGAAAwAAAAAYAADAAAIABAAAMAAAYAADAAAAABgAAMAAAgAEAAAwAAGAAAAADAAAYAADAAAAABgAAMAAAgAEAAAwAAGAAAAADAAAYAAAwAACAAQAADAAAYAAAAAMAABgAAMAAAAAGAAAwAACAAQAADAAAYAAAAAMAABgAAMAAAAAGAAAwAABgAAAAAwAAGAAAwAAAAAYAADAAAIABAAAMAABgAAAAAwAAGAAAwAAAAAYAADAAAIABAAAMAABgAADAAAAABgAAMAAAgAEAAAwAAGAAAAADAAAYAADAAAAABgAAMAAAgAEAAAwAAGAAAAADAAAYAADAAACAAZAAAAwAAGAAAAADAAAYAADAAAAABgAAMAAAgAEAAAwAAGAAAAADAAAYAADAAAAABgAAMAAAgAEAAAwAABgAAMAAAAAGAAAwAACAAQAADAAAYAAAAAMAABgAAMAAAAAGAAAwAACAAQAADAAAYAAAAAMAABgAADAAAIABAAAMAABgAAAAAwAAGAAAwAAAAAYAADAAAIABAAAMAABgAAAAAwAAGAAAwAAAAAYAADAAAGAAAAADAAAYAADAAAAABgAAMAAAgAEAAAwAAGAAAAADAAAYAADAAAAABgAAMAAAgAEAAAwAAGAAAMAAAAAGAAAwAACAAQAADAAAYAAAAAMAABgAAMAAAAAGAAAwAACAAQAADAAAYAAAAAMAABgAAMAAAIABkAAADAAAYAAAAAMAABgAAMAAAAAGAAAwAACAAQAADAAAYAAAAAMAABgAAMAAAAAGAAAwAACAAQAADAAAGAAAwAAAAAYAADAAAIABAAAMAABgAAAAAwAAGAAAwAAAAAYAADAAAIABAAAMAABgAAAAAwAAGAAAMAAAgAEAAAwAAGAAAAADAAAYAADAAAAABgAAMAAAgAEAAAwAAGAAAAADAAAYAADAAAAABgAAMAAAYAAAAAMAABgAAMAAAAAGAAAwAACAAQAADAAAYAAAAAMAABgAAMAAAAAGAAAwAACAAQAADAAAYAAAwAAAAAYAADAAAIABAAAMAABgAAAAAwAAGAAA4IYBuaakuST/38IAAAAASUVORK5CYII=",a=e.p+"static/image/0459e7f1b587a3ad823039468fdf72b9.333ce6f7.png",t=e.p+"static/image/bd45288271419344a9c99c79e8cd93cf.8bd804b2.png",d=e.p+"static/image/a3e534b3037fa65f44721b2d1cba3145.2f69ac62.png",h=e.p+"static/image/61e4f664a0bb86ecda283f92146d0007.d90c426e.png";function l(A){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",img:"img",pre:"pre",code:"code",ul:"ul",li:"li"},(0,r.ah)(),A.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"9-animejs-svg-蒙版动画实战",children:["9 Anime.js SVG 蒙版动画实战",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#9-animejs-svg-蒙版动画实战",children:"#"})]}),"\n",(0,i.jsxs)(n.h2,{id:"animejs-蒙版动画",children:["Anime.js 蒙版动画",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#animejs-蒙版动画",children:"#"})]}),"\n",(0,i.jsxs)(n.h2,{id:"蒙版-morphing-动画实战",children:["蒙版 Morphing 动画实战",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#蒙版-morphing-动画实战",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"在前面 CSS 动画部分，我们学习了使用 CSS 来实现来 SVG 蒙版动画。这一章节我们来学习使用 Anime 来操作 SVG 中的蒙版，实现更强大的 SVG 蒙版动画。"}),"\n",(0,i.jsx)(n.p,{children:"通过前面章节的学习，我们知道蒙版是用来控制元素的可见范围的。利用蒙版这一特性，再结合前面章节学习到的关于 SVG Morphing 动画和描边动画的知识，我们可以使用 Anime 实现更加有趣的动画效果。"}),"\n",(0,i.jsx)(n.p,{children:"下面就用两个实际的例子来抛砖引玉下，看看使用 SVG 蒙版结合 Anime 的来开发 SVG 蒙版动画的方法。"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:a,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"从上面这个动画可以看出，我们的 SVG 蒙版是一个不规则的形状，并且这个蒙版在两个形状之间有一个 Morphing 动画。"}),"\n",(0,i.jsx)(n.p,{children:"所以在开始之前我们需要设计两个形状，并且导出为 SVG 代码，先来使用 AI  设计好两个形状："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:h,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"然后导出为 SVG 代码，使用导出的代码来定义一个蒙版，对图片进行遮罩，代码整理如下所示："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'<svg width="500" height="500" viewBox="0 0 600 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/">\n	<defs>\n		<clipPath id="Mask">\n			<path d="M64,168c0,0-30-123,80-108s91,54,182,64s137-83,163-57s119,203-37,214s-205,89-299,22\n	S64,168,64,168z"/>\n		</clipPath>\n	</defs>\n	<image width="900px" height="600px" xlink:href="https://ws1.sinaimg.cn/large/006tNbRwgy1fy5hoffs0kj30p00gon2m.jpg" clip-path="url(#Mask)"/>\n</svg>\n'})}),"\n",(0,i.jsx)(n.p,{children:"通过前面的学习，上面的代码很简单，这里就不再进行解释了，得到下面所示的效果："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:d,alt:"图片"})}),"\n",(0,i.jsx)(n.p,{children:"而要实现一个 Morphing 动画效果，我们还需要准备另外一个形状，这样才可以在两个形状之间实现 Morphing 动画。"}),"\n",(0,i.jsx)(n.p,{children:"这个也简单，我们只需要在第一个形状的基础上，使用路径选择工具，选中节点进行拖拽就可以得到我们想要的形状："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:t,alt:"图片"})}),"\n",(0,i.jsx)(n.p,{children:"得到我们想要的形状之后，直接把文件另存为 SVG 代码得到 path 的数据。"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"M64,168c0,0-30-123,80-108s91,54,182,64s95,10,121,36s161,110,5,121s-239,115.9-333,48.9S64,168,64,168z\n"})}),"\n",(0,i.jsx)(n.p,{children:"在前面的章节中，我们学习了如何使用 Anime 来实现动画效果，代码照搬就可以了："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var morph = anime({\n	targets: 'path',\n	d: []\n	easing: 'easeInOutQuad',\n\xa0 duration: 3000,\n\xa0 direction: 'alternate',\n\xa0 loop: true\n	\n});\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"使用 Anime 来编写动画效果，基本上都可以套用上面的代码，在这里需要操作 path 属性 d 的值，只需要把我们上面得到的 path 数据中 d 的值填进去就可以了："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var morph = anime({\n	targets: 'path',\n	d: [\n		{value: 'M64,168c0,0-30-123,80-108s91,54,182,64s95,10,121,36s161,110,5,121s-239,115.9-333,48.9S64,168,64,168z' }\n	],\n	easing: 'easeInOutQuad',\n\xa0 duration: 3000,\n\xa0 direction: 'alternate',\n\xa0 loop: true\n});\n\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://codepen.io/janily/pen/yGeYOX",target:"_blank",rel:"noopener noreferrer",children:"代码演示地址"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:a,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"就是这么简单，一个蒙版 Morphing 动画就完成了。"}),"\n",(0,i.jsxs)(n.h2,{id:"黑白蒙版动画实战",children:["黑白蒙版动画实战",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#黑白蒙版动画实战",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"下面我们再来看一个使用 Anime 和蒙版实现的动画效果，效果如下图所示："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:s,alt:"图片"})}),"\n",(0,i.jsx)(n.p,{children:"先来看下这个动画效果，主要是两部分组成："}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"第一部分是心从小到大的缩放动画，这里面还伴随着透明度的变化。"}),"\n",(0,i.jsx)(n.li,{children:"第二部分动画是心外面一个圆圈的缩放动画，这个缩放动画不是简简单单的缩放，而是还带有一个蒙版遮罩的动画，伴随着在圆圈放大的过程中也慢慢的消失的一个动画效果。"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"下面我们一步步来拆解实现这个动画，首先是中间的心从小到大的缩放动画："}),"\n",(0,i.jsx)(n.p,{children:"先准备 HTML 结构："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'<div class="wrap">\n  <div class="heart"></div>\n</div>\n'})}),"\n",(0,i.jsx)(n.p,{children:"CSS代码："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:".wrap {\n\xa0 position: relative;\n\xa0 width:200px;\n\xa0 height: 200px;\n\xa0 margin-left: auto;\n\xa0 margin-right: auto;\n\xa0 margin-top: 30px;\n}\n.heart {\n\xa0 \xa0position: absolute;\n\xa0 \xa0left:50%;\n\xa0 \xa0top:50%;\n\xa0 \xa0margin-top: -25px;\n\xa0 margin-left: -25px;\n\xa0 \xa0width:50px;\n\xa0 \xa0height:50px;\n\xa0 background-image: url(https://ws1.sinaimg.cn/large/006tNbRwgy1fy7habfwcmj303k03k0sj.jpg);\n\xa0 background-size: 100% 100%;\n\xa0 transform:scale(0);\n\xa0 opacity:0;\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"然后是使用 Anime 来实现这个缩放动画，也非常简单，就是改变它的 scale 和 opacity 的值就可以实现："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var timeline = anime.timeline({ autoplay: true, loop: true });\n\ntimeline\n.add({\xa0 targets: '.heart',\n\xa0 scale: {\n\xa0 \xa0 value: [0, 1],\n\xa0 \xa0 duration: 500,\n\xa0 \xa0 delay: 1500,\n\xa0 \xa0 easing: 'easeOutQuad'\n\xa0 },\n\xa0 opacity: {\n\xa0 \xa0 value: 1,\n\xa0 \xa0 duration: 600,\n\xa0 \xa0 delay: 1500\n\xa0 }\n })\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"因为动画由两部分动画组成，所以需要用到 Anime 的时间轴，先定义一个 timeline 的时间轴，然后定义动画自动循环播放。"}),"\n",(0,i.jsx)(n.p,{children:"其它的就简单了，通过前几章的学习，我们应该轻车熟路了，就是选择我们需要改变的属性就可以了，其它的就交给 Anime 来处理，这里就不再解释了。"}),"\n",(0,i.jsx)(n.p,{children:"第一个动画完成了，接下来来实现第二部分的动画。这里需要使用 SVG 来定义蒙版来实现，先来看下代码："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100">\n<defs>\n\xa0 <mask id="heart-mask">\n\xa0 \xa0 <rect width="100%" height="100%" fill="white"/>\n\xa0 \xa0 <circle class="heart-inner" cx="50" cy="50" r="0" fill="black"></circle>\n</mask>\n</defs>\n<circle class="heart-outer" cx="50" cy="50" r="50" fill="red" mask="url(#heart-mask)"></circle>\n</svg>\n'})}),"\n",(0,i.jsx)(n.p,{children:"在上面代码的蒙版中，定义了两个元素，一个白色填充的矩形和一个黑色填充的圆圈，在蒙版中，黑色蒙版是表现“隐藏”当前图层的内容，可以隐藏原先的图层，显示出修改过的图层。白色蒙版是表示“显示”当前图层的内容，即显示出原图层原本的样子。"}),"\n",(0,i.jsx)(n.p,{children:"具体到这个动画效果中，圆圈在放大的过程中，同时也慢慢的消失，这个动画效果就可以借助黑白蒙版这个特性来实现。"}),"\n",(0,i.jsx)(n.p,{children:"我们在蒙版中定义了一个黑色的圆圈，初始化的时候，它的半径为0，而矩形是白色的，这样整个圆圈即类名为 heart-outer 的圆圈在初始化的时候是可见的。"}),"\n",(0,i.jsx)(n.p,{children:"在样式中把两个圆圈的 scale 属性的值全部定义为0，同时使用 Anime 来把它们的 scale 的值改为1，这样当 heart-outer 这个圆圈在放大的时候，蒙版中的 heart-inner 的圆圈也在放大，因为 heart-inner 圆圈的填充颜色为黑色。所以，在它放大的时候，就会隐藏 heart-outer 的圆圈，从而实现圆圈在放大的过程中，同时也慢慢的消失的动画效果。"}),"\n",(0,i.jsx)(n.p,{children:"整体的代码如下："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var timeline = anime.timeline({ autoplay: true, loop: true });\n\ntimeline\n.add({\n\xa0 targets: '.heart-outer',\n\xa0 scale: {\n\xa0 \xa0 value: [0, 1],\n\xa0 \xa0 duration: 500,\n\xa0 \xa0 delay: 1300,\n\xa0 \xa0 easing: 'easeOutQuad'\n\xa0 },\n\xa0 offset: 0\n})\n.add({\n\xa0 targets: '.heart-inner',\n\xa0 r: {\n\xa0 \xa0 value: [0, 50],\n\xa0 \xa0 duration: 500,\n\xa0 \xa0 delay: 1300,\n\xa0 \xa0 easing: 'easeOutQuad'\n\xa0 },\n\xa0 offset: 0\n})\n.add({\n\xa0 targets: '.heart',\n\xa0 scale: {\n\xa0 \xa0 value: [0, 1],\n\xa0 \xa0 duration: 500,\n\xa0 \xa0 delay: 1500,\n\xa0 \xa0 easing: 'easeOutQuad'\n\xa0 },\n\xa0 opacity: {\n\xa0 \xa0 value: 1,\n\xa0 \xa0 duration: 600,\n\xa0 \xa0 delay: 1500\n\xa0 },\n\xa0 offset: 0\n})\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:s,alt:"图片"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://codepen.io/janily/pen/dwMzWo",target:"_blank",rel:"noopener noreferrer",children:"代码演示地址"})}),"\n",(0,i.jsx)(n.p,{children:"上面的代码中，用到了 offset 这个参数，这个参数是用来定义在时间轴中动画开始的时间的。默认情况下，在 Anime  中，时间轴的动画都是按次序来执行的，也就是上一个动画执行完后，再执行下一个动画效果。"}),"\n",(0,i.jsx)(n.p,{children:"具体到我们这个动画效果中，这两个动画效果是同时开始的，所以把 offset 的值设置为0，即表示这个动画在一开始的同时执行。如果把 offset 的值设置为 500，则表示在时间轴上动画开始500毫秒后就开始执行。"}),"\n",(0,i.jsx)(n.p,{children:"这个参数在开发动画的时候还是挺有用的，特别当我们不需要定义在时间轴上的动画全部一起执行的时候，非常的好用。"}),"\n",(0,i.jsx)(n.p,{children:"蒙版是一个非常强大的特性，使用它我们还可以实现更多的有趣的动画效果，这里只是抛砖引玉下，要开发更多有趣的动画，就要我们开开脑洞了。"}),"\n",(0,i.jsx)(n.p,{children:"下一章节我们来学习使用 Anime 来开发 SVG Morphing 动画效果，Morphing动画也是 SVG 动画中用的非常广泛的一个动画效果。"})]})}function c(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),A.components);return n?(0,i.jsx)(n,{...A,children:(0,i.jsx)(l,{...A})}):l(A)}let p=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["SVG%20%E5%8A%A8%E7%94%BB%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E6%89%8B%E5%86%8C%2F9%20Anime.js%20SVG%20%E8%92%99%E7%89%88%E5%8A%A8%E7%94%BB%E5%AE%9E%E6%88%98.md"]={toc:[{text:"Anime.js 蒙版动画",id:"animejs-蒙版动画",depth:2},{text:"蒙版 Morphing 动画实战",id:"蒙版-morphing-动画实战",depth:2},{text:"黑白蒙版动画实战",id:"黑白蒙版动画实战",depth:2}],title:"9 Anime.js SVG 蒙版动画实战",headingTitle:"9 Anime.js SVG 蒙版动画实战",frontmatter:{}}}}]);