"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["4716"],{852227:function(e,s,c){c.r(s),c.d(s,{default:()=>es});var n=c(552676),i=c(740453);let a=c.p+"static/image/a8b128a65ea7075d7265d6b5570ca7ae.c11b56ed.webp",r=c.p+"static/image/c6907890911cbc3533760e25263fa4e5.25407ee3.webp",d=c.p+"static/image/8f8daec52b740a38d6372b9b87f030cf.5150e593.webp",t=c.p+"static/image/ede96ee153c60e63eaeed84cc1bec3d7.6b7f1c70.webp",h=c.p+"static/image/c4d6b677bb53e549fd749f02cfddb0d8.fca4dd06.webp",l=c.p+"static/image/aa995369278fee6b93a65bcb3d98cdc3.fcbe1002.webp",p=c.p+"static/image/3f532c0aece43cba86da20ee17381543.13f94af9.webp",x=c.p+"static/image/9b53ed7bad87d004ace541486068e032.b23d4051.webp",j=c.p+"static/image/c4cd8592631120a6657fd9732ab16d38.0b2aabfa.webp",f=c.p+"static/image/b6bdfe842596f49d296005f196550c43.2bc79eff.webp",b=c.p+"static/image/7b669aaa2eee1342cfce3f8b484f395f.c8672583.webp",o=c.p+"static/image/d54d2acf65dafa0ee6413f7066768e96.16157663.webp",g=c.p+"static/image/fd2084b2d83193dc94f3bb44618a68ff.b63f937a.webp",m=c.p+"static/image/8aa51e91683357fbc8a82faf012a696c.b626179b.webp",u=c.p+"static/image/8983fd81513e3e2455d1d501582c8920.a42c5a83.webp",w=c.p+"static/image/554737e3cdae09d11888913291fa6525.548f398b.webp",A=c.p+"static/image/467f1d613f7f6db4e7a186da5200c80e.298f9fe1.webp",D=c.p+"static/image/e3cc06f68aa25fdb2dd98953eddbb039.20955bba.webp",P=c.p+"static/image/6f34c4ba9436be15c06f140a158e293b.19460a6b.webp",R=c.p+"static/image/71fe9347ebc97ea824b612136ebcc546.a941d093.webp",v=c.p+"static/image/a29bd3226ba0439f847474c94d3da916.8540dd4b.webp",k=c.p+"static/image/fb31128be9b94febc9ae6c3785c99710.98aed92b.webp",S=c.p+"static/image/7840023d06829c6f7c28b731c80f5d18.e5b2bddf.webp",N=c.p+"static/image/9d1402c39c38efb2a2c3c89e25b71157.88e514b5.webp",L=c.p+"static/image/61bd4bd0ccc5f9e3e5f5ce23c36093b6.64136b0b.webp",T=c.p+"static/image/edef495b9bf37268920f04da6f74f8cb.e8c3e7a7.webp",Z=c.p+"static/image/053bfc712c4b62d0e75b7f276587977f.8475197d.webp",y=c.p+"static/image/d53009bf7e825608419520a4ceaa8b13.e0bd35fc.webp",C=c.p+"static/image/295f01424cbafc2910ee9b8e8e761919.ca3b9406.webp",I=c.p+"static/image/b9e9983bae166643ec556213491856b3.180f00a9.webp",q=c.p+"static/image/3b520bef545a0df2831f5356581b8197.9d407ab6.webp",K=c.p+"static/image/d38b989cdfa9d5d0b8be7fd8134a9ca2.23d927b1.webp",E=c.p+"static/image/cab7ca9604ab8eaee44b054d9d3a0be0.8ce8848c.webp",B=c.p+"static/image/f9aa1860225ea535e4e172810ae5cb05.b7cf3987.webp",G=c.p+"static/image/b8f058f15e9c971c62b30d753313f1a4.2c53d133.webp",J=c.p+"static/image/c16ada834899a68a639c49fbc2f3a935.cb947d4e.webp",M=c.p+"static/image/d96e89afdc862e35f08002b398540071.91cb0118.webp",Y=c.p+"static/image/d08b1bfcbdad226fa7527820b26efcdd.2c11088e.webp",Q=c.p+"static/image/006e6a8a4563b6fcad719f4d1f52f97b.cdfc693e.webp",W=c.p+"static/image/c2e96c952a04d2ce7bcd3e025d9d4e58.fe051578.webp",X=c.p+"static/image/bb9cdb9d8b8d7e840fdee3695fc494ea.3118df4e.webp",U=c.p+"static/image/cf0e725ef71482915f5ea46ddf9f2cfa.08696607.webp",V=c.p+"static/image/4adce866073ec9da6873395a9d134d37.148f1481.webp",F=c.p+"static/image/e64767f6c468fc6f0a4bdf88039d0265.db2dbb0d.webp",z=c.p+"static/image/3bcc769808a7bf2f2d5dbbace6925a67.f9ceaa48.webp",O=c.p+"static/image/86e04e7220220d2958b41767dea9317b.5806489e.webp",H=c.p+"static/image/0604489822fabce2a736b2861f1ae163.fcdbccc9.webp",_=c.p+"static/image/03fa9c608ed2449f2254c869a4f9054a.9fd0314f.webp";function $(e){let s=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",img:"img",pre:"pre",code:"code",ul:"ul",li:"li"},(0,i.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"43charles-全功能速通下",children:["43.Charles 全功能速通（下）",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#43charles-全功能速通下",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"上节学了常用的代理功能，这节我们来学其他的 charles 功能："}),"\n",(0,n.jsxs)(s.h2,{id:"dns-spoofing",children:["DNS Spoofing",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#dns-spoofing",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"在本地准备一个 index.html，然后 npx http-server . 来跑一个静态服务器："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:_,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"浏览器访问下："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,n.jsxs)(s.p,{children:["执行 sudo vim /etc/hosts 修改 hosts 文件，添加一条 ",(0,n.jsx)(s.a,{href:"http://www.guangguangtest.com",target:"_blank",rel:"noopener noreferrer",children:"www.guangguangtest.com"})," 到 127.0.0.1 的映射："]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:H,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"之后就可以用这个域名来访问了："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:O,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"（如果你把科学上网的工具设置为系统代理，hosts 可能就不生效了，关掉即可）"}),"\n",(0,n.jsx)(s.p,{children:"除了浏览器，在 Terminal 也是可以通过 curl 访问的："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:z,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"ping 也能 ping 通："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:F,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"charles 也有这个功能，叫做 DNS Spoofing（DNS 欺骗），在 Tools > DNS Spoofing 开启："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:V,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"它的功能和 hosts 类似："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:U,alt:""})}),"\n",(0,n.jsxs)(s.p,{children:["比如我配置了 ",(0,n.jsx)(s.a,{href:"http://www.guangguangtest2.com",target:"_blank",rel:"noopener noreferrer",children:"www.guangguangtest2.com"})," 的域名到 127.0.0.1 的映射，之后就可以浏览器访问这个域名了："]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:X,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"但在 Terminal 还不行："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:W,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"为什么呢？"}),"\n",(0,n.jsx)(s.p,{children:"因为 DNS Spoofing 生效的前提是走了 charles 代理呀！"}),"\n",(0,n.jsx)(s.p,{children:"在浏览器里可以通过 SwitchyOmega 的插件切换代理，那命令行里怎么切换呢？"}),"\n",(0,n.jsx)(s.p,{children:"可以通过设置这个环境变量："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"export https_proxy=http://127.0.0.1:8888 http_proxy=http://127.0.0.1:8888\n"})}),"\n",(0,n.jsx)(s.p,{children:"设置之后执行 echo $https_proxy 就可以看到它的值："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这个端口就是 charles 代理服务的端口，可以在 Proxy > Proxy Settings 里设置："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:Q,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"之后在命令行里的 http、https 请求，也会走 charles 代理："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:Y,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"curl 可以走代理，但是 ping 不会："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:M,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"因为 charles 只有 http、https 请求会走 charles 代理，这是和配置 hosts 的区别。"}),"\n",(0,n.jsx)(s.p,{children:"那如果不想用代理了，怎么取消呢？"}),"\n",(0,n.jsx)(s.p,{children:"通过 unset 去掉这个环境变量即可："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:J,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这就是 DNS Spoofing 功能，相比改 hosts 更便捷一些。"}),"\n",(0,n.jsxs)(s.h2,{id:"client-process",children:["Client Process",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#client-process",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"charles 可以展示发送 http 请求的 url。"}),"\n",(0,n.jsx)(s.p,{children:"在 Tools > Client Process Settings 开启："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:G,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"开启之后可以在 notes 看到发送请求的客户端进程："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:B,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这个 google chrome helper 就是网页的一个渲染进程："}),"\n",(0,n.jsx)(s.p,{children:"在进程管理器里也可以看到："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:E,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"在终端设置为 charles 代理之后，之后的 http 请求也会被 charles 捕获到："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:K,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这时候也可以看到对应的客户端进程："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:q,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"我们主要是调试网页用，所以这个功能倒是用的不多。"}),"\n",(0,n.jsxs)(s.h2,{id:"compose",children:["Compose",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#compose",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"能不能用 charles 手动发送请求呢？就像 postman 那样。"}),"\n",(0,n.jsx)(s.p,{children:"可以的，这就是 compose 功能。"}),"\n",(0,n.jsxs)(s.p,{children:["点击 Tools > Compose New，创建一个 ",(0,n.jsx)(s.a,{href:"http://www.guangguangtest.com:8081",target:"_blank",rel:"noopener noreferrer",children:"www.guangguangtest.com:8081"})," 的请求："]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:I,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"然后编辑请求的内容，可以修改 header、body 等："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:C,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"点击 execute 来发送请求，就可以看到刚才这个请求的响应了："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:y,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"我们再来构造个 post 请求，修改 header、query、body 等："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:Z,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"点击 execute 就可以看到这个 post 请求了："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:T,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"除了创建新的请求外，也可以直接修改已有的请求，也就是 compose："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:L,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这里变成钢笔就代表在 compose 中："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:N,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"修改完点击 execute 就可以发送请求，也可以点击 cancle 来取消 compose。"}),"\n",(0,n.jsxs)(s.h2,{id:"repeat",children:["Repeat",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#repeat",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"可以 Tools > Repeat 或者右键请求然后点 Repeat 来重发请求："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:S,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"如果想重发 n 次呢？这可以用高级 repeat 功能。"}),"\n",(0,n.jsx)(s.p,{children:"在 Tools > Advanced Repeat 里开启："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:k,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"比如重复 10 次、两个并发，重复间隔为 1000ms，在新的 session 里展示结果。"}),"\n",(0,n.jsx)(s.p,{children:"效果是这样的："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:v,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"可以用来测试接口。"}),"\n",(0,n.jsxs)(s.h2,{id:"throttle",children:["Throttle",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#throttle",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"这个是模拟慢速的请求用的，点击这个乌龟的图标开启："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:R,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"或者在 Proxy > Start Throttling 开启。"}),"\n",(0,n.jsx)(s.p,{children:"当然，一般我们只需要对某些域名开启 throttle，可以在 Proxy > Throttle Settings 里设置："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:P,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"下面可以做更详细的速率设置。"}),"\n",(0,n.jsxs)(s.h2,{id:"web-interface",children:["Web Interface",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#web-interface",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"charles 也支持通过 web 网页来控制，在 Proxy > Web Interface Settings 里开启："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:D,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"可以支持匿名访问，也可以设置用户名和密码访问。"}),"\n",(0,n.jsx)(s.p,{children:"这这里可以做一些功能的开启和关闭："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:A,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:w,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"有同学说，不是已经有客户端了么？"}),"\n",(0,n.jsx)(s.p,{children:"本地确实没啥必要用这个，但是远程控制的时候，就可以通过 web interface 了。"}),"\n",(0,n.jsxs)(s.h2,{id:"focused-hosts",children:["Focused Hosts",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#focused-hosts",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"charles 默认展示全部的 url："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:u,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"我们想找 juejin.cn 的请求的话可以过滤："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:m,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"也可以通过 View > Focused Hosts 来设置关注的域名："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:g,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这样  charles 就会把其他的域名的请求折叠起来："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:o,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"也可以在请求上右键开启："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:b,alt:""})}),"\n",(0,n.jsxs)(s.h2,{id:"highlight-rules",children:["Highlight Rules",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#highlight-rules",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"还可以给不同的 url 指定不同的颜色。"}),"\n",(0,n.jsx)(s.p,{children:"在 View > Highlight Rules 开启："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:f,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"效果如下："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:j,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"更有用的是可以根据条件来高亮，比如我设置所有 Set-Cookie 的 header 不为空的响应都设置黄色。"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:x,alt:""})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:p,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"这样所有响应有 Set-Cookie 的 header 的请求都高亮了："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:l,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"和 Chrome DevTools 里的 has-response-header 过滤器类似："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:h,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"但是这个可以过滤的更多。"}),"\n",(0,n.jsxs)(s.h2,{id:"find",children:["find",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#find",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"find 是搜索功能，可以在 session、选择的 url 或者某个 url 的请求里搜索。"}),"\n",(0,n.jsx)(s.p,{children:"在 Edit > Find 里开启："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:t,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"比如我选中 juejin.cn，然后在里面搜索 guang："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:d,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"右键有个 find in 功能，这个就是在某个 path 内搜索："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:r,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"还可以指定搜索 url/header/body。"}),"\n",(0,n.jsxs)(s.h2,{id:"external-proxy",children:["External Proxy",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#external-proxy",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"访问国外的网站需要科学上网，会起一个代理服务器，charles 抓包也要跑一个代理服务器。"}),"\n",(0,n.jsx)(s.p,{children:"但是我们网页只能指定代理服务器，那如何同时又能科学上网，又能 charles 抓包呢？"}),"\n",(0,n.jsx)(s.p,{children:"这就是 External Proxy 的功能了："}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)("img",{src:a,alt:""})}),"\n",(0,n.jsx)(s.p,{children:"可以在 Proxy > External Proxy Settings 设置转发的代理服务器，这样 charles 抓包之后会再转发给别的代理服务器。"}),"\n",(0,n.jsx)(s.p,{children:"还可以在 bypass 里设置白名单，这些 url 不走别的代理服务器。"}),"\n",(0,n.jsxs)(s.h2,{id:"总结",children:["总结",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"这节我们过了一遍 charles 的其他的功能："}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"DNS Spoofing：DNS 欺骗，类似 hosts，但是只影响 http 和 https"}),"\n",(0,n.jsx)(s.li,{children:"Client Process：展示发请求的进程名"}),"\n",(0,n.jsx)(s.li,{children:"Compose：compose new 创建一个新的请求，compose 修改已有的请求"}),"\n",(0,n.jsx)(s.li,{children:"Repeat：重发请求，可以设置重发次数、并发数、重发间隔"}),"\n",(0,n.jsx)(s.li,{children:"Throttle：模拟慢速请求，可以做具体的速率设置"}),"\n",(0,n.jsx)(s.li,{children:"Focus：只展示关注的 hosts 的请求，其余的折叠"}),"\n",(0,n.jsx)(s.li,{children:"Highlight Rules：根据规则来高亮请求，使用不同的颜色"}),"\n",(0,n.jsx)(s.li,{children:"Web Interface：通过 web 界面来控制一些功能的开启关闭，这适用于远程控制"}),"\n",(0,n.jsx)(s.li,{children:"Find：在 session、path 等范围内根据关键词搜索"}),"\n",(0,n.jsx)(s.li,{children:"External Proxy：charles 可以把请求转发给别的代理服务器，比如科学上网的"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"在调试网络请求的时候，这些都是挺有用的功能。"})]})}function ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.ah)(),e.components);return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)($,{...e})}):$(e)}let es=ee;ee.__RSPRESS_PAGE_META={},ee.__RSPRESS_PAGE_META["%E5%89%8D%E7%AB%AF%E8%B0%83%E8%AF%95%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%2F43.Charles%20%E5%85%A8%E5%8A%9F%E8%83%BD%E9%80%9F%E9%80%9A%EF%BC%88%E4%B8%8B%EF%BC%89.md"]={toc:[{text:"DNS Spoofing",id:"dns-spoofing",depth:2},{text:"Client Process",id:"client-process",depth:2},{text:"Compose",id:"compose",depth:2},{text:"Repeat",id:"repeat",depth:2},{text:"Throttle",id:"throttle",depth:2},{text:"Web Interface",id:"web-interface",depth:2},{text:"Focused Hosts",id:"focused-hosts",depth:2},{text:"Highlight Rules",id:"highlight-rules",depth:2},{text:"find",id:"find",depth:2},{text:"External Proxy",id:"external-proxy",depth:2},{text:"总结",id:"总结",depth:2}],title:"43.Charles 全功能速通（下）",headingTitle:"43.Charles 全功能速通（下）",frontmatter:{}}}}]);