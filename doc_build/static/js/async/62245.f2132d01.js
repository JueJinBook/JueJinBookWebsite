"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["62245"],{607460:function(n,e,s){n.exports=s.p+"static/image/04d5d837375548045e24dc0e4c728c5d.8b56b755.webp"},205925:function(n,e,s){n.exports=s.p+"static/image/1c0f0a22ca4116981b044b5fde2fccce.b10c6240.webp"},310049:function(n,e,s){n.exports=s.p+"static/image/337cdf300930740aa2edc476c447f068.1110650a.webp"},642029:function(n,e,s){n.exports=s.p+"static/image/439bcfef75d79bbccc88d12df36853f3.a9631bf2.webp"},685304:function(n,e,s){n.exports=s.p+"static/image/86c050c2c4c190f647ba05a80f065c46.c14f26ff.gif"},9115:function(n,e,s){n.exports=s.p+"static/image/8e45e8a333164a30bbe52e6abe9ac4ca.e2fa88c9.webp"},729680:function(n,e,s){n.exports=s.p+"static/image/a0a77072f30e1be07f894ed9e9e2229b.9173293d.webp"},32526:function(n,e,s){n.exports=s.p+"static/image/ab2a98ed778664eebacf9cf83d5d07a6.f4a8d74e.webp"},43174:function(n,e,s){n.exports=s.p+"static/image/b0d09aaf17894c517fe81e2a28e09ef5.1415a929.webp"},712154:function(n,e,s){n.exports=s.p+"static/image/ecef596a735554315310a07cb95e4b6e.d71a06ca.webp"},71551:function(n,e,s){n.exports=s.p+"static/image/f50e7b8202d024b7c947a50879c40ed4.1316b5de.webp"},315892:function(n,e,s){s.r(e),s.d(e,{default:()=>A});var r=s(552676),a=s(740453),t=s(205925);let i=s.p+"static/image/a2391e6795d24744830828b129808729.c4f56444.gif",c=s.p+"static/image/58fe20bde201912f8367df8d46cba8be.b16ebe78.webp",o=s.p+"static/image/33f4bff0a828fe205cf2c5b69ac59688.b846eb01.webp",l=s.p+"static/image/a29c31138653d8cf44892f38c824d7c1.d91913d8.gif",d=s.p+"static/image/9b2013da11c5d973a250f6fc495b3695.f4c8dd47.webp",p=s.p+"static/image/bd1a7f429b97cee3b28104be33f4724a.7d9ea895.gif",m=s.p+"static/image/3755047db336f99ca5a2e7a22be5c40b.39ec9b65.webp",g=s.p+"static/image/238c3401e54db9eac613d6e260d97133.80c5688a.gif",x=s.p+"static/image/3ac484ffa4faf1ae41371415a2f5a514.626a270f.webp";var h=s(43174);let u=s.p+"static/image/b22d4a5d5c18c475e24150349b118cc8.178e8a28.webp";var j=s(9115);let f=s.p+"static/image/756508831a5d36dc9fd096aefdef9142.eb78f17a.gif",b=s.p+"static/image/f4899dbc81e6e5a33721f8b1b8cff824.84187de5.gif",v=s.p+"static/image/ee7830ef4b1aea31c0a7923ba72be97c.9a77a5ec.webp",w=s.p+"static/image/b0f207aa72834a6347d0d1d771f36500.767be1ee.webp",y=s.p+"static/image/e458bfd7a092aa207236a5c237f1370b.0fdd6721.webp",F=s.p+"static/image/d5de437997f3eea98b4ddab229d17d39.7f416f9b.webp";var I=s(607460),R=s(310049),B=s(642029),E=s(729680),P=s(71551),k=s(685304),L=s(712154),N=s(32526);let C=s.p+"static/image/a2a8a7a5c56063bb22e49b29b5c02801.d0db6214.webp";function U(n){let e=Object.assign({h1:"h1",a:"a",p:"p",pre:"pre",code:"code",img:"img",h2:"h2"},(0,a.ah)(),n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.h1,{id:"161-考试系统登录注册页面",children:["161. 考试系统：登录、注册页面",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#161-考试系统登录注册页面",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"先不着急写其他两个微服务，我们先来写一下前端页面。"}),"\n",(0,r.jsx)(e.p,{children:"先来写下用户注册、登录页面。"}),"\n",(0,r.jsx)(e.p,{children:"新建个 react 项目："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"npx create-vite exam-system-frontend\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)("img",{src:C,alt:""}),"\n进入项目目录，把开发服务跑起来："]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"npm install\nnpm run dev\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:N,alt:""})}),"\n",(0,r.jsxs)(e.p,{children:["浏览器访问 ",(0,r.jsx)(e.a,{href:"http://localhost:5173",target:"_blank",rel:"noopener noreferrer",children:"http://localhost:5173"})," 可以看到这个界面："]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:L,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"就说明 react 项目成功跑起来了。"}),"\n",(0,r.jsx)(e.p,{children:"然后我们添加 router："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"npm install --save react-router-dom\n"})}),"\n",(0,r.jsx)(e.p,{children:"在 main.tsx 加上路由的配置："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'import ReactDOM from \'react-dom/client\';\nimport { RouterProvider, createBrowserRouter, Link, Outlet } from \'react-router-dom\';\n\nfunction Aaa() {\n  return <div>aaa</div>;\n}\n\nfunction Bbb(){\n  return <div>bbb</div>;\n}\n\nfunction Layout() {\n  return <div>\n    <div><Link to="/aaa">to aaa</Link></div>\n    <div><Link to="/bbb">to bbb</Link></div>\n    <div>\n      <Outlet/>\n    </div>\n  </div>\n}\n\nconst routes = [\n  {\n    path: "/",\n    element: <Layout/>,\n    children: [\n      {\n        path: "aaa",\n        element: <Aaa />,\n      },\n      {\n        path: "bbb",\n        element: <Bbb />,\n      }    \n    ],\n  }\n];\nconst router = createBrowserRouter(routes);\n\nconst root = ReactDOM.createRoot(\n  document.getElementById(\'root\') as HTMLElement\n);\n\nroot.render(<RouterProvider router={router}/>);\n'})}),"\n",(0,r.jsx)(e.p,{children:"配置了 3 个路由："}),"\n",(0,r.jsx)(e.p,{children:"访问 / 的时候，渲染 Layout 组件。"}),"\n",(0,r.jsx)(e.p,{children:"访问 /aaa 的时候，渲染 Aaa 组件。"}),"\n",(0,r.jsx)(e.p,{children:"访问 /bbb 的时候，渲染 Bbb 组件。"}),"\n",(0,r.jsx)(e.p,{children:"以及出错的时候，渲染 ErrorPage 组件。"}),"\n",(0,r.jsx)(e.p,{children:"其中，aaa 和 bbb 是 / 的子路由，渲染在 Layout 组件的 Outlet 的地方。"}),"\n",(0,r.jsx)(e.p,{children:"这就是 React Router 的基本用法。"}),"\n",(0,r.jsx)(e.p,{children:"测试下："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:k,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"都没问题。"}),"\n",(0,r.jsx)(e.p,{children:"然后创建 3 个组件：Login、Register、UpdatePassword"}),"\n",(0,r.jsx)(e.p,{children:"pages/Login/index.tsx"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"export function Login() {\n    return <div>login</div>   \n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"pages/Register/index.tsx"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"export function Register() {\n    return <div>register</div>\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"pages/UpdatePassword/index.tsx"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"export function UpdatePassword() {\n    return <div>UpdatePassword</div>\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"改下 index.tsx 配置对应的路由："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"import ReactDOM from 'react-dom/client';\nimport { RouterProvider, createBrowserRouter } from 'react-router-dom';\nimport { Register } from './pages/Register';\nimport { Login } from './pages/Login';\nimport { UpdatePassword } from './pages/UpdatePassword';\n\nconst routes = [\n  {\n    path: \"/\",\n    element: <div>index</div>,\n  },\n  {\n    path: \"login\",\n    element: <Login />,\n  },\n  {\n    path: \"register\",\n    element: <Register />,\n  },\n  {\n    path: \"update_password\",\n    element: <UpdatePassword />,\n  }\n];\nconst router = createBrowserRouter(routes);\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\n\nroot.render(<RouterProvider router={router}/>);\n"})}),"\n",(0,r.jsx)(e.p,{children:"测试下："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:P,alt:""})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:E,alt:""})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:B,alt:""})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:R,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"都没啥问题。"}),"\n",(0,r.jsx)(e.p,{children:"然后来写 Login 页面："}),"\n",(0,r.jsx)(e.p,{children:"引入 Ant Design 组件库："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"npm install antd --save\n"})}),"\n",(0,r.jsx)(e.p,{children:"在 Login 组件引入 DatePicker 组件："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'import { DatePicker } from "antd";\n\nexport function Login() {\n    return <div><DatePicker/></div>   \n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:I,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"没啥问题，说明 antd 引入成功了。"}),"\n",(0,r.jsx)(e.p,{children:"然后我们把登录页面写一下："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"import { Button, Checkbox, Form, Input } from 'antd';\nimport './index.css';\n\ninterface LoginUser {\n    username: string;\n    password: string;\n}\n\nconst onFinish = (values: LoginUser) => {\n    console.log(values);\n};\n\n\nconst layout1 = {\n    labelCol: { span: 4 },\n    wrapperCol: { span: 20 }\n}\n\nconst layout2 = {\n    labelCol: { span: 0 },\n    wrapperCol: { span: 24 }\n}\n\nexport function Login() {\n    return <div id=\"login-container\">\n        <h1>考试系统</h1>\n        <Form\n            {...layout1}\n            onFinish={onFinish}\n            colon={false}\n            autoComplete=\"off\"\n        >\n            <Form.Item\n                label=\"用户名\"\n                name=\"username\"\n                rules={[{ required: true, message: '请输入用户名!' }]}\n            >\n                <Input />\n            </Form.Item>\n\n            <Form.Item\n                label=\"密码\"\n                name=\"password\"\n                rules={[{ required: true, message: '请输入密码!' }]}\n            >\n                <Input.Password />\n            </Form.Item>\n\n            <Form.Item\n                {...layout2}\n            >\n                <div className='links'>\n                    <a href='/register'>创建账号</a>\n                    <a href='/update_password'>忘记密码</a>\n                </div>\n            </Form.Item>\n\n            <Form.Item\n                {...layout2}\n            >\n                <Button className='btn' type=\"primary\" htmlType=\"submit\">\n                    登录\n                </Button>\n            </Form.Item>\n        </Form>\n    </div>   \n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"其中，layout 是 label 和 wrapper 的比例分配，antd 的栅格系统一共分了 24 份。"}),"\n",(0,r.jsx)(e.p,{children:"上面两个 Form.Item 是 label 4 份，wrapper 20 份。"}),"\n",(0,r.jsx)(e.p,{children:"下面两个 Form.Item 是 label 0 份，wrapper 24 份。"}),"\n",(0,r.jsx)(e.p,{children:"colon 为 false 是去掉 label 后的冒号"}),"\n",(0,r.jsx)(e.p,{children:"然后 css 部分如下："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-css",children:"#login-container {\n    width: 400px;\n    margin: 100px auto 0 auto;\n    text-align: center;\n}\n#login-container .links {\n    display: flex;\n    justify-content: space-between;\n}\n#login-container .btn {\n    width: 100%;\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"访问 /login，可以看到现在的登录页面："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:F,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"输入用户名、密码，点击登录："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:y,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"控制台打印了拿到的表单值。"}),"\n",(0,r.jsx)(e.p,{children:"我们安装下 axios："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"npm install --save axios\n"})}),"\n",(0,r.jsx)(e.p,{children:"我们把后端用户微服务跑起来："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"npm run start:dev user\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:w,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"在前端项目创建个 interfaces/index.ts"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"import axios from \"axios\";\n\nconst userServiceInstance = axios.create({\n    baseURL: 'http://localhost:3001\n    /',\n    timeout: 3000\n});\n\nexport async function login(username: string, password: string) {\n    return await userServiceInstance.post('/user/login', {\n        username, password\n    });\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"在这里集中管理接口。"}),"\n",(0,r.jsx)(e.p,{children:"然后在 Login 组件 onFinish 里调用："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const onFinish = async (values: LoginUser) => {\n    try {\n        const res = await login(values.username, values.password);\n        if(res.status === 201 || res.status === 200) {\n            message.success('登录成功');\n\n            console.log(res.data);\n        } \n    } catch(e: any){\n        message.error(e.response?.data?.message || '系统繁忙，请稍后再试');\n    }\n};\n"})}),"\n",(0,r.jsx)(e.p,{children:"在 user 微服务开启跨域："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:v,alt:"image.png"})}),"\n",(0,r.jsx)(e.p,{children:"登录下："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:b,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"然后完善下 onFinish 方法："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const onFinish = async (values: LoginUser) => {\n    try {\n        const res = await login(values.username, values.password);\n        if(res.status === 201 || res.status === 200) {\n            message.success('登录成功');\n\n            localStorage.setItem('token', res.data.token);\n            localStorage.setItem('userInfo', JSON.stringify(res.data.user));\n        } \n    } catch(e: any){\n        message.error(e.response?.data?.message || '系统繁忙，请稍后再试');\n    }\n};\n"})}),"\n",(0,r.jsx)(e.p,{children:"返回 success 的时候，把 token 和 userInfo 存入 localStorage"}),"\n",(0,r.jsx)(e.p,{children:"测试下："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:f,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"这样，登录的前后端功能就都完成了。"}),"\n",(0,r.jsx)(e.p,{children:"然后来写下注册页面："}),"\n",(0,r.jsx)(e.p,{children:"实现下 Register 页面组件："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'import { Button, Form, Input, message } from \'antd\';\nimport \'./index.css\';\nimport { useForm } from \'antd/es/form/Form\';\n\nexport interface RegisterUser {\n    username: string;\n    password: string;\n    confirmPassword: string;\n    email: string;\n    captcha: string;\n}\n\nconst onFinish = async (values: RegisterUser) => {\n    console.log(values);\n};\n\n\nconst layout1 = {\n    labelCol: { span: 6 },\n    wrapperCol: { span: 18 }\n}\n\nconst layout2 = {\n    labelCol: { span: 0 },\n    wrapperCol: { span: 24 }\n}\n\nexport function Register() {\n    const [form] = useForm();\n\n    return <div id="register-container">\n        <h1>考试系统</h1>\n        <Form\n            form={form}\n            {...layout1}\n            onFinish={onFinish}\n            colon={false}\n            autoComplete="off"\n        >\n            <Form.Item\n                label="用户名"\n                name="username"\n                rules={[{ required: true, message: \'请输入用户名!\' }]}\n            >\n                <Input />\n            </Form.Item>\n\n            <Form.Item\n                label="密码"\n                name="password"\n                rules={[{ required: true, message: \'请输入密码!\' }]}\n            >\n                <Input.Password />\n            </Form.Item>\n\n            <Form.Item\n                label="确认密码"\n                name="confirmPassword"\n                rules={[{ required: true, message: \'请输入确认密码!\' }]}\n            >\n                <Input.Password />\n            </Form.Item>\n\n            <Form.Item\n                label="邮箱"\n                name="email"\n                rules={[\n                    { required: true, message: \'请输入邮箱!\' },\n                    { type: "email", message: \'请输入合法邮箱地址!\'}\n                ]}\n            >\n                <Input />\n            </Form.Item>\n\n            <div className=\'captcha-wrapper\'>\n                <Form.Item\n                    label="验证码"\n                    name="captcha"\n                    rules={[{ required: true, message: \'请输入验证码!\' }]}\n                >\n                    <Input />\n                </Form.Item>\n                <Button type="primary">发送验证码</Button>\n            </div>\n\n            <Form.Item\n                {...layout2}\n            >\n                <div className=\'links\'>\n                    已有账号？去<a href=\'/login\'>登录</a>\n                </div>\n            </Form.Item>\n\n            <Form.Item\n                {...layout1}\n                label=" "\n            >\n                <Button className=\'btn\' type="primary" htmlType="submit">\n                    注册\n                </Button>\n            </Form.Item>\n        </Form>\n    </div>   \n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"和登录页面差不多，只不过多了一个验证码。"}),"\n",(0,r.jsx)(e.p,{children:"对应的 register.css 如下："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-css",children:"#register-container {\n    width: 400px;\n    margin: 100px auto 0 auto;\n    text-align: center;\n}\n#register-container .links {\n    display: flex;\n    justify-content: flex-end;\n}\n#register-container .btn {\n    width: 100%;\n}\n#register-container .captcha-wrapper {\n    display: flex;\n    justify-content: flex-end;\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"浏览器访问下"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:j,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"填入信息，点击注册，控制台会打印表单值："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:u,alt:"image.png"})}),"\n",(0,r.jsx)(e.p,{children:"然后来调用下注册接口和发送验证码的接口。"}),"\n",(0,r.jsx)(e.p,{children:"在 interfaces 里添加这两个接口："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"export async function registerCaptcha(email: string) {\n    return await userServiceInstance.get('/user/register-captcha', {\n        params: {\n            address: email\n        }\n    });\n}\n\nexport async function register(registerUser: RegisterUser) {\n    return await userServiceInstance.post('/user/register', registerUser);\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"先调用发送验证码接口："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:h,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"绑定点击事件。"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:x,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"使用 useForm 来拿到 form 的 api"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"async function sendCaptcha() {\n    const address = form.getFieldValue('email');\n    if(!address) {\n        return message.error('请输入邮箱地址');\n    }\n\n    try {\n        const res = await registerCaptcha(address);\n        if(res.status === 201 || res.status === 200) {\n            message.success('发送成功');\n        }\n    } catch(e: any) {\n        message.error(e.response?.data?.message || '系统繁忙，请稍后再试');\n    }\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"在 sendCaptcha 里调用接口发送验证码。"}),"\n",(0,r.jsx)(e.p,{children:"测试下："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:g,alt:""})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:m,alt:"image.png"})}),"\n",(0,r.jsx)(e.p,{children:"没啥问题。"}),"\n",(0,r.jsx)(e.p,{children:"然后再来调用注册接口："}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const onFinish = async (values: RegisterUser) => {\n    if(values.password !== values.confirmPassword) {\n        return message.error('两次密码不一致');\n    }\n    const res = await register(values);\n\n    if(res.status === 201 || res.status === 200) {\n        message.success('注册成功');\n\n    } else {\n        message.error(res.data.data || '系统繁忙，请稍后再试');\n    }\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"测试下："}),"\n",(0,r.jsx)(e.p,{children:"填入信息，点击发送验证码："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:p,alt:"2024-08-26 10.22.17.gif"})}),"\n",(0,r.jsx)(e.p,{children:"去邮箱里看一下验证码："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:d,alt:"image.png"})}),"\n",(0,r.jsx)(e.p,{children:"填入验证码，点击注册："}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)("img",{src:l,alt:"2024-08-26 10.23.14.gif"}),"\n注册成功，数据库里也看到了这条记录："]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:o,alt:"image.png"})}),"\n",(0,r.jsx)(e.p,{children:"这样，注册的前后端流程就走完了。"}),"\n",(0,r.jsx)(e.p,{children:"然后调用 useNavigate 的 navigate 方法，注册成功后导航到登录页："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:c,alt:"image.png"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const onFinish = async (values: RegisterUser) => {\n    if(values.password !== values.confirmPassword) {\n        return message.error('两次密码不一致');\n    }\n    try {\n    const res = await register(values);\n\n    if(res.status === 201 || res.status === 200) {\n        message.success('注册成功');\n        setTimeout(() => {\n            navigate('/login');\n        }, 1000);\n    } \n    } catch(e: any) {\n        message.error(e.response?.data?.message || '系统繁忙，请稍后再试');\n    }\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:i,alt:"2024-08-26 10.23.14.gif"})}),"\n",(0,r.jsx)(e.p,{children:"同理，login 成功也要加上跳转逻辑："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:t,alt:""})}),"\n",(0,r.jsx)(e.p,{children:"这样，登录和注册的前后端功能就都完成了。"}),"\n",(0,r.jsx)(e.p,{children:"案例代码在小册仓库："}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/exam-system-frontend",target:"_blank",rel:"noopener noreferrer",children:"前端代码"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/exam-system",target:"_blank",rel:"noopener noreferrer",children:"后端代码"})}),"\n",(0,r.jsxs)(e.h2,{id:"总结",children:["总结",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"这节我们打通了前后端，加上了登录、注册、首页等页面。"}),"\n",(0,r.jsx)(e.p,{children:"首先，引入了 React Router 来做路由，引入了 antd 来做 UI 组件库。"}),"\n",(0,r.jsx)(e.p,{children:"然后，引入了 axios 来发请求。"}),"\n",(0,r.jsx)(e.p,{children:"发送邮件验证码正常，注册之后数据库也多了记录，登录成功之后 localStorage 也有了用户信息。"}),"\n",(0,r.jsx)(e.p,{children:"这样，注册登录就实现了完整的前后端功能。"})]})}function _(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,a.ah)(),n.components);return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(U,{...n})}):U(n)}let A=_;_.__RSPRESS_PAGE_META={},_.__RSPRESS_PAGE_META["Nest%20%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%20%20%E6%9C%80%E6%96%B0200%E7%AB%A0%2F161.%20%E8%80%83%E8%AF%95%E7%B3%BB%E7%BB%9F%EF%BC%9A%E7%99%BB%E5%BD%95%E3%80%81%E6%B3%A8%E5%86%8C%E9%A1%B5%E9%9D%A2.md"]={toc:[{text:"总结",id:"总结",depth:2}],title:"161. 考试系统：登录、注册页面",headingTitle:"161. 考试系统：登录、注册页面",frontmatter:{}}}}]);