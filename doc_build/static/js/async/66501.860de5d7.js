"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["66501"],{814250:function(n,e,r){r.r(e),r.d(e,{default:()=>j});var s=r(552676),i=r(740453);let d=r.p+"static/image/c1da5910c9944646f18a8e2783f58b7b.fdf82556.webp",l=r.p+"static/image/cc461906925b1b37f78dc019bc58e168.31108aa4.webp",c=r.p+"static/image/6c8664f5b5df2f02c55c7dd3bb6a1480.8bd362d2.webp",a=r.p+"static/image/18e736a021a0098746b1db38a1dd0fb8.09efc8f6.webp",x=r.p+"static/image/79af5173db3fd89e252d3851124b0ce4.af3b1902.webp";function t(n){let e=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",code:"code",h3:"h3",blockquote:"blockquote",h4:"h4",pre:"pre",h5:"h5",img:"img",br:"br"},(0,i.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.h1,{id:"24深入研究-----css-与-3d-之-transform",children:["24.深入研究 --- CSS 与 3D 之 transform",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#24深入研究-----css-与-3d-之-transform",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"前面介绍了 3D 变换的原理和算法实现，并通过一些简单的 demo 演示了变换效果，但这些 demo 都是使用 WebGL 技术渲染。本节我们暂时不使用 WebGL，而是改用前端同学最熟悉的 CSS 技术来实现 3D 效果，并进一步了解 CSS 中的 3D 属性和 WebGL 中 3D 概念的异同之处。"}),"\n",(0,s.jsxs)(e.h2,{id:"css-中的-3d-属性",children:["CSS 中的 3D 属性",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#css-中的-3d-属性",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"下面是 CSS3 中的几个很重要的 3D 属性："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"transform：对 DOM 进行变换，相当于 WebGL 中对模型进行的变换。"}),"\n",(0,s.jsx)(e.li,{children:"transform-origin：设置变换的中心点。"}),"\n",(0,s.jsx)(e.li,{children:"perspective-origin：视点，相当于 WebGL 中摄像机的 X、Y 轴坐标。"}),"\n",(0,s.jsx)(e.li,{children:"perspective：视距，启用该属性相当于在 WebGL 中设置摄像机和 DOM 元素之间在 Z 轴方向上的距离，设置该属性不等于 0 时会自动启用透视投影效果。"}),"\n",(0,s.jsx)(e.li,{children:"transform-style：是否启用 3D 变换。"}),"\n",(0,s.jsx)(e.li,{children:"backface-visibility：背面是否可见。"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["本节我们主要讲述 CSS 中的变换属性",(0,s.jsx)(e.code,{children:"transform"}),"，变换分为",(0,s.jsx)(e.code,{children:"基本变换"}),"和",(0,s.jsx)(e.code,{children:"矩阵变换"}),"，基本变换大家都比较熟悉了，本节不做过多介绍，我们主要介绍",(0,s.jsx)(e.code,{children:"矩阵变换"}),"和",(0,s.jsx)(e.code,{children:"组合变换"}),"。"]}),"\n",(0,s.jsxs)(e.h3,{id:"变换transform",children:["变换：transform",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#变换transform",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"transform"})," 是大家最常用的一个属性，我们经常会使用它实现一像素的边框和以及容器或者内容的水平、垂直居中，又或者利用它实现强制 GPU 渲染，提升动画性能。"]}),"\n",(0,s.jsx)(e.p,{children:"transform 分为 2D 和 3D 变换，3D 变换只是在 2D 的基础上增加了 Z 轴方向的变换。"}),"\n",(0,s.jsx)(e.p,{children:"一般情况下，如果对一个 DOM 施加变换，那么变换的中心往往是 DOM 的中心位置，类比到 WebGL 中，也就是模型的中心，我们可以把 CSS 中的 DOM 看做 WebGL 中的模型。"}),"\n",(0,s.jsxs)(e.p,{children:["transform 包含四个基本变换属性值：",(0,s.jsx)(e.code,{children:"translate"}),"、",(0,s.jsx)(e.code,{children:"rotate"}),"、",(0,s.jsx)(e.code,{children:"skew"}),"、",(0,s.jsx)(e.code,{children:"scale"}),"，对应的 3D 变换属性值为 ",(0,s.jsx)(e.code,{children:"translate3d"}),"、",(0,s.jsx)(e.code,{children:"rotate3d"}),"、",(0,s.jsx)(e.code,{children:"scale3d"}),"。"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"注意，skew 没有对应的 3D 变换设置。"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["基本变换大家应该都很熟悉了，后面重点要讲解的是 ",(0,s.jsx)(e.code,{children:"matrix"})," 、",(0,s.jsx)(e.code,{children:"matrix3d"}),"的计算与使用，以及",(0,s.jsx)(e.code,{children:"组合变换"}),"的使用技巧。"]}),"\n",(0,s.jsxs)(e.p,{children:["当然，下面我们还是先回顾一下 ",(0,s.jsx)(e.code,{children:"transform"})," 的基本用法。"]}),"\n",(0,s.jsxs)(e.h4,{id:"平移",children:["平移",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#平移",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"平移的使用方法："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"translate(tx, ty)"}),"\n",(0,s.jsx)(e.li,{children:"translate3d(tx, ty, tz)"}),"\n",(0,s.jsx)(e.li,{children:"translateX(tx)"}),"\n",(0,s.jsx)(e.li,{children:"translateY(ty)"}),"\n",(0,s.jsx)(e.li,{children:"translateZ(tz)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"将 dom 元素分别沿着 X、Y、Z 轴向平移 30 px。"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"/* 分别沿 X 轴和 Y 轴平移 30 px。*/\ntransform: translate(30px, 30px);\n/* 分别沿 X 轴、 Y 轴、Z 轴平移 30 px。*/\ntransform: translate3d(30px, 30px, 30px);\n/* 沿 X 轴平移 30 px。*/\ntransform: translateX(30px);\n/* 沿 Y 轴平移 30 px。*/\ntransform: translateY(30px);\n/* 沿 Z 轴平移 30 px。*/\ntransform: translateZ(30px);\n"})}),"\n",(0,s.jsxs)(e.h4,{id:"旋转",children:["旋转",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#旋转",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"旋转用法也比较简单，在此不做过多描述。"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"rotate(angle)，绕 Z 轴旋转。"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["rotate3d(x, y, z, angle)。绕轴",(0,s.jsx)(e.code,{children:"axis = {x:x, y:y, z:z}"}),"旋转指定角度",(0,s.jsx)(e.code,{children:"angle"}),"。"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"rotateX(angle)，绕 X 轴旋转。"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"rotateY(angle)，绕 Y 轴旋转。"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"rotateZ(angle)，绕 Z 轴旋转。"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"/*绕 X 轴旋转 45 deg。*/\ntransform: rotate(45deg);\n/* 将第一个参数设置为 1， 代表绕 X 轴旋转 45 deg。*/\ntransform: rotate3d(1, 0, 0, 45deg);\n/* 将第二个参数设置为 1， 代表绕 Y 轴旋转 45 deg。*/\ntransform: rotate3d(0, 1, 0, 45deg);\n/* 将第三个参数设置为 1， 代表绕 Y 轴旋转 45 deg。*/\ntransform: rotate3d(0, 0, 1, 45deg);\n/* 将三个参数都设置为 1， 代表绕 Y 轴旋转 45 deg。*/\ntransform: rotateZ(45deg);\n"})}),"\n",(0,s.jsxs)(e.h5,{id:"绕任意轴的旋转",children:["绕任意轴的旋转。",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#绕任意轴的旋转",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:["关于旋转，我想说明一下",(0,s.jsx)(e.code,{children:"rotate3d"})," 的使用方式，它接收一个",(0,s.jsx)(e.code,{children:"轴向量"}),"和一个",(0,s.jsx)(e.code,{children:"角度"}),"，代表绕",(0,s.jsx)(e.code,{children:"轴向量"}),"旋转某个",(0,s.jsx)(e.code,{children:"角度"}),"。"]}),"\n",(0,s.jsx)(e.p,{children:"举个例子来说，我们想让模型绕轴 axis= {x: 1,y: 1,z: 1}进行旋转，那么用rotate3d表示如下："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:".box{\n    animation: rotate 3s infinite linear;\n}\n@keyframes rotate{\n    0% {\n        transform:rotate3d(1, 1, 1, 0deg);\n    }\n    100% {\n        transform:rotate3d(1, 1, 1, 360deg);\n    }\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsxs)(e.h5,{id:"变换参照点-transform-origin",children:["变换参照点 transform-origin",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#变换参照点-transform-origin",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:["根据上图的例子，你会发现，默认的旋转是绕着模型的中心位置进行的，这个位置是浏览器默认的。但事实上，CSS 仍然提供了对变换中心的设置功能，通过设置 ",(0,s.jsx)(e.code,{children:"transform-origin"})," 来实现。"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"transform-origin 包含 X、Y、Z 轴坐标的设置。"}),"\n",(0,s.jsx)(e.li,{children:"transform-origin 接收百分比数值时，是以自身尺寸为基准的。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"比如，我们让一个 DOM 元素沿着上边沿进行进行旋转，只需要将 transform-origin 的 Y 轴分量设置为 0% 或者 0 即可。"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"transform-origin: 50% 0%;\ntransform: rotateX(90deg);\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsxs)(e.p,{children:["这个概念比较简单，但是很灵活。利用它我们能实现很多有意思的 3D 效果，比如 CSS 版的",(0,s.jsx)(e.code,{children:"魔方"}),"。"]}),"\n",(0,s.jsxs)(e.h3,{id:"缩放",children:["缩放",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#缩放",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"缩放的使用方法也很简单。"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"scale(sx, sy)，沿 X 轴方向缩放 sx 倍，沿 Y 轴方向缩放 sy 倍。"}),"\n",(0,s.jsx)(e.li,{children:"scale(sx)，沿 X 轴方向和 Y 轴方向缩放 sx 倍。"}),"\n",(0,s.jsx)(e.li,{children:"scale3d(sx, sy, sz)，分别沿 X、Y、Z 轴方向缩放 sx、sy、sz 倍。"}),"\n",(0,s.jsx)(e.li,{children:"scaleX(sx)，沿 X 轴方向缩放 sx 倍。"}),"\n",(0,s.jsx)(e.li,{children:"scaleY(sy)，沿 Y 轴方向缩放 sy 倍。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"代码示例："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"/* 沿 X 轴和 Y 轴 放大两倍。*/\ntransform: scale(2);\n/* 沿 X 轴方向当大 3 倍，沿 Y 轴方向放大 2 倍。*/\ntransform: scale(3, 2);\n/* 分别在 X 、Y、 Z 轴方向放大 2倍、3倍、4倍。*/\ntransform: scale3d(2, 3, 4);\n/* 在 X 轴方向放大两倍。*/\ntransform: scaleX(2);\n/* 在 Y 轴方向放大两倍。*/\ntransform: scaleY(2);\n"})}),"\n",(0,s.jsxs)(e.h3,{id:"斜切",children:["斜切",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#斜切",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"斜切的使用方法："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"skew(xAngle, yAngle)，DOM 元素沿着 X 方向切变 xAngle 度，沿 Y 轴方向切变 yAngle 度。"}),"\n",(0,s.jsx)(e.li,{children:"skewX(xAngle)，沿 X 轴方向切变 xAngle 度。"}),"\n",(0,s.jsx)(e.li,{children:"skewY(yAngle)，沿 Y 轴方向切变 yAngle 度。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"斜切可以理解为将 DOM 元素沿 X 轴或者 Y 轴拉伸，切变会改变物体的形状。"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"代码示例："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"/* 沿 X 轴切变 30 度。*/\ntransform: skew(30deg);\n/* 沿 X 轴切变 30 度，沿 Y 轴切变 40 度。*/\ntransform: skew(30deg, 40deg);\n/* 沿 X 轴方向切变 30 度。*/\ntransform: skewX(30deg);\n/* 沿 Y 轴方向切变 40 度。*/\ntransform: skewY(40deg);\n"})}),"\n",(0,s.jsxs)(e.p,{children:["以上就是 ",(0,s.jsx)(e.code,{children:"transform"})," 的常见用法，接下来我们开始讲重点了：",(0,s.jsx)(e.code,{children:"组合变换"}),"和 ",(0,s.jsx)(e.code,{children:"matrix"})]}),"\n",(0,s.jsxs)(e.h3,{id:"组合变换",children:["组合变换",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#组合变换",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"组合变换"}),"就是在 transform 的属性值中附加多个变换效果，而不只是单一的变换。"]}),"\n",(0,s.jsx)(e.p,{children:"比如下面这个变换样式："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"transform: rotateX(60deg) rotateY(60deg);\n"})}),"\n",(0,s.jsx)(e.p,{children:"这个样式的作用是先让 DOM 元素绕着 X 轴旋转 60 度，注意此时 DOM 元素的坐标系改变了，再绕变换后的坐标系的 Y 轴旋转 60 度。"}),"\n",(0,s.jsx)(e.p,{children:"需要谨记的是："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"transform 后的多个变换要用空格分开。"}),"\n",(0,s.jsxs)(e.li,{children:["从前往后理解这些变换，后一个变换都是基于前一个变换后的新坐标系进行，也称",(0,s.jsx)(e.code,{children:"动态坐标系变换"}),"。"]}),"\n",(0,s.jsxs)(e.li,{children:["从后往前理解，每一个变换都是按照 DOM 元素最开始的坐标轴（可以理解为世界坐标系）进行，也称为",(0,s.jsx)(e.code,{children:"静态坐标系变换"}),"。"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"至于多个变换是基于动态坐标系进行构思，还是基于静态的世界坐标系进行构思，取决于每个人的理解习惯，但最终的变换效果都是一样的。"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"在欧拉角章节我们也讲过了多个矩阵相乘时，从前往后和从后往前理解变换所基于的坐标系是不同的。transform 多个变换理解顺序和前面所讲的保持一致。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"再举个比较明显的例子，我们先让 DOM 旋转 60 度，然后将其沿 X 轴平移 200 像素，大家觉得 DOM 会按照怎样的轨迹变换？"}),"\n",(0,s.jsx)(e.p,{children:"我们看一下："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"transform: rotateX(60) translateX(200px);\n"})}),"\n",(0,s.jsxs)(e.p,{children:["为了更方便观察 3D 组合变换的效果，我将图片外层容器的",(0,s.jsx)(e.code,{children:"视点"}),"设置在了右上方："]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:".imgWrapper{\n    perspective: 300px;\n    margin-top:300px;\n    position: relative;\n    perspective-origin: 100% -100px;\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["关于视点 ",(0,s.jsx)(e.code,{children:"perspective-origin"})," 和 视距 ",(0,s.jsx)(e.code,{children:"perspective"})," 我们放在下一节讲述。"]}),"\n",(0,s.jsxs)(e.h4,{id:"从前往后理解变换需要按照模型坐标系理解",children:["从前往后理解变换，需要按照",(0,s.jsx)(e.code,{children:"模型坐标系"}),"理解：",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#从前往后理解变换需要按照模型坐标系理解",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"下图，白色坐标轴是图片默认的坐标系，当图片绕 X 轴旋转 60 度后，坐标系变成红色坐标轴的指向。"}),"\n",(0,s.jsx)(e.p,{children:"接着沿当前图片坐标系的红色 X' 轴平移 200 像素，此时，应该朝向屏幕里侧和右侧移动。"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:x,alt:""})}),"\n",(0,s.jsxs)(e.h4,{id:"从后往前理解多个变换需按照世界坐标系理解",children:["从后往前理解多个变换，需按照世界坐标系理解",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#从后往前理解多个变换需按照世界坐标系理解",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:["请注意，",(0,s.jsx)(e.code,{children:"CSS"})," 中的",(0,s.jsx)(e.code,{children:"世界坐标系"}),"就是 施加变换的 DOM 节点（本例为图片）最开始的坐标系，即图中的白色坐标轴。"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"首先沿着 X 轴平移 200 像素。"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"接着绕世界坐标系的 Y 轴旋转 60 度。"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(e.p,{children:"可以看出，无论我们按照哪种坐标系理解，最终变换效果都是一样的，看下图："}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsxs)(e.p,{children:["这就是",(0,s.jsx)(e.code,{children:"组合变换"}),"要注意的地方，了解了组合变换的规律，我们才能做出很有意思的特效，比如照片墙："]}),"\n",(0,s.jsx)(e.p,{children:"照片墙的核心原理就是先将图片沿着 Z 轴方向移动一定距离，之后绕世界坐标系的Y 轴旋转指定角度。"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"transform: rotateY(30deg) translateX(200px);\n"})}),"\n",(0,s.jsx)(e.p,{children:"当然，这只是核心原理，事实上我们还需要做如下几步："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["让图片能够显示出 3D 效果，这一步需要让图片父容器的 ",(0,s.jsx)(e.code,{children:"transform-style"})," 属性设置为 ",(0,s.jsx)(e.code,{children:"preserve-3d"}),"。"]}),"\n",(0,s.jsxs)(e.li,{children:["为父容器加上透视属性",(0,s.jsx)(e.code,{children:"perspective"}),"，设置为透视投影，并调整合适的视距 ，这样才能实现近大远小的效果。"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"这几个属性我们下节细讲，先贴下照片墙的效果："}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:a,alt:""})}),"\n",(0,s.jsx)(e.p,{children:"具体的实现我们在讲视点和视距属性时再分析。"}),"\n",(0,s.jsxs)(e.p,{children:["又比如 3D 盒效果：\n",(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})]}),"\n",(0,s.jsx)(e.p,{children:"这是一个立方体盒子，每个面上都对应一张图片，当然，你也可以根据自己的需要往各个面上放置自己的内容。"}),"\n",(0,s.jsx)(e.p,{children:"立方体盒子的原理也是利用组合变换实现的："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"前面：沿着 Z 轴往前（朝向屏幕外）平移指定像素。"}),"\n",(0,s.jsx)(e.li,{children:"后面，沿着 Z 轴往后（朝向屏幕里）平移指定像素。"}),"\n",(0,s.jsx)(e.li,{children:"上面，沿着 Y 轴往上平移，接着绕 X 轴旋转 90 度。"}),"\n",(0,s.jsx)(e.li,{children:"下面，沿着 Y 轴往下平移，接着绕 X 轴旋转 90 度。"}),"\n",(0,s.jsx)(e.li,{children:"左面，沿着 X 轴往左平移，接着绕 Y 轴旋转 90 度。"}),"\n",(0,s.jsx)(e.li,{children:"右面，沿着 X 轴往右平移，接着绕 Y 轴旋转 90 度。"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["当然，为了实现 3D 效果，也要在图片的父容器上设置 ",(0,s.jsx)(e.code,{children:"transform-style"})," 为 ",(0,s.jsx)(e.code,{children:"preserve-3d"})," 才可以。"]}),"\n",(0,s.jsxs)(e.p,{children:["这里主要展示组合变换顺序的理解与强大，不对实现做分析，",(0,s.jsx)(e.code,{children:"实现过程"}),"留在下一节和",(0,s.jsx)(e.code,{children:"视点"}),"以及",(0,s.jsx)(e.code,{children:"视距"}),"一起介绍。"]}),"\n",(0,s.jsxs)(e.p,{children:["我们还是先把变换讲完，接下来介绍 ",(0,s.jsx)(e.code,{children:"transform"})," 的另一个重要用法，",(0,s.jsx)(e.code,{children:"matrix"})," 和 ",(0,s.jsx)(e.code,{children:"matrix3d"}),"。"]}),"\n",(0,s.jsxs)(e.h3,{id:"matrix",children:["matrix",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#matrix",children:"#"})]}),"\n",(0,s.jsxs)(e.p,{children:["transform 除了提供一些基本变换，还提供了 ",(0,s.jsx)(e.code,{children:"matrix"})," 和 ",(0,s.jsx)(e.code,{children:"matrix3d"})," 属性值，这两个属性值是做什么的呢？"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"matrix"})," 是矩阵的意思，transform 是变换属性，所以 matrix 就是对 DOM 执行变换的矩阵，这和我们前面讲的 WebGL 的变换矩阵概念相同。"]}),"\n",(0,s.jsx)(e.p,{children:"根据前面的学习，我们知道 2 维平面的变换矩阵，是一个 3 阶矩阵，包含 9 个数字："}),"\n",(0,s.jsxs)(e.p,{children:["$\n\\begin{aligned}\n\\begin{pmatrix}\nx0 & y0 & tx \\",(0,s.jsx)(e.br,{}),"\n","x1 & y1 & ty \\",(0,s.jsx)(e.br,{}),"\n","0 & 0 & 1\n\\end{pmatrix}\n\\end{aligned}\n$"]}),"\n",(0,s.jsx)(e.p,{children:"按照我们之前章节坐标系变换的原理分析："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"x0、x1 代表变换之后的 X 轴基向量在原坐标系中的表示。"}),"\n",(0,s.jsx)(e.li,{children:"y0、y1 代表变换之后的 Y 轴基向量在原坐标系中的表示。"}),"\n",(0,s.jsx)(e.li,{children:"tx、ty 代表坐标原点的偏移量。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"如果没有看之前章节的话，可能不太理解基向量的含义以及坐标系的概念，大家可以去看一下，理解一下坐标系变换的原理。"}),"\n",(0,s.jsxs)(e.p,{children:["你会看到第三行的数值是固定的",(0,s.jsx)(e.code,{children:" 0 0 1 "}),"，所以，浏览器为了简化赋值，规定 transform 中的 matrix 只接受 3 阶矩阵的前两行参数，共 6 个数字。"]}),"\n",(0,s.jsx)(e.p,{children:"请记住，matrix 的参数顺序对应上面的矩阵元素如下："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"transform: matrix(x0, x1, y0, y1, tx, ty);\n"})}),"\n",(0,s.jsx)(e.p,{children:"前面章节我们推导过基本变换的矩阵表示："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"平移"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["沿 X 轴平移 tx 像素，沿 Y 轴平移 ty 像素：\n$\n\\begin{aligned}\n\\begin{pmatrix}\n1 & 0 & tx \\",(0,s.jsx)(e.br,{}),"\n","0 & 1 & ty \\",(0,s.jsx)(e.br,{}),"\n","0 & 0 & 1\n\\end{pmatrix}\n\\end{aligned}\n$"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"缩放"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["沿 X 轴方向缩放 sx 倍， 沿 Y 轴缩放 sy 倍：\n$\n\\begin{aligned}\n\\begin{pmatrix}\nsx & 0 & 0 \\",(0,s.jsx)(e.br,{}),"\n","0 & sy & 0 \\",(0,s.jsx)(e.br,{}),"\n","0 & 0 & 1\n\\end{pmatrix}\n\\end{aligned}\n$"]}),"\n",(0,s.jsxs)(e.p,{children:["也就是说基本变换我们都可以用 ",(0,s.jsx)(e.code,{children:"matrix"})," 来表示。"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"斜切\n沿着 X 轴倾斜 α 度，沿着 Y 轴倾斜 θ 度："}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["$\n\\begin{aligned}\n\\begin{pmatrix}\n1 & tan\\alpha & 0 \\",(0,s.jsx)(e.br,{}),"\n","tan\\theta & 1 & 0 \\",(0,s.jsx)(e.br,{}),"\n","0 & 0 & 1\n\\end{pmatrix}\n\\end{aligned}\n$"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"旋转"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"绕 Z 轴旋转 θ 角度："}),"\n",(0,s.jsxs)(e.p,{children:["$\n\\begin{aligned}\n\\begin{pmatrix}\ncos\\theta & -sin\\theta & 0 \\",(0,s.jsx)(e.br,{}),"\n","sin\\theta & cos\\theta & 0 \\",(0,s.jsx)(e.br,{}),"\n","0 & 0 & 1\n\\end{pmatrix}\n\\end{aligned}\n$"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"绕 Z 轴旋转 60 度。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"用 rotateZ 表示上面的旋转很简单，我们看下用 matrix 如何表示："}),"\n",(0,s.jsx)(e.p,{children:"$ cos(60) = 0.5$"}),"\n",(0,s.jsx)(e.p,{children:"$sin60 = \\frac{\\sqrt3}{2} = 0.866（约等）$"}),"\n",(0,s.jsx)(e.p,{children:"将这两个数字代入 matrix 公式，得出变换样式为："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"transform: matrix(0.5, 0.866, -0.866, 0.5, 0, 0);\n"})}),"\n",(0,s.jsx)(e.p,{children:"你会发现无论我们是用 rotateZ 表示，还是用 matrix 表示，变换效果都是一样的。"}),"\n",(0,s.jsxs)(e.h3,{id:"matrix3d",children:["matrix3d",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#matrix3d",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"matrix3d，顾名思义，代表 3 维变换，它是一个 4 阶矩阵，需要 16 个数字来表示。"}),"\n",(0,s.jsxs)(e.p,{children:["$\n\\begin{aligned}\n\\begin{pmatrix}\nx0 & y0 & z0 & tx \\",(0,s.jsx)(e.br,{}),"\n","x1 & y1 & z1 & ty \\",(0,s.jsx)(e.br,{}),"\n","x2 & y2 & z2 & tz \\",(0,s.jsx)(e.br,{}),"\n","0 & 0 & 0 & 1\n\\end{pmatrix}\n\\end{aligned}\n$"]}),"\n",(0,s.jsx)(e.p,{children:"可以看到，每一个基向量都增加了一个 Z 轴方向分量 x2、y2、z2、tz。"}),"\n",(0,s.jsx)(e.p,{children:"事实上，3D 的基本变换都可以用 matrix 或者 matrix3d 来表示，但是一些复杂变换只能使用 matrix 或者 matrix3d 来实现。"}),"\n",(0,s.jsxs)(e.h3,{id:"matrix-对我们来说有什么用呢",children:["matrix 对我们来说有什么用呢？",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#matrix-对我们来说有什么用呢",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"这是一个很关键的问题，大家会觉得，基本变换的用法更容易理解，更方便书写，matrix 需要的参数太多，而且参数值需要计算，更糟糕的是，我们往往不知道怎么计算，那 matrix 有什么用呢？"}),"\n",(0,s.jsx)(e.p,{children:"这是个好问题，但我想说的是 matrix 能完成基本变换不能完成的变换，能做出基本变换完成不了的效果。"}),"\n",(0,s.jsx)(e.p,{children:"这时你就该考虑使用 matrix 了。"}),"\n",(0,s.jsx)(e.p,{children:"紧跟而来的问题是，matrix 如何求得呢？"}),"\n",(0,s.jsx)(e.p,{children:"我们前面章节讲述了 matrix 矩阵的求法，一旦你确定了需要的变换，你就可以计算变换后的基向量，然后将基向量的各个分量代入矩阵的各个位置即可求出变换矩阵，有了变换矩阵，也就有了 matrix 所需要的各个元素，将矩阵转化成 matrix 或者 matrix3d 所需要的字符串就轻而易举了。"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"镜像效果"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"镜像效果，采用基本变换是实现不了的，只能借助于矩阵。\n比如左右镜像，左右镜像无非就是 Y 轴基向量不变，X 轴坐标对调，原坐标与新坐标关系如下："}),"\n",(0,s.jsxs)(e.p,{children:["$\n\\begin{aligned}\nx^{'} &= -x \\",(0,s.jsx)(e.br,{}),"\n","y^{'} &= y\n\\end{aligned}\n$"]}),"\n",(0,s.jsx)(e.p,{children:"所以有："}),"\n",(0,s.jsxs)(e.p,{children:["$\n\\begin{aligned}\nx0 &= -1 \\",(0,s.jsx)(e.br,{}),"\n","x1 &= 0 \\",(0,s.jsx)(e.br,{}),"\n","y0 &= 0 \\",(0,s.jsx)(e.br,{}),"\n","y1 &= 1\n\\end{aligned}\n$"]}),"\n",(0,s.jsx)(e.p,{children:"将这些值，代入 matrix公式中，可以得出变换："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"transform: matrix(-1,0,0,1,0,0);\n"})}),"\n",(0,s.jsx)(e.p,{children:"我们看下效果："}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:c,alt:""})}),"\n",(0,s.jsx)(e.p,{children:"当然大家也可以举一反三，比如上下镜像："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-css",children:"transfom: matrix(1,0,0,-1,0,0)\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:l,alt:""})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"绕任意轴旋转。"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"绕任意轴的旋转，除了可以使用 rotate3d 来实现，还可以使用 matrix3d。这个旋转矩阵该如何计算呢？"}),"\n",(0,s.jsxs)(e.p,{children:["还记得基本变换章节我们推导出的绕固定轴旋转的矩阵方法",(0,s.jsx)(e.code,{children:"axisRotation"}),"吗？"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"axisRotation(axis, angle)"}),"，其中 axis 是一个三维向量，angle 是一个弧度值。"]}),"\n",(0,s.jsxs)(e.p,{children:["这里我不准备举绕基本轴旋转的例子，因为它们不需要matrix3d 出手，我们想绕",(0,s.jsx)(e.code,{children:"{x:1, y: 1, z: 1}"}),"的倾斜轴旋转，上面的 axisRotation 方法该出场了，它会为我们提供变换矩阵，但是我们还需要将变换矩阵转化为 css 样式，我们先封装一个矩阵转 css 的方法："]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"function matrix2css(mt){\n    var transformStyle = 'matrix(';\n    if(mt.length == 16){\n        css = 'matrix3d('\n    }\n    for(let i =0; i< mt.length; i++){\n        transformStyle += mt[i];\n        if(i !== mt.length - 1){\n            transformStyle += ','\n        }else{\n            transformStyle +=')'\n        }\n    }\n    return transformStyle;\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"接着可以通过 axisRotation 方法计算出变换矩阵了，比如旋转 90 度。"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"let mt = matrix.axisRotation({x:1, y:1, z:1}, Math.PI / 180 * 90)\n"})}),"\n",(0,s.jsx)(e.p,{children:"在这里我用绕轴向量 axis = {x:1, y:1, z:1} 不停旋转的动画演示："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"function render(){\n    if(!playing){\n        return;\n    }\n    angle ++;\n    mt = matrix.axisRotation({x: 1,y: 1,z: 1}, Math.PI / 180 * angle);\n    let css = matrix2css(mt);\n    ?('.box')[0].style.transform = css;\n    requestAnimationFrame(render);\n}\ndocument.body.addEventListener('click',function(){\n  playing = !playing;\n  render();\n})\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)("img",{src:d,alt:""})}),"\n",(0,s.jsx)(e.p,{children:"是不是很简单呢？"}),"\n",(0,s.jsxs)(e.h3,{id:"总结",children:["总结",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"transform 中的基本变换都可以使用 matrix 和 matrix3d 来表示，只有当基本变换表示不了我们的变换时，我们才考虑使用 matrix 或者 matrix3d 。"}),"\n",(0,s.jsx)(e.p,{children:"可见，即使不做 WebGL 开发，我们之前学到的内容也会对普通开发者大有帮助，掌握变换原理，配合 CSS3 中的 3D 属性，照样可以做出很酷炫的 3D 动画效果。"}),"\n",(0,s.jsxs)(e.h2,{id:"回顾",children:["回顾",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#回顾",children:"#"})]}),"\n",(0,s.jsx)(e.p,{children:"本节讲述了 CSS 中的 3D 变换，以及它们与 WebGL 变换的相同之处。总的来说，基本原理都是一样的，之前封装的数学矩阵库，不仅可以用在 WebGL 领域，也可以用在 css 领域。"}),"\n",(0,s.jsxs)(e.p,{children:["下一节，我们讲述 CSS 中 3D 变换 的其它几个重要属性，",(0,s.jsx)(e.code,{children:"变换类型(transform-style)"}),"、",(0,s.jsx)(e.code,{children:"视点(perspective-origin)"}),"、",(0,s.jsx)(e.code,{children:"视距(perspective)"}),"。"]})]})}function h(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(t,{...n})}):t(n)}let j=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["WebGL%20%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E8%B7%B5%2F24.%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6%20---%20CSS%20%E4%B8%8E%203D%20%E4%B9%8B%20transform.md"]={toc:[{text:"CSS 中的 3D 属性",id:"css-中的-3d-属性",depth:2},{text:"变换：transform",id:"变换transform",depth:3},{text:"平移",id:"平移",depth:4},{text:"旋转",id:"旋转",depth:4},{text:"缩放",id:"缩放",depth:3},{text:"斜切",id:"斜切",depth:3},{text:"组合变换",id:"组合变换",depth:3},{text:"从前往后理解变换，需要按照`模型坐标系`理解：",id:"从前往后理解变换需要按照模型坐标系理解",depth:4},{text:"从后往前理解多个变换，需按照世界坐标系理解",id:"从后往前理解多个变换需按照世界坐标系理解",depth:4},{text:"matrix",id:"matrix",depth:3},{text:"matrix3d",id:"matrix3d",depth:3},{text:"matrix 对我们来说有什么用呢？",id:"matrix-对我们来说有什么用呢",depth:3},{text:"总结",id:"总结",depth:3},{text:"回顾",id:"回顾",depth:2}],title:"24.深入研究 --- CSS 与 3D 之 transform",headingTitle:"24.深入研究 --- CSS 与 3D 之 transform",frontmatter:{}}}}]);