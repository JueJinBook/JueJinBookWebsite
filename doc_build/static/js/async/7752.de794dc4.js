"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["7752"],{912163:function(e,n,s){s.r(n),s.d(n,{default:()=>g});var r=s(552676),c=s(740453);let i=s.p+"static/image/12bd04d757d41afe45777609ee3b9458.ec6d3971.webp",d=s.p+"static/image/261432e588405482e0ee64a399fe554f.24e1f5ed.webp",l=s.p+"static/image/51342732c37610702824ef05869449d7.edd2a642.webp",a=s.p+"static/image/504c4d34b6733c1ff865029333e24c3f.8e512df3.webp",h=s.p+"static/image/d5c3a35c9f74679872a8d2dd385228ed.c25191c5.webp",t=s.p+"static/image/fbe07b4d6745577b0d73cbdfa1baaadb.6c37139f.webp",o=s.p+"static/image/4a2d5034e38404ef2c2658a5f881cfef.4df26e39.webp",j=s.p+"static/image/08b264c2987bfb269fb68b97e1c5bf34.2705b7fb.webp",x=s.p+"static/image/b3198156976b9016efd627e6df737621.0f140940.webp",p=s.p+"static/image/5e1571e30ff2b3e5249298c7acb3261f.b6a5dc35.webp",A=s.p+"static/image/dcea82e05ff09f998363b40009d9afd4.dfb9ce9c.webp",m=s.p+"static/image/d44ca7173078541e50f771eac3326812.aea34e83.webp",u=s.p+"static/image/ff34e5aed46c15479922b266bb4ba2fa.1a658dc4.webp";function b(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",ol:"ol",li:"li",code:"code",img:"img",blockquote:"blockquote",ul:"ul",pre:"pre"},(0,c.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"4静态魔方",children:["4.静态魔方",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#4静态魔方",children:"#"})]}),"\n",(0,r.jsxs)(n.h2,{id:"前言",children:["前言",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#前言",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"在这一章中你将学到以下知识点："}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"如何在微信小游戏中利用 ThreeJS 框架构建一个静态的简易三阶魔方；"}),"\n",(0,r.jsx)(n.li,{children:"解决使用 ThreeJS 框架开发微信小游戏可能会遇到的一些兼容性的问题；"}),"\n",(0,r.jsxs)(n.li,{children:["ThreeJS 框架中",(0,r.jsx)(n.code,{children:"Texture"}),"纹理对象的相关知识；"]}),"\n",(0,r.jsxs)(n.li,{children:["ThreeJS 框架中",(0,r.jsx)(n.code,{children:"Mesh"}),"网格对象的相关知识；"]}),"\n",(0,r.jsxs)(n.li,{children:["ThreeJS 框架中",(0,r.jsx)(n.code,{children:"BoxGeometry"}),"盒子几何体对象的相关知识；"]}),"\n",(0,r.jsxs)(n.li,{children:["ThreeJS 框架中",(0,r.jsx)(n.code,{children:"视角控制器"}),"的相关知识。"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"概述",children:["概述",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#概述",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["魔方是",(0,r.jsx)(n.code,{children:"1974"}),"年由匈牙利的",(0,r.jsx)(n.code,{children:"鲁比克"}),"教授发明，因此魔方又被称为",(0,r.jsx)(n.code,{children:"Rubik's Cube"}),"；"]}),"\n",(0,r.jsxs)(n.p,{children:["魔方有很多类型但其中最经典的是",(0,r.jsx)(n.code,{children:"三阶魔方"}),"；"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:u,alt:""})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["分为",(0,r.jsx)(n.code,{children:"上"}),"、",(0,r.jsx)(n.code,{children:"中"}),"、",(0,r.jsx)(n.code,{children:"下"}),"三层，每层",(0,r.jsx)(n.code,{children:"3*3"}),"个小方块，共",(0,r.jsx)(n.code,{children:"27"}),"个小方块。"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["示例代码在 ",(0,r.jsx)(n.a,{href:"https://github.com/newbieYoung/Threejs_rubik/tree/master/lesson/demo2",target:"_blank",rel:"noopener noreferrer",children:"Threejs_rubik"})," 项目中；"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:m,alt:""})}),"\n",(0,r.jsxs)(n.h2,{id:"项目初始化",children:["项目初始化",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#项目初始化",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["如何快速上手微信小游戏可以看看官方的文档",(0,r.jsx)(n.a,{href:"https://developers.weixin.qq.com/minigame/dev/",target:"_blank",rel:"noopener noreferrer",children:"快速上手"}),"；"]}),"\n",(0,r.jsxs)(n.p,{children:["按照文档中的指引看到",(0,r.jsx)(n.code,{children:"飞机大战"}),"示例小游戏的时候就说明开发环境已经准备好了。"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:A,alt:""})}),"\n",(0,r.jsx)(n.p,{children:"小游戏只有两个必要文件，其它文件都可以删掉；"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"game.js"}),"入口文件；"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"game.json"}),"配置文件；"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["ThreeJS 框架是基于 DOM 环境设计的，因此有些 API 在微信小游戏中没有；为了兼容那些基于浏览器环境设计的游戏引擎，微信小游戏官方提供了一个名叫",(0,r.jsx)(n.code,{children:"weapp-adapter.js"}),"的脚本，但是可惜的是并没有对其进行进一步的更新和维护，因此",(0,r.jsx)(n.code,{children:"可靠性较差"}),"，至少对于 ThreeJS 框架而言不能通过这个脚本顺利无缝的接入小游戏；"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["进一步了解可以查看官方文档 ",(0,r.jsx)(n.a,{href:"https://developers.weixin.qq.com/minigame/dev/tutorial/base/adapter.html",target:"_blank",rel:"noopener noreferrer",children:"Adapter"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["不过在",(0,r.jsx)(n.code,{children:"Github"}),"上有人对其进行了改良, 针对 PixiJS、",(0,r.jsx)(n.code,{children:"ThreeJS"}),"、Babylon 等流行框架做了",(0,r.jsx)(n.code,{children:"适配"}),"，源代码在 ",(0,r.jsx)(n.a,{href:"https://github.com/finscn/weapp-adapter",target:"_blank",rel:"noopener noreferrer",children:"finscn/weapp-adapter"}),"，把源代码复制下来，放入到项目的",(0,r.jsx)(n.code,{children:"adapter"}),"目录中。"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:p,alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["然后在入口文件",(0,r.jsx)(n.code,{children:"game.js"}),"中引入；"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import '/adapter/index.js'\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"主逻辑初始化",children:["主逻辑初始化",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#主逻辑初始化",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["在",(0,r.jsx)(n.code,{children:"js"}),"目录中创建",(0,r.jsx)(n.code,{children:"threejs"}),"目录并把 ThreeJS 框架源文件放入其中，然后新增",(0,r.jsx)(n.code,{children:"main.js"}),"脚本，用来处理小游戏的主逻辑；"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,UklGRsAIAABXRUJQVlA4ILQIAADQNQCdASosAY0APp1OoEylpCMiIfmaCLATiWdu4W8hBdAKEBtgOZV9QHQc+oB6AH6zemV7E+RV+XP7h2q/3zwl8eHl72d5R7G78T5gf3rxP4AX4x/K/9VvaOjf4P0AvSb5v/tPDQ/evQj63f6j3AP41/W/+ZxxfmXsC/zX/LeqV/e/+r/C+iH81/0X/p9wj+Zf2n/nCVIN958wPoPscsl9vIRDrhFERluCevYljdO8aNiJFV+3wgZCfjxaS3MBDL2jA+dSuXv0XWifp/hAyE/HaEKDmtOD3aDJCaJqn9vcXmrLnzcu837CqzYTRRpCT8dlR1ouVkQBnOMv8hGe5s07Ys9CUk1ITrNHHUrkVU4cAkaiOxAyE/KvlDcGxtHrFyzHkHqnQukq3OmqZLKSxC9jJMQ3Q6OPZKn0heh9xESxakSPxe6k0FqjNcH7j2ooG2O8PHsli2wt78cf8o3hYmXZJ8LYRo3Soiho3VKIVSPxt+ukfjaE6OLBd7rwr5LhTobTz6bbcGVUmtUMqHTabfjxHHisw4Lz/4D6tfRrLW3bLHrbC3wdqpAcQN/p9DXegfLSf1V6h6wAAP7cCauuLf0CrGUr+Nbrpil9KzGJ0rUycN6uoCw1JLNgacGKn6kTVXxrEU4ClHrq3n7Cs3CazNm5rUYdPaoMsIBkCw3ExL01P1UM/+0C56sT/j456Fl4BjBm1Xg1lOfwSCY4NjcdgKFNZu0dk8RW9rB6/FEa9+qgAM6mquLr1dJ7+80mo4Mywhk7Wg6fYeIFzMbT4flHroJDKaEoZ+W3Svl+BYsJBXeCfOpGLV3TXWJ6HLQ/G5nWGxbhbqF/wQ8XsGbiGbGttf0B3UcAs3B5zl323QbeCMoFSp8o+yS9HOxOSttdlY+OaVmkNELerVBdiR1wETYCZcyOrCTAiapGjuqG8/ad/1fAlI7anKopIKaFzGbaImuPwawBkUZU8ADua5DILeK+/KxOP+gANxsgL4wHTH/0E3DrnTEKc8Vnabfa2kK+PsuDxra+c/6dO6aX3Ocb4TWBfiWefwcnQsSss/WZjBBEV/oVUeCBOlhujxiQHIbHRqPv/aUrgfGUejSGGWV43Z30oevLSinllz3DtqezL9ChylK/4IkbWKdtd3CxOJ1cTUZDzW++SzXCwWV+cBIwnio+g2haEDPzaOy5BKGhUfuAG8WzCYtjZdpGzzcnH8vdhiYK058Gi9KgDIjjsQb0DbaiAx/YRjdF7SpcT/7p6Hhw0H7gjwADYeLHWb8X8z0Rtqxo5OUPX/RgNMn2+rneOqH1yP6F792ber7z/WFCXwq6xUabFywkwvXcZ5/PV51BdRCiBfGRzG+8uFLFpD3WB7SOHmg5qXoqeNAheP2X/VOBHscG3eBxazvMp/Y2othYSadrcuSRu+2zA1l08JJem9iuh08C9xUCehGFp9EDBiJuYu9t/kSBjNflCqO81A7PoGoYbrJAntmZBXQQ//L94ibGrFUbs7uEVuCqQaCEbSS0YJW0w8nPN0y+I3r8X9kSsqwt5WpedgR7el/eovASbGNJam277m3wdRJsDI5Ksqq1gGlGOp+pSpOsm1FXKnZfGRG3vt2Uy46/+X/4gcwbmVcxSDy5U0v4WWH+q1JIGA8UNulpZX85u9/0UIPrMo0FF+B/JewzAYi4JlodaDM9+oIV9zM9yu7AasXFJWh0lL1gokhbKuh8AbpaQ6fOgXiEh57EqGfRjmJ6Gk3mu6zJBzM+7uP3zAbNv4ZwiNRZ8KAAAXmtrSDh/5ThFmEiao4G/PHjLVf2XSCVW5PZ8/ACG3/wCBkNNKtnOz4PFLXo/ayVl5nFNyZSma8T6B71nMKKx5VYb61Jbgou/esyjVe0BZP8DcD5qSw+ER3WjDJ86YwA0OjxsH2pT9w/Z0C1DysqOPl9AJ8Ck02GxFzYCdqUGmFqgP2Hll7LPLP2b2cipKIlaqiw3+L6Y2HqGQLIatxINsyOW/Md5+QDbVsp1agABl3MJGvQ4rNJq9W+Jisk4onxt1uivJikJwxl5kDKkVLR3xp2a3O9qoeeooQpr38dermjM4BDWD0VjAvW4d8cR7qHz5nSmkzLKFYL7iicd8eg1z3Vr6Hc6tWKz94dGX+pIot0DaL4ME523KPZFgANIOgE5cgb8+70cO2dBb0UXlj0RzekE24/WirJa9b+IeKGhTO5xADxyl/SF3jtxnG1Yq4fCKJID7SFu5wS1qE4Z2gb/hYdANDiKKXej76d1NthplIgm6CXNOES8ZMMPk9XyfTtGzNbxLRXd9qstnfgyn3vRGTpXdd1ZkNnQXbS6vUr42unSFEBQOPITyuGXrt9LLo8aRcQ6nvzPIb42SaiFbTZvAE8eGES2s980uDnlq9uuAn4pTRTGweqmityTpn+EUuBWJcqlE0TJQGWVvsIHcovNAKJtdewFIM/7rb8Xav7LV7mrTc7wXKXOosJ/8o0jA0siyIvMEMHi/N/H8ARqN2rmZaRC5lDD0ouzg4v+05ZzbnLgKkXzCqPccyPv1CmhF5S5yct+vS1HDubhXUJFkEMyWHnxn+ADY3JvRfGqkmdTYnvBPkPnliZZcnhx1fbX6cj3scDIlzert5mM6XpU1oo3XLwzqUBfDmO2AQLtKceceqOA9710ldeXu/dUGdXCcl7l92XuBK5BSIO6diGao1xYOGD3m4HjIVca3DFvI8X3nVkCfyDYpnDruvud15yeBw6Uxd8j3oNZ9deSWMUYIealYz2SX0V1sr8d+p3lq4AjC9SqbdyoSIKrYSrRBY25XptxVRIvAOvdX2kUIocUIfKpe9pax90yefGdtO11e/PDUq8TSTxe5GUXMTNrw6zu4tCNs1t0UumiXNAAY0fQUEyhAq8zG1J7jEcZWE1a6nIiE6Lhp0var7m5lSs+DUyYHQZApFDwtuuA7hd3gkgbcQBpTuYKDIK06kq/h93uHK6ATF1JnMmcyYEAA==",alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["在入口文件",(0,r.jsx)(n.code,{children:"game.js"}),"中引入主逻辑脚本，然后执行。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import Main from './js/main'\nnew Main()\n"})}),"\n",(0,r.jsxs)(n.p,{children:["然后在",(0,r.jsx)(n.code,{children:"main.js"}),"中继续使用",(0,r.jsx)(n.code,{children:"ThreeJS基础程序结构"}),"；"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import * as THREE from 'threejs/three.js'\nconst Context = canvas.getContext('webgl');\n\n/**\n * 游戏主函数\n */\nexport default class Main {\n    constructor() {\n        this.context = Context;//绘图上下文\n        this.width = window.innerWidth;\n        this.height = window.innerHeight;\n        this.devicePixelRatio = window.devicePixelRatio;\n        this.viewCenter = new THREE.Vector3(0, 0, 0);//原点\n        \n        this.initRender();\n        this.initCamera();\n        this.initScene();\n        this.initLight();\n        this.initObject();\n        this.render();\n    }\n    \n    initRender(){\n        //...\n    }\n    \n    initCamera(){\n        //...\n    }\n    \n    initScene(){\n        //...\n    }\n    \n    initLight(){\n        //...\n    }\n    \n    initObject(){\n        //...\n    }\n    \n    render(){\n        //...\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"这里需要注意几点："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["ThreeJS 框架源代码通过",(0,r.jsx)(n.code,{children:"import * as THREE from 'threejs/three.js'"}),"引入；"]}),"\n",(0,r.jsxs)(n.li,{children:["在微信小游戏调用",(0,r.jsx)(n.code,{children:"wx.createCanvas()"}),"接口可以创建一个 Canvas 对象，但是只有第一次调用该接口创建的 Canvas 对象中绘制的图形会显示到屏幕上，后续调用创建的都是",(0,r.jsx)(n.code,{children:"离屏Canvas"}),"；由于引入的",(0,r.jsx)(n.code,{children:"adapter"}),"脚本中已经调用了一次 wx.createCanvas() 而且把创建的 Canvas 对象作为全局变量暴露了出来，因此在代码中就可以直接使用了；这就解释了为什么代码明明没有定义却可以直接执行",(0,r.jsx)(n.code,{children:"const Context = canvas.getContext('webgl')"}),"。"]}),"\n",(0,r.jsxs)(n.li,{children:["因为在",(0,r.jsx)(n.code,{children:"ThreeJS基础"}),"那一章中详细的讲解过了，因此这里省略了",(0,r.jsx)(n.code,{children:"initRender"}),"、",(0,r.jsx)(n.code,{children:"initCamera"}),"、",(0,r.jsx)(n.code,{children:"initScene"}),"、",(0,r.jsx)(n.code,{children:"initLight"}),"、",(0,r.jsx)(n.code,{children:"initObject"}),"以及",(0,r.jsx)(n.code,{children:"render"}),"等方法的具体实现。"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"构建简易魔方",children:["构建简易魔方",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#构建简易魔方",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"出于方便计算的考虑，我们假定魔方中心在坐标系原点；"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:x,alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["根据示例图可知只需要确定",(0,r.jsx)(n.code,{children:"魔方左上角顶点A"}),"以及",(0,r.jsx)(n.code,{children:"小方块边长len"}),"就可以得到所有小方块的中心点；比如如果",(0,r.jsx)(n.code,{children:"点A"}),"的坐标为",(0,r.jsx)(n.code,{children:"(x,y,z)"}),"那么",(0,r.jsx)(n.code,{children:"左上角小方块中心点C"}),"的坐标即为",(0,r.jsx)(n.code,{children:"(x+len/2,y-len/2,z-len/2)"}),";"]}),"\n",(0,r.jsx)(n.p,{children:"具体代码实现过程如下："}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["首先在",(0,r.jsx)(n.code,{children:"js"}),"目录中创建",(0,r.jsx)(n.code,{children:"object"}),"目录，把小游戏中涉及的所有对象统一放入到这个目录中；"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,UklGRk4EAABXRUJQVlA4IEIEAAAwGwCdASosAUkAPp1OokylpKMio3TZULATiWlu3V+aEBNIFaE5WT2byhf5j+k+c39r8AdrDdxuR/zXiQ7zP8k/2PH2yEeqL/PeR78w/0fsFfyv+uiZEAFb9C/VOh8HmwErXXjM1c2I6ke2xfDf5hYXHtJoWXEb/MlQqAMBY3hABSP2cb9Dvi0ACGEtbKA0K9ShvkuTkadLHxyHw5rTr9L6N8sjTENk7VgbJ2lJmXdMiq6WwdUJ6r+pd2gF9U2mdeV2Jpd05yxTLMDZO1YGqUwWx/BsMBlEN7dhm+TC+swNk14AAP77opmBZ1dznn++cGGzLQ/wua9vkrlF0FaT4IjBuih24BUyP4kOnu9Crofq3z/OLFtYorLcYzifCFP5Fxy8G7KsnvtGVlLHMzk/QAPIqXK7Dnf4xJvA+xJI5+X1+USc44Hx+3j2F5Naw3tkkR3tKeUPzP5gfr4cEfCI0v7cDCXpxSbnedzBmT+/9oLGFjPRBrqs/sBle8xZD+NqR6Ltx++wgULUR/i4xhaiSArqmT+P6hw3iUbfG/H9QAS0x/KBSFKE9b/pzBKv89sRlU0VxWuGORfkPFJXXWwt01oJrwcZpUC80Y50rkLHhu/ioswfq4gpqplGu+9BYAAAlfS9GvqTUT35k54w3s8teXlCxl8ieLM9Ugd0pKLr1Z5rOjBtRvmaMl+oWNXrxFdyWTwnS6iExo/UEJ2c4F6IvDDhlS1T4dkcO7HbeL/kmXFVkqH+QThIiYl3ABlccBNqF9bOJ9dfCa1VnAFP9Wd4JnXV/zJ4LJJog0iyxOTiObFz8o1J+laYX6IV/rehXXyMH0818lT3q7K73D6QhDACgOEIdE6vJXlBj2rcD4aXOOaKwLaAVdVQ5e+ldIzsorGCI3J68pbgAulSt9RKDWC8Qpm63RvIvh6HlwFWCYo4WX+59jb7PdeGzfxlHvTkXuWyyOHpL3RT9ltMqjHX02/FUtCJ13GJ+GmQBbeG3OnPHYDkx3qD04qeL7nO9dg0z9f2VErKf48zHf5LOShfS/fnGaayZOwCHGPQWwdskoO/+Dimwbj31qW6D+QruYcVW6VTB4vTcHe6d8BJC3dHUuPy7RcMaf6Wq0XkEj9sUepWwUf2Dx0xv8vo+h7qM/+p4+eeyjVbuS2bbawdH+Cqvqspo/XuIfEMFnp+G5tDrCYF+qXNKSNueGL0E1Vfsy4Korlsz0FVQTneKV3sTfrM7S5a1TJduerqnEprrq/aZCe8Lz+ximJg9ph5JQyQdXTZFKx6dXEyIyZQkFCexLWVvKTvQDShhRDrt4cXhcuGgSjug5DXgmnlnPAE5E5bEK1SdqLx3xAxa4Y2NDddFRzLXw+ey9TTukAMsjX9R/NBgOcTR/kgSFHONGcwiXLizLFNyEAJtTw9gqbOGxhfCtrsdJB3EZ8e1k83ZqLj9gH59Xjwa1MxAAAA",alt:""})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["新建",(0,r.jsx)(n.code,{children:"Rubik.js"}),"魔方对象；"]}),"\n",(0,r.jsxs)(n.li,{children:["引入",(0,r.jsx)(n.code,{children:"ThreeJS"}),"框架代码；"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* Rubik.js 第1行 */\nimport * as THREE from '../threejs/three.js'\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:["定义",(0,r.jsx)(n.code,{children:"基础模型参数"}),"；"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* Rubik.js 第4行至第14行 */\nconst BasicParams = {\n	x: 0,\n	y: 0,\n	z: 0,\n	num: 3,\n	len: 50,\n	//右、左、上、下、前、后\n	colors: ['#ff6b02', '#dd422f',\n		'#ffffff', '#fdcd02',\n		'#3d81f7', '#019d53']\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"阶数"}),"为",(0,r.jsx)(n.code,{children:"3"}),"，",(0,r.jsx)(n.code,{children:"小方块边长"}),"为",(0,r.jsx)(n.code,{children:"50"}),"，",(0,r.jsx)(n.code,{children:"魔方中心"}),"在坐标系",(0,r.jsx)(n.code,{children:"原点"}),"，",(0,r.jsx)(n.code,{children:"colors"}),"为魔方六个面的颜色数组；"]}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsx)(n.li,{children:"生成纹理；"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["在",(0,r.jsx)(n.code,{children:"ThreeJS基础"}),"那一章，我们使用",(0,r.jsx)(n.code,{children:"BoxGeometry"}),"对象创建过",(0,r.jsx)(n.code,{children:"纯色"}),"的正方体，但是在三阶魔方中需要用黑色的间隙区分同一个面的不同小方块，因此需要用到",(0,r.jsx)(n.code,{children:"Texture"}),"纹理对象；"]}),"\n",(0,r.jsxs)(n.p,{children:["在 ThreeJS 框架中既可以通过图片创建纹理对象，也可以直接使用",(0,r.jsx)(n.code,{children:"Canvas"}),"元素创建；"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* Rubik.js 第61行至第78行 */\nfunction faces(rgbaColor) {\n	var canvas = document.createElement('canvas');\n	canvas.width = 256;\n	canvas.height = 256;\n	var context = canvas.getContext('2d');\n	//画一个宽高都是256的黑色正方形\n	context.fillStyle = 'rgba(0,0,0,1)';\n	context.fillRect(0, 0, 256, 256);\n	//在内部用某颜色的16px宽的线再画一个宽高为224的圆角正方形并用改颜色填充\n	context.rect(16, 16, 224, 224);\n	context.lineJoin = 'round';\n	context.lineWidth = 16;\n	context.fillStyle = rgbaColor;\n	context.strokeStyle = rgbaColor;\n	context.stroke();\n	context.fill();\n	return canvas;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"faces"}),"函数接收颜色参数然后返回如下图案的 Canvas 元素；"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,UklGRjwCAABXRUJQVlA4IDACAADwHQCdASoBAQEBPp1OokwlpKMiJrEYALATiWVu4XVQ8EEDjAbYC7gN51Ig4At9Z4F8wlbfvCxBkt3HTaKV+Ipz1PVbSMecdRocew+LZHgPOWiR4DwLTfxQQ0mSGWzbOo9OklMEkyQy2ZMDljt1x0pU+bPW8Uweds2zxb/RH9uBMkMtm2eHUuyQmJJkhls2et4pg87Ztni3+iP7cCZIZbNs8OpdkhMSTJDLZs9bxTB52zbPFv9Ef24EyQy2bZ4dS7JCYkmSGWzZ63imDztm2eLf6I+5S7JfQMhJQYSxhiKc9T1uljDEU56jmuCpFbugBuWiR4DzlomucAD++2VtYRmfKcZOznVOiZ7OqboZSfjv9+hYIov3Lx7Wd+NYP55VA0K8uheKsZmdh7mY7kgAeffGU+y93pyRPTdXX/8ip0Wq7Di67cjm90pTIX8sPO20eaoDTiA58VljuQ2T09XyowOcjEL5UYHORiF8qMDnIxC+VGBHiB2gs78QfpojNfpTqXDrc53kZLuQ8sAAAWNLEQQSgICHwTwrEJ31CF2nSDPPhB0PMg9FyQfLzIPRckHy8yD0XJB80kD1tkiO9NvEO3ZEL/5Fe8C+E3k9pdNAj7FskhCg/uxo07QXB9OzIEJOvDgXFZuFmjqStVinp7+BRml5UC2korpVMl0U+7E96Kz2mRnDjWfy2fd03Hy1/OE36lrk58FxOpo2F8QfdKrvEGznCJFnda5zg9gVCiEzOAAAAA==",alt:""})}),"\n",(0,r.jsxs)(n.ol,{start:"6",children:["\n",(0,r.jsx)(n.li,{children:"构建简易魔方；"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* Rubik.js 第23行至第56行 */\nfunction SimpleCube(x, y, z, num, len, colors) {\n	//魔方左上角坐标\n	var leftUpX = x - num/2*len;\n	var leftUpY = y + num/2*len;\n	var leftUpZ = z + num/2*len;\n\n	var cubes = [];\n	for (var i = 0; i < num; i++) {\n		for (var j = 0; j < num * num; j++) {\n\n			var myFaces = [];\n			for (var k = 0; k < 6; k++) {\n				myFaces[k] = faces(BasicParams.colors[k]);\n			}\n\n			var materials = [];\n			for (var k = 0; k < 6; k++) {\n				var texture = new THREE.Texture(myFaces[k]);\n				texture.needsUpdate = true;\n				materials.push(new THREE.MeshLambertMaterial({ map: texture}));\n			}\n\n			var cubegeo = new THREE.BoxGeometry(len, len, len);\n			var cube = new THREE.Mesh(cubegeo, materials);\n\n			//依次计算各个小方块中心点坐标\n			cube.position.x = (leftUpX + len / 2) + (j % num) * len;\n			cube.position.y = (leftUpY - len / 2) - parseInt(j / num) * len;\n			cube.position.z = (leftUpZ - len / 2) - i * len;\n			cubes.push(cube)\n		}\n	}\n	return cubes;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"SimpleCube"}),"函数参数说明："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"x, y, z"}),"表示魔方中心点；"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"num"}),"表示魔方阶数；"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"len"}),"表示小方块宽高；"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"colors"}),"表示魔方六个面颜色数组；"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["先定义一个小方块数组",(0,r.jsx)(n.code,{children:"cubes"}),"，然后在",(0,r.jsx)(n.code,{children:"i"}),"、",(0,r.jsx)(n.code,{children:"j"}),"两个 for 循环中创建小方块，创建小方块之前，先需要根据颜色数组",(0,r.jsx)(n.code,{children:"colors"}),"生成小方块六个面的图案；"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* Rubik.js 第35行 */\nmyFaces[k] = faces(BasicParams.colors[k]);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["再然后根据 Canvas 图案生成",(0,r.jsx)(n.code,{children:"纹理"}),"（把 Canvas 元素直接传入到",(0,r.jsx)(n.code,{children:"Texture"}),"对象中即可）；另外",(0,r.jsx)(n.code,{children:"needsUpdate"}),"属性需要设置为",(0,r.jsx)(n.code,{children:"true"}),"才能保证创建纹理时 Canvas 内容已经加载完成了，如果不设置为",(0,r.jsx)(n.code,{children:"true"}),"则会出现纹理一片漆黑的情况；"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* Rubik.js 第40行至第41行 */\nvar texture = new THREE.Texture(myFaces[k]);\ntexture.needsUpdate = true;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["接着根据纹理生成",(0,r.jsx)(n.code,{children:"材质"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* Rubik.js 第42行 */\nmaterials.push(new THREE.MeshLambertMaterial({ map: texture}));\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["这里还是使用",(0,r.jsx)(n.code,{children:"MeshLambertMaterial"}),"兰伯特材质，需要注意的是创建纯色的兰伯特材质时设置的是",(0,r.jsx)(n.code,{children:"color"}),"参数：",(0,r.jsx)(n.code,{children:"new THREE.MeshLambertMaterial( {color: 0xff0000} )"}),"；但是通过纹理创建时需要设置其",(0,r.jsx)(n.code,{children:"map"}),"参数：",(0,r.jsx)(n.code,{children:"new THREE.MeshLambertMaterial({ map: texture})"}),"。"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* Rubik.js 第45、46行 */\nvar cubegeo = new THREE.BoxGeometry(len, len, len);\nvar cube = new THREE.Mesh(cubegeo, materials);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["通过",(0,r.jsx)(n.code,{children:"Mesh"}),"网格对象组合",(0,r.jsx)(n.code,{children:"轮廓"}),"、",(0,r.jsx)(n.code,{children:"材质"}),"即可得到小方块了；"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* Rubik.js 第49行至51行 */\ncube.position.x = (x + len / 2) + (j % 3) * len;\ncube.position.y = (y - len / 2) - parseInt(j / 3) * len;\ncube.position.z = (z - len / 2) - i * len;\n"})}),"\n",(0,r.jsx)(n.p,{children:"最后我们还需要根据推导的规律设置各个小方块的中心点，最终组成魔方。"}),"\n",(0,r.jsxs)(n.ol,{start:"7",children:["\n",(0,r.jsx)(n.li,{children:"定义魔方对象；"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* Rubik.js 第80行至92行 */\nexport default class Rubik {\n    constructor(main) {\n        this.main = main;\n    }\n    \n    model() {\n        this.cubes = SimpleCube(BasicParams.x, BasicParams.y, BasicParams.z, BasicParams.num, BasicParams.len, BasicParams.colors);//生成魔方小正方体\n        for (var i = 0; i < this.cubes.length; i++) {\n          var item = this.cubes[i];\n          this.main.scene.add(item);\n        }\n    }\n}\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"显示魔方",children:["显示魔方",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#显示魔方",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["在",(0,r.jsx)(n.code,{children:"main.js"}),"中引入简易魔方对象代码",(0,r.jsx)(n.code,{children:"Rubik.js"}),"；"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* main.js 第3行 */\nimport BasicRubik from 'object/Rubik.js'\n"})}),"\n",(0,r.jsxs)(n.p,{children:["然后在创建物体函数",(0,r.jsx)(n.code,{children:"initObject"}),"中创建魔方；"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* main.js 第76行至第79行 */\ninitObject() {\n    var rubik = new BasicRubik(this);\n    rubik.model();\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"编译并执行程序会在模拟器中看到如下效果："}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,UklGRj4EAABXRUJQVlA4IDIEAACwJQCdASq1AEABPp1Oo0slpKOhp5TYwLATiWVu7tFRjJmuoXT7B2RN2bf73+m/uA2wHjEesz6AN5L/j2++5EJcp76k8vE3KHufFInTAZrGi4nzV8VdXyuTpo/iqT0+jwnFGUwbErY0BDPDYFs+K4MjDJYo0VwZMRVxRorg1XVHOKNFdlHzcW6+D6x2Oh2W3MqMzQSwlvfBLyQz1SyYX3fZO536PlMBBD4tRSwryadxC41Pk3Jzu9mEpXfrKP/r4nXye+BaVS2Lmq8YVduLW9U8n+68GT2kVNtIT9mdHkmjuaO/tRzki2+0JV32TuoKqgUUlG2tEf9D6rtplFJItQrMnLKSZxl8AKcEnSt4H1OU7JpUXOzB8ibiuDItaOLZ8VwZGGSxRorgyYirijRXBquqOcUaK6QAAP79J9MoibgWHC1ESw2jM4MWzYd+mq/QHucy2O9cBk0nfRzW0VzODJ0iAOWpMsGtMrEh5s97MKCJfOl4xnRJK9FHKu0WNqNo3kTPA0xTDotrrP1bCenERHMUhFIhOSv3KYmXfUyDFevSh/pvuQ/gExB10sTYJb1IC8hO18LYHmtR4yquBjHI2Uw2x3Y+0hpJUNXQuJkJfHMVrESJdNAAAAABi97XQjb+LiLsVbDtTGjSs49dtk7iMw1jXGbY0fj5cItcQ99qErFswpBDsqbIjtqzFQTYAbW6dEDc7/dcm8R79SVNLXtwCcn4GPkPI1uYTNLmaYR9bdRjm69j8/PG4+RGWVOyh+8D5It2ZRrvsZ7uunpV99Fv9I+n3Fch3r494qpnJG7o+f/uEFad7P9kdjXS+f6Z0pmz7/p0mvyCYTp/dE6bhA8q/WYnQ7PNKG/oMtXBqpUpFnWgh8YH8mULOOkbaoSKJPPVvsuP9lsWCZWW7nKIkwQEI3iO4p99owD9C3X/omm6TfJ2yei8aNnUHhY2jjvX+lOV6mVTbsoJb9IKUw3/whNRhymn3chSDzS6EmrrXPe0/3ITTPkV2U0dBgv52X7UfQqNEg5+c9j2JNJq41PPN9UQhUubeYN5eslnDdhm/1YprQb1k/oukXUdQA9rL9lnuQXAUBD2/YuES0iuelIAytGyok+xw0HHsDv+K8GCOayDIwD4QDoTBWQ1DYcynt+wlNDr8o1O1G4POA/gjUdNyN10l3/tnD49PNFQ7WX2zVmAZBeWC8LgOtJUCbuKbmW2NSIr/6wwwdZUqcQdnBLixANs+jU5u83tpZVup/nUYPXFVTQT6AnnZ6LSmaEqDAYyyiHcDKV6QLznTX9jyabOFGVgI+z8ttSChCAboB+Gqib+kk+1s5ba9llTbZLt/i8x3Z7qFlCHck40d6I2WfBHdiBOKNqIMQB2xd58oi0UtMb1KHHZ02vk2l6yjZFqr5iq5UlFwBEwZMnIohVgAAAAAAAAAAAAAAA=",alt:""})}),"\n",(0,r.jsx)(n.p,{children:"有人可能会纳闷了折腾这么久，就整出个这玩意吗？"}),"\n",(0,r.jsxs)(n.p,{children:["其实之所以会这样是因为",(0,r.jsx)(n.code,{children:"我们设置的相机的位置是在坐标系的Z轴，魔方的中心在坐标系原点，它们刚好处于同一条直线上，导致显示出来的是魔方的正面"}),"。"]}),"\n",(0,r.jsxs)(n.h2,{id:"视角控制",children:["视角控制",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#视角控制",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"为了解决只能看到魔方正面这个问题，我们需要改变视角；"}),"\n",(0,r.jsx)(n.p,{children:"在 ThreeJS 框架中提供了很多视角控制对象，并有对应的例子演示："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["飞行控件",(0,r.jsx)(n.code,{children:"FlyControls"}),"；"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:j,alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["该控件可以用来进行飞行模拟，用键盘和鼠标控制相机的移动和旋转，官网提供了",(0,r.jsx)(n.code,{children:"示例程序"}),"，链接为：",(0,r.jsx)(n.a,{href:"https://threejs.org/examples/?q=contr#misc_controls_fly",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(n.a,{href:"https://threejs.org/examples/?q=contr#misc_controls_fly",target:"_blank",rel:"noopener noreferrer",children:"https://threejs.org/examples/?q=contr#misc_controls_fly"})}),"，大致效果如图中所示，有兴趣可以去示例程序",(0,r.jsx)(n.code,{children:"体验"}),"以及",(0,r.jsx)(n.code,{children:"查看用法"}),"以及",(0,r.jsx)(n.code,{children:"具体实现"}),"。"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["第一人称控件",(0,r.jsx)(n.code,{children:"FirstPersonControls"}),"；"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["喜欢玩游戏的同学对这种视角应该很熟悉，也是鼠标和键盘结合起来控制视角，示例程序链接为：",(0,r.jsx)(n.a,{href:"https://threejs.org/examples/?q=cont#misc_controls_pointerlock",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(n.a,{href:"https://threejs.org/examples/?q=cont#misc_controls_pointerlock",target:"_blank",rel:"noopener noreferrer",children:"https://threejs.org/examples/?q=cont#misc_controls_pointerlock"})}),"。"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["轨道空间控件",(0,r.jsx)(n.code,{children:"OrbitControls"}),"；"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["这种视角类似于轨道中的卫星围绕地球转动时的观察视角，在 PC 上可以用鼠标控制相机环绕观察，在移动端则是手指触摸控制，示例程序链接为：",(0,r.jsx)(n.a,{href:"https://threejs.org/examples/?q=cont#misc_controls_orbit",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(n.a,{href:"https://threejs.org/examples/?q=cont#misc_controls_orbit",target:"_blank",rel:"noopener noreferrer",children:"https://threejs.org/examples/?q=cont#misc_controls_orbit"})}),"。"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OrbitControls"}),"控制器刚好可以用来观察上边创建的简易三阶魔方，用法很简单："]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["首先得去 ",(0,r.jsx)(n.a,{href:"https://github.com/mrdoob/three.js",target:"_blank",rel:"noopener noreferrer",children:"ThreeJS框架的Github仓库"})," 下载该控制器的源代码，然后放入到项目中；"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:o,alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["红框中的",(0,r.jsx)(n.code,{children:"OrbitControls.js"}),"文件即是，其它文件为其它控制器的源代码；"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["然后在小游戏主逻辑脚本",(0,r.jsx)(n.code,{children:"main.js"}),"中引入；"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"require('threejs/OrbitControls.js')\n"})}),"\n",(0,r.jsx)(n.p,{children:"这时编译项目会发现有报错："}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:t,alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["这是因为",(0,r.jsx)(n.code,{children:"OrbitControls"}),"控制器源代码中直接用",(0,r.jsx)(n.code,{children:"全局变量"}),"的方式使用的 ThreeJS 框架的全局对象",(0,r.jsx)(n.code,{children:"THREE"}),"，解决办法是在使用之前引入即可；"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:h,alt:""})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"初始化控制器"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["因为控制器和相机有关，因此初始化代码放到",(0,r.jsx)(n.code,{children:"initCamera"}),"方法中；"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* main.js 第45行至第56行 */\ninitCamera() {\n    this.camera = new THREE.PerspectiveCamera(45, this.width / this.height, 1, 1500);\n    this.camera.position.set(0, 0, 300 / this.camera.aspect);\n    this.camera.up.set(0, 1, 0);//正方向\n    this.camera.lookAt(this.viewCenter);\n    \n    //轨道视角控制器\n    this.orbitController = new THREE.OrbitControls(this.camera, this.renderer.domElement);\n    this.orbitController.enableZoom = false;\n    this.orbitController.rotateSpeed = 2;\n    this.orbitController.target = this.viewCenter;//设置控制点\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"enableZoom"}),"设置为",(0,r.jsx)(n.code,{children:"false"}),"表示禁止缩放，",(0,r.jsx)(n.code,{children:"rotateSpeed"}),"和环绕转动的速度有关，控制点",(0,r.jsx)(n.code,{children:"target"}),"表示环绕中心，因为简易三阶魔方的中心在原点因此控制器的环绕中心也设置为原点。"]}),"\n",(0,r.jsx)(n.p,{children:"到这一步，按道理应该都准备就绪了，但是编译执行却发现页面空白一片；"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:a,alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["原因在于尽管我们已经引入了",(0,r.jsx)(n.code,{children:"适配器脚本"}),"但是控制器代码还是不能完全兼容微信小游戏环境，需要再进行一些修改。"]}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"控制器源代码适配"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"OrbitControls"}),"控制器每次改变相机位置时都会调用其",(0,r.jsx)(n.code,{children:"update"}),"方法；"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:l,alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["打断点调试时会发现",(0,r.jsx)(n.code,{children:"sphericalDelta"}),"变量的值有问题，这个变量是用来控制相机环绕时位置的",(0,r.jsx)(n.code,{children:"经度"}),"和",(0,r.jsx)(n.code,{children:"纬度"}),"的，如果有问题那么会导致相机位置的更新也出问题，从而页面就空白了；"]}),"\n",(0,r.jsxs)(n.p,{children:["在源代码中搜索",(0,r.jsx)(n.code,{children:"sphericalDelta"}),"变量会发现只有一个地方会对这个变量进行赋值；"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:d,alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["而在赋值时就已经出现了问题，接着再查",(0,r.jsx)(n.code,{children:"rotateLeft"}),"方法，在",(0,r.jsx)(n.code,{children:"handleTouchMoveRotate"}),"和",(0,r.jsx)(n.code,{children:"handleMouseMoveRotate"}),"方法中均有调用，前者是用于处理移动端手指触摸事件，后者是用于处理 PC 端鼠标事件，在微信小游戏中只需要考虑前者；"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:i,alt:""})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"element"}),"是初始化控制器时传入的",(0,r.jsx)(n.code,{children:"Canvas"}),"元素，在微信小游戏中通过",(0,r.jsx)(n.code,{children:"clientHeight"}),"是没办法获取其高度的，需要改为",(0,r.jsx)(n.code,{children:"height"}),"属性。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/* OrbitControls.js 第614行至第616行 */\nrotateLeft(2 * Math.PI * rotateDelta.x / element.height);\nrotateUp(2 * Math.PI * rotateDelta.y / element.height);\n"})}),"\n",(0,r.jsx)(n.p,{children:"到此应该是没有问题了，编译运行，手指滑动屏幕就可以观察简易三阶魔方的各个面了。"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,r.jsxs)(n.h2,{id:"总结",children:["总结",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"在这一章中我们学会了如何在微信小游戏中使用 ThreeJS 框架，并构建出一个静态的简易三阶魔方；"}),"\n",(0,r.jsxs)(n.p,{children:["另外",(0,r.jsx)(n.code,{children:"对于 ThreeJS 框架中不熟悉的知识点可以多去查看官方示例了解其作用以及使用方法；遇到问题需要调试源代码时也不需要慌，没必要了解其每一行代码，先把握整体结构然后逐步定位问题即可。"})]})]})}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,c.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(b,{...e})}):b(e)}let g=f;f.__RSPRESS_PAGE_META={},f.__RSPRESS_PAGE_META["%E5%9F%BA%E4%BA%8E%20ThreeJS%20%E6%A1%86%E6%9E%B6%E7%9A%84%E9%AD%94%E6%96%B9%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F%E5%AE%9E%E8%B7%B5%2F4.%E9%9D%99%E6%80%81%E9%AD%94%E6%96%B9.md"]={toc:[{text:"前言",id:"前言",depth:2},{text:"概述",id:"概述",depth:2},{text:"项目初始化",id:"项目初始化",depth:2},{text:"主逻辑初始化",id:"主逻辑初始化",depth:2},{text:"构建简易魔方",id:"构建简易魔方",depth:2},{text:"显示魔方",id:"显示魔方",depth:2},{text:"视角控制",id:"视角控制",depth:2},{text:"总结",id:"总结",depth:2}],title:"4.静态魔方",headingTitle:"4.静态魔方",frontmatter:{}}}}]);