"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["17634"],{662448:function(e,n,r){r.r(n),r.d(n,{default:()=>A});var t=r(552676),s=r(740453);let c=r.p+"static/image/a970d0a82192ca29c9946f942d295469.5d962ce0.webp",i=r.p+"static/image/c5e3f031cd7261ce596b85f0bdda8ad9.37a07ef6.webp",o=r.p+"static/image/c525b3012db99548e05738ce9451752d.8d1282e9.webp",d=r.p+"static/image/862a3140108b53bdf5b98d36df970d48.33e1ee81.webp",l=r.p+"static/image/d8379a804e3c06cba4b3e8bb70cdb552.93c54525.webp",a=r.p+"static/image/171bb1b57472bb1eaa6d434a851123ba.840a2dcd.webp",p=r.p+"static/image/30c1ae91110f89dd1c0b6bde7b527593.e14ab5cd.webp";function h(e){let n=Object.assign({h1:"h1",a:"a",blockquote:"blockquote",p:"p",img:"img",h2:"h2",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",pre:"pre",strong:"strong",ul:"ul",li:"li"},(0,s.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"5dom-查询下页面元素的参照物查询和优先级",children:["5.DOM 查询（下）：页面元素的参照物查询和优先级",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#5dom-查询下页面元素的参照物查询和优先级",children:"#"})]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["代码仓库：",(0,t.jsx)(n.a,{href:"https://github.com/czm1290433700/test_demo",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/czm1290433700/test_demo"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"上节课我们学习了页面元素的渲染和行为查询，使用了 render 进行我们组件的渲染，并且从 screen 对象中获取到了 document.body 的区域查询。对于查询 API，种类繁多，上节课我们已经就查询 API 的行为，也就是前缀进行了分类，分别学习了单查和多查下的 get、query，但其实查询的 API 类型还远不止此。"}),"\n",(0,t.jsx)(n.p,{children:"我们已经接触到了 text，这就是我们将要介绍的参照物分类。虽然查询的 API 数量很多，但是我们可以根据维度来拆分。"}),"\n",(0,t.jsx)(n.p,{children:"上节课我们根据行为来分类，已经将 API 归为了 get、 find、 query 三类，这个决定了查询 API 命名的前缀。而查询的参照物决定了 API 的后缀是什么，以 getByText 为例，它使用 get 的查询行为，以 Text 为查询的参照物进行单查，可以看到这样分类，几十种 API 也可以快速理解到它们各自的用途。"}),"\n",(0,t.jsx)(n.p,{children:"那么查询的参照物有几种呢？大家可以结合下图初步理解。"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:p,alt:""})}),"\n",(0,t.jsxs)(n.h2,{id:"按照参照物分类",children:["按照参照物分类",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#按照参照物分类",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"如果用过 Enzyme 的同学应该比较清楚，在 Enzyme 中，我们选取元素是采用 CSS 类或者 id 作为参照物，大家可能很奇怪这些参照物是什么？直接用 CSS 类或者 id 来选取不是更方便精准吗？"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:a,alt:""})}),"\n",(0,t.jsxs)(n.p,{children:["在 ",(0,t.jsx)(n.a,{href:"https://juejin.cn/book/7174044519350927395/section/7176612133294063668",target:"_blank",rel:"noopener noreferrer",children:"2 | 技术选型：React Testing Library Or Enzyme？"})," 我们就有介绍，React Testing Library 是站在用户视角进行测试，CSS 类名等则是针对代码细节的单测。《Google 软件测试之道》中有提到，测试用例和软件的使用方式越相近，就是越稳健的测试。这也是 React Testing Library 并不建议以代码细节作为参照物的原因，这些从用户视角并不容易感知到，容易导致用例脆弱、不稳定。"]}),"\n",(0,t.jsx)(n.p,{children:"言归正传，我们来看下 React Testing Library 提供的查询参照物，首先看下 role（角色），这个是我们最常用的参照物，着重讲解这一块，通过这个可以选取几乎任何我们需要的元素。"}),"\n",(0,t.jsx)(n.p,{children:"那么什么是角色呢？要理解角色的含义，首先我们需要来了解一个 W3C 语义 ---- ARIA。"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"ARIA (Accessible Rich Internet Applications) 是一组属性，用于定义使残障人士更容易访问 Web 内容和 Web 应用程序（尤其是使用 JavaScript 开发的应用程序）的方法。"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["简单来说，我们使用的 div、button 等标签，即使没有加任何属性，也有一个隐性的 ARIA role 属性来表示它的语义，就拿 button 为例，",(0,t.jsx)(n.code,{children:"<button>按钮</button>"})," 其实可以看作是",(0,t.jsx)(n.code,{children:'  <button role="button">按钮</button> '}),"，这个就是 role 查询。"]}),"\n",(0,t.jsxs)(n.p,{children:["下面列举一些常用的 div 和它们的隐藏 role ，更详细的隐藏 role 属性大家可以看 ",(0,t.jsx)(n.a,{href:"https://www.w3.org/TR/html-aria/#index-aria-button",target:"_blank",rel:"noopener noreferrer",children:"W3C 对应的提案"}),"。"]}),"\n",(0,t.jsxs)(n.table,{children:["\n",(0,t.jsxs)(n.thead,{children:["\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.th,{children:"标签"}),"\n",(0,t.jsx)(n.th,{children:"隐性 ARIA role"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.tbody,{children:["\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"a , href"}),"\n",(0,t.jsx)(n.td,{children:"link"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"a （没有 href 属性）, body, div, span"}),"\n",(0,t.jsx)(n.td,{children:"generic"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"form"}),"\n",(0,t.jsx)(n.td,{children:"form"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"h1 到 h6"}),"\n",(0,t.jsx)(n.td,{children:"heading"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"html"}),"\n",(0,t.jsx)(n.td,{children:"document"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"img"}),"\n",(0,t.jsx)(n.td,{children:"img"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"p"}),"\n",(0,t.jsx)(n.td,{children:"paragraph"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"table"}),"\n",(0,t.jsx)(n.td,{children:"table"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"ul"}),"\n",(0,t.jsx)(n.td,{children:"list"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"li"}),"\n",(0,t.jsx)(n.td,{children:"listitem"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"我们来试验一下，通过默认的 role 能否查询到对应的元素呢？我们给 App.tsx 加一个 button，然后扩展一下之前的测试用例。"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <button>按钮</button>\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n\n  test("default role", () => {\n    render(<App />);\n    const button = screen.getByRole("button");\n    screen.debug(button);\n  });\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:"运行看一下控制台输出了什么，可以看到，会选取到我们新增的 button 元素。"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,t.jsx)(n.p,{children:"除了默认的 role，我们也可以自己加 role 对标签进行覆盖，比如下面的例子。"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <button role="tab">自定义按钮</button>\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n  test("defined role", () => {\n    render(<App />);\n    const button = screen.getByRole("tab");\n    screen.debug(button);\n  });\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:["可以看到，控制台可以输出",(0,t.jsx)(n.code,{children:"自定义按钮"}),"，自定义的 role 可以对默认的 role 属性进行覆盖，不过值得一提的是，",(0,t.jsx)(n.strong,{children:"我们不应该为了选取方便就错误或者重复添加 role"}),"，除非是一个自定义的 UI 组件，不然大部分我们需要定位的场景其实都是有默认的 ARIA 语义的。"]}),"\n",(0,t.jsx)(n.p,{children:"那么就会存在一个问题了，既然说 role 可以选取到大部分我们需要的场景，那么对于多个相同 role 的元素，我们怎么选取需要的那一个呢，难道只能重复加 role 来新增角色选取么？"}),"\n",(0,t.jsx)(n.p,{children:'事实上除了基础的角色 role 外，W3C 在 ARIA 语义的提案中还包含了 aria 属性，这个语义表明 role 语义的状态和属性，比如 “按压” 的 button， "隐藏" 的 button 等。'}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:l,alt:""})}),"\n",(0,t.jsx)(n.p,{children:"我们先来看下面的例子，理解一下 aria 属性的作用，以及是怎么和 role 配合使用的。"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <button aria-pressed></button>\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n  test("aria", () => {\n    render(<App />);\n    const button = screen.getByRole("button", { pressed: true });\n    screen.debug(button);\n  });\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:["可以看到控制台中将输出具备 ",(0,t.jsx)(n.code,{children:"aria-pressed"})," 属性的 button。"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:d,alt:""})}),"\n",(0,t.jsxs)(n.p,{children:["aria 属性用来表示对应角色下的额外特殊含义，可以帮助我们在多个相同角色中选中我们需要的那一个，role 查询支持包含",(0,t.jsx)(n.code,{children:"aria-pressed"})," 在内的 7 种筛选项，它们在 W3C 提案中是这样含义的："]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"aria-hidden"}),"： 不在 DOM 树上访问的元素；"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"aria-selected"}),": 元素是否被选中；"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"aria-checked"}),": 元素是否被勾选；"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"aria-current"}),": 当前选中的元素；"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"aria-pressed"}),": 被按压的元素；"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"aria-expanded"}),":元素是否被展开；"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"aria-level"}),": 区域的等级，值得一提的是，h1 - h6 会有默认的",(0,t.jsx)(n.code,{children:"aria-level"}),"属性，值对应1-6；"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"aria-describedby"}),": 可以通过描述来定位额外的元素。"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["再次强调一下， aria 属性并不会对显示造成影响，只是语义上的属性。下面我们以 ",(0,t.jsx)(n.code,{children:"aria-describedby"})," 为例，看看 aria 属性是怎么应用的。"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <button aria-describedby="description">\n          <div id="description">自定义aria按钮</div>\n        </button>\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n  test("aria-describedby", () => {\n    render(<App />);\n    const button = screen.getByRole("button", {\n      description: "自定义aria按钮",\n    });\n    screen.debug(button);\n  });\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:["控制台输出了自定义 aria 按钮的模块，",(0,t.jsx)(n.code,{children:"aria-describedby"})," 提供了更多的可能性，使得我们可以通过属性外的描述性文案来对应指定的元素。"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:o,alt:""})}),"\n",(0,t.jsx)(n.p,{children:"除了官方文档中的这 8 种以外，其实还有一个筛选项 name，没有在官网中提及，但是，是一个非常有用的筛选项。"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:i,alt:""})}),"\n",(0,t.jsxs)(n.p,{children:["这个筛选项可以查询可访问的名称，比如标签、文本内容，或者是",(0,t.jsx)(n.code,{children:"aria-label"})," 属性，通常我们业务查询中，当某一个角色数量很多，但是又不好通过别的属性来筛选时，我们就可以通过这个和 ",(0,t.jsx)(n.code,{children:"aria-label"}),"配合使用来筛选出我们需要的内容，比如下面的例子："]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <div aria-label="test_note">1234</div>\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n  test("aria-label", () => {\n    render(<DomQuery />);\n    const note = screen.getByRole("generic", { name: "test_note" });\n    screen.debug(note);\n  });\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:"最重要的 role 查询到这里就介绍完了，虽然说 role 的确可以选中所有预期的元素，但是 role 和 aria 的属性比较多，加上国内非障碍网页应用得不多，所以大家可能记不住，React Testing Library 还提供了其他的几种参照物来协助筛选，在一些特定的场景下使用，往往会有奇效。"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"标签文本(labelText)：针对 label 标签的 text 查询，通过这个可以查询到对应 label 的输入节点（比如 input)，我们来看下面的例子。"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <label>\n        testLabel\n        <input />\n      </label>\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n   test("labelText", () => {\n    render(<DomQuery />);\n    const label = screen.getByLabelText("testLabel");\n    screen.debug(label);\n  });\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:["控制台输出出来，可以看到，将会输出这个 label 所对应的输入，也就是",(0,t.jsx)(n.code,{children:"<input />"}),"。"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"占位符文本（placeholdertext）： 通过 placeholder 来查询，也可以有效查到对应的表单元素，如果你没有使用 label 标签的时候，可以使用这个来作为替代，来看下面的例子。"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <input placeholder="a query by placeholder" />\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n   test("placeholder", () => {\n    render(<DomQuery />);\n    const placeholderInput = screen.getByPlaceholderText(\n      "a query by placeholder"\n    );\n    screen.debug(placeholderInput);\n  });\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"文本（text): 我们之前例子用过很多次的老朋友了，直接通过标签中间的文本来查找，大家可以参考之前 test1 的那个用例，这边就不再举例了。"}),"\n",(0,t.jsx)(n.li,{children:"表单value(displayValue): 根据表单元素的值来查询，也就是对应的 value 属性，当然不仅仅是通过value，表单 onchange 进来或者是 defaultValue 也是同样可以生效的，我们来看下面的例子。"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <input defaultValue="a query by value" readOnly />\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n   test("value", () => {\n    render(<DomQuery />);\n    const valueInput = screen.getByDisplayValue("a query by value");\n    screen.debug(valueInput);\n  });\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Img alt(altText): 这个则是根据 img 的 alt 来查询，相比之前的一些查询方式，这种从用户视角上就需要满足一定情况才能看见了（图片不能正常加载），我们来看下面的例子。"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <img alt="a query by alt" />\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n   test("alt", () => {\n    render(<DomQuery />);\n    const altImg = screen.getByAltText("a query by alt");\n    screen.debug(altImg);\n  });\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"标题（title): title 属性可能大家没怎么用过（说实话，我也几乎没用过它 hahaha），类似 popover 的效果，这个属性也是可以用来查询的，大家看看例子就好。"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <span title="a query by title" />\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n   test("title", () => {\n    render(<DomQuery />);\n    const title = screen.getByTitle("a query by title");\n    screen.debug(title);\n  });\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"后门（testid): 最后的这个就特殊点了，这个其实是一个后门的查询方式，通过新增 data-testid 属性来进行查询，这个对整个页面的语义和功能是没有任何影响的，相当于只是我们单独加的一个标识来确定指定的区域，一般只有实在不知道怎么选取需要的区域，才会去使用它，我们来看下面的例子。"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/components/DomQuery/index.tsx\nimport { FC } from "react";\n\ninterface IProps {}\n\n// 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 |DOM查询(下)：页面元素的参照物查询和优先级》\nexport const DomQuery: FC<IProps> = ({}) => {\n  return (\n    <div>\n      {/* ... other content */}\n      <div data-testid="a not so good query"></div>\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// ./src/__test__/dom_query.test.tsx\nimport React from "react";\nimport { render, screen } from "@testing-library/react";\nimport { DomQuery } from "../components/DomQuery";\n\ndescribe("tests for 《4 | DOM查询(上)：页面元素的渲染和行为查询》 & 《5 | DOM查询(下)：页面元素的参照物查询和优先级》", () => {\n  // ...\n   test("testid", () => {\n    render(<DomQuery />);\n    const testidItem = screen.getByTestId("a not so good query");\n    screen.debug(testidItem);\n  });\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,t.jsx)(n.p,{children:"到这里元素的查询方式我们就学完了，不得不说查询的方式真的很多很多，光根据类别来数，行为分类的 6 种，参照物的 8 种，如果再算上不同的 role 和 aria 属性，有几十种查询的方式，让人眼花缭乱，那么，我们应该怎么合理地应用这些查询方式来选取我们希望使用的 DOM 呢？"}),"\n",(0,t.jsxs)(n.h2,{id:"查询的优先级",children:["查询的优先级",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#查询的优先级",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"我们之前有反复提到，React Testing Library 推荐使用近似用户的角度来书写我们的测试用例，我们的单测与用户的角度越贴近，那么它就是越强健可靠的，只要需求逻辑不发生改变，我们的单测就可以不需要调整。"}),"\n",(0,t.jsx)(n.p,{children:"根据这条原则，其实我们很容易区分查询的优先级，我们可以根据查询的参照物是否用户可见来判断它的优先级，比如说："}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["像 ",(0,t.jsx)(n.code,{children:"getByRole"}),"、 ",(0,t.jsx)(n.code,{children:"getByLabelText"}),"等我们应该主要去使用，因为参照元素对于用户是可见的；"]}),"\n",(0,t.jsxs)(n.li,{children:["对于",(0,t.jsx)(n.code,{children:"getByAltText"})," 、",(0,t.jsx)(n.code,{children:"getByTitle"})," 我们可以考虑去用，但不推荐，因为参照物用户只有在特定场景下才可见；"]}),"\n",(0,t.jsxs)(n.li,{children:["至于",(0,t.jsx)(n.code,{children:"getByTestId"}),"我们尽量不要去用，因为用户既没有办法看到，又没有办法听到，只是我们从代码层面加的一个标识，这种做法和 Enzyme 提供的类名的测试思路是没有区别的。"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)("img",{src:c,alt:""})}),"\n",(0,t.jsxs)(n.h2,{id:"小结",children:["小结",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#小结",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"这节课我们学习了 React Testing Library 参照物层面的分类，如果说行为决定查询 API 的前缀，那么参照物则决定查询 API 的后缀。"}),"\n",(0,t.jsx)(n.p,{children:"从参照物上拆分，我们可以分为 角色 role、标签文本 labelText 等 8种查询方式。其中，角色 role 是我们最常用的方式，通过默认的 aria 角色 role 和属性，我们可以覆盖绝大部分的 DOM 树可见区域，对于自定义的组件，我们也可以去采用自定义 role 的方式来获取，而别的几种查询方式，则提供了一些特定场景下的查询方式，使用上倒是会有奇效。"}),"\n",(0,t.jsx)(n.p,{children:"最后我们还介绍了查询的优先级，与 Enzyme 的测试思路不同的是， React Testing Library 追求的目标是，根据用户的视角来还原测试的场景，这样就可以使得我们的用例与需求功能强绑定，不会因为代码结构的调整和重构影响到测试用例本身。"}),"\n",(0,t.jsxs)(n.p,{children:["所以，",(0,t.jsx)(n.strong,{children:"我们推荐优先使用用户可见的相关查询方式"}),"，比如 role、labeltext 等，尽可能不要使用 textid 去从代码层面上选取某个元素，避免造成测试用例的脆弱。"]}),"\n",(0,t.jsx)(n.p,{children:"现在我们已经学会了怎么去选取页面元素，并且有效合理地使用查询 API，下一步我们就要开始学习断言了。除了 Jest 提供的基础断言外， React Testing Library 提供了一组额外的断言 API 帮助我们更有效优雅地断言我们预期的场景。下节课我们将来学习 React Testing Library 提供了哪些额外的断言 API，并且它们是怎么使用的。"})]})}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}let A=x;x.__RSPRESS_PAGE_META={},x.__RSPRESS_PAGE_META["%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E7%B2%BE%E8%AE%B2%2F5.DOM%20%E6%9F%A5%E8%AF%A2%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0%E7%9A%84%E5%8F%82%E7%85%A7%E7%89%A9%E6%9F%A5%E8%AF%A2%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7.md"]={toc:[{text:"按照参照物分类",id:"按照参照物分类",depth:2},{text:"查询的优先级",id:"查询的优先级",depth:2},{text:"小结",id:"小结",depth:2}],title:"5.DOM 查询（下）：页面元素的参照物查询和优先级",headingTitle:"5.DOM 查询（下）：页面元素的参照物查询和优先级",frontmatter:{}}}}]);