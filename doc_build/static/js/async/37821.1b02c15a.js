"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["37821"],{393987:function(e,c,a){a.r(c),a.d(c,{default:()=>el});var s=a(552676),i=a(740453);let r=a.p+"static/image/ca5534232a095f8c3c2d6a39171ae347.86ffea7f.webp",n=a.p+"static/image/aab46b40dd1dca65ae5b230deaaea26b.606c1716.webp",l=a.p+"static/image/820d078ff8cc31686151fe5fe87cbf2e.3325b032.webp",d=a.p+"static/image/c7c7ce1668363923785a833e146115d7.4eca6e17.webp",t=a.p+"static/image/f5a3f78192bf60461e56242bfb281e45.ee45361e.webp",h=a.p+"static/image/67486cbfa2f3e881c01a2f892d6e734c.ce3983af.webp",p=a.p+"static/image/24d9702e43db0d50bf926d1af6a223db.e7f7854c.webp",x=a.p+"static/image/9a20aae4467eda79952ba236450f514e.11c9ebbc.webp",j=a.p+"static/image/d95721ac6e2700568567b2261fd7492b.c46fab0c.webp",b=a.p+"static/image/383fc274de49ef906aa479e03a6d6643.863fea89.webp",o=a.p+"static/image/2dff1da07d37cae28f9d1a71c9c5bca6.4c259736.webp",f=a.p+"static/image/3886aa71cb0b4790c78ada317b075898.d7155c99.webp",m=a.p+"static/image/a51f94d681da3a1b6198b1ab1e31d35e.162b96a7.webp",g=a.p+"static/image/d44656bb55f895391c2957b8be0e3250.0542d799.webp",w=a.p+"static/image/23015cd81560e30b67c858d84e2f1e7e.2e7e136a.webp",u=a.p+"static/image/28d0768b2bfcb4fca003ff651a502040.71e15770.webp",k=a.p+"static/image/61c52998177cf3b6078e9068df40b196.2b87209e.webp",P=a.p+"static/image/b509f10b67ad5ee5c2d977b73a4337ba.6a41979e.webp",A=a.p+"static/image/545e8729c0846fe3a9a3529d9d82bfc5.89f628c2.webp",S=a.p+"static/image/6f899583c5d88c8b1d85da469655feba.8813bafe.webp",T=a.p+"static/image/13c6c0e37190a42ad8917ba9cb4ab24b.3bec9e4a.webp",V=a.p+"static/image/7b1dbfbfc6bf8d1ef8059bac9d90ce51.af7d353c.webp",B=a.p+"static/image/e0467273ffffd6e6c996898c08926aaa.1c43b128.webp",W=a.p+"static/image/9473a2516c3414f8afd32c93777dcd36.076156f0.webp",C=a.p+"static/image/a77799835029d59c76bb9975c8e52543.f1d6d3c1.webp",X=a.p+"static/image/2f5b8feef6e3eaec4bec45f3f407e3e6.08c30d1e.webp",K=a.p+"static/image/6c1ec37384500c383539f4a00afe2b10.b866eafa.webp",N=a.p+"static/image/2fc4f6c4c209e26e600e27b2fddea6a7.c787457e.webp",O=a.p+"static/image/01fb2daf8aad3c177ff765beeb254f47.6d593a0b.webp",z=a.p+"static/image/1559ea64263c2039d2a09715f025dd4c.1cad683f.webp",Q=a.p+"static/image/fc1be972b92d9a9ca4f78d0c1179f411.a022d50d.webp",v=a.p+"static/image/05bda99a753598afbfdf3240a941e7a9.7bb42a02.webp",y=a.p+"static/image/f2388776600aa12b6cbb87d061b3b57a.7af512be.webp",E=a.p+"static/image/9c90acc6c11b04d67ddc67886453e3e9.323ef637.webp",U=a.p+"static/image/41ba300387536b1a2a921d224c039918.f1478f34.webp",D=a.p+"static/image/d5ef611b8dd40de70f8b644a88edf488.6a5fc44a.webp",R=a.p+"static/image/a91fa37f7bdd2b476b9a9fd36e59ed8a.e82a294a.webp",J=a.p+"static/image/8b3721e833ce8f138c5a3a9364194ab1.ad5d615f.webp",q=a.p+"static/image/f4444e46e0e7b61df69c20a2bb169361.8bc9a3bb.webp",F=a.p+"static/image/054e565c1a96bab69142369daf65870e.5e42b8f6.webp",I=a.p+"static/image/9063c60f6a81ac6aee77138d12860d16.22710810.webp",M=a.p+"static/image/2bc7a8761bdd8de24abab0f87a1a3168.955da901.webp",L=a.p+"static/image/e8008b30c38a012dfbfad590d180a2aa.607e7226.webp",H=a.p+"static/image/7d2b902b7449ebd092031553e1da610b.40c34bd0.webp",G=a.p+"static/image/ccc914e49e4c2348cb660023d5121802.b8cbd566.webp",Y=a.p+"static/image/3dc4da4cb618b964170b35d1926e8fde.99767814.webp",Z=a.p+"static/image/a28e1c16a815b1b294cacc83bfc638ab.bc2f54b1.webp",_=a.p+"static/image/0ff8a93c0d44a77926d712ed06abd528.402c7463.webp",$=a.p+"static/image/f8a1e593ff9117f458585468f53b0886.11aa6de6.webp",ee=a.p+"static/image/932db5a4a1b95b63a764c9f98cd6ecaf.50aa8aa5.webp",ec=a.p+"static/image/4b7066b7e580ea5e9f45d6e9fa9934d4.42789dbf.webp",ea=a.p+"static/image/ac28f3426d97afe451e60a7bd191ef17.aef65905.webp",es=a.p+"static/image/9dcf50cbbc5429a2347160c7610d671f.a8c8a678.webp",ei=a.p+"static/image/0e7aecf0b2f77fff523427569c000daa.0e417d8f.webp";function er(e){let c=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",img:"img",ul:"ul",li:"li",strong:"strong"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.h1,{id:"42charles-全功能速通上",children:["42.Charles 全功能速通（上）",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#42charles-全功能速通上",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"Charles 做为主流的代理工具，有很多强大好用的功能，这两节我们就快速过一遍："}),"\n",(0,s.jsxs)(c.h2,{id:"charles-代理的两种配置方式",children:["charles 代理的两种配置方式",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#charles-代理的两种配置方式",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"网页默认是走系统代理。"}),"\n",(0,s.jsx)(c.p,{children:"可以把 Charles 也设置为系统代理，点击 Proxy > macOS Proxy 即可："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:ei,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"这样就能抓到网页的数据包了。"}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:es,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"或者不把 charles 设置为系统代理，而是 SwitchyOmega 单独指定网页的代理服务为 charles："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:ea,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"这里的代理服务的端口可以在 Proxy > proxy Settings 里看到："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:ec,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"当然，更好的方式是 auto switch，也就是根据条件自动切换。"}),"\n",(0,s.jsx)(c.p,{children:"也就是我们在选项里配置的情景模式："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:ee,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"这两种还是很容易理解的："}),"\n",(0,s.jsxs)(c.ul,{children:["\n",(0,s.jsx)(c.li,{children:"默认都是走系统代理，所以把 charles 配置为系统代理服务器就可以抓包了"}),"\n",(0,s.jsx)(c.li,{children:"网页也可以通过 SwitchyOmega 单独指定代理服务器，这时候请求会直接走 charles"}),"\n"]}),"\n",(0,s.jsxs)(c.h2,{id:"no-caching",children:["no caching",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#no-caching",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"可以让 http 请求禁用缓存，在 Tools > No Caching 里开启："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:$,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"当开启之后，你会发现 header 会带上 cache-control: no-cache："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:_,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"no-cache 的意思是会用本地的缓存，但每次都协商。"}),"\n",(0,s.jsx)(c.p,{children:"而不开启的时候，header 里没有这个："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:Z,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"这就是禁用缓存的实现原理。"}),"\n",(0,s.jsx)(c.p,{children:"其实浏览器的强制刷新也是这么实现的，你可以强刷一下，抓包看看 header。"}),"\n",(0,s.jsx)(c.p,{children:"除了全部请求禁用缓存外，还可以单独指定某些 url 禁用缓存："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:Y,alt:""})}),"\n",(0,s.jsxs)(c.h2,{id:"block-cookies",children:["block cookies",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#block-cookies",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"这个也很容易理解，就是禁用 cookie 和 set-cookie 的 header："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:G,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"在 Chrome DevTools 的 Network 里开启这两个 header 的展示："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:H,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"在开启 block cookies 之前，是有请求携带或设置 cookie 的："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:L,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"开启 block cookies 之后，你会发现所有的 set-cookie 都没有了："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:M,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"但请求还是会带上 cookie，这是因为还没到 charles 那层。"}),"\n",(0,s.jsx)(c.p,{children:"同样的请求，到 charles 看下，就会发现没有 cookie 了："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:I,alt:""})}),"\n",(0,s.jsxs)(c.p,{children:["关闭 block cookies 之后又有了：\n",(0,s.jsx)("img",{src:F,alt:""})]}),"\n",(0,s.jsx)(c.p,{children:"同样，它也可以单独 block 某些 url："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:q,alt:""})}),"\n",(0,s.jsxs)(c.h2,{id:"map-remote",children:["map remote",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#map-remote",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"charles 可以把请求转发给另一个 url，用 Tools > map remote 的功能："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:J,alt:""})}),"\n",(0,s.jsxs)(c.p,{children:["比如把 ",(0,s.jsx)(c.a,{href:"https://juejin.cn",target:"_blank",rel:"noopener noreferrer",children:"https://juejin.cn"})," 转发到 ",(0,s.jsx)(c.a,{href:"https://www.baidu.com",target:"_blank",rel:"noopener noreferrer",children:"https://www.baidu.com"})]}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:R,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"除了在 Tools > map remote 里开启之外，也可以右键 url 来开启："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:D,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"好处是请求信息不用自己填一遍了："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:U,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"之后也可以在 Tools > map remote 里管理："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:E,alt:""})}),"\n",(0,s.jsxs)(c.h2,{id:"map-local",children:["map local",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#map-local",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"可以把请求转发给另一个 url，也同样可以读取本地的文件内容作为响应，也就是 map local。"}),"\n",(0,s.jsx)(c.p,{children:"在 Tools > map local 里，或者右键请求都可以设置："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:y,alt:""})}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:v,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"比如把这个 json 文件的请求换成本地的一个 svg 文件："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:Q,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"map 之前是这样："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:z,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"map 之后就是这样了："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:O,alt:""})}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)(c.strong,{children:"map local 功能在移动端开发的时候还是挺常用的，比如把请求的 js、css 等换成本地刚打包出来的，就可以在线上环境调试本地代码。"})}),"\n",(0,s.jsxs)(c.h2,{id:"mirror",children:["Mirror",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#mirror",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"mirror 可以把响应内容保存在本地："}),"\n",(0,s.jsx)(c.p,{children:"在 Tools > Mirror 里开启 mirror 功能："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:N,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"指定保存的位置，之后再访问 url，就会把响应内容保存下来："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:K,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"当然，我们没必要全部保存，也可以开启只 mirror 选择的 url，然后指定 url："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:X,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"之后在保存的目录下就可以看到该请求的响应数据的文件："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(c.p,{children:"但是这个内容是不能修改的，每次刷新都会覆盖，这也是 mirror 镜像的含义。"}),"\n",(0,s.jsx)(c.p,{children:"但是可以配合 map local 使用，比如把这个响应保存下来，然后再复制到别的地方修改之后再 map local。"}),"\n",(0,s.jsxs)(c.h2,{id:"rewrite",children:["rewrite",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#rewrite",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"除了转发请求外，自然也支持对请求做修改，也就是 rewrite 功能。"}),"\n",(0,s.jsx)(c.p,{children:"在 Tools > rewrite 里开启："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:C,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"支持修改的包括 header、host、path、url、query，response status、body，也就是所有的内容都可以改："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:W,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"比如我添加一个 query param："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:B,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"效果如下："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:V,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"这里操作的时候，如果希望 charles 一直在最上面，可以在 charles > preferences 里开启 always on top："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:T,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"它就一直在上面了："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:S,alt:""})}),"\n",(0,s.jsxs)(c.h2,{id:"block-list",children:["block list",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#block-list",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"bloack list 可以禁止一些 url 的请求："}),"\n",(0,s.jsx)(c.p,{children:"在 Tools > block list 里："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:A,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"处理方式可以是 断开连接或者返回 403。"}),"\n",(0,s.jsx)(c.p,{children:"当然，也可以右键请求来把它加入到 block list："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:P,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"比如当设置 block 的 url 的时候："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:k,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"效果是这样的："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:u,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"当你需要模拟请求失败的时候，可以用这个功能。"}),"\n",(0,s.jsxs)(c.h2,{id:"allow-list",children:["allow list",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#allow-list",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"allow list 和 block list 正好反过来，这个是只允许列表中的 url 的请求："}),"\n",(0,s.jsx)(c.p,{children:"比如当设置了 allow list 的时候："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:w,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"所有不在列表中的请求都会失败，可以通过 status-code:0 的过滤器过滤出来："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:g,alt:""})}),"\n",(0,s.jsxs)(c.h2,{id:"ssl-proxying",children:["ssl proxying",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#ssl-proxying",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"https 的代理是很常用的，这个我们上节讲过，需要安装证书到系统。"}),"\n",(0,s.jsx)(c.p,{children:"默认抓取到的 https 的数据是加密过的："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:m,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"因为 https 会用证书里的公钥加密请求，用私钥加密响应数据："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:f,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"想要抓取明文数据，需要把证书换成 charles 的："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:o,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"首先，在 Proxy >  SSL Proxying Settings 里开启这个功能："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:b,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"然后点击 help > SSL Proxying > Install Charles Root Certificate，把 charles 证书安装到系统的钥匙串中并信任："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:j,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"这样证书就换成了 charles 的并被标记为信任："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:x,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"也就能抓到明文数据了："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:p,alt:""})}),"\n",(0,s.jsxs)(c.h2,{id:"breakpoints",children:["breakpoints",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#breakpoints",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"断点同样是很常用的功能，这个上节也讲过。"}),"\n",(0,s.jsx)(c.p,{children:"在 Proxy > Enable breakpoints 开启这个功能："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:h,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"然后在 Proxy > Breakpoint Settings 里配置："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:t,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"可以单独开启请求/响应的断点："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:d,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"或者右键请求来设置："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:l,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"再发送请求的时候或响应的时候就会断住："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:n,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"可以修改各种内容："}),"\n",(0,s.jsx)(c.p,{children:(0,s.jsx)("img",{src:r,alt:""})}),"\n",(0,s.jsx)(c.p,{children:"然后 execute 即可。"}),"\n",(0,s.jsxs)(c.h2,{id:"总结",children:["总结",(0,s.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,s.jsx)(c.p,{children:"这节我们过了 charles 一些常用的功能："}),"\n",(0,s.jsx)(c.p,{children:"首先设置代理可以用 SwitchyOmega 单独指定网页的代理服务器为 charles，也可以直接把 charles 设置为系统代理。"}),"\n",(0,s.jsx)(c.p,{children:"然后我们学习了常用的 charles 代理功能："}),"\n",(0,s.jsxs)(c.ul,{children:["\n",(0,s.jsx)(c.li,{children:"no caching： 禁用缓存"}),"\n",(0,s.jsx)(c.li,{children:"block cookies：禁用 cookie"}),"\n",(0,s.jsx)(c.li,{children:"map remote：转发请求到另一个 url"}),"\n",(0,s.jsx)(c.li,{children:"map local：用本地的文件作为该请求的响应内容"}),"\n",(0,s.jsx)(c.li,{children:"mirror：把响应保存在本地文件"}),"\n",(0,s.jsx)(c.li,{children:"rewrite： 重写请求或响应的各种数据"}),"\n",(0,s.jsx)(c.li,{children:"block list：禁止一些 url 的请求"}),"\n",(0,s.jsx)(c.li,{children:"allow list：只允许一些 url 的请求"}),"\n",(0,s.jsx)(c.li,{children:"SSL Proxying：代理 https 请求，用 charles 自己的证书，需要安装 charles 证书到系统并信任"}),"\n",(0,s.jsx)(c.li,{children:"breakpoints：断点修改请求/响应"}),"\n"]}),"\n",(0,s.jsx)(c.p,{children:"这些功能中有重合的部分，比如可以通过 rewrite 实现 no caching 的功能，也就是修改 cache-control 的 header，比如 rewrite 的功能和 breakpoint 的功能很类似，但不同的场景下直接用对应的功能会更方便。"}),"\n",(0,s.jsx)(c.p,{children:"这些是比较常用的 charles 代理功能了，下节我们继续学习其余的功能。"})]})}function en(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:c}=Object.assign({},(0,i.ah)(),e.components);return c?(0,s.jsx)(c,{...e,children:(0,s.jsx)(er,{...e})}):er(e)}let el=en;en.__RSPRESS_PAGE_META={},en.__RSPRESS_PAGE_META["%E5%89%8D%E7%AB%AF%E8%B0%83%E8%AF%95%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%2F42.Charles%20%E5%85%A8%E5%8A%9F%E8%83%BD%E9%80%9F%E9%80%9A%EF%BC%88%E4%B8%8A%EF%BC%89.md"]={toc:[{text:"charles 代理的两种配置方式",id:"charles-代理的两种配置方式",depth:2},{text:"no caching",id:"no-caching",depth:2},{text:"block cookies",id:"block-cookies",depth:2},{text:"map remote",id:"map-remote",depth:2},{text:"map local",id:"map-local",depth:2},{text:"Mirror",id:"mirror",depth:2},{text:"rewrite",id:"rewrite",depth:2},{text:"block list",id:"block-list",depth:2},{text:"allow list",id:"allow-list",depth:2},{text:"ssl proxying",id:"ssl-proxying",depth:2},{text:"breakpoints",id:"breakpoints",depth:2},{text:"总结",id:"总结",depth:2}],title:"42.Charles 全功能速通（上）",headingTitle:"42.Charles 全功能速通（上）",frontmatter:{}}}}]);