"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["65396"],{738551:function(e,n,s){s.r(n),s.d(n,{default:()=>N});var a=s(552676),r=s(740453);let i=s.p+"static/image/946eb8d5df1de34262843787631717a9.e1a6269f.webp",t=s.p+"static/image/9834c399ffd55a5fdc3329032b3e4e67.95ae3a56.webp",l=s.p+"static/image/fefd5c32ef1b2935746253a35dee72d3.b29c8dfa.webp",c=s.p+"static/image/05dd1985a530ebce3a21db7520d3e272.3ae94d44.webp",d=s.p+"static/image/a01eadbc42dc7d2f8dd291f1424c7fff.0f7dbeba.webp",p=s.p+"static/image/aa9221e5f1b4227c4f3422f11550cb52.7711bb8c.webp",m=s.p+"static/image/178bae41858bee830e3ba1ef833ac7aa.14d75ddd.webp",o=s.p+"static/image/01026732f2a05a3402f0ea68ccc234f3.ea6acd90.webp",h=s.p+"static/image/c89113853b5cc10714e38841f19a2c80.faf8a9ab.webp",f=s.p+"static/image/ecd4fae950c394975a5b580c887ad928.3266f6b8.webp",x=s.p+"static/image/a3a30d5f65f69f18f00a6c10503cb442.06733b48.webp",j=s.p+"static/image/be699ea64abbe614489190b896dde69b.0f2cc2b2.webp",u=s.p+"static/image/1c6e4024531e2bdd10bc61d67faac9df.80cb256c.webp",g=s.p+"static/image/887ed720c8b302a5465b931cbc3e7f1c.6b2acb9f.webp",b=s.p+"static/image/b45e99cb12861825115418a99363c8db.f1069e98.webp",v=s.p+"static/image/cf70c2f47e1c6455e3c3f6fdf79761ef.9a60e134.webp",A=s.p+"static/image/d956eed5d5b78f8318c11521f70ec10c.0a4611d5.webp",F=s.p+"static/image/ee67f30ee12bb5ab8236f90be07fb84e.62baaa1c.webp",P=s.p+"static/image/6609b8b8556dd5c1225235a8350d55c7.14a1520d.webp",y=s.p+"static/image/8eb2571bc3827e1eed45cf741bf6b648.63b93bb6.webp",w=s.p+"static/image/f7fa2569cbbb292a58a8e754dfacb289.d36996d2.webp",I=s.p+"static/image/4ddea68180c5c0d902105b4769635f05.0633e49e.webp",E=s.p+"static/image/c2d5495ecf349473eb3c7ec5c848a12b.beb30ef8.webp",T=s.p+"static/image/240cb066ec3a5d735498ecb2cf2b55ff.ea6080a5.webp",C=s.p+"static/image/d9baaced9384ea89740ffc638d0911ba.167729db.webp",M=s.p+"static/image/17e3caa00db3efdfd923154eed9dd820.31cc63e9.webp",S=s.p+"static/image/3602c60c8b2be0d8023dc6ca36ff9552.4cea3507.webp",V=s.p+"static/image/84166fedc99de602fb73eea70f412a9b.ec4acf5b.webp",k=s.p+"static/image/4606990b74a04554bbbb7eed4b5c3feb.51a6746f.webp",z=s.p+"static/image/65cfb482ec96304e6902d0eed9428c9b.b856e7c4.webp",Y=s.p+"static/image/d7f36d78b4950ded07d1d2e8a02468d8.109c924f.webp";function U(e){let n=Object.assign({h1:"h1",a:"a",p:"p",img:"img",pre:"pre",code:"code",h2:"h2"},(0,r.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.h1,{id:"第49章用react-intl实现国际化",children:["第49章—用react-intl实现国际化",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#第49章用react-intl实现国际化",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"\uFEFF国际化是前端应用的常见需求，比如一个应用要同时支持中文和英文用户访问。"}),"\n",(0,a.jsx)(n.p,{children:"如果你在外企工作，那基本要天天做这件事情，比如我待过韩企和日企，我们的应用要支持韩文和英文，或者日文和英文。"}),"\n",(0,a.jsx)(n.p,{children:"那如何实现这种国际化的需求呢？"}),"\n",(0,a.jsx)(n.p,{children:"用 react-intl 这个包。"}),"\n",(0,a.jsx)(n.p,{children:"这个包周下载量很高："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:Y,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"我们来用一下。"}),"\n",(0,a.jsx)(n.p,{children:"创建个项目："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"npx create-vite\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:z,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"我们先安装 antd 来写个简单的页面："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"npm install\n\nnpm install --save antd\n"})}),"\n",(0,a.jsx)(n.p,{children:"去掉 main.tsx 里的 StrictMode 和 index.css"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:k,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"然后写下 App.tsx"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:'import React from \'react\';\nimport type { FormProps } from \'antd\';\nimport { Button, Checkbox, Form, Input } from \'antd\';\n\ntype FieldType = {\n  username?: string;\n  password?: string;\n  remember?: string;\n};\n\nconst onFinish: FormProps<FieldType>[\'onFinish\'] = (values) => {\n  console.log(\'Success:\', values);\n};\n\nconst onFinishFailed: FormProps<FieldType>[\'onFinishFailed\'] = (errorInfo) => {\n  console.log(\'Failed:\', errorInfo);\n};\n\nconst App: React.FC = () => (\n  <Form\n    name="basic"\n    labelCol={{ span: 8 }}\n    wrapperCol={{ span: 16 }}\n    style={{ maxWidth: 600 }}\n    initialValues={{ remember: true }}\n    onFinish={onFinish}\n    onFinishFailed={onFinishFailed}\n    autoComplete="off"\n  >\n    <Form.Item<FieldType>\n      label="Username"\n      name="username"\n      rules={[{ required: true, message: \'Please input your username!\' }]}\n    >\n      <Input />\n    </Form.Item>\n\n    <Form.Item<FieldType>\n      label="Password"\n      name="password"\n      rules={[{ required: true, message: \'Please input your password!\' }]}\n    >\n      <Input.Password />\n    </Form.Item>\n\n    <Form.Item<FieldType>\n      name="remember"\n      valuePropName="checked"\n      wrapperCol={{ offset: 8, span: 16 }}\n    >\n      <Checkbox>Remember me</Checkbox>\n    </Form.Item>\n\n    <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\n      <Button type="primary" htmlType="submit">\n        Submit\n      </Button>\n    </Form.Item>\n  </Form>\n);\n\nexport default App;\n'})}),"\n",(0,a.jsx)(n.p,{children:"这里是直接从 antd 官网复制的代码。"}),"\n",(0,a.jsx)(n.p,{children:"把服务跑起来："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"npm run dev\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:V,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"浏览器访问下："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:S,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"那如果这个页面要同时支持中文、英文呢？"}),"\n",(0,a.jsx)(n.p,{children:"只要把需要国际化的文案转成一个 key，然后根据当前 locale 是中文还是英文来读取不同的资源包就好了："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:M,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"locale 是“语言代码-国家代码”，可以从 navigator.language 拿到："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:C,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"资源包就是一个 json 文件里面有各种 key 对应的不同语言的文案，比如 zh-CN.json、en-US.json 等。"}),"\n",(0,a.jsx)(n.p,{children:"我们用 react-intl 实现下："}),"\n",(0,a.jsx)(n.p,{children:"在 main.tsx 引入下 IntlProvider，它是用来设置 locale 和 messsages 资源包的："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"import ReactDOM from 'react-dom/client'\nimport App from './App.tsx'\nimport { IntlProvider } from 'react-intl'\nimport enUS from './en-US.json';\nimport zhCN from './zh-CN.json';\n\nconst messages: Record<string, any> = {\n  'en-US': enUS,\n  'zh-CN': zhCN\n}\nconst locale = navigator.language;\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <IntlProvider messages={messages[locale]} locale={locale} defaultLocale=\"zh_CN\">\n    <App />\n  </IntlProvider>\n)\n"})}),"\n",(0,a.jsx)(n.p,{children:"然后写一下 zh-CN.json 和 en-US.json"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "username": "Username",\n    "password": "Password",\n    "rememberMe": "Remember Me",\n    "submit": "Submit",\n    "inputYourUsername": "Please input your username!",\n    "inputYourPassword": "Please input your password!"\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "username": "用户名",\n    "password": "密码",\n    "rememberMe": "记住我",\n    "submit": "提交",\n    "inputYourUsername": "请输入你的用户名！",\n    "inputYourPassword": "请输入你的密码！"\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"把 App.tsx 里的文案换成从资源包取值的方式："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:T,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"defineMessages 和 useIntl 都是 react-intl 的 api。"}),"\n",(0,a.jsx)(n.p,{children:"defineMessages 是定义 message，这里的 id 就是资源包里的 key，要对应才行。"}),"\n",(0,a.jsx)(n.p,{children:"此外还可以定义 defaultMessage，也就是资源包没有对应的 key 的时候的默认值："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:E,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"useIntl 有很多 api，比如 formatMessage 的 api 就是根据 id 取不同 message 的。"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"import React from 'react';\nimport type { FormProps } from 'antd';\nimport { Button, Checkbox, Form, Input } from 'antd';\nimport { useIntl, defineMessages } from 'react-intl';\n\ntype FieldType = {\n  username?: string;\n  password?: string;\n  remember?: string;\n};\n\nconst onFinish: FormProps<FieldType>['onFinish'] = (values) => {\n  console.log('Success:', values);\n};\n\nconst onFinishFailed: FormProps<FieldType>['onFinishFailed'] = (errorInfo) => {\n  console.log('Failed:', errorInfo);\n};\n\nconst messsages = defineMessages({\n  username: {\n    id: \"username\",\n    defaultMessage: '用户名'\n  },\n  password: {\n    id: \"password\"\n  },\n  rememberMe: {\n    id: 'rememberMe'\n  },\n  submit: {\n    id: 'submit'\n  },\n  inputYourUsername: {\n    id: 'inputYourUsername'\n  },\n  inputYourPassword: {\n    id: 'inputYourPassword'\n  }\n})\n\nconst App: React.FC = () => {\n\n  const intl = useIntl();\n\n  return <Form\n    name=\"basic\"\n    labelCol={{ span: 8 }}\n    wrapperCol={{ span: 16 }}\n    style={{ maxWidth: 600 }}\n    initialValues={{ remember: true }}\n    onFinish={onFinish}\n    onFinishFailed={onFinishFailed}\n    autoComplete=\"off\"\n  >\n    <Form.Item<FieldType>\n      label={intl.formatMessage(messsages.username)}\n      name=\"username\"\n      rules={[{ required: true, message: intl.formatMessage(messsages.inputYourUsername) }]}\n    >\n      <Input />\n    </Form.Item>\n\n    <Form.Item<FieldType>\n      label={intl.formatMessage(messsages.password)}\n      name=\"password\"\n      rules={[{ required: true, message: intl.formatMessage(messsages.inputYourUsername) }]}\n    >\n      <Input.Password />\n    </Form.Item>\n\n    <Form.Item<FieldType>\n      name=\"remember\"\n      valuePropName=\"checked\"\n      wrapperCol={{ offset: 8, span: 16 }}\n    >\n      <Checkbox>{intl.formatMessage(messsages.rememberMe)}</Checkbox>\n    </Form.Item>\n\n    <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\n      <Button type=\"primary\" htmlType=\"submit\">\n      {intl.formatMessage(messsages.submit)}\n      </Button>\n    </Form.Item>\n  </Form>\n}\n\nexport default App;\n"})}),"\n",(0,a.jsx)(n.p,{children:"试一下："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:I,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"可以看到，现在文案就都变成中文了。"}),"\n",(0,a.jsx)(n.p,{children:"然后改下 locale："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:w,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"现在界面又都是英文了："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:y,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"其他语言也是同理。"}),"\n",(0,a.jsx)(n.p,{children:"但国际化可不只是替换下文案这么简单，日期、数字等的格式也都不一样。"}),"\n",(0,a.jsx)(n.p,{children:"react-intl 包也支持："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:P,alt:""})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"<div>\n  日期：\n  <div>{intl.formatDate(new Date(), { weekday: 'long' })}</div> \n  <div>{intl.formatDate(new Date(), { weekday: 'short' })}</div> \n  <div>{intl.formatDate(new Date(), { weekday: 'narrow' })}</div>\n  <div>{intl.formatDate(new Date(), {  dateStyle: 'full' })}</div>\n  <div>{intl.formatDate(new Date(), {  dateStyle: 'long' })}</div>\n</div>\n<div>\n  相对时间：\n  <div>{intl.formatRelativeTime(200, 'hour')}</div> \n  <div>{intl.formatRelativeTime(-10, 'minute')}</div> \n</div>\n<div>\n  数字：\n  <div>{intl.formatNumber(200000, {\n    style: 'currency',\n    currency: 'USD'\n  })}</div> \n  <div>\n    {\n      intl.formatNumber(10000, {\n        style: 'unit',\n        unit: 'meter'\n      })\n    }\n  </div>\n</div>\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:F,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"然后换成 zh-CN 再看下："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:A,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"可以看到，确实不同语言的表示方式不一样："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:v,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"但这里金额没有切换过来，需要改一下："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"<div>{intl.formatNumber(200000, {\n    style: 'currency',\n    currency:  intl.locale.includes('en') ? 'USD' : 'CNY'\n})}</div> \n"})}),"\n",(0,a.jsx)(n.p,{children:"根据 locale 来分别设置为美元符号 USD 或者人民币符号 CNY。"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:b,alt:""})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:g,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"现在就都对了。"}),"\n",(0,a.jsxs)(n.p,{children:["当然，可以国际化的东西还有很多，用到的时候",(0,a.jsx)(n.a,{href:"https://formatjs.io/docs/react-intl/api",target:"_blank",rel:"noopener noreferrer",children:"查文档"}),"就行："]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:u,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"我们主要用的 useIntl 的 api，然后调用 formatXxx 方法。"}),"\n",(0,a.jsx)(n.p,{children:"其实这些 api 都有组件版本："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"<div>\n  <div><FormattedDate value={new Date} dateStyle='full'></FormattedDate></div>\n  <div><FormattedMessage id={messsages.rememberMe.id}></FormattedMessage></div>\n  <div><FormattedNumber style='unit' unit='meter' value={2000}></FormattedNumber></div>\n</div>\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,a.jsx)(n.p,{children:"哪种方便用哪种。"}),"\n",(0,a.jsx)(n.p,{children:"回过头来再看下 message 的国际化。"}),"\n",(0,a.jsx)(n.p,{children:"message 支持占位符，比如这样："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:j,alt:""})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:x,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"用的时候传入具体的值："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"<div>\n  <div>{intl.formatMessage(messsages.username, { name: '光'})}</div>\n  <div><FormattedMessage id={messsages.username.id} values={{name: '东'}}></FormattedMessage></div>\n</div>\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,a.jsx)(n.p,{children:"此外，国际化的消息还可以用一些 html 标签，也就是支持富文本。"}),"\n",(0,a.jsxs)(n.p,{children:["这样：\n",(0,a.jsx)("img",{src:f,alt:""})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:h,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"在 IntlProvider 的 defaultRichTextElements 这里定义所有的富文本标签："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:'<IntlProvider \n    messages={messages[locale]}\n    locale={locale}\n    defaultLocale="zh_CN"\n    defaultRichTextElements={\n      {\n        bbb: (str) => <b>{str}</b>,\n        strong: (str) => <strong>{str}</strong>\n      }\n    }\n>\n    <App />\n</IntlProvider>\n'})}),"\n",(0,a.jsx)(n.p,{children:"这样，运行时就会把他们替换成具体的标签："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:o,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"掌握这些功能，国际化需求就足够用了。"}),"\n",(0,a.jsx)(n.p,{children:"此外，还要注意下兼容性问题："}),"\n",(0,a.jsx)(n.p,{children:"react-intl 的很多 api 都是对浏览器原生的 Intl api 的封装："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:m,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"而 Intl 的 api 在一些老的浏览器不支持，这时候引入下 polyfill 包就好了："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:p,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"那如果我想在组件外用呢？"}),"\n",(0,a.jsx)(n.p,{children:"也可以，用 createIntl 的 api："}),"\n",(0,a.jsx)(n.p,{children:"src/getMessage.ts"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"import { createIntl, defineMessages } from \"react-intl\"\nimport enUS from './en-US.json';\nimport zhCN from './zh-CN.json';\n\nconst messages: Record<string, any> = {\n  'en-US': enUS,\n  'zh-CN': zhCN\n}\n\nconst locale = 'zh-CN'\nconst intl = createIntl({\n    locale: locale,\n    messages: messages[locale]\n});\n\nconst defines = defineMessages({\n    inputYourUsername: {\n        id: 'inputYourUsername',\n        defaultMessage: ''\n    }\n});\n\nexport default function() {\n    return intl.formatMessage(defines.inputYourUsername);\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"在 App.tsx 里引入下："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:d,alt:""})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"useEffect(() => {\n    setTimeout(() => {\n      alert(getMessage());\n    }, 2000)\n}, []);\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:c,alt:""})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:l,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"可以看到，在非组件里也可以做文案的国际化。"}),"\n",(0,a.jsx)(n.p,{children:"还有一个问题，不知道大家有没有觉得把所有需要国际化的地方找出来，然后在资源包里定义一遍很麻烦？"}),"\n",(0,a.jsx)(n.p,{children:"确实，react-intl 提供了一个工具来自动生成资源包。"}),"\n",(0,a.jsx)(n.p,{children:"我们用一下："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"npm i -save-dev @formatjs/cli\n"})}),"\n",(0,a.jsx)(n.p,{children:"用这个工具需要所有 message 都有默认值，前面我们省略了，这里改一下："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const messsages = defineMessages({\n  username: {\n    id: \"username\",\n    defaultMessage: '用户名'\n  },\n  password: {\n    id: \"password\",\n    defaultMessage: '密码'\n  },\n  rememberMe: {\n    id: 'rememberMe',\n    defaultMessage: '记住我'\n  },\n  submit: {\n    id: 'submit',\n    defaultMessage: '提交'\n  },\n  inputYourUsername: {\n    id: 'inputYourUsername',\n    defaultMessage: '请输入用户名！'\n  },\n  inputYourPassword: {\n    id: 'inputYourPassword',\n    defaultMessage: '请输入密码！'\n  }\n})\n"})}),"\n",(0,a.jsx)(n.p,{children:"然后执行 extract 命令从 ts、vue 等文件里提所有 defineMessage 定义的消息："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'npx formatjs extract "src/**/*.tsx" --out-file temp.json\n'})}),"\n",(0,a.jsx)(n.p,{children:"然后可以看到我们 defineMessage 定义的所有 message 都提取了出来，key 是 id："}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:t,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"接下来再执行 compile 命令生成资源包 json："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"npx formatjs compile 'temp.json' --out-file src/ja-JP.json\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)("img",{src:i,alt:""})}),"\n",(0,a.jsx)(n.p,{children:"可以看到它用所有的 message 的 id 和默认值生成了新的资源包。"}),"\n",(0,a.jsx)(n.p,{children:"这样，只要把这个资源包交给产品经理或者设计师去翻译就好了。"}),"\n",(0,a.jsx)(n.p,{children:"最后把刚才的临时文件删除："}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"rm ./temp.json\n"})}),"\n",(0,a.jsx)(n.p,{children:"这个 cli 工具对于项目中 defineMessage 定义了很多国际化消息，想要全部提取出来生成一个资源包的场景还是很有用的。"}),"\n",(0,a.jsxs)(n.p,{children:["案例代码上传了",(0,a.jsx)(n.a,{href:"https://github.com/QuarkGluonPlasma/react-course-code/tree/main/react-intl-test",target:"_blank",rel:"noopener noreferrer",children:"小册仓库"})]}),"\n",(0,a.jsxs)(n.h2,{id:"总结",children:["总结",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"很多应用都要求支持多语言，也就是国际化，如果你在外企，那几乎天天都在做这个。"}),"\n",(0,a.jsx)(n.p,{children:"我们用 react-intl 包实现了国际化。"}),"\n",(0,a.jsx)(n.p,{children:"它支持在 IntlProvider 里传入 locale 和 messages，然后在组件里用 useIntl 的 formatMessage 的 api 或者用 FormatMessage 组件来取资源包中的消息。"}),"\n",(0,a.jsx)(n.p,{children:"定义消息用 defineMessages，指定不同的 id。"}),"\n",(0,a.jsx)(n.p,{children:"在 en-US.json、zh-CN.json 资源包里定义 message id 的不同值。"}),"\n",(0,a.jsx)(n.p,{children:"这样，就实现了文案的国际化。"}),"\n",(0,a.jsx)(n.p,{children:"此外，message 支持占位符和富文本，资源包用 {name}、<xxx></xxx>的方式来写，然后用的时候传入对应的文本、替换富文本标签就好了。"}),"\n",(0,a.jsx)(n.p,{children:"如果是在非组件里用，要用 createIntl 的 api。"}),"\n",(0,a.jsx)(n.p,{children:"当然，日期、数字等在不同语言环境会有不同的格式，react-intl 对原生 Intl 的 api 做了封装，可以用 formatNumber、formatDate 等 api 来做相应的国际化。"}),"\n",(0,a.jsx)(n.p,{children:"如果应用中有很多 defineMessage 的国际化消息，想要批量提取出来生成资源包，可以用 @formatjs/cli 的 extract、compile 命令来做。"}),"\n",(0,a.jsx)(n.p,{children:"掌握了这些功能，就足够实现前端应用中各种国际化的需求了。"})]})}function Q(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(U,{...e})}):U(e)}let N=Q;Q.__RSPRESS_PAGE_META={},Q.__RSPRESS_PAGE_META["React%20%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%2F%E7%AC%AC49%E7%AB%A0%E2%80%94%E7%94%A8react-intl%E5%AE%9E%E7%8E%B0%E5%9B%BD%E9%99%85%E5%8C%96.md"]={toc:[{text:"总结",id:"总结",depth:2}],title:"第49章—用react-intl实现国际化",headingTitle:"第49章—用react-intl实现国际化",frontmatter:{}}}}]);