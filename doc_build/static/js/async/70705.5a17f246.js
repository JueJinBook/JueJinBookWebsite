"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["70705"],{330198:function(e,n,s){s.r(n),s.d(n,{default:()=>b});var i=s(552676),c=s(740453);let l=s.p+"static/image/2db35b4f81d82e4018704221abe0d1bd.a6b7a726.webp",r=s.p+"static/image/6c22dc681c471392bba216ad4311417a.fe70adbf.webp",t=s.p+"static/image/e242d2a2465ac7232acb40338286222b.65965649.webp",d=s.p+"static/image/a02a6c10e73b6ab1a7f3e5c1fe0adb5c.365407bb.webp",h=s.p+"static/image/c87745ea510321747c0af8f3fa00734f.bcc7c3d8.webp",a=s.p+"static/image/6a36eabf87a3328559cf0d8780661730.66748545.webp",j=s.p+"static/image/1a3cf91dd1f171b8e7f1dbb7136ed935.fe195788.webp",x=s.p+"static/image/df70d7a4677269a9524306794405898f.336e06bc.webp",p=s.p+"static/image/757cd297e63fb0435e867e7421f495c0.0cd96c5c.webp",o=s.p+"static/image/eb91d414159183a3a9e815fcb71bd85c.2330504f.webp",m=s.p+"static/image/7fa99d45cd1d6857b741f9b481aa3071.75015f9b.webp";function g(e){let n=Object.assign({blockquote:"blockquote",p:"p",h2:"h2",a:"a",img:"img",pre:"pre",code:"code",ol:"ol",li:"li",strong:"strong",ul:"ul"},(0,c.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"推荐学习指数：⭐️⭐⭐️，必学内容️"}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"1-前言",children:["1. 前言",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-前言",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["类似于 Next.js 有自己的官方脚手架 create-next-app，Svelte 也有自己的官方脚手架名为 ",(0,i.jsx)(n.a,{href:"https://kit.svelte.dev/",title:"https://kit.svelte.dev/",target:"_blank",rel:"noopener noreferrer",children:"SvelteKit"}),"，提供了各种开箱即用的功能，比如路由、服务端渲染、数据获取、集成 TypeScript、预渲染、单页应用、生产优化、实时刷新等等。根据一项投票统计："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:m,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"可以看出，SvelteKit 是非常受欢迎的脚手架。本篇开始就为大家详细介绍 SvelteKit 中的功能。"}),"\n",(0,i.jsxs)(n.h2,{id:"2-项目初始化",children:["2. 项目初始化",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2-项目初始化",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"运行："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx sv create your-svelte-app-name\n"})}),"\n",(0,i.jsx)(n.p,{children:"首先会进入 app template 选择界面："}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)("img",{src:o,alt:"image.png"})," 其中："]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SvelteKit minimal"}),"：一个空项目，适合于实际开发中使用"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SvelteKit demo"}),"：一个包含 Demo 的项目，适合于初学 Svelte 的同学"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Svelte library"}),"：如果你要开发 Svelte 组件库等项目，选择此模板"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["初学时可选择 ",(0,i.jsx)(n.strong,{children:"SvelteKit demo"}),"，等熟练后使用 ",(0,i.jsx)(n.strong,{children:"SvelteKit minimal"}),"。"]}),"\n",(0,i.jsx)(n.p,{children:"然后是类型检查选择界面："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:p,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"看个人喜好，是选择 TypeScript 还是 JSDoc 还是不使用类型检查。"}),"\n",(0,i.jsx)(n.p,{children:"再然后是技术选型选择："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:x,alt:"image.png"})}),"\n",(0,i.jsx)(n.p,{children:"其中："}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"prettier"}),"：用于代码格式化"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"esLint"}),"：用于代码校验"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"vitest"}),"：用于单元测试"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"playwright"}),"：用于浏览器测试"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"tailwindcss"}),"：Tailwind CSS"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"drizzle"}),"：ORM"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"lucia"}),"：用户管理和会话验证"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"mdsvex"}),"：Svelte 组件的 Markdown 预处理器"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"paraglide"}),"：i18n 处理"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"storybook"}),"： 用于 UI 开发、组件测试和编写组件文档"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["按下空格键表示选择，再按一次表示取消选择。按下字母键 ",(0,i.jsx)(n.code,{children:"a"})," 表示全选，再按一次取消全选。"]}),"\n",(0,i.jsx)(n.p,{children:"建议至少选择 prettier、esLint、tailwindcss（如果选择了 tailwindcss，还会提示你使用哪些插件，按使用情况选择即可）"}),"\n",(0,i.jsx)(n.p,{children:"最后是包管理器选择："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:j,alt:"image.png"})}),"\n",(0,i.jsx)(n.p,{children:"项目创建成功！SvelteKit 会提示接下来需要的操作："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:a,alt:"image.png"})}),"\n",(0,i.jsx)(n.p,{children:"按照这些命令依此执行即可。"}),"\n",(0,i.jsx)(n.p,{children:"如果安装的时候遇到这种报错："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:h,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"这是因为 Node 版本不符合要求，使用 nvm 切换到合适的版本即可："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 13-SvelteKit ❘ 项目创建\nnvm use --lts\n"})}),"\n",(0,i.jsx)(n.p,{children:"浏览器效果如下："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:d,alt:"image.png"})}),"\n",(0,i.jsxs)(n.h2,{id:"3-编辑器插件安装",children:["3. 编辑器插件安装",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#3-编辑器插件安装",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["因为 VSCode 默认无法识别 ",(0,i.jsx)(n.code,{children:".svelte"}),"语法，所以如果使用 VSCode，一定要安装官方插件 ",(0,i.jsx)(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=svelte.svelte-vscode",title:"https://marketplace.visualstudio.com/items?itemName=svelte.svelte-vscode",target:"_blank",rel:"noopener noreferrer",children:"Svelte for VS Code"}),"，提供语法高亮、智能补全等功能。"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:t,alt:""})}),"\n",(0,i.jsxs)(n.h2,{id:"4-文件目录",children:["4. 文件目录",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#4-文件目录",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"生成的文件目录如下："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-md",children:"svelte-app\n├─ src\n│  ├─ lib\n│  │  └─ [your lib files]\n│  ├─ routes\n│  │  └─ [your routes]\n│  ├─ app.css\n│  └─ app.html\n├─ static\n│  └─ [your static assets]\n├─ README.md\n├─ eslint.config.js\n├─ package.json\n├─ svelte.config.js\n├─ tsconfig.json\n└─ vite.config.ts\n"})}),"\n",(0,i.jsx)(n.p,{children:"其中："}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"src/lib"}),"：存放一些工具库"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"src/routes"}),"：路由文件"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"src/app.css"}),"：全局样式"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"src/app.html"}),"：HTML 模板"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"static"}),"：静态目录"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"eslint.config.js"}),"：ESLint 配置文件"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"svelte.config.js"}),"：Svelte 配置文件"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tsconfig.json"}),"：TypeScript 配置文件"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"vite.config.ts"}),"：Vite 配置文件"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["查看目录，你还会发现一个隐藏的 ",(0,i.jsx)(n.code,{children:".svelte-kit"}),"文件，类似于 Next.js 的 ",(0,i.jsx)(n.code,{children:".next"}),"文件，由 Svelte 自动生成，不要去修改其中的代码。有的时候，感觉代码有问题，可以删除此文件重新运行试试。"]}),"\n",(0,i.jsxs)(n.h2,{id:"5-相关命令",children:["5. 相关命令",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#5-相关命令",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["使用该脚手架的命令可以查看 ",(0,i.jsx)(n.code,{children:"package.json"}),"："]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "dev": "vite dev",\n    "build": "vite build",\n    "preview": "vite preview",\n    "check": "svelte-kit sync && svelte-check --tsconfig ./tsconfig.json",\n    "check:watch": "svelte-kit sync && svelte-check --tsconfig ./tsconfig.json --watch",\n    "lint": "prettier --check . && eslint .",\n    "format": "prettier --write ."\n  }\n}\n\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run dev"}),"：开发模式"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run build"}),"：构建生产代码"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run preview"}),"：预览生产代码"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run check"}),"：检查代码，使用 Svelte 自己的 ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/svelte-check",title:"https://www.npmjs.com/package/svelte-check",target:"_blank",rel:"noopener noreferrer",children:"svelte-check"}),"，检查 JavaScript、TypeScript 编译错误、A11y 提示、未使用的 CSS 等"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run lint"}),"：检查代码，使用 Prettier 和 ESLint"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run format"}),"：格式化代码，修复代码风格等"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["值得一提的是 ",(0,i.jsx)(n.code,{children:"npm run check"}),"，有的时候你会发现 VSCode 提示了一些莫名其妙的错误，比如导入 ",(0,i.jsx)(n.code,{children:"$lib"}),"下的 Svelte 组件，但提示没有找到对应的类型定义文件，虽然代码可以正常运行……"]}),"\n",(0,i.jsx)(n.p,{children:"不要怀疑自己，我也不知道谁的错，但反正不是我的错！错误的不是我，而是这个世界！"}),"\n",(0,i.jsxs)(n.p,{children:["如果是在普通的 TypeScript 中，我们可以通过 ",(0,i.jsx)(n.code,{children:"Command + Shift + P"}),"唤起命令框："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:r,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"然后重启 TS 服务器。但在 Svelte 组件中，这有的时候并不管用。"}),"\n",(0,i.jsxs)(n.p,{children:["所以你需要先通过运行 ",(0,i.jsx)(n.code,{children:"npm run check"}),"，检查是否真的有错误。"]}),"\n",(0,i.jsxs)(n.p,{children:["如果没有这个错误，但是重启 TS Server 或者重启 ESLint Server 都没用的话，试试重启整个编辑器。 ",(0,i.jsx)(n.code,{children:"Command + Shift + P"}),"唤起命令框："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:l,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"选择重新加载窗口。"}),"\n",(0,i.jsx)(n.p,{children:"算是开发 Svelte 项目时踩过的一个小小坑吧。"})]})}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,c.ah)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}let b=v;v.__RSPRESS_PAGE_META={},v.__RSPRESS_PAGE_META["Svelte%20%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97%2F13-SvelteKit%20%E2%9D%98%20%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA.md"]={toc:[{text:"1. 前言",id:"1-前言",depth:2},{text:"2. 项目初始化",id:"2-项目初始化",depth:2},{text:"3. 编辑器插件安装",id:"3-编辑器插件安装",depth:2},{text:"4. 文件目录",id:"4-文件目录",depth:2},{text:"5. 相关命令",id:"5-相关命令",depth:2}],title:"",headingTitle:"",frontmatter:{}}}}]);