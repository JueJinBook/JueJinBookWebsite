"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["11188"],{465279:function(n,e,s){n.exports=s.p+"static/image/ff2b30a930d2dad36c608576254253f9.b765a74e.webp"},262039:function(n,e,s){s.r(e),s.d(e,{default:()=>Z});var t=s(552676),r=s(740453);let c=s.p+"static/image/0fffe72ea7b39a5fb2aa8ef15d7bbf24.c607d44a.webp",a=s.p+"static/image/e91b49defe14b71102a07d64f5db870b.25974fcc.webp",i=s.p+"static/image/beceab9e1aa39e9cc6f3beecb195588c.99223f98.webp",l=s.p+"static/image/e1190e18305753e34b8b9533de6319a9.02093256.gif",d=s.p+"static/image/dd53c32396cfd22e9d29ac6e7cd46510.f3525c97.gif",o=s.p+"static/image/8885fd7944fdcb064fcb9176d5f36386.ae470245.webp",p=s.p+"static/image/4040253cde1f7582b406be5ef2930ed8.ca55e689.webp",x=s.p+"static/image/56dd6d98d54631b4e5e11a69592ebb81.6cc1e9e6.webp",h=s.p+"static/image/8de257f317d45c9adde2601e53b15b86.ada624ff.webp",m=s.p+"static/image/d72be60befc9239c8d62aa04597363ba.0874e4b5.webp",j=s.p+"static/image/356b1c9b02e151a59f1bf337a64fd613.415fb61a.webp",f=s.p+"static/image/500219758a9eaef0d6ddd9428df3f0a0.e5839070.gif",b=s.p+"static/image/1af20940a21ae8617602a1fc71050cda.098bfa87.webp",g=s.p+"static/image/480837393b9eb5fbb29f2a727c2614ac.f33df3e1.webp",u=s.p+"static/image/81cf379b17b3712ead1c113abcd2b736.26c2a695.webp",y=s.p+"static/image/59d9f3269772f5279571c621ae215a47.e1ce7aff.webp",A=s.p+"static/image/2e71c030cc3a8df9160b2ab7d1443322.acf9389b.webp",T=s.p+"static/image/0b83be9ac625b926a69efea682a0f32f.58fd02e5.webp",k=s.p+"static/image/789e1cda97126c6485b0d3ee5e6859da.d84abb1a.webp",v=s.p+"static/image/36d348b48a8dba818834d64d78733865.e699bbb6.webp",w=s.p+"static/image/bd4e499aae6743554f4fc7c50f92727a.cb1504ff.webp",P=s.p+"static/image/a525d90aff727c5b8fa298b0e759ddb5.2b9d3421.gif",C=s.p+"static/image/193d5aa86fcea637092de42b282f41b7.8ab85317.webp",H=s.p+"static/image/368fa51e0076a8684f963f688efe782b.16be2959.webp",S=s.p+"static/image/7dac2fbae4e391752a6a10c936c5eeb2.73f29a1d.webp",R=s.p+"static/image/642d7332c22aa62588d82e55736e51d7.ffbf8781.webp",M=s.p+"static/image/e36832ba91b102cb31cab033abeed8de.0a43eae9.webp",E=s.p+"static/image/8349ff71e536b9d92f9b95f5e841b9d9.f042ac42.webp",D=s.p+"static/image/8caf1dfdd3a28f0c81592cf6dd0a4970.68ab38a1.webp",N=s.p+"static/image/dd084a4d7d57d2e708435a070d9de705.0c1686c7.webp",L=s.p+"static/image/c7ea2808d48b1c1578e4d17fd10caf99.dc1b0261.webp",B=s.p+"static/image/675d78fc20171dd6b9557f6fc2836e68.a4ef8ca4.webp",q=s.p+"static/image/3a9730a8feb9287e29d27ab0d0e4d51d.bf4923fc.webp",z=s.p+"static/image/3a989b0220ca05fcbb60ab5361e8674b.0cf18537.webp",Q=s.p+"static/image/516f71e645571390a4d5ca58413fdd2b.9c912132.webp",F=s.p+"static/image/c7b8bb4e199802accff4c2fa4af68563.2778abe3.webp",I=s.p+"static/image/51615f93b50a381c93b5794dcf352eff.cce5518a.webp",W=s.p+"static/image/1a253a58f8074986d1d6032eb1ceefff.ead54c3f.webp";var K=s(465279);let X=s.p+"static/image/43379dccf68d89002854127976714741.9520b4c4.webp",Y=s.p+"static/image/e7bab44e286ec1c12f2956ee9c1f62c2.dcaf8884.webp",J=s.p+"static/image/95bd8f10d68864f6996ca2237b49a597.e8a90bbd.webp";function G(n){let e=Object.assign({h1:"h1",a:"a",p:"p",img:"img",pre:"pre",code:"code",h2:"h2",ul:"ul",li:"li"},(0,r.ah)(),n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{id:"第28章cssinjs快速掌握styled-components",children:["第28章—CSSInJS：快速掌握styled-components",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#第28章cssinjs快速掌握styled-components",children:"#"})]}),"\n",(0,t.jsx)(e.p,{children:"\uFEFFCSS in JS，顾名思义就是用 js 来写 css。"}),"\n",(0,t.jsx)(e.p,{children:"它也是一种很流行的 css 管理方案。"}),"\n",(0,t.jsx)(e.p,{children:"比如 styled-components 的样式是这样写："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:J,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"可以传参数。"}),"\n",(0,t.jsx)(e.p,{children:"然后用的时候当作组件一样用："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:Y,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"样式用 js 写，可以当成组件用，可以传参，这是 CSS in JS 的方案独有的体验。"}),"\n",(0,t.jsx)(e.p,{children:"接下来我们也体验一下："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"npx create-vite styled-components-test\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:X,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"用 vite 创建个项目。"}),"\n",(0,t.jsx)(e.p,{children:"安装 styled-components："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"npm install\n\nnpm install --save styled-components\n"})}),"\n",(0,t.jsx)(e.p,{children:"去掉 index.css 和 StrictMode："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:K,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"然后改下 App.tsx："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { styled } from 'styled-components';\n\nconst Title = styled.h1`\n  font-size: 30px;\n  text-align: center;\n  color: blue;\n`;\n\nconst Header = styled.div`\n  padding: 20px;\n  background: pink;\n`;\n\nfunction App() {\n\n  return <Header>\n    <Title>\n      Hello World!\n    </Title>\n  </Header>\n}\n\nexport default App\n"})}),"\n",(0,t.jsx)(e.p,{children:"跑起来看下："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"npm run dev\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:W,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"样式生效了："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:I,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"打开 devtools 看下："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:F,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"可以看到 styled.div、styled.h1 会创建对应的标签，然后样式会生成一个唯一的 className。"}),"\n",(0,t.jsx)(e.p,{children:"所以说，用 styled-components 不用担心样式冲突的问题。"}),"\n",(0,t.jsx)(e.p,{children:"继续看，styled-components 的 styled.xx 可以作为组件用，那自然是可以传参的："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { styled } from 'styled-components';\n\nconst Title = styled.h1<{ color?: string; }>`\n  font-size: 30px;\n  text-align: center;\n  color: ${props => props.color || 'blue'}\n`;\n\nconst Header = styled.div`\n  padding: 20px;\n  background: pink;\n`;\n\nfunction App() {\n\n  return <Header>\n    <Title>\n      Hello World!\n    </Title>\n    <Title color='green'>\n      Hello World!\n    </Title>\n    <Title color='black'>\n      Hello World!\n    </Title>\n  </Header>\n}\n\nexport default App\n"})}),"\n",(0,t.jsx)(e.p,{children:"我们给 Title 样式组件添加一个 color 参数，然后分别传入 green、black。"}),"\n",(0,t.jsx)(e.p,{children:"看下效果："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:Q,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"确实样式组件用起来和其他 React 组件体验一样，加的 ts 类型也会有提示："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:z,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"这也是为啥这个库叫 styled-components，样式组件。"}),"\n",(0,t.jsx)(e.p,{children:"有的时候，样式需要基于已有的做扩展，比如我有一个 Button 的样式，另一种 Button 和它大部分一样，但有所不同。"}),"\n",(0,t.jsx)(e.p,{children:"这时候就可以这样写："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { styled } from 'styled-components';\n\nconst Button = styled.button<{ color?: string; }>`\n  font-size: 20px;\n  margin: 5px 10px;\n  border: 2px solid #000;\n  color: ${props => props.color || 'blue'}\n`;\n\nconst Button2 = styled(Button)`\n  border-radius: 8px;\n`;\nfunction App() {\n\n  return <div>\n    <Button color='red'>Hello World!</Button>\n    <Button2 color='red'>Hello World!</Button2>\n  </div>\n}\n\nexport default App\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:q,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"如果你还想改样式组件的标签，可以用 as："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:B,alt:""})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:L,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"styled() 除了可以给样式组件扩展样式外，还可以给普通组件加上样式："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { FC, PropsWithChildren } from 'react';\nimport { styled } from 'styled-components';\n\ninterface LinkProps extends PropsWithChildren {\n  href: string;\n  className?: string;\n}\n\nconst Link: FC<LinkProps> = (props) => {\n  const {\n    href,\n    className,\n    children\n  } = props;\n\n  return <a href={href} className={className}>{children}</a>\n}\n\nconst StyledLink = styled(Link)`\n  color: green;\n  font-size: 40px;\n`;\n\nfunction App() {\n  return <div>\n    <StyledLink href='#aaa'>click me</StyledLink>\n  </div>\n}\n\nexport default App\n"})}),"\n",(0,t.jsx)(e.p,{children:"比如我们给 Link 组件加上样式。"}),"\n",(0,t.jsx)(e.p,{children:"这里要注意，Link 组件必须接收 className 参数，因为 styled-components 会把样式放到这个 className 上："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:N,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"我们知道，样式组件也是可以接受参数的，为了区分两者，我们一般都是样式组件的 props 用 $ 开头："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:D,alt:""})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"const StyledLink = styled(Link)<{ $color?: string;}>`\n  color: ${props => props.$color || 'green'};\n  font-size: 40px;\n`;\n\nfunction App() {\n  return <div>\n    <StyledLink href='#aaa' $color=\"purple\">click me</StyledLink>\n  </div>\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:E,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"默认情况下，样式组件会透传所有不是它的 props 给被包装组件："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:M,alt:""})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:R,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"样式组件包了一层，自然是可以修改 props 的："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:S,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"用 attrs 方法，接收传入的 props 返回修改后的 props。"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { FC, PropsWithChildren } from 'react';\nimport { styled } from 'styled-components';\n\ninterface LinkProps extends PropsWithChildren {\n  href: string;\n  className?: string;\n}\n\nconst Link: FC<LinkProps> = (props) => {\n  console.log(props);\n\n  const {\n    href,\n    className,\n    children\n  } = props;\n\n  return <a href={href} className={className}>{children}</a>\n}\n\nconst StyledLink = styled(Link).attrs<{ $color?: string;}>((props) => {\n  console.log(props);\n\n  props.$color = 'orange';\n  props.children = props.children + ' 光';\n  return props;\n})`\n  color: ${props => props.$color || 'green'};\n  font-size: 40px;\n`;\n\nfunction App() {\n  return <div>\n    <StyledLink href='#aaa' $color=\"purple\">click me</StyledLink>\n  </div>\n}\n\nexport default App\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:H,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"attrs 支持对象和函数，简单的场景直接传对象也可以："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:C,alt:""})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"const Input = styled.input.attrs({ type: 'checkbox'})`\n  width: 30px;\n  height: 30px;\n`;\n"})}),"\n",(0,t.jsx)(e.p,{children:"那伪类选择器、伪元素选择器这些呢？"}),"\n",(0,t.jsx)(e.p,{children:"当然也是支持的。"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { styled } from 'styled-components';\n\nconst ColoredText = styled.div`\n  color: blue;\n\n  &:hover {\n    color: red;\n  }\n\n  &::before {\n    content: '* ';\n  }\n`\n\nfunction App() {\n\n  return <>\n    <ColoredText>Hello styled components</ColoredText>\n  </>\n}\n\nexport default App;\n\n"})}),"\n",(0,t.jsx)(e.p,{children:"写法和之前一样。"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:P,alt:""})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:w,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"但 styled components 这个 & 和 scss 里的 & 含义还不大一样。"}),"\n",(0,t.jsx)(e.p,{children:"它指的是同一个样式组件的实例，这里也就是 ColoredText 的实例。"}),"\n",(0,t.jsx)(e.p,{children:"所以可以这样写："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { styled } from 'styled-components';\n\nconst ColoredText = styled.div`\n  color: blue;\n\n  &:hover {\n    color: red;\n  }\n\n  &::before {\n    content: '* ';\n  }\n\n  &.aaa + & {\n    background: lightblue;\n  }\n\n  &.bbb ~ & {\n    background: pink;\n  }\n`\n\nfunction App() {\n\n  return <>\n    <ColoredText>Hello styled components</ColoredText>\n    <ColoredText className=\"aaa\">Hello styled components</ColoredText>\n    <ColoredText>Hello styled components</ColoredText>\n    <ColoredText className=\"bbb\">Hello styled components</ColoredText>\n    <div>Hello styled components</div>\n    <ColoredText>Hello styled components</ColoredText>\n    <ColoredText>Hello styled components</ColoredText>\n  </>\n}\n\nexport default App;\n"})}),"\n",(0,t.jsx)(e.p,{children:"这里 &.aaa + & 就是 .aaa 的 ColoredText 样式组件之后的一个 ColoredText 样式组件实例。"}),"\n",(0,t.jsx)(e.p,{children:"&.bbb ~ & 就是 .bbb 的 ColoredText 样式组件之后的所有 ColoredText 样式组件实例。"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:v,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"此外，如果你把 & 全换成 &&，你会发现效果也一样："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:k,alt:""})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:T,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"那什么时候用 &、什么时候用 && 呢？"}),"\n",(0,t.jsx)(e.p,{children:"当你和全局样式冲突的时候。"}),"\n",(0,t.jsx)(e.p,{children:"styled-components 用 createGlobalStyle 创建全局样式："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:A,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"我们全局指定 ColoredText 的 color 为 green，然后组件里指定 color 为 blue。"}),"\n",(0,t.jsx)(e.p,{children:"看下效果："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:y,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"每个 ColorText 组件都会有一个 src-aYaIB 的 className，全局样式就是给这个 className 加了 color 为 green 的样式。"}),"\n",(0,t.jsx)(e.p,{children:"可以看到，组件里写的 color: blue 被覆盖了。"}),"\n",(0,t.jsx)(e.p,{children:"这时候你这样写是没用的："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:u,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"用 && 才能覆盖："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:g,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"它通过 .aaa.aaa 这样的方式实现了样式优先级的提升："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:b,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"那动画怎么写呢？"}),"\n",(0,t.jsx)(e.p,{children:"有单独的 api："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { styled, keyframes } from 'styled-components';\n\nconst rotate = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nconst Rotate = styled.div`\n  display: inline-block;\n  animation: ${rotate} 2s linear infinite;\n  font-size: 50px;\n  padding: 30px;\n`;\n\nfunction App() {\n\n  return <Rotate>X</Rotate>\n}\n\nexport default App;\n"})}),"\n",(0,t.jsx)(e.p,{children:"通过 keyframes 来编写动画，然后在 animation 里引用。"}),"\n",(0,t.jsx)(e.p,{children:"看下效果："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:f,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"它为 @keyframes 生成了一个唯一 ID："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:j,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"这大概就是加一个 keyframes 的 api 的意义。"}),"\n",(0,t.jsx)(e.p,{children:"此外，如果你想复用部分 css，要这样写："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:m,alt:""})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"const animation = css`\n  animation: ${rotate} 2s linear infinite;\n`\n\nconst Rotate = styled.div`\n  display: inline-block;\n  ${animation}\n  font-size: 50px;\n  padding: 30px;\n`;\n"})}),"\n",(0,t.jsx)(e.p,{children:"不加 css 是不会生效的，你可以试一下。"}),"\n",(0,t.jsx)(e.p,{children:"抽出来的 css 也是可以用 props 的："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:h,alt:""})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { styled, keyframes, css } from 'styled-components';\n\nconst rotate = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nconst animation = css<{ $duration: number }>`\n  animation: ${rotate} ${props => props.$duration}s linear infinite;\n`\n\nconst Rotate = styled.div<{ $duration: number }>`\n  display: inline-block;\n  ${animation}\n  font-size: 50px;\n  padding: 30px;\n`;\n\nfunction App() {\n\n  return <Rotate $duration={3}>X</Rotate>\n}\n\nexport default App;\n"})}),"\n",(0,t.jsx)(e.p,{children:"但是 css 声明了类型，用到了这部分样式的 styled.xxx 也需要声明类型。"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:x,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"如果你希望样式组件用的时候可以传入一些样式，那可以用 RuleSet："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:p,alt:""})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { styled, keyframes, css, RuleSet } from 'styled-components';\n\nconst rotate = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nconst animation = css<{ $duration: number }>`\n  animation: ${rotate} ${props => props.$duration}s linear infinite;\n`\n\nconst Rotate = styled.div<{ $duration: number, otherStyles: RuleSet }>`\n  display: inline-block;\n  ${animation}\n  font-size: 50px;\n  padding: 30px;\n  ${props => props.otherStyles}\n`;\n\nfunction App() {\n\n  return <Rotate $duration={3} otherStyles={ [ \n    { border: '1px', background: 'pink' }, \n    { boxShadow: '0 0 3px  blue'}\n  ]}>X</Rotate>\n}\n\nexport default App;\n"})}),"\n",(0,t.jsx)(e.p,{children:"它是一个样式对象的数组类型："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:o,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"可以用的时候传入一些样式："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:d,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"最后，styled-components 还有 theme 的 api。"}),"\n",(0,t.jsx)(e.p,{children:"这个也很简单，你会用 react 的 context 就会用这个："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { styled, ThemeProvider } from 'styled-components';\n\nconst Aaa = styled.div`\n  width: 100px;\n  height: 100px;\n  background: ${props => props.theme.dark ? 'black' : '#ccc'}\n`\nfunction Content() {\n  return <Aaa></Aaa>\n}\n\nfunction App() {\n  return <ThemeProvider theme={{ dark: true }}>\n      <Content></Content>\n  </ThemeProvider>\n}\n\nexport default App;\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,t.jsx)(e.p,{children:"每个样式组件都有 props.theme 可以读取当前 theme 对象，然后这个对象可以通过 useTheme 读取，通过 ThemeProvider 修改。"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"import { useState } from 'react';\nimport { styled, ThemeProvider, useTheme } from 'styled-components';\n\nconst Aaa = styled.div`\n  width: 100px;\n  height: 100px;\n  background: ${props => props.theme.dark ? 'black' : '#ccc'}\n`\nfunction Content() {\n  const theme = useTheme();\n  const [dark, setDark] = useState<boolean>(theme.dark);\n\n  return <>\n    <button onClick={() => setDark(!dark)}>切换</button>\n    <ThemeProvider theme={{ dark }}>\n      <Aaa></Aaa>\n    </ThemeProvider>\n  </>\n}\n\nfunction App() {\n  return <ThemeProvider theme={{ dark: true }}>\n      <Content></Content>\n  </ThemeProvider>\n}\n\nexport default App;\n"})}),"\n",(0,t.jsx)(e.p,{children:"我们用 useTheme 读取了当前 theme，然后点击按钮的时候 setState 触发重新渲染，通过 ThemeProvider 修改了 theme 的值。"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:l,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"这就是 styled-components 的 theme 功能。"}),"\n",(0,t.jsx)(e.p,{children:"上面的过一遍，styled-components 就算掌握的差不多了"}),"\n",(0,t.jsx)(e.p,{children:"那最后我们来思考下，用 styled-components 有啥优缺点呢？"}),"\n",(0,t.jsx)(e.p,{children:"先来看下好处："}),"\n",(0,t.jsx)(e.p,{children:"用了 styled-components 之后，你的 className 都是这样的："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:i,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"没有样式冲突问题，不需要类似 CSS Modules 这种方案。"}),"\n",(0,t.jsx)(e.p,{children:"而且你可以用 js 来写样式逻辑，而且封装方式也是 React 组件的方式，这个是挺爽的。"}),"\n",(0,t.jsx)(e.p,{children:"不然你要学 scss 的函数的语法，比如这样："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-scss",children:"@function multiple-box-shadow($n) {\n    $value: '#{random(2000)}px #{random(2000)}px #FFF';\n    @for $i from 2 through $n {\n      $value: '#{$value} , #{random(2000)}px #{random(2000)}px #FFF';\n    }\n    @return unquote($value);\n}\n\n#stars { \n    width: 1px;\n    height: 1px;\n    box-shadow: multiple-box-shadow(700);\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:"scss 的 for 循环、if else 还有函数等的语法都要单独学习。"}),"\n",(0,t.jsx)(e.p,{children:"相比之下，还是 styled-components 直接用 js 来写样式组件的逻辑更爽。"}),"\n",(0,t.jsx)(e.p,{children:"这就像很多人不喜欢 vue 的 template 写法，更喜欢 React 的 jsx 一样，可以直接用 js 来写逻辑。"}),"\n",(0,t.jsx)(e.p,{children:"当然，styled-components 也有不好的地方，比如："}),"\n",(0,t.jsx)(e.p,{children:"你的 React 项目里会多出特别多样式组件："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:a,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"随便找一个组件，一眼望去全是样式组件。"}),"\n",(0,t.jsx)(e.p,{children:"你的 React DevTools 里也是一堆 styled-components 的组件："}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)("img",{src:c,alt:""})}),"\n",(0,t.jsx)(e.p,{children:"当然，这些也不是啥大问题，styled-components 整体还是很好用的。"}),"\n",(0,t.jsxs)(e.p,{children:["案例代码上传了",(0,t.jsx)(e.a,{href:"https://github.com/QuarkGluonPlasma/react-course-code/tree/main/styled-components-test",target:"_blank",rel:"noopener noreferrer",children:"小册仓库"})]}),"\n",(0,t.jsxs)(e.h2,{id:"总结",children:["总结",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,t.jsx)(e.p,{children:"CSS in JS 就是用 js 来写 css。"}),"\n",(0,t.jsx)(e.p,{children:"今天我们学习了最流行的 CSS in JS 库 styled-components。"}),"\n",(0,t.jsx)(e.p,{children:"它的特点就是样式组件，用 styled.div、styled() 可以创建样式组件。"}),"\n",(0,t.jsx)(e.p,{children:"样式组件可以传参数，可以通过 attrs() 修改参数。"}),"\n",(0,t.jsx)(e.p,{children:"通过 keyframes 来声明动画样式，通过 css 来复用某段样式，通过 createGlobalStyle 创建全局样式。"}),"\n",(0,t.jsx)(e.p,{children:"写样式的时候，通过 & 代表当前样式组件的实例，当样式和全局样式冲突的时候，还可以 && 提高优先级。"}),"\n",(0,t.jsx)(e.p,{children:"styled-components 还支持 theme，可以通过 ThemeProvider 修改 theme 值，通过 useTheme 来读取，每个样式组件里都可以通过 props.theme 拿到当前 theme，然后展示不同样式。"}),"\n",(0,t.jsx)(e.p,{children:"styled-components 相比 scss 等方案有好有坏："}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"没有 className 冲突问题，不需要 CSS Modules"}),"\n",(0,t.jsx)(e.li,{children:"用 js 来写逻辑，不需要学习单独的 scss 语法"}),"\n",(0,t.jsx)(e.li,{children:"项目里会多很多的样式组件，和普通组件混在一起"}),"\n",(0,t.jsx)(e.li,{children:"React DevTools 里会有很多层的样式组件"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"总体来说，styled-components 还是很有不错，如果你喜欢通过 React 组件的方式来写样式这种方式，可以考虑使用。"}),"\n",(0,t.jsx)(e.p,{children:"我最近在维护的一个项目，用 styled-components 好多年了，大项目用也没问题。"})]})}function V(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,r.ah)(),n.components);return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(G,{...n})}):G(n)}let Z=V;V.__RSPRESS_PAGE_META={},V.__RSPRESS_PAGE_META["React%20%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%2F%E7%AC%AC28%E7%AB%A0%E2%80%94CSSInJS%EF%BC%9A%E5%BF%AB%E9%80%9F%E6%8E%8C%E6%8F%A1styled-components.md"]={toc:[{text:"总结",id:"总结",depth:2}],title:"第28章—CSSInJS：快速掌握styled-components",headingTitle:"第28章—CSSInJS：快速掌握styled-components",frontmatter:{}}}}]);