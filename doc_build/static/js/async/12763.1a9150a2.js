"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["12763"],{99518:function(e,n,r){r.r(n),r.d(n,{default:()=>S});var s=r(552676),a=r(740453);let i=r.p+"static/image/e6477f21faeddb4ee29cb0cdba03fee4.2cbe9ba2.webp",c=r.p+"static/image/22f99a1e247404f746c3fc52a737012e.f8705c14.webp",t=r.p+"static/image/8dce8dca3ccd2d99bf7079e49cbb3577.21f02f2d.webp",l=r.p+"static/image/1d4e2e63709e00fdde73f43b94ea6f5f.99b3a2a7.webp",d=r.p+"static/image/3356a0e883f0fe54bf1b48b878f52047.60a91455.webp",p=r.p+"static/image/0fde593a4e72920a703d0f0353f472df.b77ffdbc.webp",h=r.p+"static/image/fa1b4458bb07ef44261d92c0d246c721.8be2bf01.webp",A=r.p+"static/image/0d61dc0b794823705e6abc992af6505a.3aad3238.webp",x=r.p+"static/image/1b1e157a6f67f5ca094859015a53fd01.d6738ad7.webp",g=r.p+"static/image/84b264c1e3c083f088b73498367e574b.9a607223.webp",o=r.p+"static/image/4029ecd19dc7b02ba6d5f0e3d76e98fd.e1ff99cc.webp",j=r.p+"static/image/becce8530c33ed571520a9d3ed33b561.42c12156.webp",f=r.p+"static/image/f7334c9d3a8def9e7ebe339f0de81374.c8ac2d19.webp",y=r.p+"static/image/0932b8b4a6760d6b4a208adc2434b161.9ffbce19.webp",m=r.p+"static/image/7362227dc209d6c4893a2e472c9f5edd.dac86265.webp",w=r.p+"static/image/4ea18bb2fa3a87ace077259e5727bae7.b0733d10.webp",u=r.p+"static/image/a67437355494673866cf8a710cd9312c.8da6c762.webp",T=r.p+"static/image/1fe22d3785ed2afab40fae8cbb71453b.034d8bc4.webp",P=r.p+"static/image/f963390fa8ce8feb695e47848f9c973b.ff7476da.webp",b=r.p+"static/image/3d4db9649973e0e3bffc9f6f67755c80.720ed869.webp",B=r.p+"static/image/2a2ec08bbc3b04c1a4dd5aa8fcd71ee8.b9cfd8ff.webp",E=r.p+"static/image/77190edc882208b0e963ae2f146ac62b.e38c2936.webp",Q=r.p+"static/image/8e4b7e99f4315e6d57459d19faeb9a90.016d29f9.webp",C=r.p+"static/image/5713f97215cd64ee7835697602c1e9d3.1ff00c7e.webp",N=r.p+"static/image/4de9d63e74c0eda97f49bc3e6447e5c9.e3abb026.webp";function U(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",pre:"pre",code:"code",img:"img"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"12typescript-内置的高级类型有哪些",children:["12.TypeScript 内置的高级类型有哪些？",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#12typescript-内置的高级类型有哪些",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"学完了 6 个类型体操的套路之后，各种类型编程逻辑我们都能写出来，但其实一些常见的类型不用自己写， TypeScript 内置了很多，这节我们就来看下 TypeScript 内置了哪些高级类型吧。"}),"\n",(0,s.jsxs)(n.h2,{id:"parameters",children:["Parameters",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#parameters",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Parameters 用于提取函数类型的参数类型。"}),"\n",(0,s.jsx)(n.p,{children:"源码是这样的："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Parameters<T extends (...args: any) => any> \n    = T extends (...args: infer P) => any \n        ? P \n        : never;\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 为待处理的类型，通过 extends 约束为函数，参数和返回值任意。"}),"\n",(0,s.jsx)(n.p,{children:"通过 extends 匹配一个模式类型，提取参数的类型到 infer 声明的局部变量 P 中返回。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了函数参数类型的提取："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:N,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/FDAuE8AcFMAIAUCGAnRBbaprIM4CVodYBeBFdTbHAHgAoA7CgLlh1GQEt6BzAGlkTdoLegFc0AI2wBKEgD5YAbwC+cgNwggA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsx)(n.p,{children:"这就是个简单的模式匹配，学完套路一轻轻松松就写出来了。"}),"\n",(0,s.jsxs)(n.h2,{id:"returntype",children:["ReturnType",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#returntype",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"ReturnType 用于提取函数类型的返回值类型。"}),"\n",(0,s.jsx)(n.p,{children:"源码是这样的："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ReturnType<T extends (...args: any) => any> \n    = T extends (...args: any) => infer R \n        ? R \n        : any;\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 为待处理的类型，通过 extends 约束为函数类型，参数和返回值任意。"}),"\n",(0,s.jsx)(n.p,{children:"用 T 匹配一个模式类型，提取返回值的类型到 infer 声明的局部变量 R 里返回。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了函数返回值类型的提取："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:C,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/C4TwDgpgBAShwFcBOA7AKuCcDOUC8s8y6mAPABQCU+AfFAOQAmA9igOb00DcAUEA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsx)(n.p,{children:"和提取函数参数类型差不多，也是个简单的模式匹配。"}),"\n",(0,s.jsxs)(n.h2,{id:"constructorparameters",children:["ConstructorParameters",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#constructorparameters",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"构造器类型和函数类型的区别就是可以被 new。"}),"\n",(0,s.jsx)(n.p,{children:"Parameters 用于提取函数参数的类型，而 ConstructorParameters 用于提取构造器参数的类型。"}),"\n",(0,s.jsx)(n.p,{children:"源码是这样的："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ConstructorParameters<\n    T extends abstract new (...args: any) => any\n> = T extends abstract new (...args: infer P) => any \n    ? P \n    : never;\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 是待处理的类型，通过 extends 约束为构造器类型，加个 abstract 代表不能直接被实例化（其实不加也行）。"}),"\n",(0,s.jsx)(n.p,{children:"用 T 匹配一个模式类型，提取参数的部分到 infer 声明的局部变量 P 里，返回 P。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了构造器参数类型的提取："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:Q,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/JYOwLgpgTgZghgYwgAgArQM4HsTIN4BQyxyIcAthAFzIZhSgDmA3AQL4EGiSyIrpRsIAMI46UAK4IwWKPiIkQEAO4AKMpRrimAShoChrDgTABPAA4pRIcVJlRUcKBQg8MAJQgZkAXmTXbaVlHZ0o3AB4DHAD6O1kAPlYgA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsx)(n.p,{children:"构造器参数的提取依然是模式匹配。"}),"\n",(0,s.jsxs)(n.h2,{id:"instancetype",children:["InstanceType",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#instancetype",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"提取了构造器参数的类型，自然也可以提取构造器返回值的类型，就是 InstanceType。"}),"\n",(0,s.jsx)(n.p,{children:"源码是这样的："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type InstanceType<\n    T extends abstract new (...args: any) => any\n> = T extends abstract new (...args: any) => infer R \n    ? R \n    : any;\n"})}),"\n",(0,s.jsx)(n.p,{children:"整体和 ConstructorParameters 差不多，只不过提取的不再是参数了，而是返回值。"}),"\n",(0,s.jsx)(n.p,{children:"通过模式匹配提取返回值的类型到 infer 声明的局部变量 R 里返回。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了构造器的实例类型的提取："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:E,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/JYOwLgpgTgZghgYwgAgArQM4HsTIN4BQyxyIcAthAFzIZhSgDmA3AQL4EGiSyIrpRsIAMI46UAK4IwWKPiIkQEAO4AKMpRrimAShoChrDgTABPAA4oAkiDpwQSACoWIAJQgZkAXmQ27DiGdLAB4DHFFbeikZKAA+Vk4gA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"thisparametertype",children:["ThisParameterType",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#thisparametertype",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"函数里可以调用 this，这个 this 的类型也可以约束："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:B,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"同样，this 的类型也可以提取出来，通过 ThisParameterType 这个内置的高级类型："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:b,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"它的源码是这样的："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type ThisParameterType<T> = \n    T extends (this: infer U, ...args: any[]) => any \n        ? U \n        : unknown;\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 为待处理的类型。"}),"\n",(0,s.jsx)(n.p,{children:"用 T 匹配一个模式类型，提取 this 的类型到 infer 声明的局部变量 U 里返回。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了 this 类型的提取。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/C4TwDgpgBAChBOBnA9gOygXigbwFBQKlQEMBbCALigHIBzAV2NVutwF8BuXXAM3tQDGwAJZooACwgAbKcgAUwccMRU4SNAEoc+QgLQopEAHSzaCpYiMlyGrm24B6BxOmyjA4jLnY2t7qEgoABULGGJ4MghgBCDwCAAlCERMYNDwyOj4WMgAHgCIZB4XGWQAPi5cIA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"omitthisparameter",children:["OmitThisParameter",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#omitthisparameter",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"提取出 this 的类型之后，自然可以构造一个新的，比如删除 this 的类型可以用 OmitThisParameter。"}),"\n",(0,s.jsx)(n.p,{children:"它的源码是这样的："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type OmitThisParameter<T> = \n    unknown extends ThisParameterType<T> \n        ? T \n        : T extends (...args: infer A) => infer R \n            ? (...args: A) => R \n            : T;\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 为待处理的类型。"}),"\n",(0,s.jsxs)(n.p,{children:["用 ThisParameterType 提取 T 的 this 类型，如果提取出来的类型是 unknown 或者 any，那么 unknown extends ThisParameterType","  就成立，也就是没有指定 this 的类型，所以直接返回 T。"]}),"\n",(0,s.jsx)(n.p,{children:"否则，就通过模式匹配提取参数和返回值的类型到 infer 声明的局部变量 A 和 R 中，用它们构造新的函数类型返回。"}),"\n",(0,s.jsx)(n.p,{children:"这样，就实现了去掉 this 类型的目的："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:P,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/C4TwDgpgBAChBOBnA9gOygXigbwFBQKlQEMBbCALigHIBzAV2NVutwF8BuXXAM3tQDGwAJZooiYiAAUwABbDEVOEjQAaKMVqUi9UgCMEAShz5CAtCgA2EAHSXktGfMQ2S5Q10JR4EYPXjocgquZNAA1DSREZoQXGzcoJBQAPKkwsAAKs4wxPChwAgAShCImClpmdm5+QgAPIkQyDzikgB8XNxAA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsx)(n.p,{children:"这个类型除了模式匹配做提取外，也用到了重新构造做变换，稍微复杂一些。"}),"\n",(0,s.jsxs)(n.h2,{id:"partial",children:["Partial",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#partial",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"索引类型可以通过映射类型的语法做修改，比如把索引变为可选。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Partial<T> = {\n    [P in keyof T]?: T[P];\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 为待处理的类型。"}),"\n",(0,s.jsx)(n.p,{children:"通过映射类型的语法构造一个新的索引类型返回，索引 P 是来源于之前的 T 类型的索引，也就是 P in keyof T，索引值的类型也是之前的，也就是 T[P]。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了把索引类型的索引变为可选的效果："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:T,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/C4TwDgpgBACghgJ2ASzgGwEoQM5QLyyIroA8A3gHZwC2EAXFAOQAmA9hQOaMA0UcH9KAEYAHAF8AfAG4AUEA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"required",children:["Required",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#required",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"可以把索引变为可选，也同样可以去掉可选，也就是 Required 类型："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Required<T> = {\n    [P in keyof T]-?: T[P];\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 为待处理的类型。"}),"\n",(0,s.jsx)(n.p,{children:"通过映射类型的语法构造一个新的索引类型，索引取自之前的索引，也就是 P in keyof T，但是要去掉可选，也就是 -?，值的类型也是之前的，就是 T[P]。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了去掉可选修饰的目的："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:u,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/FAFwngDgpgBASlAjgVwJYCcoBMEGcYC88SamWAPAN4B2AhgLZQD8AXDAORYD21A5uwBoYtXszYBGABwBfAHwBuYEA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"readonly",children:["Readonly",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#readonly",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"同样的方式，也可以添加 readonly 的修饰："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Readonly<T> = {\n    readonly [P in keyof T]: T[P];\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 为待处理的类型。"}),"\n",(0,s.jsx)(n.p,{children:"通过映射类型的语法构造一个新的索引类型返回，索引和值的类型都是之前的，也就是 P in keyof T 和 T[P]，但是要加上 readonly 的修饰。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了加上 readonly 的目的："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:w,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/FAFwngDgpgBASlAhgEwPYDsA2YEGcYC88SaWYAPAN7qIC2UAXDAOSkDmzANDIm4zAEYAHAF8AfAG5g0oA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"pick",children:["Pick",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#pick",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"映射类型的语法用于构造新的索引类型，在构造的过程中可以对索引和值做一些修改或过滤。"}),"\n",(0,s.jsx)(n.p,{children:"比如可以用 Pick 实现过滤："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Pick<T, K extends keyof T> = {\n    [P in K]: T[P];\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 为待处理的类型，类型参数 K 为要过滤出的索引，通过 extends 约束为只能是 T 的索引的子集。"}),"\n",(0,s.jsx)(n.p,{children:"构造新的索引类型返回，索引取自 K，也就是 P in K，值则是它对应的原来的值，也就是 T[P]。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了过滤的目的："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:m,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/FAFwngDgpgBACgSwMYGsBKUDOMC89koA8A3gHYCGAtlAFwwDkAJgPakDm9ANDOW7TAEYAHN0xQAHnQEBfbvQrV6MAD4NeUegD4A3MD16gA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"record",children:["Record",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#record",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Record 用于创建索引类型，传入 key 和值的类型："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Record<K extends keyof any, T> = {\n    [P in K]: T;\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:"这里很巧妙的用到了 keyof any，它的结果是 string | number | symbol："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:"image.png"})}),"\n",(0,s.jsx)(n.p,{children:"但如果你开启了 keyOfStringsOnly 的编译选项，它就只是 stirng 了："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:y,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"用 keyof any 是动态获取的，比直接写死 string | number | symbol 更好。"}),"\n",(0,s.jsx)(n.p,{children:"继续讲 Record 这个类型，它用映射类型的语法创建了新的索引类型，索引来自 K，也就是 P in K，值是传入的 T。"}),"\n",(0,s.jsx)(n.p,{children:"这样就用 K 和 T 构造出了对应的索引类型。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:f,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"当传入的 K 是 string | number | symbol，那么创建的就是有可索引签名的索引类型："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:j,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?strictFunctionTypes=false&keyofStringsOnly=true#code/C4TwDgpgBAShDGB7ATgEzgZygXlglqAPAOQCGxUAPlMQEbEA0UAdgK4C2tEyAfANwAoAaEh4kaTACYcYgoQzBkAS2YBzJm07d+AoA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"exclude",children:["Exclude",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#exclude",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"当想从一个联合类型中去掉一部分类型时，可以用 Exclude 类型："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Exclude<T, U> = T extends U ? never : T;\n"})}),"\n",(0,s.jsx)(n.p,{children:"联合类型当作为类型参数出现在条件类型左边时，会被分散成单个类型传入，这叫做分布式条件类型。"}),"\n",(0,s.jsx)(n.p,{children:"所以写法上可以简化， T extends U 就是对每个类型的判断。"}),"\n",(0,s.jsx)(n.p,{children:"过滤掉 U 类型，剩下的类型组成联合类型。也就是取差集。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:o,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?strictFunctionTypes=false&keyofStringsOnly=true#code/FAFwngDgpgBAogDwMYBsCuATKAlKBnGAXnmXSwB4ByAQ0pgB8ZKAjOxypNpjSgGidoMmrAHwBuYMCA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsx)(n.p,{children:"这里用了分布式条件类型的性质，写法上可以简化。"}),"\n",(0,s.jsxs)(n.h2,{id:"extract",children:["Extract",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#extract",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"可以过滤掉，自然也可以保留，Exclude 反过来就是 Extract，也就是取交集："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Extract<T, U> = T extends U ? T : never;\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:g,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?strictFunctionTypes=false&keyofStringsOnly=true#code/FAFwngDgpgBAogDxAJwIYGMQCUoGcYC88SamAPAOSoUwA+MFARjfReiwwCYUA0D1dBswB8AbmDAgA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"omit",children:["Omit",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#omit",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"我们知道了 Pick 可以取出索引类型的一部分索引构造成新的索引类型，那反过来就是去掉这部分索引构造成新的索引类型。"}),"\n",(0,s.jsx)(n.p,{children:"可以结合 Exclude 来轻松实现："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Omit<T, K extends keyof any> = Pick<T, Exclude<keyof T, K>>;\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 为待处理的类型，类型参数 K 为索引允许的类型（string | number | symbol 或者 string）。"}),"\n",(0,s.jsx)(n.p,{children:"通过 Pick 取出一部分索引构造成新的索引类型，这里用 Exclude 把 K 对应的索引去掉，把剩下的索引保留。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了删除一部分索引的目的："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:x,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?strictFunctionTypes=false&keyofStringsOnly=true#code/C4TwDgpgBA8gtgS2AJQgZygXlo4AeAbwDsBDOCALgHIBzAVxKJqoBooSbKoAmABgF82VUuSoA+ANxA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"awaited",children:["Awaited",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#awaited",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"在递归那节我们写过取 Promise 的 ValuType 的高级类型，这个比较常用，ts 也给内置了，就是 Awaited。"}),"\n",(0,s.jsx)(n.p,{children:"它的实现比我们当时写的完善一些："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Awaited<T> =\n    T extends null | undefined\n        ? T \n        : T extends object & { then(onfulfilled: infer F): any }\n            ? F extends ((value: infer V, ...args: any) => any)\n                ? Awaited<V>\n                : never \n            : T;\n"})}),"\n",(0,s.jsx)(n.p,{children:"类型参数 T 是待处理的类型。"}),"\n",(0,s.jsx)(n.p,{children:"如果 T 是 null 或者 undefined，就返回 T。"}),"\n",(0,s.jsx)(n.p,{children:"如果 T 是对象并且有 then 方法，那就提取 then 的参数，也就是 onfulfilled 函数的类型到 infer 声明的局部变量 F。"}),"\n",(0,s.jsx)(n.p,{children:"继续提取 onfullfilled 函数类型的第一个参数的类型，也就是 Promise 返回的值的类型到 infer 声明的局部变量 V。"}),"\n",(0,s.jsx)(n.p,{children:"递归的处理提取出来的 V，直到不再满足上面的条件。"}),"\n",(0,s.jsx)(n.p,{children:"这样就实现了取出嵌套 Promise 的值的类型的目的:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:A,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"为什么要提取 then 方法的第一个参数的返回值类型看下 Promise 的结构就明白了："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"new Promise(() => {\n    // xxx\n}).then((value) => {\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"then 第一个参数是 onfullfilled 的回调，从它的第一个参数就能拿到返回的值的类型。"}),"\n",(0,s.jsx)(n.p,{children:"对比下我们之前的实现："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type DeepPromiseValueType2<T> = \n    T extends Promise<infer ValueType> \n        ? DeepPromiseValueType2<ValueType>\n        : T;\n"})}),"\n",(0,s.jsx)(n.p,{children:"内置的高级类型不再限制必须是 Promise，而是只要对象且有 then 方法就可以，这样更通用了一些。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/C4TwDgpgBAgg7gQwJbAgEwEoQM5QLyyIroA8ACgE4D2AtkthOdXQ07fYwHYCuNARhAoA+EUIDcAKClA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"nonnullable",children:["NonNullable",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#nonnullable",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"NonNullable 就是用于判断是否为非空类型，也就是不是 null 或者 undefined 的类型的，实现比较简单："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type NonNullable<T> = T extends null | undefined ? never : T;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["当传入 null 时：\n",(0,s.jsx)("img",{src:h,alt:""})]}),"\n",(0,s.jsx)(n.p,{children:"当传入非空类型时："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:p,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/C4TwDgpgBAcg9gOxgVwDaoIYCNUQEoQDOUAvLIiutrgDwJqoB8A3AFCiTlIPX5EBMpLpUw4INAN4IMAWwgAuKAHIA5sgwIVSgL4tWQA",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsxs)(n.h2,{id:"uppercaselowercasecapitalizeuncapitalize",children:["Uppercase、Lowercase、Capitalize、Uncapitalize",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#uppercaselowercasecapitalizeuncapitalize",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"这四个类型是分别实现大写、小写、首字母大写、去掉首字母大写的。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:d,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:l,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:t,alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:c,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"它们的源码时这样的："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"type Uppercase<S extends string> = intrinsic;\n\ntype Lowercase<S extends string> = intrinsic;\n\ntype Capitalize<S extends string> = intrinsic;\n\ntype Uncapitalize<S extends string> = intrinsic;\n"})}),"\n",(0,s.jsx)(n.p,{children:"啥情况，intrinsic 是啥？"}),"\n",(0,s.jsx)(n.p,{children:"这个 intrinsic 是固有的意思，就像 js 里面的有的方法打印会显示 [native code] 一样。这部分类型不是在 ts 里实现的，而是编译过程中由 js 实现的。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsx)(n.p,{children:"我们可以在源码里找到对应的处理代码："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:i,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"其实就是 ts 编译器处理到这几个类型时就直接用 js 给算出来了。"}),"\n",(0,s.jsx)(n.p,{children:"为啥要这样做呢？"}),"\n",(0,s.jsx)(n.p,{children:"因为快啊，解析类型是要处理 AST 的，性能比较差，用 js 直接给算出来那多快呀。"}),"\n",(0,s.jsx)(n.p,{children:"这几个类型的原理在原理篇也会带大家 debug 下源码。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?strictFunctionTypes=false&keyofStringsOnly=true#code/C4TwDgpgBAqmkCcDGBDAzhAShNUC8s8Ey6EAPAOQrUoUB8A3AFBOiRQAyA9gO7GoZsuAtz4kMlAILT6zVuGgBhFGACWwFABtVALyw58UZWo3a9lGrJZtoMAHaoTW3fuGwHK9c-MVJ1K0A",target:"_blank",rel:"noopener noreferrer",children:"试一下"})}),"\n",(0,s.jsx)(n.p,{children:"这基本就是全部的内置高级类型了。"}),"\n",(0,s.jsxs)(n.h2,{id:"总结",children:["总结",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"虽然我们学完 6 个套路，各种类型编程逻辑都能写了，但是常用的类型 TS 已经内置了。"}),"\n",(0,s.jsx)(n.p,{children:"这些内置的高级类型用我们学的套路很容易可以实现。"}),"\n",(0,s.jsx)(n.p,{children:"比如用模式匹配可以实现：Parameters、ReturnType、ConstructorParameters、InstanceType、ThisParameterType。"}),"\n",(0,s.jsx)(n.p,{children:"用模式匹配 + 重新构造可以实现：OmitThisParameter"}),"\n",(0,s.jsx)(n.p,{children:"用重新构造可以实现：Partial、Required、Readonly、Pick、Record"}),"\n",(0,s.jsx)(n.p,{children:"用模式匹配 + 递归可以实现： Awaited"}),"\n",(0,s.jsx)(n.p,{children:"用联合类型在分布式条件类型的特性可以实现： Exclude"}),"\n",(0,s.jsx)(n.p,{children:"此外还有 NonNullable 和四个编译器内部实现的类型：Uppercase、Lowercase、Capitalize、Uncapitalize。"}),"\n",(0,s.jsx)(n.p,{children:"这些类型也不咋需要记，就算忘记了自己也能很快的实现。重点还是放在 6 个类型编程的套路上。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/play?#code/FAFwngDgpgBACgQwE4ILZRFJBnASlbGAXnmTQy2wB4AKAO3IC4ZsQkBLOgcwBoYEuUZnQCuqAEZYAlMQB8MAN4BfWQG5goSLHwgRSOgBUt+QiR17DW2jKLyA5ABMA9tztqNnTEgBmCAMawcJQuisAw4TAM6MysHNzqSh50Xr4B8MF0AMIusSJ+IE5IoRGRUADu9EwsbJxcUsxBOC4JGuDQMNl0ufmFiCjoXngExB05bHkFSH3kg1SN2C6d3ZPumu0Akl0gCHQBRtAmI5usO3tW84tjSBOFq94iuyDsIQAWUAA27040IC-s2A0MjIFGEIn4ck53lAAHRfLg-P7YaFRKBSFrAAD0GJgb0+TmhfgQnxoyjRrS0MAMiOmAyw+yghxIVP+NIoSHpVDaUCc3hxHy+dwe+WedBYCDACP+gKadD4AiEkTEkiQwNB4XBXUhMLhkqRKLJJSQGAsMF+-2R5BgAGoYHZbdb+IJ0VyYAB5VDsEDM7CsryMt0er3Usi0pCcrQ8sVgVYu92e-1xkBUBQoxh2LgiHZcOxywTMABMAAYlHw7Ci3Oo1oFkE8if6+rX3snU7bnK5cwqAIwADhUlZd+AAjiJ2EaHP6hyOx83yAB+ZiOFzZjvzmA9vvk9r4BBt95gCdQHcuPcz6Ktpc5x1d3urKvwdh+ADW9Yfj9PCsX7avzB7fGwUAADx-EtbXLGAAB9bXlCsNDvfBwSQcdhjMKAEIcKg7AQO1ILscRL1ECQsBjCl4MKJDsHzEZSMQqhYlqPgCOVW8XQAUQAvx3hEBwGWQmA2I4rioAwrCINtPDRLsPxsNbS9MOk3CYLvNi2H8EB-WUlB8mE+TxJwqSJIcWSRJwvDbzvAA5FxzJET4EHEKF-UsuhrNs+yhNET5iPaJyXPeOyHIISiSB8my-Lc98FwzLM7A3WCXQAVQgaAkEJf9-US5LUqEzCEFyxSXQAGScMosCy-0ipKlKEH-DCAEF6vyilMgQCBPSJdgAC8eNMDoWra95Ouy3KsK82B4t2PrtgGrr0om1qpsGuq8rM2DgCAA",target:"_blank",rel:"noopener noreferrer",children:"本文的案例合并"})})]})}function D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(U,{...e})}):U(e)}let S=D;D.__RSPRESS_PAGE_META={},D.__RSPRESS_PAGE_META["TypeScript%20%E7%B1%BB%E5%9E%8B%E4%BD%93%E6%93%8D%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%2F12.TypeScript%20%E5%86%85%E7%BD%AE%E7%9A%84%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F.md"]={toc:[{text:"Parameters",id:"parameters",depth:2},{text:"ReturnType",id:"returntype",depth:2},{text:"ConstructorParameters",id:"constructorparameters",depth:2},{text:"InstanceType",id:"instancetype",depth:2},{text:"ThisParameterType",id:"thisparametertype",depth:2},{text:"OmitThisParameter",id:"omitthisparameter",depth:2},{text:"Partial",id:"partial",depth:2},{text:"Required",id:"required",depth:2},{text:"Readonly",id:"readonly",depth:2},{text:"Pick",id:"pick",depth:2},{text:"Record",id:"record",depth:2},{text:"Exclude",id:"exclude",depth:2},{text:"Extract",id:"extract",depth:2},{text:"Omit",id:"omit",depth:2},{text:"Awaited",id:"awaited",depth:2},{text:"NonNullable",id:"nonnullable",depth:2},{text:"Uppercase、Lowercase、Capitalize、Uncapitalize",id:"uppercaselowercasecapitalizeuncapitalize",depth:2},{text:"总结",id:"总结",depth:2}],title:"12.TypeScript 内置的高级类型有哪些？",headingTitle:"12.TypeScript 内置的高级类型有哪些？",frontmatter:{}}}}]);