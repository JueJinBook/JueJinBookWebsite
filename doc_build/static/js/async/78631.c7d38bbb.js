"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["78631"],{986423:function(e,n,i){i.r(n),i.d(n,{default:()=>m});var s=i(552676),a=i(740453);let r=i.p+"static/image/6464aa3947f34fd394053ffa8a0d2b4e.3af1f553.webp",t=i.p+"static/image/5e84a2a7c82c4f4d7b1681e1c1c54efe.8865815b.webp",l=i.p+"static/image/a2aa89a798affadd30a35f6cc41e5478.063bac59.webp",c=i.p+"static/image/5fd5dc6c44dbf00e11c15f09050f3897.fe350258.webp",d=i.p+"static/image/c52d2e0af862bbfb5fab4f008578a216.9df63e92.webp",p=i.p+"static/image/3b1bb8c9fe90a362f77fd151a48fcb17.a20a4329.webp",h=i.p+"static/image/813f3da07a22a59681f971e4b41152f4.7a7a492d.webp";function o(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",img:"img",code:"code",pre:"pre",ol:"ol",li:"li"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"13-实战3导航一发现的页面开发",children:["13 实战3：导航一：发现的页面开发",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#13-实战3导航一发现的页面开发",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"本章正式进入项目页面开发环节，将带大家完整的实现项目中的首页，涵括的功能点包含组件拆分、导航栏引入、banner 轮播、跳转等难点的讲解。"}),"\n",(0,s.jsxs)(n.h2,{id:"去除顶部标题栏",children:["去除顶部标题栏",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#去除顶部标题栏",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"首先看页面布局，页面部分可以分为2个小块：轮播图，歌单滑动等小块。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:h,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"以上图作为 UI 设计稿，我们需要做的是完善页面内容，开发代码以上一节的架构代码为基础，调试以浏览器为优先。"}),"\n",(0,s.jsx)(n.p,{children:"Uniapp 默认情况下在 h5 端的是有 title 标题栏的，如果需要去掉就要在配置文件进行设置，这是未改之前的图片："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:"data:image/webp;base64,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",alt:""})}),"\n",(0,s.jsxs)(n.p,{children:["当前开发的音乐应用是不需要标题栏的，找到项目的根目录下的 pages.json 文件，添加一下内容，可以去掉对应页面的导航栏，设置 app-plus 的 ",(0,s.jsx)(n.code,{children:"titleNView"})," 为 ",(0,s.jsx)(n.code,{children:"false"})," 即可；"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'/* pages.json */\n\n"pages": [\n    {\n     "path": "pages/index/index",\n        "style": {\n            "navigationBarTitleText": "发现",\n            "app-plus":{\n                "titleNView": false\n            }\n        }\n    }\n]\n'})}),"\n",(0,s.jsx)(n.p,{children:"而且作为首页（启动的第一个页面），这个页面需要在 pages 数组中放在第一位，项目在启动的时候就会以此作为第一个启动页。"}),"\n",(0,s.jsxs)(n.h2,{id:"首页-banner-轮播swiper组件使用",children:["首页 banner 轮播（swiper组件使用）",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#首页-banner-轮播swiper组件使用",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:p,alt:""})}),"\n",(0,s.jsxs)(n.p,{children:["这样的 banner 轮播图交互可以选择 swiper 组件来完成，配置",(0,s.jsx)(n.a,{href:"https://uniapp.dcloud.io/component/swiper",target:"_blank",rel:"noopener noreferrer",children:"查看"}),"，代码："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<swiper class="swiper">\n    <swiper-item>\n        <view class="swiper-item">包含的内容</view>\n    </swiper-item>\n</swiper>\n'})}),"\n",(0,s.jsx)(n.p,{children:"Uniapp 的 swiper 组件为滑块视图容器，可以用于左右滑动或上下滑动，比如 banner 轮播图。注意是滑动切换而不是滚动。swiper 下的每个 swiper-item 是一个滑动切换区域，不能停留在2个滑动区域之间。这样的交互效果完美契合了我们要完成的轮播图。"}),"\n",(0,s.jsxs)(n.p,{children:["由 swiper 包裹 item 组件，swiper 接受配置参数，完成轮播的特效，我们要实现滑动动画时长300毫秒(",(0,s.jsx)(n.code,{children:'duration="300"'}),")，显示面板指示点（轮播图中间的导航小点）(",(0,s.jsx)(n.code,{children:'indicator-dots="true"'}),")，自动播放轮播图(",(0,s.jsx)(n.code,{children:'autoplay="true"'}),")，当前选中的指示点颜色为黑色(",(0,s.jsx)(n.code,{children:'indicator-active-color="#000"'}),")的设定："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<swiper class="swiper" indicator-dots="true"  indicator-active-color="#000" autoplay="true" interval="interval" >\n    <swiper-item>\n        <view class="swiper-item uni-bg-red">A</view>\n    </swiper-item>\n</swiper>\n'})}),"\n",(0,s.jsx)(n.p,{children:"我们实现的是需要有圆角的 banner 轮播图，对每个 item 项目设置样式即可。"}),"\n",(0,s.jsx)(n.p,{children:"我们只是书写了样式，怎么让数据对应呢？"}),"\n",(0,s.jsxs)(n.h2,{id:"完成数据请求与数据绑定",children:["完成数据请求与数据绑定",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#完成数据请求与数据绑定",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["跟后台交互的时候，我们需要请求后台数据，Uniapp 有自己封装好的",(0,s.jsx)(n.a,{href:"https://uniapp.dcloud.io/api/request/request",target:"_blank",rel:"noopener noreferrer",children:"api"}),"，通俗易通，跟 jQuery 的 ajax 基本类似，依葫芦画瓢的就行，在 success 前面，是请求完成的回调，比如我会在请求前做一个 loading（菊花）状态呈现在页面，在请求完成后再把 loading 隐藏掉，这个也算是用户体验的一种，让用户预感到一个交互状态在进行中，心里有个预期感，如果网络不好的情况下，这样的作用会显得尤为重要，",(0,s.jsx)(n.a,{href:"https://uniapp.dcloud.io/api/request/request",target:"_blank",rel:"noopener noreferrer",children:"文档查看"}),"。"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"uni.request({\n    url: 'http://localhost:3000/personalized',\n    method: 'GET',\n    header:{},\n    data: {},\n    success: res => {   // 请求成功的状态\n    },\n    fail: () => {  // 失败\n    },\n    complete: () => {   // 接口调用结束的回调函数（调用成功、失败都会执行）\n    }\n});\n\n"})}),"\n",(0,s.jsxs)(n.p,{children:["根据上面代码，我们可以引用到首页开发页面中去，并实现一个请求轮播图数据并伴有状态（loading）小动画，来完成轮播图数据的交互，并在页面 ",(0,s.jsx)(n.code,{children:"onLoad"})," 后调用这个方法："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"/* pages/index/index.vue */\n// ...\ndata () {\n    return {\n        swiper: [],\n        loading: false\n    }\n},\nonLoad() {\n    this.getBanner()\n},\nmethods: {\n    // 获取轮播图\n    getBanner() {\n        // 正在加载状态\n        this.loading = true\n        uni.request({\n            url: 'http://localhost:3000/banner',\n            method: 'GET',\n            data: {},\n            success: res => {\n                this.swiper = res.data.banners\n            },\n            complete: () => {\n                // 加载完成状态\n                this.loading = false\n            }\n        });\n    }\n}\n\n// ...\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"关于请求的报错，加载 loading 等，都封装在了项目的 request 工具中。因此我们改为 api 的方法来完成请求，在 apis 文件夹中新增 index.js："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"/* apis/index.js */\n\nimport request from '@/utils/request/index.js'\n\nexport function apiGetBanner(data) {\n    return request.request({\n        url: '/banner',\n        method: 'GET',\n        data: data,\n        authType: 'None'\n    })\n}\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"注意： @ 代表的是开发目录，这是路径别名。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"/* pages/index/index.vue */\n\nimport { apiGetBanner } from '@/apis/index.js';\n\n// ...\ndata () {\n    return {\n        swiper: [],\n    }\n},\nonLoad() {\n    this.getBanner()\n},\nmethods: {\n    // 获取轮播图\n    getBanner() {\n        apiGetBanner().then(res => {\n            this.swiper = res.banners\n        })\n    },\n}\n\n// ...\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"数据可以直接赋值到 model 中的 data 里面，视图 template 直接对应即可："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<view class="banner">\n    <swiper class="swiper" :autoplay="true" :indicator-dots="true" indicator-active-color="#ff372b"\n     indicator-color=\'rgba(255,255,255, .5)\' duration="500" :circular="true">\n        <swiper-item v-for="(item,index) in swiper" :key="index">\n            <view class="item">\n                <image :src="item.imageUrl" class="img"></image>\n                <view class="tag">{{item.typeTitle}}</view>\n            </view>\n        </swiper-item>\n    </swiper>\n</view>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Uniapp 处理了小程序 ",(0,s.jsx)(n.code,{children:"this.setData({})"})," 数据赋值方式，我们可以直接使用 ",(0,s.jsx)(n.code,{children:"this.swiper = res.banners"})," 进行赋值，如果原有的小程序项目需要更改这种赋值方式，或者更改重写 setData 方法："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"setData: function (obj) {    \n    let that = this;    \n    let keys = [];    \n    let val,data;    \n    Object.keys(obj).forEach(function (key) {    \n      keys = key.split('.');    \n      val = obj[key];    \n      data = that.$data;    \n      keys.forEach(function (key2, index) {    \n          if (index+1 == keys.length) {    \n              that.$set(data,key2,val);    \n          } else {    \n              if (!data[key2]) {    \n                 that.$set(data,key2,{});    \n              }    \n          }    \n          data = data[key2];    \n      })    \n    });    \n}  \n"})}),"\n",(0,s.jsxs)(n.p,{children:["更多微信小程序转换 Uniapp 详细指南、小程序转 Uniapp 转换器、wepy 转 Uniapp 需求可以对照，前往",(0,s.jsx)(n.a,{href:"https://ask.dcloud.net.cn/article/35786",target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)(n.a,{href:"https://ask.dcloud.net.cn/article/35786",target:"_blank",rel:"noopener noreferrer",children:"https://ask.dcloud.net.cn/article/35786"})})]}),"\n",(0,s.jsxs)(n.h2,{id:"主入口的代码实现",children:["主入口的代码实现",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#主入口的代码实现",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:d,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"这一块的开发看起来相对简单，实际上处理起来可以以更优雅的方式来处理（这一块由于接口的限制也做进一步的说明）。"}),"\n",(0,s.jsx)(n.p,{children:"主入口有五个（包含文字与图标），这些内容都是动态的，不可能把内容直接写死在代码上，在实际业务下需要读取接口。其实前端在实际开发的时候就需要对产品原型有一定了解与前瞻性，哪些是可变的，哪些是不变的，都心里有个底。"}),"\n",(0,s.jsx)(n.p,{children:"在项目准备之初，就已经搭建好整个项目的基本架构（考虑好基本开发），全局样式的引入，通用 js 方法，全局变量等等。这些都是为了更快捷方便的开发整个项目，现在就是使用的时候了。"}),"\n",(0,s.jsx)(n.p,{children:"我把这一块拿出来说，因为大部分开发人员注重 js 逻辑层的书写，往往忽略了基础的 css。往下看，你就会了解到前端 css 显得像利刃一样，开发来的简便快捷一些。像这样等分排列样式，可以用 flex 伸缩盒进行书写构建："}),"\n",(0,s.jsxs)(n.p,{children:["我已经在 common.scss 定义了样式类名 ",(0,s.jsx)(n.code,{children:"flex-box"}),", ",(0,s.jsx)(n.code,{children:"flex-item"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-css",children:"\x3c!-- common/css/common.scss --\x3e\n.flex-box{\n    display:flex;\n    .flex-item{\n        flex:1;\n    }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"书写页面代码的时候可以直接对应元素搭建 dom 样式:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<view class="main-bar flex-box">\n    <view class="flex-item" v-for="(item, index) in contentBar" :key="index">\n        <image :src="\'/static/image/index/t_\' + (index + 1) + \'.png\'" class="img"></image>\n        <view>{{item.name}}</view>\n        <view v-if="index == 0" class="date">{{curDate}}</view>\n    </view>\n</view>\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// data数据\n// ...\n\ncontentBar: [\n    { name: "每日推荐" },\n    { name: "歌单" },\n    { name: "排行榜" },\n    { name: "电台" },\n    { name: "直播" }\n],\n'})}),"\n",(0,s.jsx)(n.p,{children:"上面的代码可以基本的实现样式等比排列，你会看到："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:c,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"你可能心里在骂“弄了半天，怎么还是这样？”"}),"\n",(0,s.jsxs)(n.p,{children:["其实你可以看上面的截图，你就会了解，图片并不像我们以前开发的那个样式呈现。原因在于 Uniapp 的框架中，图片 ",(0,s.jsx)(n.code,{children:"image"}),"元素是一个组件，在渲染到设备上会自带一个样式（",(0,s.jsx)(n.code,{children:"<image>"})," 组件默认宽度 300px、高度 225px），这样会撑破你的样式盒子。"]}),"\n",(0,s.jsxs)(n.p,{children:["在 css 命名上，没有使用复杂的，庸长的，或者难懂的名字。这一块（主入口）代码，可以外层父级元素命名 ",(0,s.jsx)(n.code,{children:"main-bar"}),"，里面的图片元素最顶层且颗粒度最小的元素可以命名为 ",(0,s.jsx)(n.code,{children:"img"}),"："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-css",children:".main-bar {\n    padding-bottom:22rpx;\n    text-align: center;\n    line-height: 70rpx;\n    color:#666;\n    border-bottom:1rpx solid #e6e6e6;\n    .img {\n        display: block;\n        width: 92rpx;\n        height: 92rpx;\n        margin: 0 auto;\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["上面简单的几行就可以实现效果，标题文字的行高和排列由最外层父级决定（",(0,s.jsx)(n.code,{children:"line-height"}),"，",(0,s.jsx)(n.code,{children:"text-align"}),"会继承）。可能你会想起以前自己写的代码："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-css",children:"\x3c!-- no good --\x3e\n.main-bar {\n    margin-top: 38rpx;\n    text-align: center;\n    line-height: 66rpx;\n    .main-bar-img {\n        display: block;\n        width: 124rpx;\n        height: 60rpx;\n        margin: 0 auto;\n        line-height: 1;\n    }\n    .main-bar-name{\n        text-align: center;\n        line-height: 66rpx;\n    }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"上面的代码在命名上是重复性的，以及不必要的，样式也是。在命名上最外层块的父级其实已经包含了基本的样式，也定义了属于那一块，里面的子元素就不用再去重复叠加命名了。在其他代码块也一样设定，如果想了解更多命名规范可以在网上查找 BEM，这些会让你感觉到 css 也是一把利刃。:)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<view v-if="index === 0" class="date">{{curDate}}</view>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["上面的这句是每日推荐对应的日期，",(0,s.jsx)(n.code,{children:'v-if="index === 0"'})," 列表索引的第一个 item 才生效。"]}),"\n",(0,s.jsxs)(n.h2,{id:"使用自定义组件完成歌单",children:["使用自定义组件完成歌单",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用自定义组件完成歌单",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"在代码书写中，大家都会把共用的方法抽出来，共用的变量抽出来进行变量共享。"}),"\n",(0,s.jsx)(n.p,{children:"记得我在前面说过，在软件开发里，有些通用的思想，比如隔离变化，约定优于配置等，隔离变化就是说做好抽象，把一些容易变化的地方找到共性，隔离出来，不要去影响其他的代码。这在开发里面以功能细分称为模块，以组成细分称为组件。一台电脑由主机，显示器，键盘，鼠标组成，细分为几个模块；单个鼠标由滚轮，外壳，内芯组成。"}),"\n",(0,s.jsx)(n.p,{children:"根据上面的思想，那么推荐歌单，达人歌单，最新专辑三个模块的共有的有主标题，链接更多，歌单数据（图片，内容文字等），那么我们就可以把想要的组件基本的抽离。"}),"\n",(0,s.jsx)(n.p,{children:"分析组件："}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"建立组件的模板，先把架子搭起来，命名约定，组件样式，考虑好组件的基本逻辑。"}),"\n",(0,s.jsx)(n.li,{children:"组件的数据输入，即定好 props 里面的数据类型。"}),"\n",(0,s.jsx)(n.li,{children:"组件的数据输出，即对外暴露出来的方法和数据。"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"在 components 文件夹创建 songList.vue 文件:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<template>\n    <view class="song-list-comp">\n        <view class="tit-bar">\n            {{title}}\n            <navigator :url="link" class="more fr">歌单广场</navigator>\n        </view>\n        <view class="clearfix">\n            <view class="item" v-for="(item, index) in list" :key="index">\n                <image class="img" :src="item.picUrl + $imgSuffix"></image>\n                <view class="desc">{{item.name}}</view>\n                <view class="count"> {{ item.playCount}}</view>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script>\n    export default {\n        // 从父组件传值的 共有的有主标题，链接更多，歌单数据\n        props:{\n            title: {\n                type: String,\n                default: \'\'\n            },\n            link:{\n                type:String,\n                default:\'\'\n            },\n            list:{\n                type: Array,\n                default () {  // 这里返回值需要是一个函数\n                    return []\n                }\n            }\n        },\n        data() {\n        },\n        methods:{\n        }\n    }\n<\/script>\n<style lang="scss" scoped>\n.song-list-comp {\n        padding-left: 32rpx;\n        margin-top:10rpx;\n        .tit-bar {\n            font-size: 34rpx;\n            font-weight: 600;\n            line-height: 110rpx;\n        }\n\n        .more {\n            width:150rpx;\n            height:50rpx;\n            line-height:50rpx;\n            text-align: center;\n            margin-top: 30rpx;\n            margin-right: 32rpx;\n            font-weight: 400;\n            font-size: 24rpx;\n            border: 2rpx solid #e6e6e6;\n            border-radius: 50rpx;\n        }\n\n        .item {\n            float:left;\n            position: relative;\n            width: 216rpx;\n            padding-bottom:16rpx;\n            margin-right: 16rpx;\n            line-height: 34rpx;\n            &.video{\n                width: 450rpx;\n            }\n            .img {\n                display: block;\n                width: 100%;\n                height: 216rpx;\n                margin-bottom: 16rpx;\n                background: #eee;\n                border-radius: 10rpx;\n            }\n            .desc{\n                height:64rpx;\n                margin-top:12rpx;\n                line-height: 30rpx;\n            }\n            .count{\n                position:absolute;\n                top:0;\n                right:0;\n                padding-left:25rpx;\n                line-height: 34rpx;\n                color:#fff;\n                font-size: 24rpx;\n                z-index: 10;\n                background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAqFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8j1z1tAAAAN3RSTlMA9wcC+/3w4A/RoQv0m4s6IBkU7eeRK73kxaZtW+rc1cmxe3UmwbiWQNmqgWZUzUY1ME4dhmGuJ2Z0kQAABVtJREFUeNrtnYtWGkEQRFsEeSmgII8EVBASUFHx1f//ZwmJRwaZYhndjdU5c//gQp8DVTvTK5FIJBKJRCKRSCQSiUQikcj/yWI6vRfzNEYz/U23NhbLlF70jZ7hr+W+pQ6FoxOxyXhP12neiEVyZd3gdiH2uFYfP0tijP2mehk8iy3miui1xRLfFHNaFTv0dAutvpihq1uZmPmp1yRqRuZLVxyol+5cLOB+9nMwZ52G8OOKSLWWVx97TzlhZ01EZDxRL8UHIcf92ZAl/ZZ6+UE+XxsiUjoF8zWinq9NEZH2BZivO+HFJyLyPFAvL4/Cil9ESkcF9XFIO19ARGRRVi9ndaHEDVPvksp38FP/7VgIQSJLTirq5fByX+jAIkvq5+rlnG++tovI/uWheqmwlUZAZMXxlXo5+M41X0DEZXqmXspUpaSuOBJAbrTq8GhLSSzi8jjUv/CWkusimLui/oa4lNxVRHLXYL5ISkmPCKLRYS4lPSIYFOovCEpJXVGRJGCoz59++XwBEci4R1pKIhFMv0VZegeL4FCfDyklGUSWoZ6vlAQiSTw32UpJN/lJMm6o5yolkUgy92WqUjJcxA31RKXkJ0RwqN+7TpwvLpFlqGcpJYNEQkL9MOtSEotcSRIo1DOU3kEigaH+bCoQShEY6vUKlpKcIjDU41IyS5EXSSY81M/q4oNXBIR6VHoTi4BQD0pJahEQ6kHpnZ3IUAIIDPWF96U3u8hGqEelJL/IWqjHpaQFERjqC0er0siECAj12c6Xm4ckRW6a20tJMyKvoR6WknZEcKgf9EXEkggO9b22LREY6pelpC0RHOq7fWMiONRPxlmJdCQLcKjPP1VtieBQX5wbE8GhvtOwJbIM9bCUtCWCQ33xzpgIDvWVXLoiE8macQck4YYxERjqy/vWRFCofzInItKeqIdxiiI9yRwc6msWRXyhfmBSxBfqFzZFNkP9g1UROVkP9TfpiVzIv6VRVodLqyLv/7D0jYps/IW8Nyni+VNfNSjii1kVSU/kVjIHB9+6ORF/FTEUYyKgHBqUjIlMZ+rjcCppipQlY47BOoNyQ0yJoEq7JmJJpH4Om1NLIieVAjzAbUgEPSjJn1YlA5FzyYj7Mn6eaEhkmTvQtRNLIjdNeBHIksjiFp+CyExkJmlT+lmA5wYsiTwP8PVFQyLti20XSs2IVE/zGZ+mwyJnkh79VsKlaxsi40niiUALIug44IF7BtiAyLyb7anZZJGipECjs9s5ZnKR3NPejifLuUUeimDBzeZUMYs0fgQ8SOcVAU/R0X2YLEW66ZXSyTfgSEUeh19+JxGIhJbSX39L1G00PlxKM9zbBSIhpTTHTWogElBKk9xt/5xIfUazAtXtZ8JLaaL9D64IX334L0Tq51w7LNySJqyUJttaA0QSp4pujxAWCS+lb9vydbiZeudSmnHXVrDITZNz+1mgyOKWdR8dEIGlNO2GwBCR5wHxzka36kgopXvUWzRdEapSOiORfot906ybTINL6RnHVHlEUCltYFtussi8++WrQtIQaXQIlreEinhLaYZ1OoEi+Z1L6R+EW9ehCC6lzyjfs4BElqU0zRKwQJHCeinNUB9+VgSX0rxvh/GJ5EagPnwifl+POryV0jT14WdEjq+I6sMPilCV0p8R2Zf6jKs+/KAIKqUH5FO1IXKght+NqCt4F3fvwtu3QL+qP4GybqFwZGKq/jBUTJnldQO78F1VbbxgJIHSHpgqivowhIp/qoiKnh05aZqfqlceiOvDMC51jRlb0bM79RZrfRhKqXb46lExOlVv5O5G19ejB/bQEYlEIpFIJBLJkF8r2nFUwcJuMQAAAABJRU5ErkJggg==) no-repeat;\n                background-size: 25rpx 25rpx;\n                transform: scale(0.8);\n            }\n        }\n    }\n</style>\n\n'})}),"\n",(0,s.jsx)(n.p,{children:"这样我们在首页 /pages/index/index.vue 就可以引用这个组件了"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'\x3c!-- /pages/index/index.vue --\x3e\n<template>\n    <view>\n        <songList title="推荐歌单" link="test?id=123" :list="recommendSongs"/>\n    </view>\n</template>\n<script>\n    // 定义为 songList，需要在components注册一下\n    import songList from \'../../components/songList\'\n\n    export default {\n        components: {\n            songList     // 此处 songList:songList，es6中同名键值可以简写\n        },\n        data() {}\n        // ...\n    }\n<\/script>\n\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:l,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"你会看到推荐歌单会渲染两个，一个是由组件渲染，另一个则是页面代码渲染。上面只是一个示例与组件实现思想，其实接口字段不完全相同的，如果需要完全共用，就需要重新修改数据字段，这样就可以完全的使用通用组件了。"}),"\n",(0,s.jsxs)(n.h2,{id:"实现-tab-切换加载不同数据",children:["实现 tab 切换加载不同数据",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#实现-tab-切换加载不同数据",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:t,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"点击 tab 切换加载不同数据，并且选中的 tab 样式进行突出设置，未选中保持平常样式。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'\x3c!-- 歌单分类块 --\x3e\n<view class="song-list">\n    <view class="switch-line flex-box">\n        <view class="flex-box">\n            <view class="switch-item" :class="{on : newType == 1}" @click="switchTab(1)">新碟</view>|\n            <view class="switch-item" :class="{on : newType == 2}" @click="switchTab(2)">新歌</view>\n        </view>\n        <template v-if="newType == 1">\n            <view class="more">更多新碟</view>\n        </template>\n        <template v-if="newType == 2">\n            <view class="more">新歌推荐</view>\n        </template>\n    </view>\n    <scroll-view class="scroll-view" scroll-x>\n        <view class="item" v-for="(item, index) in latestAlbum" :key="index">\n            <image class="img" :src="item.picUrl + $imgSuffix"></image>\n            <view class="desc ellipsis">{{item.name}}</view>\n            <view class="desc ellipsis c9">{{item.artist.name}}</view>\n        </view>\n    </scroll-view>\n</view>\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// 切换新碟新歌\nswitchTab (type) {\n    this.newType = type\n    // 根据类型加载不同数据\n    if (type == 1) {\n        // 新碟数据\n    }\n    if (type == 2) {\n        // 新歌数据\n    }\n},\n"})}),"\n",(0,s.jsxs)(n.p,{children:["在元素 ",(0,s.jsx)(n.code,{children:'@click="switchTab(1)"'})," 事件的点击触发，传值 1 ，修改了 ",(0,s.jsx)(n.code,{children:"newType"})," 的值为 1，传给 :class 一个对象，以动态地切换 class："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<view class="switch-item" :class="{on : newType == 1}">新碟</view>\n'})}),"\n",(0,s.jsx)(n.p,{children:"上面的语法表示 on 这个 class 存在与否将取决于数据属性 newType 是否等于 1。如果等于 1，class 的值将会添加 on，结果渲染为："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<view class="switch-item on">新碟</view>\n'})}),"\n",(0,s.jsx)(n.p,{children:"这样实现互斥样式的改变，取决于点击改变 newType 的值。切换不同数据也是一样的原理。"}),"\n",(0,s.jsxs)(n.h2,{id:"其他处理",children:["其他处理",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#其他处理",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"当前页开发设计中去掉了导航栏，当页面配置 navigationStyle 设置为 custom 的时候可以使用此组件替代原生导航栏，在 pages.json:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'"globalStyle": {\n    "navigationBarTextStyle": "black",\n    "navigationBarTitleText": "Uniapp Music",\n    "navigationBarBackgroundColor": "#F8F8F8",\n    "backgroundColor": "#F8F8F8",\n    "navigationStyle": "custom"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"当前首页在小程序端显示下并没有导航栏，页面内容直接从设备顶部屏幕暂时，会出现运营商展示栏遮盖页面内容的问题，我们需要对小程序端差异化处理。对小程序添加一个顶部间隔："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)("img",{src:r,alt:""})}),"\n",(0,s.jsx)(n.p,{children:"// 平台差异化处理的代码可以放在底部，这样有利于集中管理"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-css",children:"/* #ifdef MP-WEIXIN */\n.banner{\n    margin-top:60rpx;\n}\n/* #endif */\n"})}),"\n",(0,s.jsx)(n.p,{children:"小结："}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"导航栏和标题栏都可以在 pages.json 设置，掌握多端的特性，可以做出多样化的应用；"}),"\n",(0,s.jsxs)(n.li,{children:["尽量使用框架的组件，可以提高开发效率，可以在 ",(0,s.jsx)(n.a,{href:"https://ext.dcloud.net.cn/",target:"_blank",rel:"noopener noreferrer",children:"插件市场"})," 查找想要的功能；"]}),"\n",(0,s.jsx)(n.li,{children:"良好的命名习惯能让你的开发质量提升一个档次；"}),"\n",(0,s.jsx)(n.li,{children:"不同端差异化集中处理，不仅有利于管理，还可以一目了然。"}),"\n",(0,s.jsxs)(n.li,{children:["本章代码 ",(0,s.jsx)(n.a,{href:"https://github.com/front-end-class/uniapp-music-code/blob/master/uni-course-%E5%AE%9E%E6%88%98%E5%BC%80%E5%8F%91%E5%8F%91%E7%8E%B0%E9%A1%B5.zip",target:"_blank",rel:"noopener noreferrer",children:"uni-course-实战开发发现页"}),"。"]}),"\n"]})]})}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}let m=x;x.__RSPRESS_PAGE_META={},x.__RSPRESS_PAGE_META["Uniapp%20%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E8%BF%9B%E9%98%B6%2F13%20%E5%AE%9E%E6%88%983%EF%BC%9A%E5%AF%BC%E8%88%AA%E4%B8%80%EF%BC%9A%E5%8F%91%E7%8E%B0%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%BC%80%E5%8F%91.md"]={toc:[{text:"去除顶部标题栏",id:"去除顶部标题栏",depth:2},{text:"首页 banner 轮播（swiper组件使用）",id:"首页-banner-轮播swiper组件使用",depth:2},{text:"完成数据请求与数据绑定",id:"完成数据请求与数据绑定",depth:2},{text:"主入口的代码实现",id:"主入口的代码实现",depth:2},{text:"使用自定义组件完成歌单",id:"使用自定义组件完成歌单",depth:2},{text:"实现 tab 切换加载不同数据",id:"实现-tab-切换加载不同数据",depth:2},{text:"其他处理",id:"其他处理",depth:2}],title:"13 实战3：导航一：发现的页面开发",headingTitle:"13 实战3：导航一：发现的页面开发",frontmatter:{}}}}]);