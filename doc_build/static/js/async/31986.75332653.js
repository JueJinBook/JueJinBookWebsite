"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["31986"],{491153:function(e,c,s){s.r(c),s.d(c,{default:()=>h});var r=s(552676),d=s(740453);function n(e){let c=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",img:"img",blockquote:"blockquote",pre:"pre"},(0,d.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.h1,{id:"10高级-1不喜欢-merge-的分叉用-rebase-吧",children:["10高级 1：不喜欢 merge 的分叉？用 rebase 吧",(0,r.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#10高级-1不喜欢-merge-的分叉用-rebase-吧",children:"#"})]}),"\n",(0,r.jsxs)(c.p,{children:["有些人不喜欢 ",(0,r.jsx)(c.code,{children:"merge"}),"，因为在 ",(0,r.jsx)(c.code,{children:"merge"})," 之后，",(0,r.jsx)(c.code,{children:"commit"})," 历史就会出现分叉，这种分叉再汇合的结构会让有些人觉得混乱而难以管理。如果你不希望 ",(0,r.jsx)(c.code,{children:"commit"})," 历史出现分叉，可以用 ",(0,r.jsx)(c.code,{children:"rebase"})," 来代替 ",(0,r.jsx)(c.code,{children:"merge"}),"。"]}),"\n",(0,r.jsxs)(c.h2,{id:"rebase在新位置重新提交",children:["rebase——在新位置重新提交",(0,r.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#rebase在新位置重新提交",children:"#"})]}),"\n",(0,r.jsxs)(c.p,{children:[(0,r.jsx)(c.code,{children:"rebase"})," ，又是一个中国人看不懂的词。这个词的意思，你如果查一下的话："]}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.img,{src:"https://user-gold-cdn.xitu.io/2017/11/21/15fdea7b6422ac3a?w=160&h=128&f=jpeg&s=8608",alt:""})}),"\n",(0,r.jsxs)(c.blockquote,{children:["\n",(0,r.jsx)(c.p,{children:"哈？玩个 Git 就弯了？"}),"\n"]}),"\n",(0,r.jsxs)(c.p,{children:["其实这个翻译还是比较准确的。",(0,r.jsx)(c.code,{children:"rebase"})," 的意思是，给你的 ",(0,r.jsx)(c.code,{children:"commit"})," 序列重新设置基础点（也就是父 ",(0,r.jsx)(c.code,{children:"commit"}),"）。展开来说就是，把你指定的 ",(0,r.jsx)(c.code,{children:"commit"})," 以及它所在的 ",(0,r.jsx)(c.code,{children:"commit"})," 串，以指定的目标 ",(0,r.jsx)(c.code,{children:"commit"})," 为基础，依次重新提交一次。例如下面这个 ",(0,r.jsx)(c.code,{children:"merge"}),"："]}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"git merge branch1\n"})}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.img,{src:"https://user-gold-cdn.xitu.io/2017/11/21/15fdea7b6646a1f3?w=640&h=454&f=gif&s=175263",alt:""})}),"\n",(0,r.jsxs)(c.p,{children:["如果把 ",(0,r.jsx)(c.code,{children:"merge"})," 换成 ",(0,r.jsx)(c.code,{children:"rebase"}),"，可以这样操作："]}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"git checkout branch1\ngit rebase master\n"})}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.img,{src:"https://user-gold-cdn.xitu.io/2017/11/30/1600abd620a8e28c?w=698&h=518&f=gif&s=337134",alt:""})}),"\n",(0,r.jsxs)(c.p,{children:["可以看出，通过 ",(0,r.jsx)(c.code,{children:"rebase"}),"，",(0,r.jsx)(c.code,{children:"5"})," 和 ",(0,r.jsx)(c.code,{children:"6"})," 两条 ",(0,r.jsx)(c.code,{children:"commit"}),"s 把基础点从 ",(0,r.jsx)(c.code,{children:"2"})," 换成了 ",(0,r.jsx)(c.code,{children:"4"})," 。通过这样的方式，就让本来分叉了的提交历史重新回到了一条线。这种「重新设置基础点」的操作，就是 ",(0,r.jsx)(c.code,{children:"rebase"})," 的含义。"]}),"\n",(0,r.jsxs)(c.p,{children:["另外，在 ",(0,r.jsx)(c.code,{children:"rebase"})," 之后，记得切回 ",(0,r.jsx)(c.code,{children:"master"})," 再 ",(0,r.jsx)(c.code,{children:"merge"})," 一下，把 ",(0,r.jsx)(c.code,{children:"master"})," 移到最新的 ",(0,r.jsx)(c.code,{children:"commit"}),"："]}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"git checkout master\ngit merge branch1\n"})}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.img,{src:"https://user-gold-cdn.xitu.io/2017/12/2/160149e054fe485c?w=706&h=456&f=gif&s=207406",alt:""})}),"\n",(0,r.jsxs)(c.blockquote,{children:["\n",(0,r.jsxs)(c.p,{children:["为什么要从 ",(0,r.jsx)(c.code,{children:"branch1"})," 来 ",(0,r.jsx)(c.code,{children:"rebase"}),"，然后再切回 ",(0,r.jsx)(c.code,{children:"master"})," 再 ",(0,r.jsx)(c.code,{children:"merge"})," 一下这么麻烦，而不是直接在 ",(0,r.jsx)(c.code,{children:"master"})," 上执行 ",(0,r.jsx)(c.code,{children:"rebase"}),"？"]}),"\n",(0,r.jsxs)(c.p,{children:["从图中可以看出，",(0,r.jsx)(c.code,{children:"rebase"})," 后的 ",(0,r.jsx)(c.code,{children:"commit"})," 虽然内容和 ",(0,r.jsx)(c.code,{children:"rebase"})," 之前相同，但它们已经是不同的 ",(0,r.jsx)(c.code,{children:"commits"})," 了。如果直接从 ",(0,r.jsx)(c.code,{children:"master"})," 执行 ",(0,r.jsx)(c.code,{children:"rebase"})," 的话，就会是下面这样："]}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.img,{src:"https://user-gold-cdn.xitu.io/2017/12/2/16014b5a6919c0b7?w=650&h=428&f=gif&s=173918",alt:""})}),"\n",(0,r.jsxs)(c.p,{children:["这就导致 ",(0,r.jsx)(c.code,{children:"master"})," 上之前的两个最新 ",(0,r.jsx)(c.code,{children:"commit"})," 被剔除了。如果这两个 ",(0,r.jsx)(c.code,{children:"commit"})," 之前已经在中央仓库存在，这就会导致没法 ",(0,r.jsx)(c.code,{children:"push"})," 了："]}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.img,{src:"https://user-gold-cdn.xitu.io/2017/12/2/16014bc64d4337f8?w=643&h=640&f=jpeg&s=58468",alt:""})}),"\n",(0,r.jsxs)(c.p,{children:["所以，为了避免和远端仓库发生冲突，一般不要从 ",(0,r.jsx)(c.code,{children:"master"})," 向其他 ",(0,r.jsx)(c.code,{children:"branch"})," 执行 ",(0,r.jsx)(c.code,{children:"rebase"})," 操作。而如果是 ",(0,r.jsx)(c.code,{children:"master"})," 以外的 ",(0,r.jsx)(c.code,{children:"branch"})," 之间的 ",(0,r.jsx)(c.code,{children:"rebase"}),"（比如 ",(0,r.jsx)(c.code,{children:"branch1"})," 和 ",(0,r.jsx)(c.code,{children:"branch2"})," 之间），就不必这么多费一步，直接 ",(0,r.jsx)(c.code,{children:"rebase"})," 就好。"]}),"\n"]}),"\n",(0,r.jsxs)(c.h2,{id:"小结",children:["小结",(0,r.jsx)(c.a,{className:"header-anchor","aria-hidden":"true",href:"#小结",children:"#"})]}),"\n",(0,r.jsxs)(c.p,{children:["本节介绍的是 ",(0,r.jsx)(c.code,{children:"rebase"})," 指令，它可以改变 ",(0,r.jsx)(c.code,{children:"commit"})," 序列的基础点。它的使用方式很简单："]}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"git rebase 目标基础点\n"})}),"\n",(0,r.jsxs)(c.p,{children:["需要说明的是，",(0,r.jsx)(c.code,{children:"rebase"})," 是站在需要被 ",(0,r.jsx)(c.code,{children:"rebase"})," 的 ",(0,r.jsx)(c.code,{children:"commit"})," 上进行操作，这点和 ",(0,r.jsx)(c.code,{children:"merge"})," 是不同的。"]})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:c}=Object.assign({},(0,d.ah)(),e.components);return c?(0,r.jsx)(c,{...e,children:(0,r.jsx)(n,{...e})}):n(e)}let h=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["Git%20%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97%2F10%E9%AB%98%E7%BA%A7%201%EF%BC%9A%E4%B8%8D%E5%96%9C%E6%AC%A2%20merge%20%E7%9A%84%E5%88%86%E5%8F%89%EF%BC%9F%E7%94%A8%20rebase%20%E5%90%A7.md"]={toc:[{text:"rebase——在新位置重新提交",id:"rebase在新位置重新提交",depth:2},{text:"小结",id:"小结",depth:2}],title:"10高级 1：不喜欢 merge 的分叉？用 rebase 吧",headingTitle:"10高级 1：不喜欢 merge 的分叉？用 rebase 吧",frontmatter:{}}}}]);