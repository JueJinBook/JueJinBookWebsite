"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["67744"],{327822:function(n,d,e){n.exports=e.p+"static/image/c02cea08596a6e1d14cfc72cda9d4234.092e76ca.webp"},604676:function(n,d,e){e.r(d),e.d(d,{default:()=>p});var s=e(552676),r=e(740453);let i=e.p+"static/image/1fcbb4c985d2acc26c3bb4654954361c.08353db0.webp",h=e.p+"static/image/9001738043b926eab2308c011e7f9852.561c52a4.webp",t=e.p+"static/image/5cce29d19db89dba04b402e364f36377.fdb34dcb.webp",c=e.p+"static/image/7c5fefa6471cd05280ecad0ebb3f2c9a.aa8b38e1.webp";var l=e(327822);let x=e.p+"static/image/2af5c168ae7230e74af52f24442c7567.26e17068.webp",j=e.p+"static/image/2dda30baa040c9a87a41991852f5fbf2.125a2b9c.webp";function a(n){let d=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",img:"img",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,r.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.h1,{id:"110-会议室预订系统技术方案和数据库设计",children:["110. 会议室预订系统：技术方案和数据库设计",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#110-会议室预订系统技术方案和数据库设计",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"上节我们梳理了有哪些需求，并且画了原型图，明确了要做什么。"}),"\n",(0,s.jsx)(d.p,{children:"这节我们来过一下技术方案，设计下数据库，也就是怎么做。"}),"\n",(0,s.jsxs)(d.h2,{id:"技术栈",children:["技术栈",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#技术栈",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"我们要做的是一个全栈项目，前端用 React + AntD （或者可以换成其他前端框架），后端用 Nest。"}),"\n",(0,s.jsx)(d.p,{children:"技术栈如下："}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)("img",{src:j,alt:""})}),"\n",(0,s.jsx)(d.p,{children:"前端使用 create-react-app 脚手架创建项目，使用 react + antd 开发页面。"}),"\n",(0,s.jsx)(d.p,{children:"使用 nginx 来网关层，实现静态资源的托管，并且对于动态资源请求做负载均衡。"}),"\n",(0,s.jsx)(d.p,{children:"使用 Nest 开发后端业务逻辑，使用 TypeORM + mysql 来做 CRUD。"}),"\n",(0,s.jsx)(d.p,{children:"使用 Redis 来做缓存，减轻数据库的压力，提高响应性能。"}),"\n",(0,s.jsx)(d.p,{children:"api 文档使用 Swagger 来生成。"}),"\n",(0,s.jsx)(d.p,{children:"部署使用 Docker Compose 的方式。"}),"\n",(0,s.jsx)(d.p,{children:"PM2 可用可不用，不用 PM2 就要启动容器的时候指定重启策略了，这里为了简单我们还是用 PM2。"}),"\n",(0,s.jsx)(d.p,{children:"都是前面讲过的技术，这里只是综合运用。"}),"\n",(0,s.jsx)(d.p,{children:"然后来设计下数据库："}),"\n",(0,s.jsxs)(d.h2,{id:"数据库设计",children:["数据库设计",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#数据库设计",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"首先是用户表 users："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"用户ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"username"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"用户名"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"password"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"密码"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"nick_name"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"昵称"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"email"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"邮箱"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"head_pic"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(100)"}),"\n",(0,s.jsx)(d.td,{children:"头像"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"phone_number"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(20)"}),"\n",(0,s.jsx)(d.td,{children:"手机号"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"is_frozen"}),"\n",(0,s.jsx)(d.td,{children:"BOOLEAN"}),"\n",(0,s.jsx)(d.td,{children:"是否被冻结"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"is_admin"}),"\n",(0,s.jsx)(d.td,{children:"BOOLEAN"}),"\n",(0,s.jsx)(d.td,{children:"是否是管理员"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"create_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"创建时间"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"update_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"更新时间"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"用户需要区分普通用户和管理员，所以加了个 is_admin 字段。"}),"\n",(0,s.jsx)(d.p,{children:"然后是会议室表 meeting_rooms："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"会议室ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"name"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"会议室名字"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"capacity"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"会议室容量"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"location"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"会议室位置"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"equipment"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(50)"}),"\n",(0,s.jsx)(d.td,{children:"设备"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"description"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(100)"}),"\n",(0,s.jsx)(d.td,{children:"描述"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"is_booked"}),"\n",(0,s.jsx)(d.td,{children:"BOOLEAN"}),"\n",(0,s.jsx)(d.td,{children:"是否被预订"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"create_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"创建时间"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"update_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"更新时间"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"接下来是预订表 bookings："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"预订ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"user_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"预订用户ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"room_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"会议室ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"start_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"会议开始时间"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"end_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"会议结束时间"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"status"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(20)"}),"\n",(0,s.jsx)(d.td,{children:"状态（申请中、审批通过、审批驳回、已解除）"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"note"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(100)"}),"\n",(0,s.jsx)(d.td,{children:"备注"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"create_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"创建时间"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"update_time"}),"\n",(0,s.jsx)(d.td,{children:"DATETIME"}),"\n",(0,s.jsx)(d.td,{children:"更新时间"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"然后是预订-参会人表 booking_attendees："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"user_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"参会用户ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"booking_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"预订ID"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"这几个表的关系如下："}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)("img",{src:x,alt:""})}),"\n",(0,s.jsx)(d.p,{children:"再加上角色表、权限表，还有 2 个中间表："}),"\n",(0,s.jsx)(d.p,{children:"角色表 roles"}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"name"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(20)"}),"\n",(0,s.jsx)(d.td,{children:"角色名"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"权限表 permissions"}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"code"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(20)"}),"\n",(0,s.jsx)(d.td,{children:"权限代码"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"description"}),"\n",(0,s.jsx)(d.td,{children:"VARCHAR(100)"}),"\n",(0,s.jsx)(d.td,{children:"权限描述"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"用户-角色中间表 user_roles"}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"user_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"用户 ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"role_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"角色 ID"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"角色-权限中间表 role_permissions"}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"字段名"}),"\n",(0,s.jsx)(d.th,{children:"数据类型"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"role_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"角色 ID"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"permission_id"}),"\n",(0,s.jsx)(d.td,{children:"INT"}),"\n",(0,s.jsx)(d.td,{children:"权限 ID"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)("img",{src:l,alt:""})}),"\n",(0,s.jsx)(d.p,{children:"设计完数据库，我们再来划分下模块："}),"\n",(0,s.jsxs)(d.h2,{id:"模块划分",children:["模块划分",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#模块划分",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"首先是用户模块，实现普通用户和管理员的登录、注册、信息修改的功能："}),"\n",(0,s.jsx)(d.p,{children:"大概有这些接口："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"接口路径"}),"\n",(0,s.jsx)(d.th,{children:"请求方式"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/login"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"普通用户登录"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/register"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"普通用户注册"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/update"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"普通用户个人信息修改"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/update_password"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"普通用户修改密码"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/admin/login"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"管理员登录"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/admin/update_password"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"管理员修改密码"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/admin/update"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"管理员个人信息修改"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/list"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"用户列表"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/user/freeze"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"冻结用户"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"然后是会议室管理模块："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"接口路径"}),"\n",(0,s.jsx)(d.th,{children:"请求方式"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/meeting_room/list"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"会议室列表"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/meeting_room/delete/:id"}),"\n",(0,s.jsx)(d.td,{children:"DELETE"}),"\n",(0,s.jsx)(d.td,{children:"会议室删除"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/meeting_room/update/:id"}),"\n",(0,s.jsx)(d.td,{children:"PUT"}),"\n",(0,s.jsx)(d.td,{children:"会议室更新"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/meeting_room/create"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"会议室新增"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/meeting_room/search"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"会议室搜索"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"然后是预订管理模块："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"接口路径"}),"\n",(0,s.jsx)(d.th,{children:"请求方式"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/booking/list"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"预订列表"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/booking/approve"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"审批预订申请"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/booking/add"}),"\n",(0,s.jsx)(d.td,{children:"POST"}),"\n",(0,s.jsx)(d.td,{children:"申请预订"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/booking/apply/:id"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"通过预订"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/booking/reject/:id"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"取消预订"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/booking/unbind/:id"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"解除预订"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/booking/history"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"预订历史"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/booking/urge"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"催办"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"然后是统计模块："}),"\n",(0,s.jsxs)(d.table,{children:["\n",(0,s.jsxs)(d.thead,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.th,{children:"接口路径"}),"\n",(0,s.jsx)(d.th,{children:"请求方式"}),"\n",(0,s.jsx)(d.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.tbody,{children:["\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/statistics/meeting_room_usage_frequency"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"会议室使用频率统计"}),"\n"]}),"\n",(0,s.jsxs)(d.tr,{children:["\n",(0,s.jsx)(d.td,{children:"/statistics/user_booking_frequency"}),"\n",(0,s.jsx)(d.td,{children:"GET"}),"\n",(0,s.jsx)(d.td,{children:"用户预订频率统计"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)("img",{src:c,alt:""})}),"\n",(0,s.jsxs)(d.h2,{id:"角色划分",children:["角色划分",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#角色划分",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"权限控制使用 RBAC 的方式，有普通用户和管理员两个角色，"}),"\n",(0,s.jsx)(d.p,{children:"两个角色各自可以操作的接口就是上节用例图画的那些："}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)("img",{src:t,alt:""})}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)("img",{src:h,alt:""})}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)("img",{src:i,alt:""})}),"\n",(0,s.jsxs)(d.h2,{id:"总结",children:["总结",(0,s.jsx)(d.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,s.jsx)(d.p,{children:"这节我们设计了下技术方案。"}),"\n",(0,s.jsx)(d.p,{children:"技术栈：前端是 antd + react + cra，后端是 nest + typeorm，数据库是 mysql + redis，API 文档用 swagger 生成，部署用 docker compose + pm2，网关使用 nginx。"}),"\n",(0,s.jsx)(d.p,{children:"数据库表有 8 个：用户表 users、会议室表 meeting_rooms、预订表 bookings、预订-参会者表 booking_attendees、角色表 roles、权限表 permissions、用户-角色表 user_roles、角色-权限表 role_permissions。"}),"\n",(0,s.jsx)(d.p,{children:"模块有 4 个：用户管理模块、会议室管理模块、预订管理模块、统计管理模块。"}),"\n",(0,s.jsx)(d.p,{children:"角色有两个：普通用户、管理员，各自拥有的权限按照用例图来。使用 RBAC 来控制接口访问权限。"}),"\n",(0,s.jsx)(d.p,{children:"技术方案确定之后，下节开始我们就正式进入开发了。"})]})}function o(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:d}=Object.assign({},(0,r.ah)(),n.components);return d?(0,s.jsx)(d,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}let p=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["Nest%20%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%20%20%E6%9C%80%E6%96%B0200%E7%AB%A0%2F110.%20%E4%BC%9A%E8%AE%AE%E5%AE%A4%E9%A2%84%E8%AE%A2%E7%B3%BB%E7%BB%9F%EF%BC%9A%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1.md"]={toc:[{text:"技术栈",id:"技术栈",depth:2},{text:"数据库设计",id:"数据库设计",depth:2},{text:"模块划分",id:"模块划分",depth:2},{text:"角色划分",id:"角色划分",depth:2},{text:"总结",id:"总结",depth:2}],title:"110. 会议室预订系统：技术方案和数据库设计",headingTitle:"110. 会议室预订系统：技术方案和数据库设计",frontmatter:{}}}}]);