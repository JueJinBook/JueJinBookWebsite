"use strict";(self.webpackChunkjue_jin_book_press=self.webpackChunkjue_jin_book_press||[]).push([["42345"],{718060:function(e,n,c){e.exports=c.p+"static/image/ecb696093971c6b3148bdd1c09f71f96.b46dd982.webp"},88178:function(e,n,c){c.r(n),c.d(n,{default:()=>F});var i=c(552676),s=c(740453);let d=c.p+"static/image/83dd5e5dc2ff5fe40ad07b0e36b47307.6c973711.webp",a=c.p+"static/image/1a357bac682cf7badd7eb206819bbd73.7d50d018.webp",r=c.p+"static/image/576f56950712358ff7a63a4d2af6ed5c.0178acdc.webp",l=c.p+"static/image/bffb1b21e6cb5fed0de1798a910c0ecf.ae5ef2d0.webp",h=c.p+"static/image/cf9ec4bfa4492baa6f9e359b266388e7.3f92813f.webp",t=c.p+"static/image/17104824ad567fdf057a9ac775b51a40.f1983295.webp",p=c.p+"static/image/8dbce82cca7dae5a4e4f4d38f1cfc590.5a902892.webp",x=c.p+"static/image/d921960e333cf9a66e33aca8a8766be6.7d513779.webp",j=c.p+"static/image/0a072dffab63c7e5570d4e7752e3fffd.5d24ab15.webp",b=c.p+"static/image/a7ae813bdac0ff7a3217f9c8d68ea346.89856b30.webp",f=c.p+"static/image/178cc53529a4ae3557e2efacdb641614.fbefdfa5.webp",o=c.p+"static/image/a6516413b361021dd28975f8e2a04627.3cf4ffd9.webp";var g=c(718060);let m=c.p+"static/image/473fddbf0f271a185c141d11328366e6.529b3dac.webp",u=c.p+"static/image/b43edd83d6c4b2ccb96811b5b7d70d48.67d60e00.webp",E=c.p+"static/image/d4b7f56a5f448c042341f557a7fc8247.a357b936.webp",w=c.p+"static/image/75d7fec32c493965eaeb7b9b0034bbf6.2e162a14.webp",D=c.p+"static/image/86d0c3541cf00b6008727403ae1be5f3.abb41b1b.webp",A=c.p+"static/image/c13a011445211e32b554a4dac39be7b1.d0e916c9.webp",M=c.p+"static/image/5c816b8313495507b376be7a9acfb6db.df48cdab.webp",O=c.p+"static/image/968da52a3e53b97e29870aeddb85f253.a302fdac.webp",_=c.p+"static/image/52ce000d0225d820b1e794533ce0b108.a95f6bd1.webp",v=c.p+"static/image/62112c43c12a070801af90b93653eb28.d71a8c7e.webp";function B(e){let n=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",h2:"h2",pre:"pre",code:"code",img:"img"},(0,s.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"25打断点的-7-种方式你用过几种",children:["25.打断点的 7 种方式，你用过几种？",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#25打断点的-7-种方式你用过几种",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"我们学习了如何调试网页和 Node.js 的代码，可以在代码某一行打个断点，代码执行到这里的时候就会断住，可以看它的作用域、调用栈等。"}),"\n",(0,i.jsx)(n.p,{children:"但有的时候，我们并不知道应该在哪里打断点："}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"比如代码抛了异常，你想打个断点看看异常出现的原因，但你并不知道异常在哪里发生的。"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"比如 dom 被某个地方修改了，你想打个断点看看怎么修改的，但你并不知道是哪段代码修改了它。"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"比如有的断点你想只在满足某个条件的时候断住，不满足条件就不需要断住。"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"类似的情况有很多，需要断住，但是普通的断点又不大合适，这时候就需要其他的断点类型了。"}),"\n",(0,i.jsx)(n.p,{children:"我们分别来看一下："}),"\n",(0,i.jsxs)(n.h2,{id:"异常断点",children:["异常断点",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#异常断点",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"代码抛了异常，你想知道在哪抛的，这时候就可以用异常断点。"}),"\n",(0,i.jsx)(n.p,{children:"比如这样一段代码："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"function add(a, b) {\n    throw Error('add');\n    return a + b;    \n}\n\nconsole.log(add(1, 2));\n"})}),"\n",(0,i.jsx)(n.p,{children:"add 函数里抛了个异常，你想在异常处断住，这时候就可以加个异常断点："}),"\n",(0,i.jsx)(n.p,{children:"用 node 的调试来跑："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:v,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"勾选 Uncaught Exceptions："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:_,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"它可以在没有被处理的错误或者 Promise 的 reject 处断住。"}),"\n",(0,i.jsx)(n.p,{children:"上面那个 Caught Exception 是在被 catch 处理的异常出断住。"}),"\n",(0,i.jsx)(n.p,{children:"Uncaught Exceptions 更常用一些。"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:O,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"当然，网页调试也可以用异常断点："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:M,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"示例代码比较简单，很多时候代码抛了错你不知道哪里抛的，就可以用异常断点来找原因，断住以后看看调用栈啥的。"}),"\n",(0,i.jsxs)(n.h2,{id:"条件断点",children:["条件断点",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#条件断点",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"有的时候我们只想在满足一定条件的时候才断住，这时候就可以用条件断点："}),"\n",(0,i.jsx)(n.p,{children:"在代码左边打断点的地方右键单击，就可以选择条件断点："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:A,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"添加一个表达式，比如我只想在 a 等于 3 的时候断住："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:D,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"跑下 node 调试，你会发现这段代码虽然执行了两次，但只断住了一次："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:w,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"条件断点也是在网页调试也是支持的："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:E,alt:""})}),"\n",(0,i.jsxs)(n.h2,{id:"logpoint",children:["LogPoint",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#logpoint",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"当你觉得断住次数太多了，太麻烦，不想在断点处断住，但却想看下这时候的值，你是不是会选择加一个 console.log 呢？"}),"\n",(0,i.jsx)(n.p,{children:"绝大部分同学是这样的，但其实有更好的方式。"}),"\n",(0,i.jsx)(n.p,{children:"添加一个 LogPoint："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:u,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"输入打印的表达式："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:m,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"跑一下 node 调试，你会发现打印了日志，但没有断住："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:g,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"网页调试里也是支持 LogPoint 的："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:o,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"打印了调试用的日志，但没有污染代码，这不比 console.log 香么？"}),"\n",(0,i.jsxs)(n.h2,{id:"dom-断点",children:["DOM 断点",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#dom-断点",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"后面几种断点是网页里专用的，也是在特定场景下很有用的断点类型。"}),"\n",(0,i.jsx)(n.p,{children:"用 create-react-app 创建的 react 项目，有这样一个组件："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:f,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"我们想知道 setState 之后是怎么修改 DOM 的，想在 DOM 被修改的时候断住，应该怎么做呢？"}),"\n",(0,i.jsx)(n.p,{children:"找到源码打断点么？"}),"\n",(0,i.jsx)(n.p,{children:"不熟悉源码的话，你根本不知道在哪里打断点。"}),"\n",(0,i.jsx)(n.p,{children:"这时候就可以用 DOM 断点了："}),"\n",(0,i.jsx)(n.p,{children:"我先创建一个 chrome 调试配置，把网页跑起来："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:b,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"然后打开 Chrome DevTools，在 root 的节点上加一个 DOM 断点："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:j,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"有三种类型，子树修改的时候断住、属性修改的时候断住、节点删除的时候断住。"}),"\n",(0,i.jsx)(n.p,{children:"我们选择第一种，然后刷新页面。"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:x,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"这时候你会发现代码在修改 DOM 的地方断住了，这就是 React 源码里最终操作 DOM 的地方，看下调用栈就知道 setState 之后是如何更新 DOM 的了。"}),"\n",(0,i.jsx)(n.p,{children:"当然这只是一种用途，特定场景下，DOM 断点是很有用的。"}),"\n",(0,i.jsxs)(n.h2,{id:"event-listener-断点",children:["Event Listener 断点",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#event-listener-断点",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"之前我们想调试事件发生之后的处理逻辑，需要找到事件监听器，然后打个断点。"}),"\n",(0,i.jsx)(n.p,{children:"但如果你不知道哪里处理的这个事件呢？"}),"\n",(0,i.jsx)(n.p,{children:"这时候就可以用事件断点了："}),"\n",(0,i.jsx)(n.p,{children:"打开 sources 面板，就可以找到事件断点，有各种类型的事件："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:p,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"比如这样一段代码："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:t,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"你找不到哪里处理的点击事件，那就可以加一个 click 的事件断点："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:h,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"这时当你点击元素的时候，代码就会在事件处理器断住："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:l,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"当然，因为 React 是合成事件，也就是事件绑定在某个元素上自己做的分发，所以这里是在源码处理事件的地方断住的。用 Vue 就可以直接在事件处理函数处断住。"}),"\n",(0,i.jsxs)(n.h2,{id:"url-请求断点",children:["url 请求断点",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#url-请求断点",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"当你想在某个请求发送的时候断住，但你不知道在哪里发的，这时候就可以用 url 请求断点"}),"\n",(0,i.jsx)(n.p,{children:"比如这样一段代码，你想在发送 url 包含 guang 的请求的时候断住，就可以使用 url 请求断点："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:r,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"不输入内容就是在任何请求处断住，你可以可以输入内容，那会在 url 包含该内容的请求处断住："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:a,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"效果如下："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)("img",{src:d,alt:""})}),"\n",(0,i.jsx)(n.p,{children:"这在调试网络请求的代码的时候，是很有用的。"}),"\n",(0,i.jsxs)(n.h2,{id:"总结",children:["总结",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"很多时候我们想打断点却不知道应该打在哪里，这时候就要用其他的断点类型了："}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"异常断点：在抛异常处断住"}),"\n",(0,i.jsx)(n.li,{children:"条件断点：在满足某个表达式的时候断住"}),"\n",(0,i.jsx)(n.li,{children:"日志点：打印日志但不断住，觉得断住太多次的时候可以用这个"}),"\n",(0,i.jsx)(n.li,{children:"DOM 断点：在 DOM 子树修改、属性修改、节点删除的时候断住"}),"\n",(0,i.jsx)(n.li,{children:"Event Listenter 断点：在某个事件发生的时候断住"}),"\n",(0,i.jsx)(n.li,{children:"url 请求断点：在发送 url 包含某内容的请求时断住"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"加上普通断点，一共 7 种。这些类型的断点在特定场景下都是很有用的，灵活运用这些断点，能大幅提升调试效率。"})]})}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(B,{...e})}):B(e)}let F=N;N.__RSPRESS_PAGE_META={},N.__RSPRESS_PAGE_META["%E5%89%8D%E7%AB%AF%E8%B0%83%E8%AF%95%E9%80%9A%E5%85%B3%E7%A7%98%E7%B1%8D%2F25.%E6%89%93%E6%96%AD%E7%82%B9%E7%9A%84%207%20%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%8C%E4%BD%A0%E7%94%A8%E8%BF%87%E5%87%A0%E7%A7%8D%EF%BC%9F.md"]={toc:[{text:"异常断点",id:"异常断点",depth:2},{text:"条件断点",id:"条件断点",depth:2},{text:"LogPoint",id:"logpoint",depth:2},{text:"DOM 断点",id:"dom-断点",depth:2},{text:"Event Listener 断点",id:"event-listener-断点",depth:2},{text:"url 请求断点",id:"url-请求断点",depth:2},{text:"总结",id:"总结",depth:2}],title:"25.打断点的 7 种方式，你用过几种？",headingTitle:"25.打断点的 7 种方式，你用过几种？",frontmatter:{}}}}]);